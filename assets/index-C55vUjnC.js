var U5=Object.defineProperty;var B5=(i,t,n)=>t in i?U5(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var ly=(i,t,n)=>B5(i,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}})();var ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var fp={exports:{}},Ed={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function H5(){if(oy)return Ed;oy=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,r,c){var h=null;if(c!==void 0&&(h=""+c),r.key!==void 0&&(h=""+r.key),"key"in r){c={};for(var f in r)f!=="key"&&(c[f]=r[f])}else c=r;return r=c.ref,{$$typeof:i,type:s,key:h,ref:r!==void 0?r:null,props:c}}return Ed.Fragment=t,Ed.jsx=n,Ed.jsxs=n,Ed}var uy;function I5(){return uy||(uy=1,fp.exports=H5()),fp.exports}var at=I5(),dp={exports:{}},ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function j5(){if(cy)return ae;cy=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.iterator;function x(q){return q===null||typeof q!="object"?null:(q=S&&q[S]||q["@@iterator"],typeof q=="function"?q:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,M={};function D(q,Q,tt){this.props=q,this.context=Q,this.refs=M,this.updater=tt||b}D.prototype.isReactComponent={},D.prototype.setState=function(q,Q){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,Q,"setState")},D.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function L(){}L.prototype=D.prototype;function T(q,Q,tt){this.props=q,this.context=Q,this.refs=M,this.updater=tt||b}var A=T.prototype=new L;A.constructor=T,E(A,D.prototype),A.isPureReactComponent=!0;var N=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function K(q,Q,tt,nt,ht,vt){return tt=vt.ref,{$$typeof:i,type:q,key:Q,ref:tt!==void 0?tt:null,props:vt}}function H(q,Q){return K(q.type,Q,void 0,void 0,void 0,q.props)}function j(q){return typeof q=="object"&&q!==null&&q.$$typeof===i}function Y(q){var Q={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(tt){return Q[tt]})}var X=/\/+/g;function J(q,Q){return typeof q=="object"&&q!==null&&q.key!=null?Y(""+q.key):Q.toString(36)}function w(){}function V(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(w,w):(q.status="pending",q.then(function(Q){q.status==="pending"&&(q.status="fulfilled",q.value=Q)},function(Q){q.status==="pending"&&(q.status="rejected",q.reason=Q)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function G(q,Q,tt,nt,ht){var vt=typeof q;(vt==="undefined"||vt==="boolean")&&(q=null);var St=!1;if(q===null)St=!0;else switch(vt){case"bigint":case"string":case"number":St=!0;break;case"object":switch(q.$$typeof){case i:case t:St=!0;break;case _:return St=q._init,G(St(q._payload),Q,tt,nt,ht)}}if(St)return ht=ht(q),St=nt===""?"."+J(q,0):nt,N(ht)?(tt="",St!=null&&(tt=St.replace(X,"$&/")+"/"),G(ht,Q,tt,"",function(dt){return dt})):ht!=null&&(j(ht)&&(ht=H(ht,tt+(ht.key==null||q&&q.key===ht.key?"":(""+ht.key).replace(X,"$&/")+"/")+St)),Q.push(ht)),1;St=0;var W=nt===""?".":nt+":";if(N(q))for(var Z=0;Z<q.length;Z++)nt=q[Z],vt=W+J(nt,Z),St+=G(nt,Q,tt,vt,ht);else if(Z=x(q),typeof Z=="function")for(q=Z.call(q),Z=0;!(nt=q.next()).done;)nt=nt.value,vt=W+J(nt,Z++),St+=G(nt,Q,tt,vt,ht);else if(vt==="object"){if(typeof q.then=="function")return G(V(q),Q,tt,nt,ht);throw Q=String(q),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return St}function B(q,Q,tt){if(q==null)return q;var nt=[],ht=0;return G(q,nt,"","",function(vt){return Q.call(tt,vt,ht++)}),nt}function F(q){if(q._status===-1){var Q=q._result;Q=Q(),Q.then(function(tt){(q._status===0||q._status===-1)&&(q._status=1,q._result=tt)},function(tt){(q._status===0||q._status===-1)&&(q._status=2,q._result=tt)}),q._status===-1&&(q._status=0,q._result=Q)}if(q._status===1)return q._result.default;throw q._result}var $=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function rt(){}return ae.Children={map:B,forEach:function(q,Q,tt){B(q,function(){Q.apply(this,arguments)},tt)},count:function(q){var Q=0;return B(q,function(){Q++}),Q},toArray:function(q){return B(q,function(Q){return Q})||[]},only:function(q){if(!j(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},ae.Component=D,ae.Fragment=n,ae.Profiler=r,ae.PureComponent=T,ae.StrictMode=s,ae.Suspense=g,ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,ae.__COMPILER_RUNTIME={__proto__:null,c:function(q){return z.H.useMemoCache(q)}},ae.cache=function(q){return function(){return q.apply(null,arguments)}},ae.cloneElement=function(q,Q,tt){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var nt=E({},q.props),ht=q.key,vt=void 0;if(Q!=null)for(St in Q.ref!==void 0&&(vt=void 0),Q.key!==void 0&&(ht=""+Q.key),Q)!I.call(Q,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&Q.ref===void 0||(nt[St]=Q[St]);var St=arguments.length-2;if(St===1)nt.children=tt;else if(1<St){for(var W=Array(St),Z=0;Z<St;Z++)W[Z]=arguments[Z+2];nt.children=W}return K(q.type,ht,void 0,void 0,vt,nt)},ae.createContext=function(q){return q={$$typeof:h,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:c,_context:q},q},ae.createElement=function(q,Q,tt){var nt,ht={},vt=null;if(Q!=null)for(nt in Q.key!==void 0&&(vt=""+Q.key),Q)I.call(Q,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(ht[nt]=Q[nt]);var St=arguments.length-2;if(St===1)ht.children=tt;else if(1<St){for(var W=Array(St),Z=0;Z<St;Z++)W[Z]=arguments[Z+2];ht.children=W}if(q&&q.defaultProps)for(nt in St=q.defaultProps,St)ht[nt]===void 0&&(ht[nt]=St[nt]);return K(q,vt,void 0,void 0,null,ht)},ae.createRef=function(){return{current:null}},ae.forwardRef=function(q){return{$$typeof:f,render:q}},ae.isValidElement=j,ae.lazy=function(q){return{$$typeof:_,_payload:{_status:-1,_result:q},_init:F}},ae.memo=function(q,Q){return{$$typeof:p,type:q,compare:Q===void 0?null:Q}},ae.startTransition=function(q){var Q=z.T,tt={};z.T=tt;try{var nt=q(),ht=z.S;ht!==null&&ht(tt,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(rt,$)}catch(vt){$(vt)}finally{z.T=Q}},ae.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},ae.use=function(q){return z.H.use(q)},ae.useActionState=function(q,Q,tt){return z.H.useActionState(q,Q,tt)},ae.useCallback=function(q,Q){return z.H.useCallback(q,Q)},ae.useContext=function(q){return z.H.useContext(q)},ae.useDebugValue=function(){},ae.useDeferredValue=function(q,Q){return z.H.useDeferredValue(q,Q)},ae.useEffect=function(q,Q,tt){var nt=z.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return nt.useEffect(q,Q)},ae.useId=function(){return z.H.useId()},ae.useImperativeHandle=function(q,Q,tt){return z.H.useImperativeHandle(q,Q,tt)},ae.useInsertionEffect=function(q,Q){return z.H.useInsertionEffect(q,Q)},ae.useLayoutEffect=function(q,Q){return z.H.useLayoutEffect(q,Q)},ae.useMemo=function(q,Q){return z.H.useMemo(q,Q)},ae.useOptimistic=function(q,Q){return z.H.useOptimistic(q,Q)},ae.useReducer=function(q,Q,tt){return z.H.useReducer(q,Q,tt)},ae.useRef=function(q){return z.H.useRef(q)},ae.useState=function(q){return z.H.useState(q)},ae.useSyncExternalStore=function(q,Q,tt){return z.H.useSyncExternalStore(q,Q,tt)},ae.useTransition=function(){return z.H.useTransition()},ae.version="19.1.0",ae}var hy;function j0(){return hy||(hy=1,dp.exports=j5()),dp.exports}var st=j0();const Nn=sm(st);var gp={exports:{}},xd={},mp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function Y5(){return fy||(fy=1,function(i){function t(B,F){var $=B.length;B.push(F);t:for(;0<$;){var rt=$-1>>>1,q=B[rt];if(0<r(q,F))B[rt]=F,B[$]=q,$=rt;else break t}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var F=B[0],$=B.pop();if($!==F){B[0]=$;t:for(var rt=0,q=B.length,Q=q>>>1;rt<Q;){var tt=2*(rt+1)-1,nt=B[tt],ht=tt+1,vt=B[ht];if(0>r(nt,$))ht<q&&0>r(vt,nt)?(B[rt]=vt,B[ht]=$,rt=ht):(B[rt]=nt,B[tt]=$,rt=tt);else if(ht<q&&0>r(vt,$))B[rt]=vt,B[ht]=$,rt=ht;else break t}}return F}function r(B,F){var $=B.sortIndex-F.sortIndex;return $!==0?$:B.id-F.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,f=h.now();i.unstable_now=function(){return h.now()-f}}var g=[],p=[],_=1,S=null,x=3,b=!1,E=!1,M=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function N(B){for(var F=n(p);F!==null;){if(F.callback===null)s(p);else if(F.startTime<=B)s(p),F.sortIndex=F.expirationTime,t(g,F);else break;F=n(p)}}function z(B){if(M=!1,N(B),!E)if(n(g)!==null)E=!0,I||(I=!0,J());else{var F=n(p);F!==null&&G(z,F.startTime-B)}}var I=!1,K=-1,H=5,j=-1;function Y(){return D?!0:!(i.unstable_now()-j<H)}function X(){if(D=!1,I){var B=i.unstable_now();j=B;var F=!0;try{t:{E=!1,M&&(M=!1,T(K),K=-1),b=!0;var $=x;try{e:{for(N(B),S=n(g);S!==null&&!(S.expirationTime>B&&Y());){var rt=S.callback;if(typeof rt=="function"){S.callback=null,x=S.priorityLevel;var q=rt(S.expirationTime<=B);if(B=i.unstable_now(),typeof q=="function"){S.callback=q,N(B),F=!0;break e}S===n(g)&&s(g),N(B)}else s(g);S=n(g)}if(S!==null)F=!0;else{var Q=n(p);Q!==null&&G(z,Q.startTime-B),F=!1}}break t}finally{S=null,x=$,b=!1}F=void 0}}finally{F?J():I=!1}}}var J;if(typeof A=="function")J=function(){A(X)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,V=w.port2;w.port1.onmessage=X,J=function(){V.postMessage(null)}}else J=function(){L(X,0)};function G(B,F){K=L(function(){B(i.unstable_now())},F)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(B){switch(x){case 1:case 2:case 3:var F=3;break;default:F=x}var $=x;x=F;try{return B()}finally{x=$}},i.unstable_requestPaint=function(){D=!0},i.unstable_runWithPriority=function(B,F){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var $=x;x=B;try{return F()}finally{x=$}},i.unstable_scheduleCallback=function(B,F,$){var rt=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?rt+$:rt):$=rt,B){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=$+q,B={id:_++,callback:F,priorityLevel:B,startTime:$,expirationTime:q,sortIndex:-1},$>rt?(B.sortIndex=$,t(p,B),n(g)===null&&B===n(p)&&(M?(T(K),K=-1):M=!0,G(z,$-rt))):(B.sortIndex=q,t(g,B),E||b||(E=!0,I||(I=!0,J()))),B},i.unstable_shouldYield=Y,i.unstable_wrapCallback=function(B){var F=x;return function(){var $=x;x=F;try{return B.apply(this,arguments)}finally{x=$}}}}(pp)),pp}var dy;function L_(){return dy||(dy=1,mp.exports=Y5()),mp.exports}var _p={exports:{}},qi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function V5(){if(gy)return qi;gy=1;var i=j0();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(g,p,_){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:S==null?null:""+S,children:g,containerInfo:p,implementation:_}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return qi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,qi.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(g,p,null,_)},qi.flushSync=function(g){var p=h.T,_=s.p;try{if(h.T=null,s.p=2,g)return g()}finally{h.T=p,s.p=_,s.d.f()}},qi.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},qi.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},qi.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,S=f(_,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:x,fetchPriority:b}):_==="script"&&s.d.X(g,{crossOrigin:S,integrity:x,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},qi.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=f(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},qi.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,S=f(_,p.crossOrigin);s.d.L(g,_,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},qi.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=f(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},qi.requestFormReset=function(g){s.d.r(g)},qi.unstable_batchedUpdates=function(g,p){return g(p)},qi.useFormState=function(g,p,_){return h.H.useFormState(g,p,_)},qi.useFormStatus=function(){return h.H.useHostTransitionStatus()},qi.version="19.1.0",qi}var my;function q5(){if(my)return _p.exports;my=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),_p.exports=V5(),_p.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function F5(){if(py)return xd;py=1;var i=L_(),t=j0(),n=q5();function s(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var a=e,u=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(u=a.return),e=a.return;while(e)}return a.tag===3?u:null}function h(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function f(e){if(c(e)!==e)throw Error(s(188))}function g(e){var a=e.alternate;if(!a){if(a=c(e),a===null)throw Error(s(188));return a!==e?null:e}for(var u=e,d=a;;){var y=u.return;if(y===null)break;var C=y.alternate;if(C===null){if(d=y.return,d!==null){u=d;continue}break}if(y.child===C.child){for(C=y.child;C;){if(C===u)return f(y),e;if(C===d)return f(y),a;C=C.sibling}throw Error(s(188))}if(u.return!==d.return)u=y,d=C;else{for(var U=!1,P=y.child;P;){if(P===u){U=!0,u=y,d=C;break}if(P===d){U=!0,d=y,u=C;break}P=P.sibling}if(!U){for(P=C.child;P;){if(P===u){U=!0,u=C,d=y;break}if(P===d){U=!0,d=C,u=y;break}P=P.sibling}if(!U)throw Error(s(189))}}if(u.alternate!==d)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?e:a}function p(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=p(e),a!==null)return a;e=e.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),A=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=X&&e[X]||e["@@iterator"],typeof e=="function"?e:null)}var w=Symbol.for("react.client.reference");function V(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===w?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case D:return"Profiler";case M:return"StrictMode";case z:return"Suspense";case I:return"SuspenseList";case j:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case b:return"Portal";case A:return(e.displayName||"Context")+".Provider";case T:return(e._context.displayName||"Context")+".Consumer";case N:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return a=e.displayName||null,a!==null?a:V(e.type)||"Memo";case H:a=e._payload,e=e._init;try{return V(e(a))}catch{}}return null}var G=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},rt=[],q=-1;function Q(e){return{current:e}}function tt(e){0>q||(e.current=rt[q],rt[q]=null,q--)}function nt(e,a){q++,rt[q]=e.current,e.current=a}var ht=Q(null),vt=Q(null),St=Q(null),W=Q(null);function Z(e,a){switch(nt(St,a),nt(vt,e),nt(ht,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?z2(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=z2(a),e=G2(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}tt(ht),nt(ht,e)}function dt(){tt(ht),tt(vt),tt(St)}function Et(e){e.memoizedState!==null&&nt(W,e);var a=ht.current,u=G2(a,e.type);a!==u&&(nt(vt,e),nt(ht,u))}function Tt(e){vt.current===e&&(tt(ht),tt(vt)),W.current===e&&(tt(W),pd._currentValue=$)}var Ot=Object.prototype.hasOwnProperty,Kt=i.unstable_scheduleCallback,re=i.unstable_cancelCallback,Ht=i.unstable_shouldYield,Ue=i.unstable_requestPaint,Qt=i.unstable_now,Ve=i.unstable_getCurrentPriorityLevel,Zn=i.unstable_ImmediatePriority,un=i.unstable_UserBlockingPriority,zn=i.unstable_NormalPriority,Zt=i.unstable_LowPriority,nn=i.unstable_IdlePriority,jn=i.log,Yn=i.unstable_setDisableYieldValue,Le=null,fe=null;function Je(e){if(typeof jn=="function"&&Yn(e),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(Le,e)}catch{}}var $e=Math.clz32?Math.clz32:Qn,Ni=Math.log,pi=Math.LN2;function Qn(e){return e>>>=0,e===0?32:31-(Ni(e)/pi|0)|0}var Rn=256,Tn=4194304;function Wn(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function za(e,a,u){var d=e.pendingLanes;if(d===0)return 0;var y=0,C=e.suspendedLanes,U=e.pingedLanes;e=e.warmLanes;var P=d&134217727;return P!==0?(d=P&~C,d!==0?y=Wn(d):(U&=P,U!==0?y=Wn(U):u||(u=P&~e,u!==0&&(y=Wn(u))))):(P=d&~C,P!==0?y=Wn(P):U!==0?y=Wn(U):u||(u=d&~e,u!==0&&(y=Wn(u)))),y===0?0:a!==0&&a!==y&&(a&C)===0&&(C=y&-y,u=a&-a,C>=u||C===32&&(u&4194048)!==0)?a:y}function ds(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function Zh(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ks(){var e=Rn;return Rn<<=1,(Rn&4194048)===0&&(Rn=256),e}function xa(){var e=Tn;return Tn<<=1,(Tn&62914560)===0&&(Tn=4194304),e}function Ga(e){for(var a=[],u=0;31>u;u++)a.push(e);return a}function wi(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Yo(e,a,u,d,y,C){var U=e.pendingLanes;e.pendingLanes=u,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=u,e.entangledLanes&=u,e.errorRecoveryDisabledLanes&=u,e.shellSuspendCounter=0;var P=e.entanglements,et=e.expirationTimes,gt=e.hiddenUpdates;for(u=U&~u;0<u;){var xt=31-$e(u),Rt=1<<xt;P[xt]=0,et[xt]=-1;var pt=gt[xt];if(pt!==null)for(gt[xt]=null,xt=0;xt<pt.length;xt++){var _t=pt[xt];_t!==null&&(_t.lane&=-536870913)}u&=~Rt}d!==0&&Ks(e,d,0),C!==0&&y===0&&e.tag!==0&&(e.suspendedLanes|=C&~(U&~a))}function Ks(e,a,u){e.pendingLanes|=a,e.suspendedLanes&=~a;var d=31-$e(a);e.entangledLanes|=a,e.entanglements[d]=e.entanglements[d]|1073741824|u&4194090}function Jn(e,a){var u=e.entangledLanes|=a;for(e=e.entanglements;u;){var d=31-$e(u),y=1<<d;y&a|e[d]&a&&(e[d]|=a),u&=~y}}function aa(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Vn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $n(){var e=F.p;return e!==0?e:(e=window.event,e===void 0?32:ty(e.type))}function qn(e,a){var u=F.p;try{return F.p=e,a()}finally{F.p=u}}var gn=Math.random().toString(36).slice(2),Ae="__reactFiber$"+gn,oe="__reactProps$"+gn,tn="__reactContainer$"+gn,_i="__reactEvents$"+gn,Vo="__reactListeners$"+gn,Zs="__reactHandles$"+gn,gs="__reactResources$"+gn,ms="__reactMarker$"+gn;function qo(e){delete e[Ae],delete e[oe],delete e[_i],delete e[Vo],delete e[Zs]}function Ua(e){var a=e[Ae];if(a)return a;for(var u=e.parentNode;u;){if(a=u[tn]||u[Ae]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(e=I2(e);e!==null;){if(u=e[Ae])return u;e=I2(e)}return a}e=u,u=e.parentNode}return null}function Ba(e){if(e=e[Ae]||e[tn]){var a=e.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return e}return null}function wr(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(s(33))}function jl(e){var a=e[gs];return a||(a=e[gs]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function An(e){e[ms]=!0}var ic=new Set,ac={};function qe(e,a){Qs(e,a),Qs(e+"Capture",a)}function Qs(e,a){for(ac[e]=a,e=0;e<a.length;e++)ic.add(a[e])}var Qh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wh={},Jh={};function Dm(e){return Ot.call(Jh,e)?!0:Ot.call(Wh,e)?!1:Qh.test(e)?Jh[e]=!0:(Wh[e]=!0,!1)}function Lr(e,a,u){if(Dm(a))if(u===null)e.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+u)}}function zr(e,a,u){if(u===null)e.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+u)}}function ba(e,a,u,d){if(d===null)e.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(u);return}e.setAttributeNS(a,u,""+d)}}var ti,hn;function Ws(e){if(ti===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ti=a&&a[1]||"",hn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ti+e+hn}var Yl=!1;function Gr(e,a){if(!e||Yl)return"";Yl=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var Rt=function(){throw Error()};if(Object.defineProperty(Rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Rt,[])}catch(_t){var pt=_t}Reflect.construct(e,[],Rt)}else{try{Rt.call()}catch(_t){pt=_t}e.call(Rt.prototype)}}else{try{throw Error()}catch(_t){pt=_t}(Rt=e())&&typeof Rt.catch=="function"&&Rt.catch(function(){})}}catch(_t){if(_t&&pt&&typeof _t.stack=="string")return[_t.stack,pt.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=d.DetermineComponentFrameRoot(),U=C[0],P=C[1];if(U&&P){var et=U.split(`
`),gt=P.split(`
`);for(y=d=0;d<et.length&&!et[d].includes("DetermineComponentFrameRoot");)d++;for(;y<gt.length&&!gt[y].includes("DetermineComponentFrameRoot");)y++;if(d===et.length||y===gt.length)for(d=et.length-1,y=gt.length-1;1<=d&&0<=y&&et[d]!==gt[y];)y--;for(;1<=d&&0<=y;d--,y--)if(et[d]!==gt[y]){if(d!==1||y!==1)do if(d--,y--,0>y||et[d]!==gt[y]){var xt=`
`+et[d].replace(" at new "," at ");return e.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",e.displayName)),xt}while(1<=d&&0<=y);break}}}finally{Yl=!1,Error.prepareStackTrace=u}return(u=e?e.displayName||e.name:"")?Ws(u):""}function $h(e){switch(e.tag){case 26:case 27:case 5:return Ws(e.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 15:return Gr(e.type,!1);case 11:return Gr(e.type.render,!1);case 1:return Gr(e.type,!0);case 31:return Ws("Activity");default:return""}}function Ha(e){try{var a="";do a+=$h(e),e=e.return;while(e);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function yi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sc(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function tf(e){var a=sc(e)?"checked":"value",u=Object.getOwnPropertyDescriptor(e.constructor.prototype,a),d=""+e[a];if(!e.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,C=u.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return y.call(this)},set:function(U){d=""+U,C.call(this,U)}}),Object.defineProperty(e,a,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(U){d=""+U},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Fo(e){e._valueTracker||(e._valueTracker=tf(e))}function ef(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return e&&(d=sc(e)?e.checked?"true":"false":e.value),e=d,e!==u?(a.setValue(e),!0):!1}function Po(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var W0=/[\n"\\]/g;function Pi(e){return e.replace(W0,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function lc(e,a,u,d,y,C,U,P){e.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?e.type=U:e.removeAttribute("type"),a!=null?U==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+yi(a)):e.value!==""+yi(a)&&(e.value=""+yi(a)):U!=="submit"&&U!=="reset"||e.removeAttribute("value"),a!=null?oc(e,U,yi(a)):u!=null?oc(e,U,yi(u)):d!=null&&e.removeAttribute("value"),y==null&&C!=null&&(e.defaultChecked=!!C),y!=null&&(e.checked=y&&typeof y!="function"&&typeof y!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?e.name=""+yi(P):e.removeAttribute("name")}function rc(e,a,u,d,y,C,U,P){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(e.type=C),a!=null||u!=null){if(!(C!=="submit"&&C!=="reset"||a!=null))return;u=u!=null?""+yi(u):"",a=a!=null?""+yi(a):u,P||a===e.value||(e.value=a),e.defaultValue=a}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,e.checked=P?e.checked:!!d,e.defaultChecked=!!d,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(e.name=U)}function oc(e,a,u){a==="number"&&Po(e.ownerDocument)===e||e.defaultValue===""+u||(e.defaultValue=""+u)}function Ur(e,a,u,d){if(e=e.options,a){a={};for(var y=0;y<u.length;y++)a["$"+u[y]]=!0;for(u=0;u<e.length;u++)y=a.hasOwnProperty("$"+e[u].value),e[u].selected!==y&&(e[u].selected=y),y&&d&&(e[u].defaultSelected=!0)}else{for(u=""+yi(u),a=null,y=0;y<e.length;y++){if(e[y].value===u){e[y].selected=!0,d&&(e[y].defaultSelected=!0);return}a!==null||e[y].disabled||(a=e[y])}a!==null&&(a.selected=!0)}}function nf(e,a,u){if(a!=null&&(a=""+yi(a),a!==e.value&&(e.value=a),u==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=u!=null?""+yi(u):""}function af(e,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(s(92));if(G(d)){if(1<d.length)throw Error(s(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=yi(a),e.defaultValue=u,d=e.textContent,d===u&&d!==""&&d!==null&&(e.value=d)}function Vl(e,a){if(a){var u=e.firstChild;if(u&&u===e.lastChild&&u.nodeType===3){u.nodeValue=a;return}}e.textContent=a}var sf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lf(e,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":d?e.setProperty(a,u):typeof u!="number"||u===0||sf.has(a)?a==="float"?e.cssFloat=u:e[a]=(""+u).trim():e[a]=u+"px"}function rf(e,a,u){if(a!=null&&typeof a!="object")throw Error(s(62));if(e=e.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?e.setProperty(d,""):d==="float"?e.cssFloat="":e[d]="");for(var y in a)d=a[y],a.hasOwnProperty(y)&&u[y]!==d&&lf(e,y,d)}else for(var C in a)a.hasOwnProperty(C)&&lf(e,C,a[C])}function uc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cc(e){return $0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var hc=null;function Js(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ps=null,ql=null;function Xo(e){var a=Ba(e);if(a&&(e=a.stateNode)){var u=e[oe]||null;t:switch(e=a.stateNode,a.type){case"input":if(lc(e,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=e;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Pi(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==e&&d.form===e.form){var y=d[oe]||null;if(!y)throw Error(s(90));lc(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===e.form&&ef(d)}break t;case"textarea":nf(e,u.value,u.defaultValue);break t;case"select":a=u.value,a!=null&&Ur(e,!!u.multiple,a,!1)}}}var Fl=!1;function of(e,a,u){if(Fl)return e(a,u);Fl=!0;try{var d=e(a);return d}finally{if(Fl=!1,(ps!==null||ql!==null)&&(Al(),ps&&(a=ps,e=ql,ql=ps=null,Xo(a),e)))for(a=0;a<e.length;a++)Xo(e[a])}}function Br(e,a){var u=e.stateNode;if(u===null)return null;var d=u[oe]||null;if(d===null)return null;u=d[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(e=e.type,d=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!d;break t;default:e=!1}if(e)return null;if(u&&typeof u!="function")throw Error(s(231,a,typeof u));return u}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=!1;if(Ia)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){fc=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{fc=!1}var _s=null,ko=null,Ko=null;function uf(){if(Ko)return Ko;var e,a=ko,u=a.length,d,y="value"in _s?_s.value:_s.textContent,C=y.length;for(e=0;e<u&&a[e]===y[e];e++);var U=u-e;for(d=1;d<=U&&a[u-d]===y[C-d];d++);return Ko=y.slice(e,1<d?1-d:void 0)}function Ir(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Zo(){return!0}function cf(){return!1}function vi(e){function a(u,d,y,C,U){this._reactName=u,this._targetInst=y,this.type=d,this.nativeEvent=C,this.target=U,this.currentTarget=null;for(var P in e)e.hasOwnProperty(P)&&(u=e[P],this[P]=u?u(C):C[P]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Zo:cf,this.isPropagationStopped=cf,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),a}var ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=vi(ys),jr=_({},ys,{view:0,detail:0}),Om=vi(jr),hf,dc,vs,Yr=_({},jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_c,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vs&&(vs&&e.type==="mousemove"?(hf=e.screenX-vs.screenX,dc=e.screenY-vs.screenY):dc=hf=0,vs=e),hf)},movementY:function(e){return"movementY"in e?e.movementY:dc}}),Wo=vi(Yr),tg=_({},Yr,{dataTransfer:0}),eg=vi(tg),gc=_({},jr,{relatedTarget:0}),Pl=vi(gc),mc=_({},ys,{animationName:0,elapsedTime:0,pseudoElement:0}),ng=vi(mc),ig=_({},ys,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$s=vi(ig),ag=_({},ys,{data:0}),Ss=vi(ag),Es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ff={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sg(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=ff[e])?!!a[e]:!1}function _c(){return sg}var Xl=_({},jr,{key:function(e){if(e.key){var a=Es[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Ir(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_c,charCode:function(e){return e.type==="keypress"?Ir(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ir(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yc=vi(Xl),lg=_({},Yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vc=vi(lg),rg=_({},jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_c}),og=vi(rg),Nm=_({},ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fn=vi(Nm),ug=_({},Yr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cg=vi(ug),hg=_({},ys,{newState:0,oldState:0}),fg=vi(hg),dg=[9,13,27,32],Vr=Ia&&"CompositionEvent"in window,kl=null;Ia&&"documentMode"in document&&(kl=document.documentMode);var gg=Ia&&"TextEvent"in window&&!kl,df=Ia&&(!Vr||kl&&8<kl&&11>=kl),gf=" ",Sc=!1;function Ec(e,a){switch(e){case"keyup":return dg.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tl=!1;function xc(e,a){switch(e){case"compositionend":return mf(a);case"keypress":return a.which!==32?null:(Sc=!0,gf);case"textInput":return e=a.data,e===gf&&Sc?null:e;default:return null}}function pf(e,a){if(tl)return e==="compositionend"||!Vr&&Ec(e,a)?(e=uf(),Ko=ko=_s=null,tl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return df&&a.locale!=="ko"?null:a.data;default:return null}}var mg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bc(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!mg[e.type]:a==="textarea"}function _f(e,a,u,d){ps?ql?ql.push(d):ql=[d]:ps=d,a=f1(a,"onChange"),0<a.length&&(u=new Qo("onChange","change",null,u,d),e.push({event:u,listeners:a}))}var Xi=null,Kl=null;function wm(e){D2(e,0)}function Jo(e){var a=wr(e);if(ef(a))return e}function Li(e,a){if(e==="change")return a}var yf=!1;if(Ia){var $o;if(Ia){var Cc="oninput"in document;if(!Cc){var vf=document.createElement("div");vf.setAttribute("oninput","return;"),Cc=typeof vf.oninput=="function"}$o=Cc}else $o=!1;yf=$o&&(!document.documentMode||9<document.documentMode)}function Rc(){Xi&&(Xi.detachEvent("onpropertychange",Tc),Kl=Xi=null)}function Tc(e){if(e.propertyName==="value"&&Jo(Kl)){var a=[];_f(a,Kl,e,Js(e)),of(wm,a)}}function pg(e,a,u){e==="focusin"?(Rc(),Xi=a,Kl=u,Xi.attachEvent("onpropertychange",Tc)):e==="focusout"&&Rc()}function Ac(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jo(Kl)}function tu(e,a){if(e==="click")return Jo(a)}function ln(e,a){if(e==="input"||e==="change")return Jo(a)}function Lm(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var ki=typeof Object.is=="function"?Object.is:Lm;function qr(e,a){if(ki(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var u=Object.keys(e),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var y=u[d];if(!Ot.call(a,y)||!ki(e[y],a[y]))return!1}return!0}function Fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xs(e,a){var u=Fr(e);e=0;for(var d;u;){if(u.nodeType===3){if(d=e+u.textContent.length,e<=a&&d>=a)return{node:u,offset:a-e};e=d}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=Fr(u)}}function Sf(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Sf(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Ef(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=Po(e.document);a instanceof e.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)e=a.contentWindow;else break;a=Po(e.document)}return a}function Zl(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var ja=Ia&&"documentMode"in document&&11>=document.documentMode,Ql=null,eu=null,Pr=null,nu=!1;function Mc(e,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;nu||Ql==null||Ql!==Po(d)||(d=Ql,"selectionStart"in d&&Zl(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Pr&&qr(Pr,d)||(Pr=d,d=f1(eu,"onSelect"),0<d.length&&(a=new Qo("onSelect","select",null,a,u),e.push({event:a,listeners:d}),a.target=Ql)))}function Ya(e,a){var u={};return u[e.toLowerCase()]=a.toLowerCase(),u["Webkit"+e]="webkit"+a,u["Moz"+e]="moz"+a,u}var Wl={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionrun:Ya("Transition","TransitionRun"),transitionstart:Ya("Transition","TransitionStart"),transitioncancel:Ya("Transition","TransitionCancel"),transitionend:Ya("Transition","TransitionEnd")},Dc={},_g={};Ia&&(_g=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function el(e){if(Dc[e])return Dc[e];if(!Wl[e])return e;var a=Wl[e],u;for(u in a)if(a.hasOwnProperty(u)&&u in _g)return Dc[e]=a[u];return e}var xf=el("animationend"),sa=el("animationiteration"),Oc=el("animationstart"),yg=el("transitionrun"),zm=el("transitionstart"),bf=el("transitioncancel"),ei=el("transitionend"),Cf=new Map,ni="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ni.push("scrollEnd");function la(e,a){Cf.set(e,a),qe(a,[e])}var bs=new WeakMap;function Gn(e,a){if(typeof e=="object"&&e!==null){var u=bs.get(e);return u!==void 0?u:(a={value:e,source:a,stack:Ha(a)},bs.set(e,a),a)}return{value:e,source:a,stack:Ha(a)}}var Mn=[],nl=0,iu=0;function Ki(){for(var e=nl,a=iu=nl=0;a<e;){var u=Mn[a];Mn[a++]=null;var d=Mn[a];Mn[a++]=null;var y=Mn[a];Mn[a++]=null;var C=Mn[a];if(Mn[a++]=null,d!==null&&y!==null){var U=d.pending;U===null?y.next=y:(y.next=U.next,U.next=y),d.pending=y}C!==0&&al(u,y,C)}}function au(e,a,u,d){Mn[nl++]=e,Mn[nl++]=a,Mn[nl++]=u,Mn[nl++]=d,iu|=d,e.lanes|=d,e=e.alternate,e!==null&&(e.lanes|=d)}function il(e,a,u,d){return au(e,a,u,d),su(e)}function Va(e,a){return au(e,null,null,a),su(e)}function al(e,a,u){e.lanes|=u;var d=e.alternate;d!==null&&(d.lanes|=u);for(var y=!1,C=e.return;C!==null;)C.childLanes|=u,d=C.alternate,d!==null&&(d.childLanes|=u),C.tag===22&&(e=C.stateNode,e===null||e._visibility&1||(y=!0)),e=C,C=C.return;return e.tag===3?(C=e.stateNode,y&&a!==null&&(y=31-$e(u),e=C.hiddenUpdates,d=e[y],d===null?e[y]=[a]:d.push(a),a.lane=u|536870912),C):null}function su(e){if(50<as)throw as=0,Bu=null,Error(s(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var Jl={};function lu(e,a,u,d){this.tag=e,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(e,a,u,d){return new lu(e,a,u,d)}function Xr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qa(e,a){var u=e.alternate;return u===null?(u=zi(e.tag,a,e.key,e.mode),u.elementType=e.elementType,u.type=e.type,u.stateNode=e.stateNode,u.alternate=e,e.alternate=u):(u.pendingProps=a,u.type=e.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=e.flags&65011712,u.childLanes=e.childLanes,u.lanes=e.lanes,u.child=e.child,u.memoizedProps=e.memoizedProps,u.memoizedState=e.memoizedState,u.updateQueue=e.updateQueue,a=e.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=e.sibling,u.index=e.index,u.ref=e.ref,u.refCleanup=e.refCleanup,u}function Nc(e,a){e.flags&=65011714;var u=e.alternate;return u===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=u.childLanes,e.lanes=u.lanes,e.child=u.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=u.memoizedProps,e.memoizedState=u.memoizedState,e.updateQueue=u.updateQueue,e.type=u.type,a=u.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function kr(e,a,u,d,y,C){var U=0;if(d=e,typeof e=="function")Xr(e)&&(U=1);else if(typeof e=="string")U=b5(e,u,ht.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case j:return e=zi(31,u,a,y),e.elementType=j,e.lanes=C,e;case E:return Cs(u.children,y,C,a);case M:U=8,y|=24;break;case D:return e=zi(12,u,a,y|2),e.elementType=D,e.lanes=C,e;case z:return e=zi(13,u,a,y),e.elementType=z,e.lanes=C,e;case I:return e=zi(19,u,a,y),e.elementType=I,e.lanes=C,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:case A:U=10;break t;case T:U=9;break t;case N:U=11;break t;case K:U=14;break t;case H:U=16,d=null;break t}U=29,u=Error(s(130,e===null?"null":typeof e,"")),d=null}return a=zi(U,u,a,y),a.elementType=e,a.type=d,a.lanes=C,a}function Cs(e,a,u,d){return e=zi(7,e,d,a),e.lanes=u,e}function wc(e,a,u){return e=zi(6,e,null,a),e.lanes=u,e}function ru(e,a,u){return a=zi(4,e.children!==null?e.children:[],e.key,a),a.lanes=u,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Un=[],$l=0,ii=null,ou=0,Zi=[],ra=0,Gi=null,Fa=1,Ca="";function oa(e,a){Un[$l++]=ou,Un[$l++]=ii,ii=e,ou=a}function Rf(e,a,u){Zi[ra++]=Fa,Zi[ra++]=Ca,Zi[ra++]=Gi,Gi=e;var d=Fa;e=Ca;var y=32-$e(d)-1;d&=~(1<<y),u+=1;var C=32-$e(a)+y;if(30<C){var U=y-y%5;C=(d&(1<<U)-1).toString(32),d>>=U,y-=U,Fa=1<<32-$e(a)+y|u<<y|d,Ca=C+e}else Fa=1<<C|u<<y|d,Ca=e}function Lc(e){e.return!==null&&(oa(e,1),Rf(e,1,0))}function zc(e){for(;e===ii;)ii=Un[--$l],Un[$l]=null,ou=Un[--$l],Un[$l]=null;for(;e===Gi;)Gi=Zi[--ra],Zi[ra]=null,Ca=Zi[--ra],Zi[ra]=null,Fa=Zi[--ra],Zi[ra]=null}var ai=null,an=null,Ee=!1,tr=null,Pa=!1,Tf=Error(s(519));function sl(e){var a=Error(s(418,""));throw Zr(Gn(a,e)),Tf}function Af(e){var a=e.stateNode,u=e.type,d=e.memoizedProps;switch(a[Ae]=e,a[oe]=d,u){case"dialog":_e("cancel",a),_e("close",a);break;case"iframe":case"object":case"embed":_e("load",a);break;case"video":case"audio":for(u=0;u<cd.length;u++)_e(cd[u],a);break;case"source":_e("error",a);break;case"img":case"image":case"link":_e("error",a),_e("load",a);break;case"details":_e("toggle",a);break;case"input":_e("invalid",a),rc(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Fo(a);break;case"select":_e("invalid",a);break;case"textarea":_e("invalid",a),af(a,d.value,d.defaultValue,d.children),Fo(a)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||L2(a.textContent,u)?(d.popover!=null&&(_e("beforetoggle",a),_e("toggle",a)),d.onScroll!=null&&_e("scroll",a),d.onScrollEnd!=null&&_e("scrollend",a),d.onClick!=null&&(a.onclick=d1),a=!0):a=!1,a||sl(e)}function er(e){for(ai=e.return;ai;)switch(ai.tag){case 5:case 13:Pa=!1;return;case 27:case 3:Pa=!0;return;default:ai=ai.return}}function ll(e){if(e!==ai)return!1;if(!Ee)return er(e),Ee=!0,!1;var a=e.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=e.type,u=!(u!=="form"&&u!=="button")||Jm(e.type,e.memoizedProps)),u=!u),u&&an&&sl(e),er(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,a=0;e;){if(e.nodeType===8)if(u=e.data,u==="/$"){if(a===0){an=Is(e.nextSibling);break t}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;e=e.nextSibling}an=null}}else a===27?(a=an,vo(e.type)?(e=np,np=null,an=e):an=a):an=ai?Is(e.stateNode.nextSibling):null;return!0}function Kr(){an=ai=null,Ee=!1}function Mf(){var e=tr;return e!==null&&(kn===null?kn=e:kn.push.apply(kn,e),tr=null),e}function Zr(e){tr===null?tr=[e]:tr.push(e)}var Gc=Q(null),rl=null,Xa=null;function ua(e,a,u){nt(Gc,a._currentValue),a._currentValue=u}function ka(e){e._currentValue=Gc.current,tt(Gc)}function Uc(e,a,u){for(;e!==null;){var d=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),e===u)break;e=e.return}}function Me(e,a,u,d){var y=e.child;for(y!==null&&(y.return=e);y!==null;){var C=y.dependencies;if(C!==null){var U=y.child;C=C.firstContext;t:for(;C!==null;){var P=C;C=y;for(var et=0;et<a.length;et++)if(P.context===a[et]){C.lanes|=u,P=C.alternate,P!==null&&(P.lanes|=u),Uc(C.return,u,e),d||(U=null);break t}C=P.next}}else if(y.tag===18){if(U=y.return,U===null)throw Error(s(341));U.lanes|=u,C=U.alternate,C!==null&&(C.lanes|=u),Uc(U,u,e),U=null}else U=y.child;if(U!==null)U.return=y;else for(U=y;U!==null;){if(U===e){U=null;break}if(y=U.sibling,y!==null){y.return=U.return,U=y;break}U=U.return}y=U}}function nr(e,a,u,d){e=null;for(var y=a,C=!1;y!==null;){if(!C){if((y.flags&524288)!==0)C=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var U=y.alternate;if(U===null)throw Error(s(387));if(U=U.memoizedProps,U!==null){var P=y.type;ki(y.pendingProps.value,U.value)||(e!==null?e.push(P):e=[P])}}else if(y===W.current){if(U=y.alternate,U===null)throw Error(s(387));U.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(e!==null?e.push(pd):e=[pd])}y=y.return}e!==null&&Me(a,e,u,d),a.flags|=262144}function Bc(e){for(e=e.firstContext;e!==null;){if(!ki(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ol(e){rl=e,Xa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function si(e){return vg(rl,e)}function Hc(e,a){return rl===null&&ol(e),vg(e,a)}function vg(e,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Xa===null){if(e===null)throw Error(s(308));Xa=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Xa=Xa.next=a;return u}var Gm=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(u,d){e.push(d)}};this.abort=function(){a.aborted=!0,e.forEach(function(u){return u()})}},Df=i.unstable_scheduleCallback,Rs=i.unstable_NormalPriority,mn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qr(){return{controller:new Gm,data:new Map,refCount:0}}function Ra(e){e.refCount--,e.refCount===0&&Df(Rs,function(){e.controller.abort()})}var ir=null,uu=0,Wr=0,ar=null;function Sg(e,a){if(ir===null){var u=ir=[];uu=0,Wr=qm(),ar={status:"pending",value:void 0,then:function(d){u.push(d)}}}return uu++,a.then(Of,Of),a}function Of(){if(--uu===0&&ir!==null){ar!==null&&(ar.status="fulfilled");var e=ir;ir=null,Wr=0,ar=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function Eg(e,a){var u=[],d={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return e.then(function(){d.status="fulfilled",d.value=a;for(var y=0;y<u.length;y++)(0,u[y])(a)},function(y){for(d.status="rejected",d.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),d}var Nf=B.S;B.S=function(e,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Sg(e,a),Nf!==null&&Nf(e,a)};var Ts=Q(null);function te(){var e=Ts.current;return e!==null?e:Ie.pooledCache}function Ic(e,a){a===null?nt(Ts,Ts.current):nt(Ts,a.pool)}function Ui(){var e=te();return e===null?null:{parent:mn._currentValue,pool:e}}var sr=Error(s(460)),xg=Error(s(474)),lr=Error(s(542)),ul={then:function(){}};function rr(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cu(){}function jc(e,a,u){switch(u=e[u],u===void 0?e.push(a):u!==a&&(a.then(cu,cu),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,As(e),e;default:if(typeof a.status=="string")a.then(cu,cu);else{if(e=Ie,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=a,e.status="pending",e.then(function(d){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=d}},function(d){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,As(e),e}throw hu=a,sr}}var hu=null;function wf(){if(hu===null)throw Error(s(459));var e=hu;return hu=null,e}function As(e){if(e===sr||e===lr)throw Error(s(483))}var Ka=!1;function fu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function du(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Za(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Si(e,a,u){var d=e.updateQueue;if(d===null)return null;if(d=d.shared,(Ft&2)!==0){var y=d.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),d.pending=a,a=su(e),al(e,null,u),a}return au(e,d,a,u),su(e)}function or(e,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=e.pendingLanes,u|=d,a.lanes=u,Jn(e,u)}}function Lf(e,a){var u=e.updateQueue,d=e.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var y=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var U={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};C===null?y=C=U:C=C.next=U,u=u.next}while(u!==null);C===null?y=C=a:C=C.next=a}else y=C=a;u={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:C,shared:d.shared,callbacks:d.callbacks},e.updateQueue=u;return}e=u.lastBaseUpdate,e===null?u.firstBaseUpdate=a:e.next=a,u.lastBaseUpdate=a}var Yc=!1;function gu(){if(Yc){var e=ar;if(e!==null)throw e}}function cl(e,a,u,d){Yc=!1;var y=e.updateQueue;Ka=!1;var C=y.firstBaseUpdate,U=y.lastBaseUpdate,P=y.shared.pending;if(P!==null){y.shared.pending=null;var et=P,gt=et.next;et.next=null,U===null?C=gt:U.next=gt,U=et;var xt=e.alternate;xt!==null&&(xt=xt.updateQueue,P=xt.lastBaseUpdate,P!==U&&(P===null?xt.firstBaseUpdate=gt:P.next=gt,xt.lastBaseUpdate=et))}if(C!==null){var Rt=y.baseState;U=0,xt=gt=et=null,P=C;do{var pt=P.lane&-536870913,_t=pt!==P.lane;if(_t?(pe&pt)===pt:(d&pt)===pt){pt!==0&&pt===Wr&&(Yc=!0),xt!==null&&(xt=xt.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});t:{var Xt=e,Yt=P;pt=a;var We=u;switch(Yt.tag){case 1:if(Xt=Yt.payload,typeof Xt=="function"){Rt=Xt.call(We,Rt,pt);break t}Rt=Xt;break t;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=Yt.payload,pt=typeof Xt=="function"?Xt.call(We,Rt,pt):Xt,pt==null)break t;Rt=_({},Rt,pt);break t;case 2:Ka=!0}}pt=P.callback,pt!==null&&(e.flags|=64,_t&&(e.flags|=8192),_t=y.callbacks,_t===null?y.callbacks=[pt]:_t.push(pt))}else _t={lane:pt,tag:P.tag,payload:P.payload,callback:P.callback,next:null},xt===null?(gt=xt=_t,et=Rt):xt=xt.next=_t,U|=pt;if(P=P.next,P===null){if(P=y.shared.pending,P===null)break;_t=P,P=_t.next,_t.next=null,y.lastBaseUpdate=_t,y.shared.pending=null}}while(!0);xt===null&&(et=Rt),y.baseState=et,y.firstBaseUpdate=gt,y.lastBaseUpdate=xt,C===null&&(y.shared.lanes=0),Pe|=U,e.lanes=U,e.memoizedState=Rt}}function Bt(e,a){if(typeof e!="function")throw Error(s(191,e));e.call(a)}function bg(e,a){var u=e.callbacks;if(u!==null)for(e.callbacks=null,e=0;e<u.length;e++)Bt(u[e],a)}var Jr=Q(null),mu=Q(0);function $r(e,a){e=is,nt(mu,e),nt(Jr,a),is=e|a.baseLanes}function zf(){nt(mu,is),nt(Jr,Jr.current)}function Gf(){is=mu.current,tt(Jr),tt(mu)}var hl=0,ee=null,Be=null,cn=null,pu=!1,Ms=!1,fl=!1,Vc=0,_u=0,ca=null,Ds=0;function de(){throw Error(s(321))}function Qa(e,a){if(a===null)return!1;for(var u=0;u<a.length&&u<e.length;u++)if(!ki(e[u],a[u]))return!1;return!0}function Bi(e,a,u,d,y,C){return hl=C,ee=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,B.H=e===null||e.memoizedState===null?t1:Jf,fl=!1,C=u(d,y),fl=!1,Ms&&(C=Rg(a,u,d,y)),Cg(e),C}function Cg(e){B.H=Kc;var a=Be!==null&&Be.next!==null;if(hl=0,cn=Be=ee=null,pu=!1,_u=0,ca=null,a)throw Error(s(300));e===null||He||(e=e.dependencies,e!==null&&Bc(e)&&(He=!0))}function Rg(e,a,u,d){ee=e;var y=0;do{if(Ms&&(ca=null),_u=0,Ms=!1,25<=y)throw Error(s(301));if(y+=1,cn=Be=null,e.updateQueue!=null){var C=e.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}B.H=Im,C=a(u,d)}while(Ms);return C}function Bn(){var e=B.H,a=e.useState()[0];return a=typeof a.then=="function"?yu(a):a,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(ee.flags|=1024),a}function Ta(){var e=Vc!==0;return Vc=0,e}function Uf(e,a,u){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~u}function Bf(e){if(pu){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}pu=!1}hl=0,cn=Be=ee=null,Ms=!1,_u=Vc=0,ca=null}function Hi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?ee.memoizedState=cn=e:cn=cn.next=e,cn}function pn(){if(Be===null){var e=ee.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var a=cn===null?ee.memoizedState:cn.next;if(a!==null)cn=a,Be=e;else{if(e===null)throw ee.alternate===null?Error(s(467)):Error(s(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},cn===null?ee.memoizedState=cn=e:cn=cn.next=e}return cn}function qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yu(e){var a=_u;return _u+=1,ca===null&&(ca=[]),e=jc(ca,e,a),a=ee,(cn===null?a.memoizedState:cn.next)===null&&(a=a.alternate,B.H=a===null||a.memoizedState===null?t1:Jf),e}function vu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return yu(e);if(e.$$typeof===A)return si(e)}throw Error(s(438,String(e)))}function Hf(e){var a=null,u=ee.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=ee.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=qc(),ee.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(e),d=0;d<e;d++)u[d]=Y;return a.index++,u}function Ii(e,a){return typeof a=="function"?a(e):a}function Wa(e){var a=pn();return If(a,Be,e)}function If(e,a,u){var d=e.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=u;var y=e.baseQueue,C=d.pending;if(C!==null){if(y!==null){var U=y.next;y.next=C.next,C.next=U}a.baseQueue=y=C,d.pending=null}if(C=e.baseState,y===null)e.memoizedState=C;else{a=y.next;var P=U=null,et=null,gt=a,xt=!1;do{var Rt=gt.lane&-536870913;if(Rt!==gt.lane?(pe&Rt)===Rt:(hl&Rt)===Rt){var pt=gt.revertLane;if(pt===0)et!==null&&(et=et.next={lane:0,revertLane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),Rt===Wr&&(xt=!0);else if((hl&pt)===pt){gt=gt.next,pt===Wr&&(xt=!0);continue}else Rt={lane:0,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},et===null?(P=et=Rt,U=C):et=et.next=Rt,ee.lanes|=pt,Pe|=pt;Rt=gt.action,fl&&u(C,Rt),C=gt.hasEagerState?gt.eagerState:u(C,Rt)}else pt={lane:Rt,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},et===null?(P=et=pt,U=C):et=et.next=pt,ee.lanes|=Rt,Pe|=Rt;gt=gt.next}while(gt!==null&&gt!==a);if(et===null?U=C:et.next=P,!ki(C,e.memoizedState)&&(He=!0,xt&&(u=ar,u!==null)))throw u;e.memoizedState=C,e.baseState=U,e.baseQueue=et,d.lastRenderedState=C}return y===null&&(d.lanes=0),[e.memoizedState,d.dispatch]}function jf(e){var a=pn(),u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=e;var d=u.dispatch,y=u.pending,C=a.memoizedState;if(y!==null){u.pending=null;var U=y=y.next;do C=e(C,U.action),U=U.next;while(U!==y);ki(C,a.memoizedState)||(He=!0),a.memoizedState=C,a.baseQueue===null&&(a.baseState=C),u.lastRenderedState=C}return[C,d]}function Tg(e,a,u){var d=ee,y=pn(),C=Ee;if(C){if(u===void 0)throw Error(s(407));u=u()}else u=a();var U=!ki((Be||y).memoizedState,u);U&&(y.memoizedState=u,He=!0),y=y.queue;var P=Mg.bind(null,d,y,e);if(Su(2048,8,P,[e]),y.getSnapshot!==a||U||cn!==null&&cn.memoizedState.tag&1){if(d.flags|=2048,no(9,Fc(),Ag.bind(null,d,y,u,a),null),Ie===null)throw Error(s(349));C||(hl&124)!==0||to(d,a,u)}return u}function to(e,a,u){e.flags|=16384,e={getSnapshot:a,value:u},a=ee.updateQueue,a===null?(a=qc(),ee.updateQueue=a,a.stores=[e]):(u=a.stores,u===null?a.stores=[e]:u.push(e))}function Ag(e,a,u,d){a.value=u,a.getSnapshot=d,Dg(a)&&eo(e)}function Mg(e,a,u){return u(function(){Dg(a)&&eo(e)})}function Dg(e){var a=e.getSnapshot;e=e.value;try{var u=a();return!ki(e,u)}catch{return!0}}function eo(e){var a=Va(e,2);a!==null&&Sn(a,e,2)}function Yf(e){var a=Hi();if(typeof e=="function"){var u=e;if(e=u(),fl){Je(!0);try{u()}finally{Je(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:e},a}function Og(e,a,u,d){return e.baseState=u,If(e,Be,typeof d=="function"?d:Ii)}function Um(e,a,u,d,y){if(kc(e))throw Error(s(485));if(e=a.action,e!==null){var C={payload:y,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){C.listeners.push(U)}};B.T!==null?u(!0):C.isTransition=!1,d(C),u=a.pending,u===null?(C.next=a.pending=C,Ng(a,C)):(C.next=u.next,a.pending=u.next=C)}}function Ng(e,a){var u=a.action,d=a.payload,y=e.state;if(a.isTransition){var C=B.T,U={};B.T=U;try{var P=u(y,d),et=B.S;et!==null&&et(U,P),wg(e,a,P)}catch(gt){Vf(e,a,gt)}finally{B.T=C}}else try{C=u(y,d),wg(e,a,C)}catch(gt){Vf(e,a,gt)}}function wg(e,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){Lg(e,a,d)},function(d){return Vf(e,a,d)}):Lg(e,a,u)}function Lg(e,a,u){a.status="fulfilled",a.value=u,zg(a),e.state=u,a=e.pending,a!==null&&(u=a.next,u===a?e.pending=null:(u=u.next,a.next=u,Ng(e,u)))}function Vf(e,a,u){var d=e.pending;if(e.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,zg(a),a=a.next;while(a!==d)}e.action=null}function zg(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Gg(e,a){return a}function Ug(e,a){if(Ee){var u=Ie.formState;if(u!==null){t:{var d=ee;if(Ee){if(an){e:{for(var y=an,C=Pa;y.nodeType!==8;){if(!C){y=null;break e}if(y=Is(y.nextSibling),y===null){y=null;break e}}C=y.data,y=C==="F!"||C==="F"?y:null}if(y){an=Is(y.nextSibling),d=y.data==="F!";break t}}sl(d)}d=!1}d&&(a=u[0])}}return u=Hi(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gg,lastRenderedState:a},u.queue=d,u=Wg.bind(null,ee,d),d.dispatch=u,d=Yf(!1),C=Wf.bind(null,ee,!1,d.queue),d=Hi(),y={state:a,dispatch:null,action:e,pending:null},d.queue=y,u=Um.bind(null,ee,y,C,u),y.dispatch=u,d.memoizedState=e,[a,u,!1]}function Bg(e){var a=pn();return Hg(a,Be,e)}function Hg(e,a,u){if(a=If(e,a,Gg)[0],e=Wa(Ii)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=yu(a)}catch(U){throw U===sr?lr:U}else d=a;a=pn();var y=a.queue,C=y.dispatch;return u!==a.memoizedState&&(ee.flags|=2048,no(9,Fc(),Ig.bind(null,y,u),null)),[d,C,e]}function Ig(e,a){e.action=a}function jg(e){var a=pn(),u=Be;if(u!==null)return Hg(a,u,e);pn(),a=a.memoizedState,u=pn();var d=u.queue.dispatch;return u.memoizedState=e,[a,d,!1]}function no(e,a,u,d){return e={tag:e,create:u,deps:d,inst:a,next:null},a=ee.updateQueue,a===null&&(a=qc(),ee.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=e.next=e:(d=u.next,u.next=e,e.next=d,a.lastEffect=e),e}function Fc(){return{destroy:void 0,resource:void 0}}function Yg(){return pn().memoizedState}function Pc(e,a,u,d){var y=Hi();d=d===void 0?null:d,ee.flags|=e,y.memoizedState=no(1|a,Fc(),u,d)}function Su(e,a,u,d){var y=pn();d=d===void 0?null:d;var C=y.memoizedState.inst;Be!==null&&d!==null&&Qa(d,Be.memoizedState.deps)?y.memoizedState=no(a,C,u,d):(ee.flags|=e,y.memoizedState=no(1|a,C,u,d))}function qf(e,a){Pc(8390656,8,e,a)}function Ff(e,a){Su(2048,8,e,a)}function Vg(e,a){return Su(4,2,e,a)}function Pf(e,a){return Su(4,4,e,a)}function Xf(e,a){if(typeof a=="function"){e=e();var u=a(e);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function kf(e,a,u){u=u!=null?u.concat([e]):null,Su(4,4,Xf.bind(null,a,e),u)}function Eu(){}function Xc(e,a){var u=pn();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&Qa(a,d[1])?d[0]:(u.memoizedState=[e,a],e)}function qg(e,a){var u=pn();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&Qa(a,d[1]))return d[0];if(d=e(),fl){Je(!0);try{e()}finally{Je(!1)}}return u.memoizedState=[d,a],d}function Kf(e,a,u){return u===void 0||(hl&1073741824)!==0?e.memoizedState=a:(e.memoizedState=u,e=on(),ee.lanes|=e,Pe|=e,u)}function Fg(e,a,u,d){return ki(u,a)?u:Jr.current!==null?(e=Kf(e,u,d),ki(e,a)||(He=!0),e):(hl&42)===0?(He=!0,e.memoizedState=u):(e=on(),ee.lanes|=e,Pe|=e,a)}function Pg(e,a,u,d,y){var C=F.p;F.p=C!==0&&8>C?C:8;var U=B.T,P={};B.T=P,Wf(e,!1,a,u);try{var et=y(),gt=B.S;if(gt!==null&&gt(P,et),et!==null&&typeof et=="object"&&typeof et.then=="function"){var xt=Eg(et,d);xu(e,a,xt,fn(e))}else xu(e,a,d,fn(e))}catch(Rt){xu(e,a,{then:function(){},status:"rejected",reason:Rt},fn())}finally{F.p=C,B.T=U}}function Xg(){}function Zf(e,a,u,d){if(e.tag!==5)throw Error(s(476));var y=kg(e).queue;Pg(e,y,a,$,u===null?Xg:function(){return Kg(e),u(d)})}function kg(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:$},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:u},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Kg(e){var a=kg(e).next.queue;xu(e,a,{},fn())}function Qf(){return si(pd)}function Zg(){return pn().memoizedState}function Qg(){return pn().memoizedState}function Bm(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var u=fn();e=Za(u);var d=Si(a,e,u);d!==null&&(Sn(d,a,u),or(d,a,u)),a={cache:Qr()},e.payload=a;return}a=a.return}}function Hm(e,a,u){var d=fn();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},kc(e)?Jg(a,u):(u=il(e,a,u,d),u!==null&&(Sn(u,e,d),$g(u,a,d)))}function Wg(e,a,u){var d=fn();xu(e,a,u,d)}function xu(e,a,u,d){var y={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(kc(e))Jg(a,y);else{var C=e.alternate;if(e.lanes===0&&(C===null||C.lanes===0)&&(C=a.lastRenderedReducer,C!==null))try{var U=a.lastRenderedState,P=C(U,u);if(y.hasEagerState=!0,y.eagerState=P,ki(P,U))return au(e,a,y,0),Ie===null&&Ki(),!1}catch{}finally{}if(u=il(e,a,y,d),u!==null)return Sn(u,e,d),$g(u,a,d),!0}return!1}function Wf(e,a,u,d){if(d={lane:2,revertLane:qm(),action:d,hasEagerState:!1,eagerState:null,next:null},kc(e)){if(a)throw Error(s(479))}else a=il(e,u,d,2),a!==null&&Sn(a,e,2)}function kc(e){var a=e.alternate;return e===ee||a!==null&&a===ee}function Jg(e,a){Ms=pu=!0;var u=e.pending;u===null?a.next=a:(a.next=u.next,u.next=a),e.pending=a}function $g(e,a,u){if((u&4194048)!==0){var d=a.lanes;d&=e.pendingLanes,u|=d,a.lanes=u,Jn(e,u)}}var Kc={readContext:si,use:vu,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useLayoutEffect:de,useInsertionEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useSyncExternalStore:de,useId:de,useHostTransitionStatus:de,useFormState:de,useActionState:de,useOptimistic:de,useMemoCache:de,useCacheRefresh:de},t1={readContext:si,use:vu,useCallback:function(e,a){return Hi().memoizedState=[e,a===void 0?null:a],e},useContext:si,useEffect:qf,useImperativeHandle:function(e,a,u){u=u!=null?u.concat([e]):null,Pc(4194308,4,Xf.bind(null,a,e),u)},useLayoutEffect:function(e,a){return Pc(4194308,4,e,a)},useInsertionEffect:function(e,a){Pc(4,2,e,a)},useMemo:function(e,a){var u=Hi();a=a===void 0?null:a;var d=e();if(fl){Je(!0);try{e()}finally{Je(!1)}}return u.memoizedState=[d,a],d},useReducer:function(e,a,u){var d=Hi();if(u!==void 0){var y=u(a);if(fl){Je(!0);try{u(a)}finally{Je(!1)}}}else y=a;return d.memoizedState=d.baseState=y,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:y},d.queue=e,e=e.dispatch=Hm.bind(null,ee,e),[d.memoizedState,e]},useRef:function(e){var a=Hi();return e={current:e},a.memoizedState=e},useState:function(e){e=Yf(e);var a=e.queue,u=Wg.bind(null,ee,a);return a.dispatch=u,[e.memoizedState,u]},useDebugValue:Eu,useDeferredValue:function(e,a){var u=Hi();return Kf(u,e,a)},useTransition:function(){var e=Yf(!1);return e=Pg.bind(null,ee,e.queue,!0,!1),Hi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,u){var d=ee,y=Hi();if(Ee){if(u===void 0)throw Error(s(407));u=u()}else{if(u=a(),Ie===null)throw Error(s(349));(pe&124)!==0||to(d,a,u)}y.memoizedState=u;var C={value:u,getSnapshot:a};return y.queue=C,qf(Mg.bind(null,d,C,e),[e]),d.flags|=2048,no(9,Fc(),Ag.bind(null,d,C,u,a),null),u},useId:function(){var e=Hi(),a=Ie.identifierPrefix;if(Ee){var u=Ca,d=Fa;u=(d&~(1<<32-$e(d)-1)).toString(32)+u,a=""+a+"R"+u,u=Vc++,0<u&&(a+="H"+u.toString(32)),a+=""}else u=Ds++,a=""+a+"r"+u.toString(32)+"";return e.memoizedState=a},useHostTransitionStatus:Qf,useFormState:Ug,useActionState:Ug,useOptimistic:function(e){var a=Hi();a.memoizedState=a.baseState=e;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Wf.bind(null,ee,!0,u),u.dispatch=a,[e,a]},useMemoCache:Hf,useCacheRefresh:function(){return Hi().memoizedState=Bm.bind(null,ee)}},Jf={readContext:si,use:vu,useCallback:Xc,useContext:si,useEffect:Ff,useImperativeHandle:kf,useInsertionEffect:Vg,useLayoutEffect:Pf,useMemo:qg,useReducer:Wa,useRef:Yg,useState:function(){return Wa(Ii)},useDebugValue:Eu,useDeferredValue:function(e,a){var u=pn();return Fg(u,Be.memoizedState,e,a)},useTransition:function(){var e=Wa(Ii)[0],a=pn().memoizedState;return[typeof e=="boolean"?e:yu(e),a]},useSyncExternalStore:Tg,useId:Zg,useHostTransitionStatus:Qf,useFormState:Bg,useActionState:Bg,useOptimistic:function(e,a){var u=pn();return Og(u,Be,e,a)},useMemoCache:Hf,useCacheRefresh:Qg},Im={readContext:si,use:vu,useCallback:Xc,useContext:si,useEffect:Ff,useImperativeHandle:kf,useInsertionEffect:Vg,useLayoutEffect:Pf,useMemo:qg,useReducer:jf,useRef:Yg,useState:function(){return jf(Ii)},useDebugValue:Eu,useDeferredValue:function(e,a){var u=pn();return Be===null?Kf(u,e,a):Fg(u,Be.memoizedState,e,a)},useTransition:function(){var e=jf(Ii)[0],a=pn().memoizedState;return[typeof e=="boolean"?e:yu(e),a]},useSyncExternalStore:Tg,useId:Zg,useHostTransitionStatus:Qf,useFormState:jg,useActionState:jg,useOptimistic:function(e,a){var u=pn();return Be!==null?Og(u,Be,e,a):(u.baseState=e,[e,u.queue.dispatch])},useMemoCache:Hf,useCacheRefresh:Qg},io=null,Ei=0;function bu(e){var a=Ei;return Ei+=1,io===null&&(io=[]),jc(io,e,a)}function ur(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Cu(e,a){throw a.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(a),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function $f(e){var a=e._init;return a(e._payload)}function td(e){function a(ut,lt){if(e){var ft=ut.deletions;ft===null?(ut.deletions=[lt],ut.flags|=16):ft.push(lt)}}function u(ut,lt){if(!e)return null;for(;lt!==null;)a(ut,lt),lt=lt.sibling;return null}function d(ut){for(var lt=new Map;ut!==null;)ut.key!==null?lt.set(ut.key,ut):lt.set(ut.index,ut),ut=ut.sibling;return lt}function y(ut,lt){return ut=qa(ut,lt),ut.index=0,ut.sibling=null,ut}function C(ut,lt,ft){return ut.index=ft,e?(ft=ut.alternate,ft!==null?(ft=ft.index,ft<lt?(ut.flags|=67108866,lt):ft):(ut.flags|=67108866,lt)):(ut.flags|=1048576,lt)}function U(ut){return e&&ut.alternate===null&&(ut.flags|=67108866),ut}function P(ut,lt,ft,Ct){return lt===null||lt.tag!==6?(lt=wc(ft,ut.mode,Ct),lt.return=ut,lt):(lt=y(lt,ft),lt.return=ut,lt)}function et(ut,lt,ft,Ct){var zt=ft.type;return zt===E?xt(ut,lt,ft.props.children,Ct,ft.key):lt!==null&&(lt.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===H&&$f(zt)===lt.type)?(lt=y(lt,ft.props),ur(lt,ft),lt.return=ut,lt):(lt=kr(ft.type,ft.key,ft.props,null,ut.mode,Ct),ur(lt,ft),lt.return=ut,lt)}function gt(ut,lt,ft,Ct){return lt===null||lt.tag!==4||lt.stateNode.containerInfo!==ft.containerInfo||lt.stateNode.implementation!==ft.implementation?(lt=ru(ft,ut.mode,Ct),lt.return=ut,lt):(lt=y(lt,ft.children||[]),lt.return=ut,lt)}function xt(ut,lt,ft,Ct,zt){return lt===null||lt.tag!==7?(lt=Cs(ft,ut.mode,Ct,zt),lt.return=ut,lt):(lt=y(lt,ft),lt.return=ut,lt)}function Rt(ut,lt,ft){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return lt=wc(""+lt,ut.mode,ft),lt.return=ut,lt;if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case x:return ft=kr(lt.type,lt.key,lt.props,null,ut.mode,ft),ur(ft,lt),ft.return=ut,ft;case b:return lt=ru(lt,ut.mode,ft),lt.return=ut,lt;case H:var Ct=lt._init;return lt=Ct(lt._payload),Rt(ut,lt,ft)}if(G(lt)||J(lt))return lt=Cs(lt,ut.mode,ft,null),lt.return=ut,lt;if(typeof lt.then=="function")return Rt(ut,bu(lt),ft);if(lt.$$typeof===A)return Rt(ut,Hc(ut,lt),ft);Cu(ut,lt)}return null}function pt(ut,lt,ft,Ct){var zt=lt!==null?lt.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return zt!==null?null:P(ut,lt,""+ft,Ct);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case x:return ft.key===zt?et(ut,lt,ft,Ct):null;case b:return ft.key===zt?gt(ut,lt,ft,Ct):null;case H:return zt=ft._init,ft=zt(ft._payload),pt(ut,lt,ft,Ct)}if(G(ft)||J(ft))return zt!==null?null:xt(ut,lt,ft,Ct,null);if(typeof ft.then=="function")return pt(ut,lt,bu(ft),Ct);if(ft.$$typeof===A)return pt(ut,lt,Hc(ut,ft),Ct);Cu(ut,ft)}return null}function _t(ut,lt,ft,Ct,zt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return ut=ut.get(ft)||null,P(lt,ut,""+Ct,zt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case x:return ut=ut.get(Ct.key===null?ft:Ct.key)||null,et(lt,ut,Ct,zt);case b:return ut=ut.get(Ct.key===null?ft:Ct.key)||null,gt(lt,ut,Ct,zt);case H:var ge=Ct._init;return Ct=ge(Ct._payload),_t(ut,lt,ft,Ct,zt)}if(G(Ct)||J(Ct))return ut=ut.get(ft)||null,xt(lt,ut,Ct,zt,null);if(typeof Ct.then=="function")return _t(ut,lt,ft,bu(Ct),zt);if(Ct.$$typeof===A)return _t(ut,lt,ft,Hc(lt,Ct),zt);Cu(lt,Ct)}return null}function Xt(ut,lt,ft,Ct){for(var zt=null,ge=null,Ut=lt,qt=lt=0,ci=null;Ut!==null&&qt<ft.length;qt++){Ut.index>qt?(ci=Ut,Ut=null):ci=Ut.sibling;var Ne=pt(ut,Ut,ft[qt],Ct);if(Ne===null){Ut===null&&(Ut=ci);break}e&&Ut&&Ne.alternate===null&&a(ut,Ut),lt=C(Ne,lt,qt),ge===null?zt=Ne:ge.sibling=Ne,ge=Ne,Ut=ci}if(qt===ft.length)return u(ut,Ut),Ee&&oa(ut,qt),zt;if(Ut===null){for(;qt<ft.length;qt++)Ut=Rt(ut,ft[qt],Ct),Ut!==null&&(lt=C(Ut,lt,qt),ge===null?zt=Ut:ge.sibling=Ut,ge=Ut);return Ee&&oa(ut,qt),zt}for(Ut=d(Ut);qt<ft.length;qt++)ci=_t(Ut,ut,qt,ft[qt],Ct),ci!==null&&(e&&ci.alternate!==null&&Ut.delete(ci.key===null?qt:ci.key),lt=C(ci,lt,qt),ge===null?zt=ci:ge.sibling=ci,ge=ci);return e&&Ut.forEach(function(Co){return a(ut,Co)}),Ee&&oa(ut,qt),zt}function Yt(ut,lt,ft,Ct){if(ft==null)throw Error(s(151));for(var zt=null,ge=null,Ut=lt,qt=lt=0,ci=null,Ne=ft.next();Ut!==null&&!Ne.done;qt++,Ne=ft.next()){Ut.index>qt?(ci=Ut,Ut=null):ci=Ut.sibling;var Co=pt(ut,Ut,Ne.value,Ct);if(Co===null){Ut===null&&(Ut=ci);break}e&&Ut&&Co.alternate===null&&a(ut,Ut),lt=C(Co,lt,qt),ge===null?zt=Co:ge.sibling=Co,ge=Co,Ut=ci}if(Ne.done)return u(ut,Ut),Ee&&oa(ut,qt),zt;if(Ut===null){for(;!Ne.done;qt++,Ne=ft.next())Ne=Rt(ut,Ne.value,Ct),Ne!==null&&(lt=C(Ne,lt,qt),ge===null?zt=Ne:ge.sibling=Ne,ge=Ne);return Ee&&oa(ut,qt),zt}for(Ut=d(Ut);!Ne.done;qt++,Ne=ft.next())Ne=_t(Ut,ut,qt,Ne.value,Ct),Ne!==null&&(e&&Ne.alternate!==null&&Ut.delete(Ne.key===null?qt:Ne.key),lt=C(Ne,lt,qt),ge===null?zt=Ne:ge.sibling=Ne,ge=Ne);return e&&Ut.forEach(function(G5){return a(ut,G5)}),Ee&&oa(ut,qt),zt}function We(ut,lt,ft,Ct){if(typeof ft=="object"&&ft!==null&&ft.type===E&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case x:t:{for(var zt=ft.key;lt!==null;){if(lt.key===zt){if(zt=ft.type,zt===E){if(lt.tag===7){u(ut,lt.sibling),Ct=y(lt,ft.props.children),Ct.return=ut,ut=Ct;break t}}else if(lt.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===H&&$f(zt)===lt.type){u(ut,lt.sibling),Ct=y(lt,ft.props),ur(Ct,ft),Ct.return=ut,ut=Ct;break t}u(ut,lt);break}else a(ut,lt);lt=lt.sibling}ft.type===E?(Ct=Cs(ft.props.children,ut.mode,Ct,ft.key),Ct.return=ut,ut=Ct):(Ct=kr(ft.type,ft.key,ft.props,null,ut.mode,Ct),ur(Ct,ft),Ct.return=ut,ut=Ct)}return U(ut);case b:t:{for(zt=ft.key;lt!==null;){if(lt.key===zt)if(lt.tag===4&&lt.stateNode.containerInfo===ft.containerInfo&&lt.stateNode.implementation===ft.implementation){u(ut,lt.sibling),Ct=y(lt,ft.children||[]),Ct.return=ut,ut=Ct;break t}else{u(ut,lt);break}else a(ut,lt);lt=lt.sibling}Ct=ru(ft,ut.mode,Ct),Ct.return=ut,ut=Ct}return U(ut);case H:return zt=ft._init,ft=zt(ft._payload),We(ut,lt,ft,Ct)}if(G(ft))return Xt(ut,lt,ft,Ct);if(J(ft)){if(zt=J(ft),typeof zt!="function")throw Error(s(150));return ft=zt.call(ft),Yt(ut,lt,ft,Ct)}if(typeof ft.then=="function")return We(ut,lt,bu(ft),Ct);if(ft.$$typeof===A)return We(ut,lt,Hc(ut,ft),Ct);Cu(ut,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint"?(ft=""+ft,lt!==null&&lt.tag===6?(u(ut,lt.sibling),Ct=y(lt,ft),Ct.return=ut,ut=Ct):(u(ut,lt),Ct=wc(ft,ut.mode,Ct),Ct.return=ut,ut=Ct),U(ut)):u(ut,lt)}return function(ut,lt,ft,Ct){try{Ei=0;var zt=We(ut,lt,ft,Ct);return io=null,zt}catch(Ut){if(Ut===sr||Ut===lr)throw Ut;var ge=zi(29,Ut,null,ut.mode);return ge.lanes=Ct,ge.return=ut,ge}finally{}}}var ao=td(!0),ed=td(!1),Qi=Q(null),Ja=null;function dl(e){var a=e.alternate;nt(ce,ce.current&1),nt(Qi,e),Ja===null&&(a===null||Jr.current!==null||a.memoizedState!==null)&&(Ja=e)}function e1(e){if(e.tag===22){if(nt(ce,ce.current),nt(Qi,e),Ja===null){var a=e.alternate;a!==null&&a.memoizedState!==null&&(Ja=e)}}else Os()}function Os(){nt(ce,ce.current),nt(Qi,Qi.current)}function Ns(e){tt(Qi),Ja===e&&(Ja=null),tt(ce)}var ce=Q(0);function Ru(e){for(var a=e;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||ep(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function nd(e,a,u,d){a=e.memoizedState,u=u(d,a),u=u==null?a:_({},a,u),e.memoizedState=u,e.lanes===0&&(e.updateQueue.baseState=u)}var Zc={enqueueSetState:function(e,a,u){e=e._reactInternals;var d=fn(),y=Za(d);y.payload=a,u!=null&&(y.callback=u),a=Si(e,y,d),a!==null&&(Sn(a,e,d),or(a,e,d))},enqueueReplaceState:function(e,a,u){e=e._reactInternals;var d=fn(),y=Za(d);y.tag=1,y.payload=a,u!=null&&(y.callback=u),a=Si(e,y,d),a!==null&&(Sn(a,e,d),or(a,e,d))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var u=fn(),d=Za(u);d.tag=2,a!=null&&(d.callback=a),a=Si(e,d,u),a!==null&&(Sn(a,e,u),or(a,e,u))}};function id(e,a,u,d,y,C,U){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(d,C,U):a.prototype&&a.prototype.isPureReactComponent?!qr(u,d)||!qr(y,C):!0}function cr(e,a,u,d){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==e&&Zc.enqueueReplaceState(a,a.state,null)}function ws(e,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(e=e.defaultProps){u===a&&(u=_({},u));for(var y in e)u[y]===void 0&&(u[y]=e[y])}return u}var Ls=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function hr(e){Ls(e)}function ji(e){console.error(e)}function n1(e){Ls(e)}function Qc(e,a){try{var u=e.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function Tu(e,a,u){try{var d=e.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function so(e,a,u){return u=Za(u),u.tag=3,u.payload={element:null},u.callback=function(){Qc(e,a)},u}function Au(e){return e=Za(e),e.tag=3,e}function Wc(e,a,u,d){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var C=d.value;e.payload=function(){return y(C)},e.callback=function(){Tu(a,u,d)}}var U=u.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(e.callback=function(){Tu(a,u,d),typeof y!="function"&&(Rl===null?Rl=new Set([this]):Rl.add(this));var P=d.stack;this.componentDidCatch(d.value,{componentStack:P!==null?P:""})})}function jm(e,a,u,d,y){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&nr(a,u,y,!0),u=Qi.current,u!==null){switch(u.tag){case 13:return Ja===null?ss():u.alternate===null&&ne===0&&(ne=3),u.flags&=-257,u.flags|=65536,u.lanes=y,d===ul?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),At(e,d,y)),!1;case 22:return u.flags|=65536,d===ul?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),At(e,d,y)),!1}throw Error(s(435,u.tag))}return At(e,d,y),ss(),!1}if(Ee)return a=Qi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,d!==Tf&&(e=Error(s(422),{cause:d}),Zr(Gn(e,u)))):(d!==Tf&&(a=Error(s(423),{cause:d}),Zr(Gn(a,u))),e=e.current.alternate,e.flags|=65536,y&=-y,e.lanes|=y,d=Gn(d,u),y=so(e.stateNode,d,y),Lf(e,y),ne!==4&&(ne=2)),!1;var C=Error(s(520),{cause:d});if(C=Gn(C,u),bl===null?bl=[C]:bl.push(C),ne!==4&&(ne=2),a===null)return!0;d=Gn(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,e=y&-y,u.lanes|=e,e=so(u.stateNode,d,e),Lf(u,e),!1;case 1:if(a=u.type,C=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Rl===null||!Rl.has(C))))return u.flags|=65536,y&=-y,u.lanes|=y,y=Au(y),Wc(y,e,u,d),Lf(u,y),!1}u=u.return}while(u!==null);return!1}var i1=Error(s(461)),He=!1;function Hn(e,a,u,d){a.child=e===null?ed(a,null,u,d):ao(a,e.child,u,d)}function a1(e,a,u,d,y){u=u.render;var C=a.ref;if("ref"in d){var U={};for(var P in d)P!=="ref"&&(U[P]=d[P])}else U=d;return ol(a),d=Bi(e,a,u,U,C,y),P=Ta(),e!==null&&!He?(Uf(e,a,y),en(e,a,y)):(Ee&&P&&Lc(a),a.flags|=1,Hn(e,a,d,y),a.child)}function Jc(e,a,u,d,y){if(e===null){var C=u.type;return typeof C=="function"&&!Xr(C)&&C.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=C,s1(e,a,C,d,y)):(e=kr(u.type,null,d,a,a.mode,y),e.ref=a.ref,e.return=a,a.child=e)}if(C=e.child,!fr(e,y)){var U=C.memoizedProps;if(u=u.compare,u=u!==null?u:qr,u(U,d)&&e.ref===a.ref)return en(e,a,y)}return a.flags|=1,e=qa(C,d),e.ref=a.ref,e.return=a,a.child=e}function s1(e,a,u,d,y){if(e!==null){var C=e.memoizedProps;if(qr(C,d)&&e.ref===a.ref)if(He=!1,a.pendingProps=d=C,fr(e,y))(e.flags&131072)!==0&&(He=!0);else return a.lanes=e.lanes,en(e,a,y)}return xi(e,a,u,d,y)}function l1(e,a,u){var d=a.pendingProps,y=d.children,C=e!==null?e.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=C!==null?C.baseLanes|u:u,e!==null){for(y=a.child=e.child,C=0;y!==null;)C=C|y.lanes|y.childLanes,y=y.sibling;a.childLanes=C&~d}else a.childLanes=0,a.child=null;return r1(e,a,d,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ic(a,C!==null?C.cachePool:null),C!==null?$r(a,C):zf(),e1(a);else return a.lanes=a.childLanes=536870912,r1(e,a,C!==null?C.baseLanes|u:u,u)}else C!==null?(Ic(a,C.cachePool),$r(a,C),Os(),a.memoizedState=null):(e!==null&&Ic(a,null),zf(),Os());return Hn(e,a,y,u),a.child}function r1(e,a,u,d){var y=te();return y=y===null?null:{parent:mn._currentValue,pool:y},a.memoizedState={baseLanes:u,cachePool:y},e!==null&&Ic(a,null),zf(),e1(a),e!==null&&nr(e,a,d,!0),null}function gl(e,a){var u=a.ref;if(u===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(e===null||e.ref!==u)&&(a.flags|=4194816)}}function xi(e,a,u,d,y){return ol(a),u=Bi(e,a,u,d,void 0,y),d=Ta(),e!==null&&!He?(Uf(e,a,y),en(e,a,y)):(Ee&&d&&Lc(a),a.flags|=1,Hn(e,a,u,y),a.child)}function $c(e,a,u,d,y,C){return ol(a),a.updateQueue=null,u=Rg(a,d,u,y),Cg(e),d=Ta(),e!==null&&!He?(Uf(e,a,C),en(e,a,C)):(Ee&&d&&Lc(a),a.flags|=1,Hn(e,a,u,C),a.child)}function ad(e,a,u,d,y){if(ol(a),a.stateNode===null){var C=Jl,U=u.contextType;typeof U=="object"&&U!==null&&(C=si(U)),C=new u(d,C),a.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Zc,a.stateNode=C,C._reactInternals=a,C=a.stateNode,C.props=d,C.state=a.memoizedState,C.refs={},fu(a),U=u.contextType,C.context=typeof U=="object"&&U!==null?si(U):Jl,C.state=a.memoizedState,U=u.getDerivedStateFromProps,typeof U=="function"&&(nd(a,u,U,d),C.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(U=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),U!==C.state&&Zc.enqueueReplaceState(C,C.state,null),cl(a,d,C,y),gu(),C.state=a.memoizedState),typeof C.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(e===null){C=a.stateNode;var P=a.memoizedProps,et=ws(u,P);C.props=et;var gt=C.context,xt=u.contextType;U=Jl,typeof xt=="object"&&xt!==null&&(U=si(xt));var Rt=u.getDerivedStateFromProps;xt=typeof Rt=="function"||typeof C.getSnapshotBeforeUpdate=="function",P=a.pendingProps!==P,xt||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(P||gt!==U)&&cr(a,C,d,U),Ka=!1;var pt=a.memoizedState;C.state=pt,cl(a,d,C,y),gu(),gt=a.memoizedState,P||pt!==gt||Ka?(typeof Rt=="function"&&(nd(a,u,Rt,d),gt=a.memoizedState),(et=Ka||id(a,u,et,d,pt,gt,U))?(xt||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=gt),C.props=d,C.state=gt,C.context=U,d=et):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{C=a.stateNode,du(e,a),U=a.memoizedProps,xt=ws(u,U),C.props=xt,Rt=a.pendingProps,pt=C.context,gt=u.contextType,et=Jl,typeof gt=="object"&&gt!==null&&(et=si(gt)),P=u.getDerivedStateFromProps,(gt=typeof P=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(U!==Rt||pt!==et)&&cr(a,C,d,et),Ka=!1,pt=a.memoizedState,C.state=pt,cl(a,d,C,y),gu();var _t=a.memoizedState;U!==Rt||pt!==_t||Ka||e!==null&&e.dependencies!==null&&Bc(e.dependencies)?(typeof P=="function"&&(nd(a,u,P,d),_t=a.memoizedState),(xt=Ka||id(a,u,xt,d,pt,_t,et)||e!==null&&e.dependencies!==null&&Bc(e.dependencies))?(gt||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(d,_t,et),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(d,_t,et)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||U===e.memoizedProps&&pt===e.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===e.memoizedProps&&pt===e.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=_t),C.props=d,C.state=_t,C.context=et,d=xt):(typeof C.componentDidUpdate!="function"||U===e.memoizedProps&&pt===e.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===e.memoizedProps&&pt===e.memoizedState||(a.flags|=1024),d=!1)}return C=d,gl(e,a),d=(a.flags&128)!==0,C||d?(C=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:C.render(),a.flags|=1,e!==null&&d?(a.child=ao(a,e.child,null,y),a.child=ao(a,null,u,y)):Hn(e,a,u,y),a.memoizedState=C.state,e=a.child):e=en(e,a,y),e}function th(e,a,u,d){return Kr(),a.flags|=256,Hn(e,a,u,d),a.child}var eh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ml(e){return{baseLanes:e,cachePool:Ui()}}function pl(e,a,u){return e=e!==null?e.childLanes&~u:0,a&&(e|=Xn),e}function Mu(e,a,u){var d=a.pendingProps,y=!1,C=(a.flags&128)!==0,U;if((U=C)||(U=e!==null&&e.memoizedState===null?!1:(ce.current&2)!==0),U&&(y=!0,a.flags&=-129),U=(a.flags&32)!==0,a.flags&=-33,e===null){if(Ee){if(y?dl(a):Os(),Ee){var P=an,et;if(et=P){t:{for(et=P,P=Pa;et.nodeType!==8;){if(!P){P=null;break t}if(et=Is(et.nextSibling),et===null){P=null;break t}}P=et}P!==null?(a.memoizedState={dehydrated:P,treeContext:Gi!==null?{id:Fa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},et=zi(18,null,null,0),et.stateNode=P,et.return=a,a.child=et,ai=a,an=null,et=!0):et=!1}et||sl(a)}if(P=a.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return ep(P)?a.lanes=32:a.lanes=536870912,null;Ns(a)}return P=d.children,d=d.fallback,y?(Os(),y=a.mode,P=bi({mode:"hidden",children:P},y),d=Cs(d,y,u,null),P.return=a,d.return=a,P.sibling=d,a.child=P,y=a.child,y.memoizedState=ml(u),y.childLanes=pl(e,U,u),a.memoizedState=eh,d):(dl(a),lo(a,P))}if(et=e.memoizedState,et!==null&&(P=et.dehydrated,P!==null)){if(C)a.flags&256?(dl(a),a.flags&=-257,a=Yi(e,a,u)):a.memoizedState!==null?(Os(),a.child=e.child,a.flags|=128,a=null):(Os(),y=d.fallback,P=a.mode,d=bi({mode:"visible",children:d.children},P),y=Cs(y,P,u,null),y.flags|=2,d.return=a,y.return=a,d.sibling=y,a.child=d,ao(a,e.child,null,u),d=a.child,d.memoizedState=ml(u),d.childLanes=pl(e,U,u),a.memoizedState=eh,a=y);else if(dl(a),ep(P)){if(U=P.nextSibling&&P.nextSibling.dataset,U)var gt=U.dgst;U=gt,d=Error(s(419)),d.stack="",d.digest=U,Zr({value:d,source:null,stack:null}),a=Yi(e,a,u)}else if(He||nr(e,a,u,!1),U=(u&e.childLanes)!==0,He||U){if(U=Ie,U!==null&&(d=u&-u,d=(d&42)!==0?1:aa(d),d=(d&(U.suspendedLanes|u))!==0?0:d,d!==0&&d!==et.retryLane))throw et.retryLane=d,Va(e,d),Sn(U,e,d),i1;P.data==="$?"||ss(),a=Yi(e,a,u)}else P.data==="$?"?(a.flags|=192,a.child=e.child,a=null):(e=et.treeContext,an=Is(P.nextSibling),ai=a,Ee=!0,tr=null,Pa=!1,e!==null&&(Zi[ra++]=Fa,Zi[ra++]=Ca,Zi[ra++]=Gi,Fa=e.id,Ca=e.overflow,Gi=a),a=lo(a,d.children),a.flags|=4096);return a}return y?(Os(),y=d.fallback,P=a.mode,et=e.child,gt=et.sibling,d=qa(et,{mode:"hidden",children:d.children}),d.subtreeFlags=et.subtreeFlags&65011712,gt!==null?y=qa(gt,y):(y=Cs(y,P,u,null),y.flags|=2),y.return=a,d.return=a,d.sibling=y,a.child=d,d=y,y=a.child,P=e.child.memoizedState,P===null?P=ml(u):(et=P.cachePool,et!==null?(gt=mn._currentValue,et=et.parent!==gt?{parent:gt,pool:gt}:et):et=Ui(),P={baseLanes:P.baseLanes|u,cachePool:et}),y.memoizedState=P,y.childLanes=pl(e,U,u),a.memoizedState=eh,d):(dl(a),u=e.child,e=u.sibling,u=qa(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,e!==null&&(U=a.deletions,U===null?(a.deletions=[e],a.flags|=16):U.push(e)),a.child=u,a.memoizedState=null,u)}function lo(e,a){return a=bi({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function bi(e,a){return e=zi(22,e,null,a),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Yi(e,a,u){return ao(a,e.child,null,u),e=lo(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function _l(e,a,u){e.lanes|=a;var d=e.alternate;d!==null&&(d.lanes|=a),Uc(e.return,a,u)}function Aa(e,a,u,d,y){var C=e.memoizedState;C===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:y}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=u,C.tailMode=y)}function $a(e,a,u){var d=a.pendingProps,y=d.revealOrder,C=d.tail;if(Hn(e,a,d.children,u),d=ce.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_l(e,u,a);else if(e.tag===19)_l(e,u,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break t;for(;e.sibling===null;){if(e.return===null||e.return===a)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}d&=1}switch(nt(ce,d),y){case"forwards":for(u=a.child,y=null;u!==null;)e=u.alternate,e!==null&&Ru(e)===null&&(y=u),u=u.sibling;u=y,u===null?(y=a.child,a.child=null):(y=u.sibling,u.sibling=null),Aa(a,!1,y,u,C);break;case"backwards":for(u=null,y=a.child,a.child=null;y!==null;){if(e=y.alternate,e!==null&&Ru(e)===null){a.child=y;break}e=y.sibling,y.sibling=u,u=y,y=e}Aa(a,!0,u,null,C);break;case"together":Aa(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function en(e,a,u){if(e!==null&&(a.dependencies=e.dependencies),Pe|=a.lanes,(u&a.childLanes)===0)if(e!==null){if(nr(e,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(s(153));if(a.child!==null){for(e=a.child,u=qa(e,e.pendingProps),a.child=u,u.return=a;e.sibling!==null;)e=e.sibling,u=u.sibling=qa(e,e.pendingProps),u.return=a;u.sibling=null}return a.child}function fr(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&Bc(e)))}function yl(e,a,u){switch(a.tag){case 3:Z(a,a.stateNode.containerInfo),ua(a,mn,e.memoizedState.cache),Kr();break;case 27:case 5:Et(a);break;case 4:Z(a,a.stateNode.containerInfo);break;case 10:ua(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(dl(a),a.flags|=128,null):(u&a.child.childLanes)!==0?Mu(e,a,u):(dl(a),e=en(e,a,u),e!==null?e.sibling:null);dl(a);break;case 19:var y=(e.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(nr(e,a,u,!1),d=(u&a.childLanes)!==0),y){if(d)return $a(e,a,u);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),nt(ce,ce.current),d)break;return null;case 22:case 23:return a.lanes=0,l1(e,a,u);case 24:ua(a,mn,e.memoizedState.cache)}return en(e,a,u)}function Du(e,a,u){if(e!==null)if(e.memoizedProps!==a.pendingProps)He=!0;else{if(!fr(e,u)&&(a.flags&128)===0)return He=!1,yl(e,a,u);He=(e.flags&131072)!==0}else He=!1,Ee&&(a.flags&1048576)!==0&&Rf(a,ou,a.index);switch(a.lanes=0,a.tag){case 16:t:{e=a.pendingProps;var d=a.elementType,y=d._init;if(d=y(d._payload),a.type=d,typeof d=="function")Xr(d)?(e=ws(d,e),a.tag=1,a=ad(null,a,d,e,u)):(a.tag=0,a=xi(null,a,d,e,u));else{if(d!=null){if(y=d.$$typeof,y===N){a.tag=11,a=a1(null,a,d,e,u);break t}else if(y===K){a.tag=14,a=Jc(null,a,d,e,u);break t}}throw a=V(d)||d,Error(s(306,a,""))}}return a;case 0:return xi(e,a,a.type,a.pendingProps,u);case 1:return d=a.type,y=ws(d,a.pendingProps),ad(e,a,d,y,u);case 3:t:{if(Z(a,a.stateNode.containerInfo),e===null)throw Error(s(387));d=a.pendingProps;var C=a.memoizedState;y=C.element,du(e,a),cl(a,d,null,u);var U=a.memoizedState;if(d=U.cache,ua(a,mn,d),d!==C.cache&&Me(a,[mn],u,!0),gu(),d=U.element,C.isDehydrated)if(C={element:d,isDehydrated:!1,cache:U.cache},a.updateQueue.baseState=C,a.memoizedState=C,a.flags&256){a=th(e,a,d,u);break t}else if(d!==y){y=Gn(Error(s(424)),a),Zr(y),a=th(e,a,d,u);break t}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(an=Is(e.firstChild),ai=a,Ee=!0,tr=null,Pa=!0,u=ed(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Kr(),d===y){a=en(e,a,u);break t}Hn(e,a,d,u)}a=a.child}return a;case 26:return gl(e,a),e===null?(u=q2(a.type,null,a.pendingProps,null))?a.memoizedState=u:Ee||(u=a.type,e=a.pendingProps,d=g1(St.current).createElement(u),d[Ae]=a,d[oe]=e,Ai(d,u,e),An(d),a.stateNode=d):a.memoizedState=q2(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return Et(a),e===null&&Ee&&(d=a.stateNode=j2(a.type,a.pendingProps,St.current),ai=a,Pa=!0,y=an,vo(a.type)?(np=y,an=Is(d.firstChild)):an=y),Hn(e,a,a.pendingProps.children,u),gl(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&Ee&&((y=d=an)&&(d=c5(d,a.type,a.pendingProps,Pa),d!==null?(a.stateNode=d,ai=a,an=Is(d.firstChild),Pa=!1,y=!0):y=!1),y||sl(a)),Et(a),y=a.type,C=a.pendingProps,U=e!==null?e.memoizedProps:null,d=C.children,Jm(y,C)?d=null:U!==null&&Jm(y,U)&&(a.flags|=32),a.memoizedState!==null&&(y=Bi(e,a,Bn,null,null,u),pd._currentValue=y),gl(e,a),Hn(e,a,d,u),a.child;case 6:return e===null&&Ee&&((e=u=an)&&(u=h5(u,a.pendingProps,Pa),u!==null?(a.stateNode=u,ai=a,an=null,e=!0):e=!1),e||sl(a)),null;case 13:return Mu(e,a,u);case 4:return Z(a,a.stateNode.containerInfo),d=a.pendingProps,e===null?a.child=ao(a,null,d,u):Hn(e,a,d,u),a.child;case 11:return a1(e,a,a.type,a.pendingProps,u);case 7:return Hn(e,a,a.pendingProps,u),a.child;case 8:return Hn(e,a,a.pendingProps.children,u),a.child;case 12:return Hn(e,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,ua(a,a.type,d.value),Hn(e,a,d.children,u),a.child;case 9:return y=a.type._context,d=a.pendingProps.children,ol(a),y=si(y),d=d(y),a.flags|=1,Hn(e,a,d,u),a.child;case 14:return Jc(e,a,a.type,a.pendingProps,u);case 15:return s1(e,a,a.type,a.pendingProps,u);case 19:return $a(e,a,u);case 31:return d=a.pendingProps,u=a.mode,d={mode:d.mode,children:d.children},e===null?(u=bi(d,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=qa(e.child,d),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return l1(e,a,u);case 24:return ol(a),d=si(mn),e===null?(y=te(),y===null&&(y=Ie,C=Qr(),y.pooledCache=C,C.refCount++,C!==null&&(y.pooledCacheLanes|=u),y=C),a.memoizedState={parent:d,cache:y},fu(a),ua(a,mn,y)):((e.lanes&u)!==0&&(du(e,a),cl(a,null,null,u),gu()),y=e.memoizedState,C=a.memoizedState,y.parent!==d?(y={parent:d,cache:d},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),ua(a,mn,d)):(d=C.cache,ua(a,mn,d),d!==y.cache&&Me(a,[mn],u,!0))),Hn(e,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function rn(e){e.flags|=4}function _n(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!K2(a)){if(a=Qi.current,a!==null&&((pe&4194048)===pe?Ja!==null:(pe&62914560)!==pe&&(pe&536870912)===0||a!==Ja))throw hu=ul,xg;e.flags|=8192}}function ve(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?xa():536870912,e.lanes|=a,fo|=a)}function Ma(e,a){if(!Ee)switch(e.tailMode){case"hidden":a=e.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?e.tail=null:u.sibling=null;break;case"collapsed":u=e.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:d.sibling=null}}function Te(e){var a=e.alternate!==null&&e.alternate.child===e.child,u=0,d=0;if(a)for(var y=e.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=d,e.childLanes=u,a}function sd(e,a,u){var d=a.pendingProps;switch(zc(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(a),null;case 1:return Te(a),null;case 3:return u=a.stateNode,d=null,e!==null&&(d=e.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),ka(mn),dt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(ll(a)?rn(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Mf())),Te(a),null;case 26:return u=a.memoizedState,e===null?(rn(a),u!==null?(Te(a),_n(a,u)):(Te(a),a.flags&=-16777217)):u?u!==e.memoizedState?(rn(a),Te(a),_n(a,u)):(Te(a),a.flags&=-16777217):(e.memoizedProps!==d&&rn(a),Te(a),a.flags&=-16777217),null;case 27:Tt(a),u=St.current;var y=a.type;if(e!==null&&a.stateNode!=null)e.memoizedProps!==d&&rn(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return Te(a),null}e=ht.current,ll(a)?Af(a):(e=j2(y,d,u),a.stateNode=e,rn(a))}return Te(a),null;case 5:if(Tt(a),u=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==d&&rn(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return Te(a),null}if(e=ht.current,ll(a))Af(a);else{switch(y=g1(St.current),e){case 1:e=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:e=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":e=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":e=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?e.multiple=!0:d.size&&(e.size=d.size);break;default:e=typeof d.is=="string"?y.createElement(u,{is:d.is}):y.createElement(u)}}e[Ae]=a,e[oe]=d;t:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)e.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break t;for(;y.sibling===null;){if(y.return===null||y.return===a)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=e;t:switch(Ai(e,u,d),u){case"button":case"input":case"select":case"textarea":e=!!d.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&rn(a)}}return Te(a),a.flags&=-16777217,null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==d&&rn(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(s(166));if(e=St.current,ll(a)){if(e=a.stateNode,u=a.memoizedProps,d=null,y=ai,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}e[Ae]=a,e=!!(e.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||L2(e.nodeValue,u)),e||sl(a)}else e=g1(e).createTextNode(d),e[Ae]=a,a.stateNode=e}return Te(a),null;case 13:if(d=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(y=ll(a),d!==null&&d.dehydrated!==null){if(e===null){if(!y)throw Error(s(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Ae]=a}else Kr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Te(a),y=!1}else y=Mf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(Ns(a),a):(Ns(a),null)}if(Ns(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=d!==null,e=e!==null&&e.memoizedState!==null,u){d=a.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var C=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(C=d.memoizedState.cachePool.pool),C!==y&&(d.flags|=2048)}return u!==e&&u&&(a.child.flags|=8192),ve(a,a.updateQueue),Te(a),null;case 4:return dt(),e===null&&km(a.stateNode.containerInfo),Te(a),null;case 10:return ka(a.type),Te(a),null;case 19:if(tt(ce),y=a.memoizedState,y===null)return Te(a),null;if(d=(a.flags&128)!==0,C=y.rendering,C===null)if(d)Ma(y,!1);else{if(ne!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(C=Ru(e),C!==null){for(a.flags|=128,Ma(y,!1),e=C.updateQueue,a.updateQueue=e,ve(a,e),a.subtreeFlags=0,e=u,u=a.child;u!==null;)Nc(u,e),u=u.sibling;return nt(ce,ce.current&1|2),a.child}e=e.sibling}y.tail!==null&&Qt()>mr&&(a.flags|=128,d=!0,Ma(y,!1),a.lanes=4194304)}else{if(!d)if(e=Ru(C),e!==null){if(a.flags|=128,d=!0,e=e.updateQueue,a.updateQueue=e,ve(a,e),Ma(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!Ee)return Te(a),null}else 2*Qt()-y.renderingStartTime>mr&&u!==536870912&&(a.flags|=128,d=!0,Ma(y,!1),a.lanes=4194304);y.isBackwards?(C.sibling=a.child,a.child=C):(e=y.last,e!==null?e.sibling=C:a.child=C,y.last=C)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=Qt(),a.sibling=null,e=ce.current,nt(ce,d?e&1|2:e&1),a):(Te(a),null);case 22:case 23:return Ns(a),Gf(),d=a.memoizedState!==null,e!==null?e.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(Te(a),a.subtreeFlags&6&&(a.flags|=8192)):Te(a),u=a.updateQueue,u!==null&&ve(a,u.retryQueue),u=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(u=e.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),e!==null&&tt(Ts),null;case 24:return u=null,e!==null&&(u=e.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ka(mn),Te(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function Wi(e,a){switch(zc(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return ka(mn),dt(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return Tt(a),null;case 13:if(Ns(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Kr()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return tt(ce),null;case 4:return dt(),null;case 10:return ka(a.type),null;case 22:case 23:return Ns(a),Gf(),e!==null&&tt(Ts),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return ka(mn),null;case 25:return null;default:return null}}function Ou(e,a){switch(zc(a),a.tag){case 3:ka(mn),dt();break;case 26:case 27:case 5:Tt(a);break;case 4:dt();break;case 13:Ns(a);break;case 19:tt(ce);break;case 10:ka(a.type);break;case 22:case 23:Ns(a),Gf(),e!==null&&tt(Ts);break;case 24:ka(mn)}}function Da(e,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var y=d.next;u=y;do{if((u.tag&e)===e){d=void 0;var C=u.create,U=u.inst;d=C(),U.destroy=d}u=u.next}while(u!==y)}}catch(P){ct(a,a.return,P)}}function li(e,a,u){try{var d=a.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var C=y.next;d=C;do{if((d.tag&e)===e){var U=d.inst,P=U.destroy;if(P!==void 0){U.destroy=void 0,y=a;var et=u,gt=P;try{gt()}catch(xt){ct(y,et,xt)}}}d=d.next}while(d!==C)}}catch(xt){ct(a,a.return,xt)}}function o1(e){var a=e.updateQueue;if(a!==null){var u=e.stateNode;try{bg(a,u)}catch(d){ct(e,e.return,d)}}}function u1(e,a,u){u.props=ws(e.type,e.memoizedProps),u.state=e.memoizedState;try{u.componentWillUnmount()}catch(d){ct(e,a,d)}}function Nu(e,a){try{var u=e.ref;if(u!==null){switch(e.tag){case 26:case 27:case 5:var d=e.stateNode;break;case 30:d=e.stateNode;break;default:d=e.stateNode}typeof u=="function"?e.refCleanup=u(d):u.current=d}}catch(y){ct(e,a,y)}}function De(e,a){var u=e.ref,d=e.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(y){ct(e,a,y)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){ct(e,a,y)}else u.current=null}function wu(e){var a=e.type,u=e.memoizedProps,d=e.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break t;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(y){ct(e,e.return,y)}}function vl(e,a,u){try{var d=e.stateNode;s5(d,e.type,u,a),d[oe]=a}catch(y){ct(e,e.return,y)}}function nh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&vo(e.type)||e.tag===4}function ro(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||nh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&vo(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lu(e,a,u){var d=e.tag;if(d===5||d===6)e=e.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(e,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(e),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=d1));else if(d!==4&&(d===27&&vo(e.type)&&(u=e.stateNode,a=null),e=e.child,e!==null))for(Lu(e,a,u),e=e.sibling;e!==null;)Lu(e,a,u),e=e.sibling}function zs(e,a,u){var d=e.tag;if(d===5||d===6)e=e.stateNode,a?u.insertBefore(e,a):u.appendChild(e);else if(d!==4&&(d===27&&vo(e.type)&&(u=e.stateNode),e=e.child,e!==null))for(zs(e,a,u),e=e.sibling;e!==null;)zs(e,a,u),e=e.sibling}function oo(e){var a=e.stateNode,u=e.memoizedProps;try{for(var d=e.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Ai(a,d,u),a[Ae]=e,a[oe]=u}catch(C){ct(e,e.return,C)}}var Oa=!1,ke=!1,Sl=!1,ld=typeof WeakSet=="function"?WeakSet:Set,sn=null;function Ym(e,a){if(e=e.containerInfo,Qm=S1,e=Ef(e),Zl(e)){if("selectionStart"in e)var u={start:e.selectionStart,end:e.selectionEnd};else t:{u=(u=e.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var y=d.anchorOffset,C=d.focusNode;d=d.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break t}var U=0,P=-1,et=-1,gt=0,xt=0,Rt=e,pt=null;e:for(;;){for(var _t;Rt!==u||y!==0&&Rt.nodeType!==3||(P=U+y),Rt!==C||d!==0&&Rt.nodeType!==3||(et=U+d),Rt.nodeType===3&&(U+=Rt.nodeValue.length),(_t=Rt.firstChild)!==null;)pt=Rt,Rt=_t;for(;;){if(Rt===e)break e;if(pt===u&&++gt===y&&(P=U),pt===C&&++xt===d&&(et=U),(_t=Rt.nextSibling)!==null)break;Rt=pt,pt=Rt.parentNode}Rt=_t}u=P===-1||et===-1?null:{start:P,end:et}}else u=null}u=u||{start:0,end:0}}else u=null;for(Wm={focusedElem:e,selectionRange:u},S1=!1,sn=a;sn!==null;)if(a=sn,e=a.child,(a.subtreeFlags&1024)!==0&&e!==null)e.return=a,sn=e;else for(;sn!==null;){switch(a=sn,C=a.alternate,e=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&C!==null){e=void 0,u=a,y=C.memoizedProps,C=C.memoizedState,d=u.stateNode;try{var Xt=ws(u.type,y,u.elementType===u.type);e=d.getSnapshotBeforeUpdate(Xt,C),d.__reactInternalSnapshotBeforeUpdate=e}catch(Yt){ct(u,u.return,Yt)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,u=e.nodeType,u===9)tp(e);else if(u===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":tp(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=a.sibling,e!==null){e.return=a.return,sn=e;break}sn=a.return}}function uo(e,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:me(e,u),d&4&&Da(5,u);break;case 1:if(me(e,u),d&4)if(e=u.stateNode,a===null)try{e.componentDidMount()}catch(U){ct(u,u.return,U)}else{var y=ws(u.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(y,a,e.__reactInternalSnapshotBeforeUpdate)}catch(U){ct(u,u.return,U)}}d&64&&o1(u),d&512&&Nu(u,u.return);break;case 3:if(me(e,u),d&64&&(e=u.updateQueue,e!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{bg(e,a)}catch(U){ct(u,u.return,U)}}break;case 27:a===null&&d&4&&oo(u);case 26:case 5:me(e,u),a===null&&d&4&&wu(u),d&512&&Nu(u,u.return);break;case 12:me(e,u);break;case 13:me(e,u),d&4&&dr(e,u),d&64&&(e=u.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(u=wt.bind(null,u),f5(e,u))));break;case 22:if(d=u.memoizedState!==null||Oa,!d){a=a!==null&&a.memoizedState!==null||ke,y=Oa;var C=ke;Oa=d,(ke=a)&&!C?Na(e,u,(u.subtreeFlags&8772)!==0):me(e,u),Oa=y,ke=C}break;case 30:break;default:me(e,u)}}function ih(e){var a=e.alternate;a!==null&&(e.alternate=null,ih(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&qo(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fe=null,Pn=!1;function Vi(e,a,u){for(u=u.child;u!==null;)Ji(e,a,u),u=u.sibling}function Ji(e,a,u){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(Le,u)}catch{}switch(u.tag){case 26:ke||De(u,a),Vi(e,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:ke||De(u,a);var d=Fe,y=Pn;vo(u.type)&&(Fe=u.stateNode,Pn=!1),Vi(e,a,u),fd(u.stateNode),Fe=d,Pn=y;break;case 5:ke||De(u,a);case 6:if(d=Fe,y=Pn,Fe=null,Vi(e,a,u),Fe=d,Pn=y,Fe!==null)if(Pn)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(u.stateNode)}catch(C){ct(u,a,C)}else try{Fe.removeChild(u.stateNode)}catch(C){ct(u,a,C)}break;case 18:Fe!==null&&(Pn?(e=Fe,H2(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,u.stateNode),Sd(e)):H2(Fe,u.stateNode));break;case 4:d=Fe,y=Pn,Fe=u.stateNode.containerInfo,Pn=!0,Vi(e,a,u),Fe=d,Pn=y;break;case 0:case 11:case 14:case 15:ke||li(2,u,a),ke||li(4,u,a),Vi(e,a,u);break;case 1:ke||(De(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&u1(u,a,d)),Vi(e,a,u);break;case 21:Vi(e,a,u);break;case 22:ke=(d=ke)||u.memoizedState!==null,Vi(e,a,u),ke=d;break;default:Vi(e,a,u)}}function dr(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Sd(e)}catch(u){ct(a,a.return,u)}}function rd(e){switch(e.tag){case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new ld),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new ld),a;default:throw Error(s(435,e.tag))}}function ts(e,a){var u=rd(e);a.forEach(function(d){var y=Jt.bind(null,e,d);u.has(d)||(u.add(d),d.then(y,y))})}function Ci(e,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var y=u[d],C=e,U=a,P=U;t:for(;P!==null;){switch(P.tag){case 27:if(vo(P.type)){Fe=P.stateNode,Pn=!1;break t}break;case 5:Fe=P.stateNode,Pn=!1;break t;case 3:case 4:Fe=P.stateNode.containerInfo,Pn=!0;break t}P=P.return}if(Fe===null)throw Error(s(160));Ji(C,U,y),Fe=null,Pn=!1,C=y.alternate,C!==null&&(C.return=null),y.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)zu(a,e),a=a.sibling}var ri=null;function zu(e,a){var u=e.alternate,d=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ci(a,e),yn(e),d&4&&(li(3,e,e.return),Da(3,e),li(5,e,e.return));break;case 1:Ci(a,e),yn(e),d&512&&(ke||u===null||De(u,u.return)),d&64&&Oa&&(e=e.updateQueue,e!==null&&(d=e.callbacks,d!==null&&(u=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var y=ri;if(Ci(a,e),yn(e),d&512&&(ke||u===null||De(u,u.return)),d&4){var C=u!==null?u.memoizedState:null;if(d=e.memoizedState,u===null)if(d===null)if(e.stateNode===null){t:{d=e.type,u=e.memoizedProps,y=y.ownerDocument||y;e:switch(d){case"title":C=y.getElementsByTagName("title")[0],(!C||C[ms]||C[Ae]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=y.createElement(d),y.head.insertBefore(C,y.querySelector("head > title"))),Ai(C,d,u),C[Ae]=e,An(C),d=C;break t;case"link":var U=X2("link","href",y).get(d+(u.href||""));if(U){for(var P=0;P<U.length;P++)if(C=U[P],C.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&C.getAttribute("rel")===(u.rel==null?null:u.rel)&&C.getAttribute("title")===(u.title==null?null:u.title)&&C.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){U.splice(P,1);break e}}C=y.createElement(d),Ai(C,d,u),y.head.appendChild(C);break;case"meta":if(U=X2("meta","content",y).get(d+(u.content||""))){for(P=0;P<U.length;P++)if(C=U[P],C.getAttribute("content")===(u.content==null?null:""+u.content)&&C.getAttribute("name")===(u.name==null?null:u.name)&&C.getAttribute("property")===(u.property==null?null:u.property)&&C.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&C.getAttribute("charset")===(u.charSet==null?null:u.charSet)){U.splice(P,1);break e}}C=y.createElement(d),Ai(C,d,u),y.head.appendChild(C);break;default:throw Error(s(468,d))}C[Ae]=e,An(C),d=C}e.stateNode=d}else k2(y,e.type,e.stateNode);else e.stateNode=P2(y,d,e.memoizedProps);else C!==d?(C===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):C.count--,d===null?k2(y,e.type,e.stateNode):P2(y,d,e.memoizedProps)):d===null&&e.stateNode!==null&&vl(e,e.memoizedProps,u.memoizedProps)}break;case 27:Ci(a,e),yn(e),d&512&&(ke||u===null||De(u,u.return)),u!==null&&d&4&&vl(e,e.memoizedProps,u.memoizedProps);break;case 5:if(Ci(a,e),yn(e),d&512&&(ke||u===null||De(u,u.return)),e.flags&32){y=e.stateNode;try{Vl(y,"")}catch(_t){ct(e,e.return,_t)}}d&4&&e.stateNode!=null&&(y=e.memoizedProps,vl(e,y,u!==null?u.memoizedProps:y)),d&1024&&(Sl=!0);break;case 6:if(Ci(a,e),yn(e),d&4){if(e.stateNode===null)throw Error(s(162));d=e.memoizedProps,u=e.stateNode;try{u.nodeValue=d}catch(_t){ct(e,e.return,_t)}}break;case 3:if(_1=null,y=ri,ri=m1(a.containerInfo),Ci(a,e),ri=y,yn(e),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Sd(a.containerInfo)}catch(_t){ct(e,e.return,_t)}Sl&&(Sl=!1,$t(e));break;case 4:d=ri,ri=m1(e.stateNode.containerInfo),Ci(a,e),yn(e),ri=d;break;case 12:Ci(a,e),yn(e);break;case 13:Ci(a,e),yn(e),e.child.flags&8192&&e.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(mo=Qt()),d&4&&(d=e.updateQueue,d!==null&&(e.updateQueue=null,ts(e,d)));break;case 22:y=e.memoizedState!==null;var et=u!==null&&u.memoizedState!==null,gt=Oa,xt=ke;if(Oa=gt||y,ke=xt||et,Ci(a,e),ke=xt,Oa=gt,yn(e),d&8192)t:for(a=e.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(u===null||et||Oa||ke||Ke(e)),u=null,a=e;;){if(a.tag===5||a.tag===26){if(u===null){et=u=a;try{if(C=et.stateNode,y)U=C.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{P=et.stateNode;var Rt=et.memoizedProps.style,pt=Rt!=null&&Rt.hasOwnProperty("display")?Rt.display:null;P.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(_t){ct(et,et.return,_t)}}}else if(a.tag===6){if(u===null){et=a;try{et.stateNode.nodeValue=y?"":et.memoizedProps}catch(_t){ct(et,et.return,_t)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break t;for(;a.sibling===null;){if(a.return===null||a.return===e)break t;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=e.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,ts(e,u))));break;case 19:Ci(a,e),yn(e),d&4&&(d=e.updateQueue,d!==null&&(e.updateQueue=null,ts(e,d)));break;case 30:break;case 21:break;default:Ci(a,e),yn(e)}}function yn(e){var a=e.flags;if(a&2){try{for(var u,d=e.return;d!==null;){if(nh(d)){u=d;break}d=d.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var y=u.stateNode,C=ro(e);zs(e,C,y);break;case 5:var U=u.stateNode;u.flags&32&&(Vl(U,""),u.flags&=-33);var P=ro(e);zs(e,P,U);break;case 3:case 4:var et=u.stateNode.containerInfo,gt=ro(e);Lu(e,gt,et);break;default:throw Error(s(161))}}catch(xt){ct(e,e.return,xt)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function $t(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;$t(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function me(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)uo(e,a.alternate,a),a=a.sibling}function Ke(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:li(4,a,a.return),Ke(a);break;case 1:De(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&u1(a,a.return,u),Ke(a);break;case 27:fd(a.stateNode);case 26:case 5:De(a,a.return),Ke(a);break;case 22:a.memoizedState===null&&Ke(a);break;case 30:Ke(a);break;default:Ke(a)}e=e.sibling}}function Na(e,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,y=e,C=a,U=C.flags;switch(C.tag){case 0:case 11:case 15:Na(y,C,u),Da(4,C);break;case 1:if(Na(y,C,u),d=C,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(gt){ct(d,d.return,gt)}if(d=C,y=d.updateQueue,y!==null){var P=d.stateNode;try{var et=y.shared.hiddenCallbacks;if(et!==null)for(y.shared.hiddenCallbacks=null,y=0;y<et.length;y++)Bt(et[y],P)}catch(gt){ct(d,d.return,gt)}}u&&U&64&&o1(C),Nu(C,C.return);break;case 27:oo(C);case 26:case 5:Na(y,C,u),u&&d===null&&U&4&&wu(C),Nu(C,C.return);break;case 12:Na(y,C,u);break;case 13:Na(y,C,u),u&&U&4&&dr(y,C);break;case 22:C.memoizedState===null&&Na(y,C,u),Nu(C,C.return);break;case 30:break;default:Na(y,C,u)}a=a.sibling}}function El(e,a){var u=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(u=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==u&&(e!=null&&e.refCount++,u!=null&&Ra(u))}function Gs(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Ra(e))}function $i(e,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)co(e,a,u,d),a=a.sibling}function co(e,a,u,d){var y=a.flags;switch(a.tag){case 0:case 11:case 15:$i(e,a,u,d),y&2048&&Da(9,a);break;case 1:$i(e,a,u,d);break;case 3:$i(e,a,u,d),y&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Ra(e)));break;case 12:if(y&2048){$i(e,a,u,d),e=a.stateNode;try{var C=a.memoizedProps,U=C.id,P=C.onPostCommit;typeof P=="function"&&P(U,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(et){ct(a,a.return,et)}}else $i(e,a,u,d);break;case 13:$i(e,a,u,d);break;case 23:break;case 22:C=a.stateNode,U=a.alternate,a.memoizedState!==null?C._visibility&2?$i(e,a,u,d):Gu(e,a):C._visibility&2?$i(e,a,u,d):(C._visibility|=2,wa(e,a,u,d,(a.subtreeFlags&10256)!==0)),y&2048&&El(U,a);break;case 24:$i(e,a,u,d),y&2048&&Gs(a.alternate,a);break;default:$i(e,a,u,d)}}function wa(e,a,u,d,y){for(y=y&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var C=e,U=a,P=u,et=d,gt=U.flags;switch(U.tag){case 0:case 11:case 15:wa(C,U,P,et,y),Da(8,U);break;case 23:break;case 22:var xt=U.stateNode;U.memoizedState!==null?xt._visibility&2?wa(C,U,P,et,y):Gu(C,U):(xt._visibility|=2,wa(C,U,P,et,y)),y&&gt&2048&&El(U.alternate,U);break;case 24:wa(C,U,P,et,y),y&&gt&2048&&Gs(U.alternate,U);break;default:wa(C,U,P,et,y)}a=a.sibling}}function Gu(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=e,d=a,y=d.flags;switch(d.tag){case 22:Gu(u,d),y&2048&&El(d.alternate,d);break;case 24:Gu(u,d),y&2048&&Gs(d.alternate,d);break;default:Gu(u,d)}a=a.sibling}}var xl=8192;function gr(e){if(e.subtreeFlags&xl)for(e=e.child;e!==null;)od(e),e=e.sibling}function od(e){switch(e.tag){case 26:gr(e),e.flags&xl&&e.memoizedState!==null&&R5(ri,e.memoizedState,e.memoizedProps);break;case 5:gr(e);break;case 3:case 4:var a=ri;ri=m1(e.stateNode.containerInfo),gr(e),ri=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=xl,xl=16777216,gr(e),xl=a):gr(e));break;default:gr(e)}}function c1(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function es(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];sn=d,ud(d,e)}c1(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ho(e),e=e.sibling}function ho(e){switch(e.tag){case 0:case 11:case 15:es(e),e.flags&2048&&li(9,e,e.return);break;case 3:es(e);break;case 12:es(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,Us(e)):es(e);break;default:es(e)}}function Us(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];sn=d,ud(d,e)}c1(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:li(8,a,a.return),Us(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Us(a));break;default:Us(a)}e=e.sibling}}function ud(e,a){for(;sn!==null;){var u=sn;switch(u.tag){case 0:case 11:case 15:li(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ra(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,sn=d;else t:for(u=e;sn!==null;){d=sn;var y=d.sibling,C=d.return;if(ih(d),d===u){sn=null;break t}if(y!==null){y.return=C,sn=y;break t}sn=C}}}var ha={getCacheForType:function(e){var a=si(mn),u=a.data.get(e);return u===void 0&&(u=e(),a.data.set(e,u)),u}},ns=typeof WeakMap=="function"?WeakMap:Map,Ft=0,Ie=null,ue=null,pe=0,Pt=0,Ri=null,oi=!1,Ze=!1,Uu=!1,is=0,ne=0,Pe=0,vn=0,ta=0,Xn=0,fo=0,bl=null,kn=null,go=!1,mo=0,mr=1/0,Cl=null,Rl=null,It=0,xe=null,Wt=null,ie=0,Oe=0,Ti=null,Bs=null,as=0,Bu=null;function fn(){if((Ft&2)!==0&&pe!==0)return pe&-pe;if(B.T!==null){var e=Wr;return e!==0?e:qm()}return $n()}function on(){Xn===0&&(Xn=(pe&536870912)===0||Ee?ks():536870912);var e=Qi.current;return e!==null&&(e.flags|=32),Xn}function Sn(e,a,u){(e===Ie&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)&&(Ml(e,0),ea(e,pe,Xn,!1)),wi(e,u),((Ft&2)===0||e!==Ie)&&(e===Ie&&((Ft&2)===0&&(vn|=u),ne===4&&ea(e,pe,Xn,!1)),Lt(e))}function Tl(e,a,u){if((Ft&6)!==0)throw Error(s(327));var d=!u&&(a&124)===0&&(a&e.expiredLanes)===0||ds(e,a),y=d?_o(e,a):Dn(e,a,!0),C=d;do{if(y===0){Ze&&!d&&ea(e,a,0,!1);break}else{if(u=e.current.alternate,C&&!fa(u)){y=Dn(e,a,!1),C=!1;continue}if(y===2){if(C=a,e.errorRecoveryDisabledLanes&C)var U=0;else U=e.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){a=U;t:{var P=e;y=bl;var et=P.current.memoizedState.isDehydrated;if(et&&(Ml(P,U).flags|=256),U=Dn(P,U,!1),U!==2){if(Uu&&!et){P.errorRecoveryDisabledLanes|=C,vn|=C,y=4;break t}C=kn,kn=y,C!==null&&(kn===null?kn=C:kn.push.apply(kn,C))}y=U}if(C=!1,y!==2)continue}}if(y===1){Ml(e,0),ea(e,a,0,!0);break}t:{switch(d=e,C=y,C){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:ea(d,a,Xn,!oi);break t;case 2:kn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(y=mo+300-Qt(),10<y)){if(ea(d,a,Xn,!oi),za(d,0,!0)!==0)break t;d.timeoutHandle=U2(ah.bind(null,d,u,kn,Cl,go,a,Xn,vn,fo,oi,C,2,-0,0),y);break t}ah(d,u,kn,Cl,go,a,Xn,vn,fo,oi,C,0,-0,0)}}break}while(!0);Lt(e)}function ah(e,a,u,d,y,C,U,P,et,gt,xt,Rt,pt,_t){if(e.timeoutHandle=-1,Rt=a.subtreeFlags,(Rt&8192||(Rt&16785408)===16785408)&&(md={stylesheets:null,count:0,unsuspend:C5},od(a),Rt=T5(),Rt!==null)){e.cancelPendingCommit=Rt(l.bind(null,e,a,C,u,d,y,U,P,et,xt,1,pt,_t)),ea(e,C,U,!gt);return}l(e,a,C,u,d,y,U,P,et)}function fa(e){for(var a=e;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var y=u[d],C=y.getSnapshot;y=y.value;try{if(!ki(C(),y))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ea(e,a,u,d){a&=~ta,a&=~vn,e.suspendedLanes|=a,e.pingedLanes&=~a,d&&(e.warmLanes|=a),d=e.expirationTimes;for(var y=a;0<y;){var C=31-$e(y),U=1<<C;d[C]=-1,y&=~U}u!==0&&Ks(e,u,a)}function Al(){return(Ft&6)===0?(ze(0),!1):!0}function ui(){if(ue!==null){if(Pt===0)var e=ue.return;else e=ue,Xa=rl=null,Bf(e),io=null,Ei=0,e=ue;for(;e!==null;)Ou(e.alternate,e),e=e.return;ue=null}}function Ml(e,a){var u=e.timeoutHandle;u!==-1&&(e.timeoutHandle=-1,r5(u)),u=e.cancelPendingCommit,u!==null&&(e.cancelPendingCommit=null,u()),ui(),Ie=e,ue=u=qa(e.current,null),pe=a,Pt=0,Ri=null,oi=!1,Ze=ds(e,a),Uu=!1,fo=Xn=ta=vn=Pe=ne=0,kn=bl=null,go=!1,(a&8)!==0&&(a|=a&32);var d=e.entangledLanes;if(d!==0)for(e=e.entanglements,d&=a;0<d;){var y=31-$e(d),C=1<<y;a|=e[y],d&=~C}return is=a,Ki(),u}function sh(e,a){ee=null,B.H=Kc,a===sr||a===lr?(a=wf(),Pt=3):a===xg?(a=wf(),Pt=4):Pt=a===i1?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ri=a,ue===null&&(ne=1,Qc(e,Gn(a,e.current)))}function po(){var e=B.H;return B.H=Kc,e===null?Kc:e}function Hu(){var e=B.A;return B.A=ha,e}function ss(){ne=4,oi||(pe&4194048)!==pe&&Qi.current!==null||(Ze=!0),(Pe&134217727)===0&&(vn&134217727)===0||Ie===null||ea(Ie,pe,Xn,!1)}function Dn(e,a,u){var d=Ft;Ft|=2;var y=po(),C=Hu();(Ie!==e||pe!==a)&&(Cl=null,Ml(e,a)),a=!1;var U=ne;t:do try{if(Pt!==0&&ue!==null){var P=ue,et=Ri;switch(Pt){case 8:ui(),U=6;break t;case 3:case 2:case 9:case 6:Qi.current===null&&(a=!0);var gt=Pt;if(Pt=0,Ri=null,pr(e,P,et,gt),u&&Ze){U=0;break t}break;default:gt=Pt,Pt=0,Ri=null,pr(e,P,et,gt)}}Dl(),U=ne;break}catch(xt){sh(e,xt)}while(!0);return a&&e.shellSuspendCounter++,Xa=rl=null,Ft=d,B.H=y,B.A=C,ue===null&&(Ie=null,pe=0,Ki()),U}function Dl(){for(;ue!==null;)lh(ue)}function _o(e,a){var u=Ft;Ft|=2;var d=po(),y=Hu();Ie!==e||pe!==a?(Cl=null,mr=Qt()+500,Ml(e,a)):Ze=ds(e,a);t:do try{if(Pt!==0&&ue!==null){a=ue;var C=Ri;e:switch(Pt){case 1:Pt=0,Ri=null,pr(e,a,C,1);break;case 2:case 9:if(rr(C)){Pt=0,Ri=null,rh(a);break}a=function(){Pt!==2&&Pt!==9||Ie!==e||(Pt=7),Lt(e)},C.then(a,a);break t;case 3:Pt=7;break t;case 4:Pt=5;break t;case 7:rr(C)?(Pt=0,Ri=null,rh(a)):(Pt=0,Ri=null,pr(e,a,C,7));break;case 5:var U=null;switch(ue.tag){case 26:U=ue.memoizedState;case 5:case 27:var P=ue;if(!U||K2(U)){Pt=0,Ri=null;var et=P.sibling;if(et!==null)ue=et;else{var gt=P.return;gt!==null?(ue=gt,Ol(gt)):ue=null}break e}}Pt=0,Ri=null,pr(e,a,C,5);break;case 6:Pt=0,Ri=null,pr(e,a,C,6);break;case 8:ui(),ne=6;break t;default:throw Error(s(462))}}yo();break}catch(xt){sh(e,xt)}while(!0);return Xa=rl=null,B.H=d,B.A=y,Ft=u,ue!==null?0:(Ie=null,pe=0,Ki(),ne)}function yo(){for(;ue!==null&&!Ht();)lh(ue)}function lh(e){var a=Du(e.alternate,e,is);e.memoizedProps=e.pendingProps,a===null?Ol(e):ue=a}function rh(e){var a=e,u=a.alternate;switch(a.tag){case 15:case 0:a=$c(u,a,a.pendingProps,a.type,void 0,pe);break;case 11:a=$c(u,a,a.pendingProps,a.type.render,a.ref,pe);break;case 5:Bf(a);default:Ou(u,a),a=ue=Nc(a,is),a=Du(u,a,is)}e.memoizedProps=e.pendingProps,a===null?Ol(e):ue=a}function pr(e,a,u,d){Xa=rl=null,Bf(a),io=null,Ei=0;var y=a.return;try{if(jm(e,y,a,u,pe)){ne=1,Qc(e,Gn(u,e.current)),ue=null;return}}catch(C){if(y!==null)throw ue=y,C;ne=1,Qc(e,Gn(u,e.current)),ue=null;return}a.flags&32768?(Ee||d===1?e=!0:Ze||(pe&536870912)!==0?e=!1:(oi=e=!0,(d===2||d===9||d===3||d===6)&&(d=Qi.current,d!==null&&d.tag===13&&(d.flags|=16384))),oh(a,e)):Ol(a)}function Ol(e){var a=e;do{if((a.flags&32768)!==0){oh(a,oi);return}e=a.return;var u=sd(a.alternate,a,is);if(u!==null){ue=u;return}if(a=a.sibling,a!==null){ue=a;return}ue=a=e}while(a!==null);ne===0&&(ne=5)}function oh(e,a){do{var u=Wi(e.alternate,e);if(u!==null){u.flags&=32767,ue=u;return}if(u=e.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(e=e.sibling,e!==null)){ue=e;return}ue=e=u}while(e!==null);ne=6,ue=null}function l(e,a,u,d,y,C,U,P,et){e.cancelPendingCommit=null;do O();while(It!==0);if((Ft&6)!==0)throw Error(s(327));if(a!==null){if(a===e.current)throw Error(s(177));if(C=a.lanes|a.childLanes,C|=iu,Yo(e,u,C,U,P,et),e===Ie&&(ue=Ie=null,pe=0),Wt=a,xe=e,ie=u,Oe=C,Ti=y,Bs=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,da(zn,function(){return k(),null})):(e.callbackNode=null,e.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=B.T,B.T=null,y=F.p,F.p=2,U=Ft,Ft|=4;try{Ym(e,a,u)}finally{Ft=U,F.p=y,B.T=d}}It=1,o(),m(),v()}}function o(){if(It===1){It=0;var e=xe,a=Wt,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=B.T,B.T=null;var d=F.p;F.p=2;var y=Ft;Ft|=4;try{zu(a,e);var C=Wm,U=Ef(e.containerInfo),P=C.focusedElem,et=C.selectionRange;if(U!==P&&P&&P.ownerDocument&&Sf(P.ownerDocument.documentElement,P)){if(et!==null&&Zl(P)){var gt=et.start,xt=et.end;if(xt===void 0&&(xt=gt),"selectionStart"in P)P.selectionStart=gt,P.selectionEnd=Math.min(xt,P.value.length);else{var Rt=P.ownerDocument||document,pt=Rt&&Rt.defaultView||window;if(pt.getSelection){var _t=pt.getSelection(),Xt=P.textContent.length,Yt=Math.min(et.start,Xt),We=et.end===void 0?Yt:Math.min(et.end,Xt);!_t.extend&&Yt>We&&(U=We,We=Yt,Yt=U);var ut=xs(P,Yt),lt=xs(P,We);if(ut&&lt&&(_t.rangeCount!==1||_t.anchorNode!==ut.node||_t.anchorOffset!==ut.offset||_t.focusNode!==lt.node||_t.focusOffset!==lt.offset)){var ft=Rt.createRange();ft.setStart(ut.node,ut.offset),_t.removeAllRanges(),Yt>We?(_t.addRange(ft),_t.extend(lt.node,lt.offset)):(ft.setEnd(lt.node,lt.offset),_t.addRange(ft))}}}}for(Rt=[],_t=P;_t=_t.parentNode;)_t.nodeType===1&&Rt.push({element:_t,left:_t.scrollLeft,top:_t.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<Rt.length;P++){var Ct=Rt[P];Ct.element.scrollLeft=Ct.left,Ct.element.scrollTop=Ct.top}}S1=!!Qm,Wm=Qm=null}finally{Ft=y,F.p=d,B.T=u}}e.current=a,It=2}}function m(){if(It===2){It=0;var e=xe,a=Wt,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=B.T,B.T=null;var d=F.p;F.p=2;var y=Ft;Ft|=4;try{uo(e,a.alternate,a)}finally{Ft=y,F.p=d,B.T=u}}It=3}}function v(){if(It===4||It===3){It=0,Ue();var e=xe,a=Wt,u=ie,d=Bs;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?It=5:(It=0,Wt=xe=null,R(e,e.pendingLanes));var y=e.pendingLanes;if(y===0&&(Rl=null),Vn(u),a=a.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(Le,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=B.T,y=F.p,F.p=2,B.T=null;try{for(var C=e.onRecoverableError,U=0;U<d.length;U++){var P=d[U];C(P.value,{componentStack:P.stack})}}finally{B.T=a,F.p=y}}(ie&3)!==0&&O(),Lt(e),y=e.pendingLanes,(u&4194090)!==0&&(y&42)!==0?e===Bu?as++:(as=0,Bu=e):as=0,ze(0)}}function R(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Ra(a)))}function O(e){return o(),m(),v(),k()}function k(){if(It!==5)return!1;var e=xe,a=Oe;Oe=0;var u=Vn(ie),d=B.T,y=F.p;try{F.p=32>u?32:u,B.T=null,u=Ti,Ti=null;var C=xe,U=ie;if(It=0,Wt=xe=null,ie=0,(Ft&6)!==0)throw Error(s(331));var P=Ft;if(Ft|=4,ho(C.current),co(C,C.current,U,u),Ft=P,ze(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(Le,C)}catch{}return!0}finally{F.p=y,B.T=d,R(e,a)}}function it(e,a,u){a=Gn(u,a),a=so(e.stateNode,a,2),e=Si(e,a,2),e!==null&&(wi(e,2),Lt(e))}function ct(e,a,u){if(e.tag===3)it(e,e,u);else for(;a!==null;){if(a.tag===3){it(a,e,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Rl===null||!Rl.has(d))){e=Gn(u,e),u=Au(2),d=Si(a,u,2),d!==null&&(Wc(u,d,a,e),wi(d,2),Lt(d));break}}a=a.return}}function At(e,a,u){var d=e.pingCache;if(d===null){d=e.pingCache=new ns;var y=new Set;d.set(a,y)}else y=d.get(a),y===void 0&&(y=new Set,d.set(a,y));y.has(u)||(Uu=!0,y.add(u),e=Dt.bind(null,e,a,u),a.then(e,e))}function Dt(e,a,u){var d=e.pingCache;d!==null&&d.delete(a),e.pingedLanes|=e.suspendedLanes&u,e.warmLanes&=~u,Ie===e&&(pe&u)===u&&(ne===4||ne===3&&(pe&62914560)===pe&&300>Qt()-mo?(Ft&2)===0&&Ml(e,0):ta|=u,fo===pe&&(fo=0)),Lt(e)}function Nt(e,a){a===0&&(a=xa()),e=Va(e,a),e!==null&&(wi(e,a),Lt(e))}function wt(e){var a=e.memoizedState,u=0;a!==null&&(u=a.retryLane),Nt(e,u)}function Jt(e,a){var u=0;switch(e.tag){case 13:var d=e.stateNode,y=e.memoizedState;y!==null&&(u=y.retryLane);break;case 19:d=e.stateNode;break;case 22:d=e.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(a),Nt(e,u)}function da(e,a){return Kt(e,a)}var Nl=null,ga=null,mt=!1,ot=!1,yt=!1,Mt=0;function Lt(e){e!==ga&&e.next===null&&(ga===null?Nl=ga=e:ga=ga.next=e),ot=!0,mt||(mt=!0,Vm())}function ze(e,a){if(!yt&&ot){yt=!0;do for(var u=!1,d=Nl;d!==null;){if(e!==0){var y=d.pendingLanes;if(y===0)var C=0;else{var U=d.suspendedLanes,P=d.pingedLanes;C=(1<<31-$e(42|e)+1)-1,C&=y&~(U&~P),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(u=!0,Hs(d,C))}else C=pe,C=za(d,d===Ie?C:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(C&3)===0||ds(d,C)||(u=!0,Hs(d,C));d=d.next}while(u);yt=!1}}function Vt(){be()}function be(){ot=mt=!1;var e=0;Mt!==0&&(l5()&&(e=Mt),Mt=0);for(var a=Qt(),u=null,d=Nl;d!==null;){var y=d.next,C=On(d,a);C===0?(d.next=null,u===null?Nl=y:u.next=y,y===null&&(ga=u)):(u=d,(e!==0||(C&3)!==0)&&(ot=!0)),d=y}ze(e)}function On(e,a){for(var u=e.suspendedLanes,d=e.pingedLanes,y=e.expirationTimes,C=e.pendingLanes&-62914561;0<C;){var U=31-$e(C),P=1<<U,et=y[U];et===-1?((P&u)===0||(P&d)!==0)&&(y[U]=Zh(P,a)):et<=a&&(e.expiredLanes|=P),C&=~P}if(a=Ie,u=pe,u=za(e,e===a?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),d=e.callbackNode,u===0||e===a&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)return d!==null&&d!==null&&re(d),e.callbackNode=null,e.callbackPriority=0;if((u&3)===0||ds(e,u)){if(a=u&-u,a===e.callbackPriority)return a;switch(d!==null&&re(d),Vn(u)){case 2:case 8:u=un;break;case 32:u=zn;break;case 268435456:u=nn;break;default:u=zn}return d=Ce.bind(null,e),u=Kt(u,d),e.callbackPriority=a,e.callbackNode=u,a}return d!==null&&d!==null&&re(d),e.callbackPriority=2,e.callbackNode=null,2}function Ce(e,a){if(It!==0&&It!==5)return e.callbackNode=null,e.callbackPriority=0,null;var u=e.callbackNode;if(O()&&e.callbackNode!==u)return null;var d=pe;return d=za(e,e===Ie?d:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),d===0?null:(Tl(e,d,a),On(e,Qt()),e.callbackNode!=null&&e.callbackNode===u?Ce.bind(null,e):null)}function Hs(e,a){if(O())return null;Tl(e,a,!0)}function Vm(){o5(function(){(Ft&6)!==0?Kt(Zn,Vt):be()})}function qm(){return Mt===0&&(Mt=ks()),Mt}function A2(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:cc(""+e)}function M2(e,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,e.id&&u.setAttribute("form",e.id),a.parentNode.insertBefore(u,a),e=new FormData(e),u.parentNode.removeChild(u),e}function $S(e,a,u,d,y){if(a==="submit"&&u&&u.stateNode===y){var C=A2((y[oe]||null).action),U=d.submitter;U&&(a=(a=U[oe]||null)?A2(a.formAction):U.getAttribute("formAction"),a!==null&&(C=a,U=null));var P=new Qo("action","action",null,d,y);e.push({event:P,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Mt!==0){var et=U?M2(y,U):new FormData(y);Zf(u,{pending:!0,data:et,method:y.method,action:C},null,et)}}else typeof C=="function"&&(P.preventDefault(),et=U?M2(y,U):new FormData(y),Zf(u,{pending:!0,data:et,method:y.method,action:C},C,et))},currentTarget:y}]})}}for(var Fm=0;Fm<ni.length;Fm++){var Pm=ni[Fm],t5=Pm.toLowerCase(),e5=Pm[0].toUpperCase()+Pm.slice(1);la(t5,"on"+e5)}la(xf,"onAnimationEnd"),la(sa,"onAnimationIteration"),la(Oc,"onAnimationStart"),la("dblclick","onDoubleClick"),la("focusin","onFocus"),la("focusout","onBlur"),la(yg,"onTransitionRun"),la(zm,"onTransitionStart"),la(bf,"onTransitionCancel"),la(ei,"onTransitionEnd"),Qs("onMouseEnter",["mouseout","mouseover"]),Qs("onMouseLeave",["mouseout","mouseover"]),Qs("onPointerEnter",["pointerout","pointerover"]),Qs("onPointerLeave",["pointerout","pointerover"]),qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cd));function D2(e,a){a=(a&4)!==0;for(var u=0;u<e.length;u++){var d=e[u],y=d.event;d=d.listeners;t:{var C=void 0;if(a)for(var U=d.length-1;0<=U;U--){var P=d[U],et=P.instance,gt=P.currentTarget;if(P=P.listener,et!==C&&y.isPropagationStopped())break t;C=P,y.currentTarget=gt;try{C(y)}catch(xt){Ls(xt)}y.currentTarget=null,C=et}else for(U=0;U<d.length;U++){if(P=d[U],et=P.instance,gt=P.currentTarget,P=P.listener,et!==C&&y.isPropagationStopped())break t;C=P,y.currentTarget=gt;try{C(y)}catch(xt){Ls(xt)}y.currentTarget=null,C=et}}}}function _e(e,a){var u=a[_i];u===void 0&&(u=a[_i]=new Set);var d=e+"__bubble";u.has(d)||(O2(a,e,2,!1),u.add(d))}function Xm(e,a,u){var d=0;a&&(d|=4),O2(u,e,d,a)}var h1="_reactListening"+Math.random().toString(36).slice(2);function km(e){if(!e[h1]){e[h1]=!0,ic.forEach(function(u){u!=="selectionchange"&&(n5.has(u)||Xm(u,!1,e),Xm(u,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[h1]||(a[h1]=!0,Xm("selectionchange",!1,a))}}function O2(e,a,u,d){switch(ty(a)){case 2:var y=D5;break;case 8:y=O5;break;default:y=rp}u=y.bind(null,a,u,e),y=void 0,!fc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),d?y!==void 0?e.addEventListener(a,u,{capture:!0,passive:y}):e.addEventListener(a,u,!0):y!==void 0?e.addEventListener(a,u,{passive:y}):e.addEventListener(a,u,!1)}function Km(e,a,u,d,y){var C=d;if((a&1)===0&&(a&2)===0&&d!==null)t:for(;;){if(d===null)return;var U=d.tag;if(U===3||U===4){var P=d.stateNode.containerInfo;if(P===y)break;if(U===4)for(U=d.return;U!==null;){var et=U.tag;if((et===3||et===4)&&U.stateNode.containerInfo===y)return;U=U.return}for(;P!==null;){if(U=Ua(P),U===null)return;if(et=U.tag,et===5||et===6||et===26||et===27){d=C=U;continue t}P=P.parentNode}}d=d.return}of(function(){var gt=C,xt=Js(u),Rt=[];t:{var pt=Cf.get(e);if(pt!==void 0){var _t=Qo,Xt=e;switch(e){case"keypress":if(Ir(u)===0)break t;case"keydown":case"keyup":_t=yc;break;case"focusin":Xt="focus",_t=Pl;break;case"focusout":Xt="blur",_t=Pl;break;case"beforeblur":case"afterblur":_t=Pl;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_t=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_t=eg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_t=og;break;case xf:case sa:case Oc:_t=ng;break;case ei:_t=Fn;break;case"scroll":case"scrollend":_t=Om;break;case"wheel":_t=cg;break;case"copy":case"cut":case"paste":_t=$s;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_t=vc;break;case"toggle":case"beforetoggle":_t=fg}var Yt=(a&4)!==0,We=!Yt&&(e==="scroll"||e==="scrollend"),ut=Yt?pt!==null?pt+"Capture":null:pt;Yt=[];for(var lt=gt,ft;lt!==null;){var Ct=lt;if(ft=Ct.stateNode,Ct=Ct.tag,Ct!==5&&Ct!==26&&Ct!==27||ft===null||ut===null||(Ct=Br(lt,ut),Ct!=null&&Yt.push(hd(lt,Ct,ft))),We)break;lt=lt.return}0<Yt.length&&(pt=new _t(pt,Xt,null,u,xt),Rt.push({event:pt,listeners:Yt}))}}if((a&7)===0){t:{if(pt=e==="mouseover"||e==="pointerover",_t=e==="mouseout"||e==="pointerout",pt&&u!==hc&&(Xt=u.relatedTarget||u.fromElement)&&(Ua(Xt)||Xt[tn]))break t;if((_t||pt)&&(pt=xt.window===xt?xt:(pt=xt.ownerDocument)?pt.defaultView||pt.parentWindow:window,_t?(Xt=u.relatedTarget||u.toElement,_t=gt,Xt=Xt?Ua(Xt):null,Xt!==null&&(We=c(Xt),Yt=Xt.tag,Xt!==We||Yt!==5&&Yt!==27&&Yt!==6)&&(Xt=null)):(_t=null,Xt=gt),_t!==Xt)){if(Yt=Wo,Ct="onMouseLeave",ut="onMouseEnter",lt="mouse",(e==="pointerout"||e==="pointerover")&&(Yt=vc,Ct="onPointerLeave",ut="onPointerEnter",lt="pointer"),We=_t==null?pt:wr(_t),ft=Xt==null?pt:wr(Xt),pt=new Yt(Ct,lt+"leave",_t,u,xt),pt.target=We,pt.relatedTarget=ft,Ct=null,Ua(xt)===gt&&(Yt=new Yt(ut,lt+"enter",Xt,u,xt),Yt.target=ft,Yt.relatedTarget=We,Ct=Yt),We=Ct,_t&&Xt)e:{for(Yt=_t,ut=Xt,lt=0,ft=Yt;ft;ft=uh(ft))lt++;for(ft=0,Ct=ut;Ct;Ct=uh(Ct))ft++;for(;0<lt-ft;)Yt=uh(Yt),lt--;for(;0<ft-lt;)ut=uh(ut),ft--;for(;lt--;){if(Yt===ut||ut!==null&&Yt===ut.alternate)break e;Yt=uh(Yt),ut=uh(ut)}Yt=null}else Yt=null;_t!==null&&N2(Rt,pt,_t,Yt,!1),Xt!==null&&We!==null&&N2(Rt,We,Xt,Yt,!0)}}t:{if(pt=gt?wr(gt):window,_t=pt.nodeName&&pt.nodeName.toLowerCase(),_t==="select"||_t==="input"&&pt.type==="file")var zt=Li;else if(bc(pt))if(yf)zt=ln;else{zt=Ac;var ge=pg}else _t=pt.nodeName,!_t||_t.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?gt&&uc(gt.elementType)&&(zt=Li):zt=tu;if(zt&&(zt=zt(e,gt))){_f(Rt,zt,u,xt);break t}ge&&ge(e,pt,gt),e==="focusout"&&gt&&pt.type==="number"&&gt.memoizedProps.value!=null&&oc(pt,"number",pt.value)}switch(ge=gt?wr(gt):window,e){case"focusin":(bc(ge)||ge.contentEditable==="true")&&(Ql=ge,eu=gt,Pr=null);break;case"focusout":Pr=eu=Ql=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,Mc(Rt,u,xt);break;case"selectionchange":if(ja)break;case"keydown":case"keyup":Mc(Rt,u,xt)}var Ut;if(Vr)t:{switch(e){case"compositionstart":var qt="onCompositionStart";break t;case"compositionend":qt="onCompositionEnd";break t;case"compositionupdate":qt="onCompositionUpdate";break t}qt=void 0}else tl?Ec(e,u)&&(qt="onCompositionEnd"):e==="keydown"&&u.keyCode===229&&(qt="onCompositionStart");qt&&(df&&u.locale!=="ko"&&(tl||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&tl&&(Ut=uf()):(_s=xt,ko="value"in _s?_s.value:_s.textContent,tl=!0)),ge=f1(gt,qt),0<ge.length&&(qt=new Ss(qt,e,null,u,xt),Rt.push({event:qt,listeners:ge}),Ut?qt.data=Ut:(Ut=mf(u),Ut!==null&&(qt.data=Ut)))),(Ut=gg?xc(e,u):pf(e,u))&&(qt=f1(gt,"onBeforeInput"),0<qt.length&&(ge=new Ss("onBeforeInput","beforeinput",null,u,xt),Rt.push({event:ge,listeners:qt}),ge.data=Ut)),$S(Rt,e,gt,u,xt)}D2(Rt,a)})}function hd(e,a,u){return{instance:e,listener:a,currentTarget:u}}function f1(e,a){for(var u=a+"Capture",d=[];e!==null;){var y=e,C=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||C===null||(y=Br(e,u),y!=null&&d.unshift(hd(e,y,C)),y=Br(e,a),y!=null&&d.push(hd(e,y,C))),e.tag===3)return d;e=e.return}return[]}function uh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function N2(e,a,u,d,y){for(var C=a._reactName,U=[];u!==null&&u!==d;){var P=u,et=P.alternate,gt=P.stateNode;if(P=P.tag,et!==null&&et===d)break;P!==5&&P!==26&&P!==27||gt===null||(et=gt,y?(gt=Br(u,C),gt!=null&&U.unshift(hd(u,gt,et))):y||(gt=Br(u,C),gt!=null&&U.push(hd(u,gt,et)))),u=u.return}U.length!==0&&e.push({event:a,listeners:U})}var i5=/\r\n?/g,a5=/\u0000|\uFFFD/g;function w2(e){return(typeof e=="string"?e:""+e).replace(i5,`
`).replace(a5,"")}function L2(e,a){return a=w2(a),w2(e)===a}function d1(){}function Qe(e,a,u,d,y,C){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Vl(e,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Vl(e,""+d);break;case"className":zr(e,"class",d);break;case"tabIndex":zr(e,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":zr(e,u,d);break;case"style":rf(e,d,C);break;case"data":if(a!=="object"){zr(e,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){e.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){e.removeAttribute(u);break}d=cc(""+d),e.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){e.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(u==="formAction"?(a!=="input"&&Qe(e,a,"name",y.name,y,null),Qe(e,a,"formEncType",y.formEncType,y,null),Qe(e,a,"formMethod",y.formMethod,y,null),Qe(e,a,"formTarget",y.formTarget,y,null)):(Qe(e,a,"encType",y.encType,y,null),Qe(e,a,"method",y.method,y,null),Qe(e,a,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){e.removeAttribute(u);break}d=cc(""+d),e.setAttribute(u,d);break;case"onClick":d!=null&&(e.onclick=d1);break;case"onScroll":d!=null&&_e("scroll",e);break;case"onScrollEnd":d!=null&&_e("scrollend",e);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(s(60));e.innerHTML=u}}break;case"multiple":e.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":e.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){e.removeAttribute("xlink:href");break}u=cc(""+d),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?e.setAttribute(u,""+d):e.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?e.setAttribute(u,""):e.removeAttribute(u);break;case"capture":case"download":d===!0?e.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?e.setAttribute(u,d):e.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?e.setAttribute(u,d):e.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?e.removeAttribute(u):e.setAttribute(u,d);break;case"popover":_e("beforetoggle",e),_e("toggle",e),Lr(e,"popover",d);break;case"xlinkActuate":ba(e,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ba(e,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ba(e,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ba(e,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ba(e,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ba(e,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ba(e,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ba(e,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ba(e,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Lr(e,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=J0.get(u)||u,Lr(e,u,d))}}function Zm(e,a,u,d,y,C){switch(u){case"style":rf(e,d,C);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(s(60));e.innerHTML=u}}break;case"children":typeof d=="string"?Vl(e,d):(typeof d=="number"||typeof d=="bigint")&&Vl(e,""+d);break;case"onScroll":d!=null&&_e("scroll",e);break;case"onScrollEnd":d!=null&&_e("scrollend",e);break;case"onClick":d!=null&&(e.onclick=d1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ac.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),a=u.slice(2,y?u.length-7:void 0),C=e[oe]||null,C=C!=null?C[u]:null,typeof C=="function"&&e.removeEventListener(a,C,y),typeof d=="function")){typeof C!="function"&&C!==null&&(u in e?e[u]=null:e.hasAttribute(u)&&e.removeAttribute(u)),e.addEventListener(a,d,y);break t}u in e?e[u]=d:d===!0?e.setAttribute(u,""):Lr(e,u,d)}}}function Ai(e,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",e),_e("load",e);var d=!1,y=!1,C;for(C in u)if(u.hasOwnProperty(C)){var U=u[C];if(U!=null)switch(C){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Qe(e,a,C,U,u,null)}}y&&Qe(e,a,"srcSet",u.srcSet,u,null),d&&Qe(e,a,"src",u.src,u,null);return;case"input":_e("invalid",e);var P=C=U=y=null,et=null,gt=null;for(d in u)if(u.hasOwnProperty(d)){var xt=u[d];if(xt!=null)switch(d){case"name":y=xt;break;case"type":U=xt;break;case"checked":et=xt;break;case"defaultChecked":gt=xt;break;case"value":C=xt;break;case"defaultValue":P=xt;break;case"children":case"dangerouslySetInnerHTML":if(xt!=null)throw Error(s(137,a));break;default:Qe(e,a,d,xt,u,null)}}rc(e,C,P,et,gt,U,y,!1),Fo(e);return;case"select":_e("invalid",e),d=U=C=null;for(y in u)if(u.hasOwnProperty(y)&&(P=u[y],P!=null))switch(y){case"value":C=P;break;case"defaultValue":U=P;break;case"multiple":d=P;default:Qe(e,a,y,P,u,null)}a=C,u=U,e.multiple=!!d,a!=null?Ur(e,!!d,a,!1):u!=null&&Ur(e,!!d,u,!0);return;case"textarea":_e("invalid",e),C=y=d=null;for(U in u)if(u.hasOwnProperty(U)&&(P=u[U],P!=null))switch(U){case"value":d=P;break;case"defaultValue":y=P;break;case"children":C=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:Qe(e,a,U,P,u,null)}af(e,d,y,C),Fo(e);return;case"option":for(et in u)if(u.hasOwnProperty(et)&&(d=u[et],d!=null))switch(et){case"selected":e.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Qe(e,a,et,d,u,null)}return;case"dialog":_e("beforetoggle",e),_e("toggle",e),_e("cancel",e),_e("close",e);break;case"iframe":case"object":_e("load",e);break;case"video":case"audio":for(d=0;d<cd.length;d++)_e(cd[d],e);break;case"image":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"embed":case"source":case"link":_e("error",e),_e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(gt in u)if(u.hasOwnProperty(gt)&&(d=u[gt],d!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Qe(e,a,gt,d,u,null)}return;default:if(uc(a)){for(xt in u)u.hasOwnProperty(xt)&&(d=u[xt],d!==void 0&&Zm(e,a,xt,d,u,void 0));return}}for(P in u)u.hasOwnProperty(P)&&(d=u[P],d!=null&&Qe(e,a,P,d,u,null))}function s5(e,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,C=null,U=null,P=null,et=null,gt=null,xt=null;for(_t in u){var Rt=u[_t];if(u.hasOwnProperty(_t)&&Rt!=null)switch(_t){case"checked":break;case"value":break;case"defaultValue":et=Rt;default:d.hasOwnProperty(_t)||Qe(e,a,_t,null,d,Rt)}}for(var pt in d){var _t=d[pt];if(Rt=u[pt],d.hasOwnProperty(pt)&&(_t!=null||Rt!=null))switch(pt){case"type":C=_t;break;case"name":y=_t;break;case"checked":gt=_t;break;case"defaultChecked":xt=_t;break;case"value":U=_t;break;case"defaultValue":P=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(s(137,a));break;default:_t!==Rt&&Qe(e,a,pt,_t,d,Rt)}}lc(e,U,P,et,gt,xt,C,y);return;case"select":_t=U=P=pt=null;for(C in u)if(et=u[C],u.hasOwnProperty(C)&&et!=null)switch(C){case"value":break;case"multiple":_t=et;default:d.hasOwnProperty(C)||Qe(e,a,C,null,d,et)}for(y in d)if(C=d[y],et=u[y],d.hasOwnProperty(y)&&(C!=null||et!=null))switch(y){case"value":pt=C;break;case"defaultValue":P=C;break;case"multiple":U=C;default:C!==et&&Qe(e,a,y,C,d,et)}a=P,u=U,d=_t,pt!=null?Ur(e,!!u,pt,!1):!!d!=!!u&&(a!=null?Ur(e,!!u,a,!0):Ur(e,!!u,u?[]:"",!1));return;case"textarea":_t=pt=null;for(P in u)if(y=u[P],u.hasOwnProperty(P)&&y!=null&&!d.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Qe(e,a,P,null,d,y)}for(U in d)if(y=d[U],C=u[U],d.hasOwnProperty(U)&&(y!=null||C!=null))switch(U){case"value":pt=y;break;case"defaultValue":_t=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==C&&Qe(e,a,U,y,d,C)}nf(e,pt,_t);return;case"option":for(var Xt in u)if(pt=u[Xt],u.hasOwnProperty(Xt)&&pt!=null&&!d.hasOwnProperty(Xt))switch(Xt){case"selected":e.selected=!1;break;default:Qe(e,a,Xt,null,d,pt)}for(et in d)if(pt=d[et],_t=u[et],d.hasOwnProperty(et)&&pt!==_t&&(pt!=null||_t!=null))switch(et){case"selected":e.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:Qe(e,a,et,pt,d,_t)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in u)pt=u[Yt],u.hasOwnProperty(Yt)&&pt!=null&&!d.hasOwnProperty(Yt)&&Qe(e,a,Yt,null,d,pt);for(gt in d)if(pt=d[gt],_t=u[gt],d.hasOwnProperty(gt)&&pt!==_t&&(pt!=null||_t!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(s(137,a));break;default:Qe(e,a,gt,pt,d,_t)}return;default:if(uc(a)){for(var We in u)pt=u[We],u.hasOwnProperty(We)&&pt!==void 0&&!d.hasOwnProperty(We)&&Zm(e,a,We,void 0,d,pt);for(xt in d)pt=d[xt],_t=u[xt],!d.hasOwnProperty(xt)||pt===_t||pt===void 0&&_t===void 0||Zm(e,a,xt,pt,d,_t);return}}for(var ut in u)pt=u[ut],u.hasOwnProperty(ut)&&pt!=null&&!d.hasOwnProperty(ut)&&Qe(e,a,ut,null,d,pt);for(Rt in d)pt=d[Rt],_t=u[Rt],!d.hasOwnProperty(Rt)||pt===_t||pt==null&&_t==null||Qe(e,a,Rt,pt,d,_t)}var Qm=null,Wm=null;function g1(e){return e.nodeType===9?e:e.ownerDocument}function z2(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function G2(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Jm(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var $m=null;function l5(){var e=window.event;return e&&e.type==="popstate"?e===$m?!1:($m=e,!0):($m=null,!1)}var U2=typeof setTimeout=="function"?setTimeout:void 0,r5=typeof clearTimeout=="function"?clearTimeout:void 0,B2=typeof Promise=="function"?Promise:void 0,o5=typeof queueMicrotask=="function"?queueMicrotask:typeof B2<"u"?function(e){return B2.resolve(null).then(e).catch(u5)}:U2;function u5(e){setTimeout(function(){throw e})}function vo(e){return e==="head"}function H2(e,a){var u=a,d=0,y=0;do{var C=u.nextSibling;if(e.removeChild(u),C&&C.nodeType===8)if(u=C.data,u==="/$"){if(0<d&&8>d){u=d;var U=e.ownerDocument;if(u&1&&fd(U.documentElement),u&2&&fd(U.body),u&4)for(u=U.head,fd(u),U=u.firstChild;U;){var P=U.nextSibling,et=U.nodeName;U[ms]||et==="SCRIPT"||et==="STYLE"||et==="LINK"&&U.rel.toLowerCase()==="stylesheet"||u.removeChild(U),U=P}}if(y===0){e.removeChild(C),Sd(a);return}y--}else u==="$"||u==="$?"||u==="$!"?y++:d=u.charCodeAt(0)-48;else d=0;u=C}while(u);Sd(a)}function tp(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":tp(u),qo(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}e.removeChild(u)}}function c5(e,a,u,d){for(;e.nodeType===1;){var y=u;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(d){if(!e[ms])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(C=e.getAttribute("rel"),C==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(C!==y.rel||e.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||e.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||e.getAttribute("title")!==(y.title==null?null:y.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(C=e.getAttribute("src"),(C!==(y.src==null?null:y.src)||e.getAttribute("type")!==(y.type==null?null:y.type)||e.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&C&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var C=y.name==null?null:""+y.name;if(y.type==="hidden"&&e.getAttribute("name")===C)return e}else return e;if(e=Is(e.nextSibling),e===null)break}return null}function h5(e,a,u){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!u||(e=Is(e.nextSibling),e===null))return null;return e}function ep(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function f5(e,a){var u=e.ownerDocument;if(e.data!=="$?"||u.readyState==="complete")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),e._reactRetry=d}}function Is(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return e}var np=null;function I2(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var u=e.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return e;a--}else u==="/$"&&a++}e=e.previousSibling}return null}function j2(e,a,u){switch(a=g1(u),e){case"html":if(e=a.documentElement,!e)throw Error(s(452));return e;case"head":if(e=a.head,!e)throw Error(s(453));return e;case"body":if(e=a.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function fd(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);qo(e)}var ls=new Map,Y2=new Set;function m1(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _r=F.d;F.d={f:d5,r:g5,D:m5,C:p5,L:_5,m:y5,X:S5,S:v5,M:E5};function d5(){var e=_r.f(),a=Al();return e||a}function g5(e){var a=Ba(e);a!==null&&a.tag===5&&a.type==="form"?Kg(a):_r.r(e)}var ch=typeof document>"u"?null:document;function V2(e,a,u){var d=ch;if(d&&typeof a=="string"&&a){var y=Pi(a);y='link[rel="'+e+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),Y2.has(y)||(Y2.add(y),e={rel:e,crossOrigin:u,href:a},d.querySelector(y)===null&&(a=d.createElement("link"),Ai(a,"link",e),An(a),d.head.appendChild(a)))}}function m5(e){_r.D(e),V2("dns-prefetch",e,null)}function p5(e,a){_r.C(e,a),V2("preconnect",e,a)}function _5(e,a,u){_r.L(e,a,u);var d=ch;if(d&&e&&a){var y='link[rel="preload"][as="'+Pi(a)+'"]';a==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+Pi(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+Pi(u.imageSizes)+'"]')):y+='[href="'+Pi(e)+'"]';var C=y;switch(a){case"style":C=hh(e);break;case"script":C=fh(e)}ls.has(C)||(e=_({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:e,as:a},u),ls.set(C,e),d.querySelector(y)!==null||a==="style"&&d.querySelector(dd(C))||a==="script"&&d.querySelector(gd(C))||(a=d.createElement("link"),Ai(a,"link",e),An(a),d.head.appendChild(a)))}}function y5(e,a){_r.m(e,a);var u=ch;if(u&&e){var d=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Pi(d)+'"][href="'+Pi(e)+'"]',C=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=fh(e)}if(!ls.has(C)&&(e=_({rel:"modulepreload",href:e},a),ls.set(C,e),u.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(gd(C)))return}d=u.createElement("link"),Ai(d,"link",e),An(d),u.head.appendChild(d)}}}function v5(e,a,u){_r.S(e,a,u);var d=ch;if(d&&e){var y=jl(d).hoistableStyles,C=hh(e);a=a||"default";var U=y.get(C);if(!U){var P={loading:0,preload:null};if(U=d.querySelector(dd(C)))P.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":a},u),(u=ls.get(C))&&ip(e,u);var et=U=d.createElement("link");An(et),Ai(et,"link",e),et._p=new Promise(function(gt,xt){et.onload=gt,et.onerror=xt}),et.addEventListener("load",function(){P.loading|=1}),et.addEventListener("error",function(){P.loading|=2}),P.loading|=4,p1(U,a,d)}U={type:"stylesheet",instance:U,count:1,state:P},y.set(C,U)}}}function S5(e,a){_r.X(e,a);var u=ch;if(u&&e){var d=jl(u).hoistableScripts,y=fh(e),C=d.get(y);C||(C=u.querySelector(gd(y)),C||(e=_({src:e,async:!0},a),(a=ls.get(y))&&ap(e,a),C=u.createElement("script"),An(C),Ai(C,"link",e),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},d.set(y,C))}}function E5(e,a){_r.M(e,a);var u=ch;if(u&&e){var d=jl(u).hoistableScripts,y=fh(e),C=d.get(y);C||(C=u.querySelector(gd(y)),C||(e=_({src:e,async:!0,type:"module"},a),(a=ls.get(y))&&ap(e,a),C=u.createElement("script"),An(C),Ai(C,"link",e),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},d.set(y,C))}}function q2(e,a,u,d){var y=(y=St.current)?m1(y):null;if(!y)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=hh(u.href),u=jl(y).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){e=hh(u.href);var C=jl(y).hoistableStyles,U=C.get(e);if(U||(y=y.ownerDocument||y,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(e,U),(C=y.querySelector(dd(e)))&&!C._p&&(U.instance=C,U.state.loading=5),ls.has(e)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ls.set(e,u),C||x5(y,e,u,U.state))),a&&d===null)throw Error(s(528,""));return U}if(a&&d!==null)throw Error(s(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=fh(u),u=jl(y).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function hh(e){return'href="'+Pi(e)+'"'}function dd(e){return'link[rel="stylesheet"]['+e+"]"}function F2(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function x5(e,a,u,d){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=e.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Ai(a,"link",u),An(a),e.head.appendChild(a))}function fh(e){return'[src="'+Pi(e)+'"]'}function gd(e){return"script[async]"+e}function P2(e,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=e.querySelector('style[data-href~="'+Pi(u.href)+'"]');if(d)return a.instance=d,An(d),d;var y=_({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(e.ownerDocument||e).createElement("style"),An(d),Ai(d,"style",y),p1(d,u.precedence,e),a.instance=d;case"stylesheet":y=hh(u.href);var C=e.querySelector(dd(y));if(C)return a.state.loading|=4,a.instance=C,An(C),C;d=F2(u),(y=ls.get(y))&&ip(d,y),C=(e.ownerDocument||e).createElement("link"),An(C);var U=C;return U._p=new Promise(function(P,et){U.onload=P,U.onerror=et}),Ai(C,"link",d),a.state.loading|=4,p1(C,u.precedence,e),a.instance=C;case"script":return C=fh(u.src),(y=e.querySelector(gd(C)))?(a.instance=y,An(y),y):(d=u,(y=ls.get(C))&&(d=_({},u),ap(d,y)),e=e.ownerDocument||e,y=e.createElement("script"),An(y),Ai(y,"link",d),e.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,p1(d,u.precedence,e));return a.instance}function p1(e,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,C=y,U=0;U<d.length;U++){var P=d[U];if(P.dataset.precedence===a)C=P;else if(C!==y)break}C?C.parentNode.insertBefore(e,C.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(e,a.firstChild))}function ip(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function ap(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var _1=null;function X2(e,a,u){if(_1===null){var d=new Map,y=_1=new Map;y.set(u,d)}else y=_1,d=y.get(u),d||(d=new Map,y.set(u,d));if(d.has(e))return d;for(d.set(e,null),u=u.getElementsByTagName(e),y=0;y<u.length;y++){var C=u[y];if(!(C[ms]||C[Ae]||e==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var U=C.getAttribute(a)||"";U=e+U;var P=d.get(U);P?P.push(C):d.set(U,[C])}}return d}function k2(e,a,u){e=e.ownerDocument||e,e.head.insertBefore(u,a==="title"?e.querySelector("head > title"):null)}function b5(e,a,u){if(u===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function K2(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var md=null;function C5(){}function R5(e,a,u){if(md===null)throw Error(s(475));var d=md;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=hh(u.href),C=e.querySelector(dd(y));if(C){e=C._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(d.count++,d=y1.bind(d),e.then(d,d)),a.state.loading|=4,a.instance=C,An(C);return}C=e.ownerDocument||e,u=F2(u),(y=ls.get(y))&&ip(u,y),C=C.createElement("link"),An(C);var U=C;U._p=new Promise(function(P,et){U.onload=P,U.onerror=et}),Ai(C,"link",u),a.instance=C}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,e),(e=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=y1.bind(d),e.addEventListener("load",a),e.addEventListener("error",a))}}function T5(){if(md===null)throw Error(s(475));var e=md;return e.stylesheets&&e.count===0&&sp(e,e.stylesheets),0<e.count?function(a){var u=setTimeout(function(){if(e.stylesheets&&sp(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(u)}}:null}function y1(){if(this.count--,this.count===0){if(this.stylesheets)sp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var v1=null;function sp(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,v1=new Map,a.forEach(A5,e),v1=null,y1.call(e))}function A5(e,a){if(!(a.state.loading&4)){var u=v1.get(e);if(u)var d=u.get(null);else{u=new Map,v1.set(e,u);for(var y=e.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<y.length;C++){var U=y[C];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(u.set(U.dataset.precedence,U),d=U)}d&&u.set(null,d)}y=a.instance,U=y.getAttribute("data-precedence"),C=u.get(U)||d,C===d&&u.set(null,y),u.set(U,y),this.count++,d=y1.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),C?C.parentNode.insertBefore(y,C.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(y,e.firstChild)),a.state.loading|=4}}var pd={$$typeof:A,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function M5(e,a,u,d,y,C,U,P){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ga(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ga(0),this.hiddenUpdates=Ga(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=C,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Z2(e,a,u,d,y,C,U,P,et,gt,xt,Rt){return e=new M5(e,a,u,U,P,et,gt,Rt),a=1,C===!0&&(a|=24),C=zi(3,null,null,a),e.current=C,C.stateNode=e,a=Qr(),a.refCount++,e.pooledCache=a,a.refCount++,C.memoizedState={element:d,isDehydrated:u,cache:a},fu(C),e}function Q2(e){return e?(e=Jl,e):Jl}function W2(e,a,u,d,y,C){y=Q2(y),d.context===null?d.context=y:d.pendingContext=y,d=Za(a),d.payload={element:u},C=C===void 0?null:C,C!==null&&(d.callback=C),u=Si(e,d,a),u!==null&&(Sn(u,e,a),or(u,e,a))}function J2(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var u=e.retryLane;e.retryLane=u!==0&&u<a?u:a}}function lp(e,a){J2(e,a),(e=e.alternate)&&J2(e,a)}function $2(e){if(e.tag===13){var a=Va(e,67108864);a!==null&&Sn(a,e,67108864),lp(e,67108864)}}var S1=!0;function D5(e,a,u,d){var y=B.T;B.T=null;var C=F.p;try{F.p=2,rp(e,a,u,d)}finally{F.p=C,B.T=y}}function O5(e,a,u,d){var y=B.T;B.T=null;var C=F.p;try{F.p=8,rp(e,a,u,d)}finally{F.p=C,B.T=y}}function rp(e,a,u,d){if(S1){var y=op(d);if(y===null)Km(e,a,d,E1,u),ey(e,d);else if(w5(y,e,a,u,d))d.stopPropagation();else if(ey(e,d),a&4&&-1<N5.indexOf(e)){for(;y!==null;){var C=Ba(y);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var U=Wn(C.pendingLanes);if(U!==0){var P=C;for(P.pendingLanes|=2,P.entangledLanes|=2;U;){var et=1<<31-$e(U);P.entanglements[1]|=et,U&=~et}Lt(C),(Ft&6)===0&&(mr=Qt()+500,ze(0))}}break;case 13:P=Va(C,2),P!==null&&Sn(P,C,2),Al(),lp(C,2)}if(C=op(d),C===null&&Km(e,a,d,E1,u),C===y)break;y=C}y!==null&&d.stopPropagation()}else Km(e,a,d,null,u)}}function op(e){return e=Js(e),up(e)}var E1=null;function up(e){if(E1=null,e=Ua(e),e!==null){var a=c(e);if(a===null)e=null;else{var u=a.tag;if(u===13){if(e=h(a),e!==null)return e;e=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return E1=e,null}function ty(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case Zn:return 2;case un:return 8;case zn:case Zt:return 32;case nn:return 268435456;default:return 32}default:return 32}}var cp=!1,So=null,Eo=null,xo=null,_d=new Map,yd=new Map,bo=[],N5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ey(e,a){switch(e){case"focusin":case"focusout":So=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":_d.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(a.pointerId)}}function vd(e,a,u,d,y,C){return e===null||e.nativeEvent!==C?(e={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:C,targetContainers:[y]},a!==null&&(a=Ba(a),a!==null&&$2(a)),e):(e.eventSystemFlags|=d,a=e.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),e)}function w5(e,a,u,d,y){switch(a){case"focusin":return So=vd(So,e,a,u,d,y),!0;case"dragenter":return Eo=vd(Eo,e,a,u,d,y),!0;case"mouseover":return xo=vd(xo,e,a,u,d,y),!0;case"pointerover":var C=y.pointerId;return _d.set(C,vd(_d.get(C)||null,e,a,u,d,y)),!0;case"gotpointercapture":return C=y.pointerId,yd.set(C,vd(yd.get(C)||null,e,a,u,d,y)),!0}return!1}function ny(e){var a=Ua(e.target);if(a!==null){var u=c(a);if(u!==null){if(a=u.tag,a===13){if(a=h(u),a!==null){e.blockedOn=a,qn(e.priority,function(){if(u.tag===13){var d=fn();d=aa(d);var y=Va(u,d);y!==null&&Sn(y,u,d),lp(u,d)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){e.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}e.blockedOn=null}function x1(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var u=op(e.nativeEvent);if(u===null){u=e.nativeEvent;var d=new u.constructor(u.type,u);hc=d,u.target.dispatchEvent(d),hc=null}else return a=Ba(u),a!==null&&$2(a),e.blockedOn=u,!1;a.shift()}return!0}function iy(e,a,u){x1(e)&&u.delete(a)}function L5(){cp=!1,So!==null&&x1(So)&&(So=null),Eo!==null&&x1(Eo)&&(Eo=null),xo!==null&&x1(xo)&&(xo=null),_d.forEach(iy),yd.forEach(iy)}function b1(e,a){e.blockedOn===a&&(e.blockedOn=null,cp||(cp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,L5)))}var C1=null;function ay(e){C1!==e&&(C1=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){C1===e&&(C1=null);for(var a=0;a<e.length;a+=3){var u=e[a],d=e[a+1],y=e[a+2];if(typeof d!="function"){if(up(d||u)===null)continue;break}var C=Ba(u);C!==null&&(e.splice(a,3),a-=3,Zf(C,{pending:!0,data:y,method:u.method,action:d},d,y))}}))}function Sd(e){function a(et){return b1(et,e)}So!==null&&b1(So,e),Eo!==null&&b1(Eo,e),xo!==null&&b1(xo,e),_d.forEach(a),yd.forEach(a);for(var u=0;u<bo.length;u++){var d=bo[u];d.blockedOn===e&&(d.blockedOn=null)}for(;0<bo.length&&(u=bo[0],u.blockedOn===null);)ny(u),u.blockedOn===null&&bo.shift();if(u=(e.ownerDocument||e).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var y=u[d],C=u[d+1],U=y[oe]||null;if(typeof C=="function")U||ay(u);else if(U){var P=null;if(C&&C.hasAttribute("formAction")){if(y=C,U=C[oe]||null)P=U.formAction;else if(up(y)!==null)continue}else P=U.action;typeof P=="function"?u[d+1]=P:(u.splice(d,3),d-=3),ay(u)}}}function hp(e){this._internalRoot=e}R1.prototype.render=hp.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(s(409));var u=a.current,d=fn();W2(u,d,e,a,null,null)},R1.prototype.unmount=hp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;W2(e.current,2,null,e,null,null),Al(),a[tn]=null}};function R1(e){this._internalRoot=e}R1.prototype.unstable_scheduleHydration=function(e){if(e){var a=$n();e={blockedOn:null,target:e,priority:a};for(var u=0;u<bo.length&&a!==0&&a<bo[u].priority;u++);bo.splice(u,0,e),u===0&&ny(e)}};var sy=t.version;if(sy!=="19.1.0")throw Error(s(527,sy,"19.1.0"));F.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(a),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var z5={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var T1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!T1.isDisabled&&T1.supportsFiber)try{Le=T1.inject(z5),fe=T1}catch{}}return xd.createRoot=function(e,a){if(!r(e))throw Error(s(299));var u=!1,d="",y=hr,C=ji,U=n1,P=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(U=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks)),a=Z2(e,1,!1,null,null,u,d,y,C,U,P,null),e[tn]=a.current,km(e),new hp(a)},xd.hydrateRoot=function(e,a,u){if(!r(e))throw Error(s(299));var d=!1,y="",C=hr,U=ji,P=n1,et=null,gt=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(U=u.onCaughtError),u.onRecoverableError!==void 0&&(P=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(et=u.unstable_transitionCallbacks),u.formState!==void 0&&(gt=u.formState)),a=Z2(e,1,!0,a,u??null,d,y,C,U,P,et,gt),a.context=Q2(null),u=a.current,d=fn(),d=aa(d),y=Za(d),y.callback=null,Si(u,y,d),u=d,a.current.lanes=u,wi(a,u),Lt(a),e[tn]=a.current,km(e),new R1(a)},xd.version="19.1.0",xd}var _y;function P5(){if(_y)return gp.exports;_y=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),gp.exports=F5(),gp.exports}var X5=P5(),bd={},yy;function k5(){if(yy)return bd;yy=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.parse=h,bd.serialize=p;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,c=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function h(x,b){const E=new c,M=x.length;if(M<2)return E;const D=(b==null?void 0:b.decode)||_;let L=0;do{const T=x.indexOf("=",L);if(T===-1)break;const A=x.indexOf(";",L),N=A===-1?M:A;if(T>N){L=x.lastIndexOf(";",T-1)+1;continue}const z=f(x,L,T),I=g(x,T,z),K=x.slice(z,I);if(E[K]===void 0){let H=f(x,T+1,N),j=g(x,N,H);const Y=D(x.slice(H,j));E[K]=Y}L=N+1}while(L<M);return E}function f(x,b,E){do{const M=x.charCodeAt(b);if(M!==32&&M!==9)return b}while(++b<E);return E}function g(x,b,E){for(;b>E;){const M=x.charCodeAt(--b);if(M!==32&&M!==9)return b+1}return E}function p(x,b,E){const M=(E==null?void 0:E.encode)||encodeURIComponent;if(!i.test(x))throw new TypeError(`argument name is invalid: ${x}`);const D=M(b);if(!t.test(D))throw new TypeError(`argument val is invalid: ${b}`);let L=x+"="+D;if(!E)return L;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);L+="; Max-Age="+E.maxAge}if(E.domain){if(!n.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);L+="; Domain="+E.domain}if(E.path){if(!s.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);L+="; Path="+E.path}if(E.expires){if(!S(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);L+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(L+="; HttpOnly"),E.secure&&(L+="; Secure"),E.partitioned&&(L+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":L+="; Priority=Low";break;case"medium":L+="; Priority=Medium";break;case"high":L+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":L+="; SameSite=Strict";break;case"lax":L+="; SameSite=Lax";break;case"none":L+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return L}function _(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function S(x){return r.call(x)==="[object Date]"}return bd}k5();var vy="popstate";function K5(i={}){function t(s,r){let{pathname:c,search:h,hash:f}=s.location;return o_("",{pathname:c,search:h,hash:f},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:A0(r)}return Q5(t,n,null,i)}function dn(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function Gl(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Z5(){return Math.random().toString(36).substring(2,10)}function Sy(i,t){return{usr:i.state,key:i.key,idx:t}}function o_(i,t,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?Yh(t):t,state:n,key:t&&t.key||s||Z5()}}function A0({pathname:i="/",search:t="",hash:n=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Yh(i){let t={};if(i){let n=i.indexOf("#");n>=0&&(t.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(t.search=i.substring(s),i=i.substring(0,s)),i&&(t.pathname=i)}return t}function Q5(i,t,n,s={}){let{window:r=document.defaultView,v5Compat:c=!1}=s,h=r.history,f="POP",g=null,p=_();p==null&&(p=0,h.replaceState({...h.state,idx:p},""));function _(){return(h.state||{idx:null}).idx}function S(){f="POP";let D=_(),L=D==null?null:D-p;p=D,g&&g({action:f,location:M.location,delta:L})}function x(D,L){f="PUSH";let T=o_(M.location,D,L);p=_()+1;let A=Sy(T,p),N=M.createHref(T);try{h.pushState(A,"",N)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;r.location.assign(N)}c&&g&&g({action:f,location:M.location,delta:1})}function b(D,L){f="REPLACE";let T=o_(M.location,D,L);p=_();let A=Sy(T,p),N=M.createHref(T);h.replaceState(A,"",N),c&&g&&g({action:f,location:M.location,delta:0})}function E(D){return W5(D)}let M={get action(){return f},get location(){return i(r,h)},listen(D){if(g)throw new Error("A history only accepts one active listener");return r.addEventListener(vy,S),g=D,()=>{r.removeEventListener(vy,S),g=null}},createHref(D){return t(r,D)},createURL:E,encodeLocation(D){let L=E(D);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:x,replace:b,go(D){return h.go(D)}};return M}function W5(i,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dn(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:A0(i);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function t4(i,t,n="/"){return J5(i,t,n,!1)}function J5(i,t,n,s){let r=typeof t=="string"?Yh(t):t,c=Mr(r.pathname||"/",n);if(c==null)return null;let h=e4(i);$5(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let p=c6(c);f=o6(h[g],p,s)}return f}function e4(i,t=[],n=[],s=""){let r=(c,h,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};g.relativePath.startsWith("/")&&(dn(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let p=Rr([s,g.relativePath]),_=n.concat(g);c.children&&c.children.length>0&&(dn(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),e4(c.children,t,_,p)),!(c.path==null&&!c.index)&&t.push({path:p,score:l6(p,c.index),routesMeta:_})};return i.forEach((c,h)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))r(c,h);else for(let g of n4(c.path))r(c,h,g)}),t}function n4(i){let t=i.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return r?[c,""]:[c];let h=n4(s.join("/")),f=[];return f.push(...h.map(g=>g===""?c:[c,g].join("/"))),r&&f.push(...h),f.map(g=>i.startsWith("/")&&g===""?"/":g)}function $5(i){i.sort((t,n)=>t.score!==n.score?n.score-t.score:r6(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var t6=/^:[\w-]+$/,e6=3,n6=2,i6=1,a6=10,s6=-2,Ey=i=>i==="*";function l6(i,t){let n=i.split("/"),s=n.length;return n.some(Ey)&&(s+=s6),t&&(s+=n6),n.filter(r=>!Ey(r)).reduce((r,c)=>r+(t6.test(c)?e6:c===""?i6:a6),s)}function r6(i,t){return i.length===t.length&&i.slice(0,-1).every((s,r)=>s===t[r])?i[i.length-1]-t[t.length-1]:0}function o6(i,t,n=!1){let{routesMeta:s}=i,r={},c="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],p=f===s.length-1,_=c==="/"?t:t.slice(c.length)||"/",S=q1({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},_),x=g.route;if(!S&&p&&n&&!s[s.length-1].route.index&&(S=q1({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!S)return null;Object.assign(r,S.params),h.push({params:r,pathname:Rr([c,S.pathname]),pathnameBase:g6(Rr([c,S.pathnameBase])),route:x}),S.pathnameBase!=="/"&&(c=Rr([c,S.pathnameBase]))}return h}function q1(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=u6(i.path,i.caseSensitive,i.end),r=t.match(n);if(!r)return null;let c=r[0],h=c.replace(/(.)\/+$/,"$1"),f=r.slice(1);return{params:s.reduce((p,{paramName:_,isOptional:S},x)=>{if(_==="*"){let E=f[x]||"";h=c.slice(0,c.length-E.length).replace(/(.)\/+$/,"$1")}const b=f[x];return S&&!b?p[_]=void 0:p[_]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:h,pattern:i}}function u6(i,t=!1,n=!0){Gl(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function c6(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gl(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function Mr(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function h6(i,t="/"){let{pathname:n,search:s="",hash:r=""}=typeof i=="string"?Yh(i):i;return{pathname:n?n.startsWith("/")?n:f6(n,t):t,search:m6(s),hash:p6(r)}}function f6(i,t){let n=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function yp(i,t,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function d6(i){return i.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function i4(i){let t=d6(i);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function a4(i,t,n,s=!1){let r;typeof i=="string"?r=Yh(i):(r={...i},dn(!r.pathname||!r.pathname.includes("?"),yp("?","pathname","search",r)),dn(!r.pathname||!r.pathname.includes("#"),yp("#","pathname","hash",r)),dn(!r.search||!r.search.includes("#"),yp("#","search","hash",r)));let c=i===""||r.pathname==="",h=c?"/":r.pathname,f;if(h==null)f=n;else{let S=t.length-1;if(!s&&h.startsWith("..")){let x=h.split("/");for(;x[0]==="..";)x.shift(),S-=1;r.pathname=x.join("/")}f=S>=0?t[S]:"/"}let g=h6(r,f),p=h&&h!=="/"&&h.endsWith("/"),_=(c||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(p||_)&&(g.pathname+="/"),g}var Rr=i=>i.join("/").replace(/\/\/+/g,"/"),g6=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),m6=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,p6=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function _6(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var s4=["POST","PUT","PATCH","DELETE"];new Set(s4);var y6=["GET",...s4];new Set(y6);var Vh=st.createContext(null);Vh.displayName="DataRouter";var lm=st.createContext(null);lm.displayName="DataRouterState";var l4=st.createContext({isTransitioning:!1});l4.displayName="ViewTransition";var v6=st.createContext(new Map);v6.displayName="Fetchers";var S6=st.createContext(null);S6.displayName="Await";var Ul=st.createContext(null);Ul.displayName="Navigation";var Y0=st.createContext(null);Y0.displayName="Location";var Bl=st.createContext({outlet:null,matches:[],isDataRoute:!1});Bl.displayName="Route";var z_=st.createContext(null);z_.displayName="RouteError";function E6(i,{relative:t}={}){dn(V0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=st.useContext(Ul),{hash:r,pathname:c,search:h}=q0(i,{relative:t}),f=c;return n!=="/"&&(f=c==="/"?n:Rr([n,c])),s.createHref({pathname:f,search:h,hash:r})}function V0(){return st.useContext(Y0)!=null}function ec(){return dn(V0(),"useLocation() may be used only in the context of a <Router> component."),st.useContext(Y0).location}var r4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function o4(i){st.useContext(Ul).static||st.useLayoutEffect(i)}function qh(){let{isDataRoute:i}=st.useContext(Bl);return i?z6():x6()}function x6(){dn(V0(),"useNavigate() may be used only in the context of a <Router> component.");let i=st.useContext(Vh),{basename:t,navigator:n}=st.useContext(Ul),{matches:s}=st.useContext(Bl),{pathname:r}=ec(),c=JSON.stringify(i4(s)),h=st.useRef(!1);return o4(()=>{h.current=!0}),st.useCallback((g,p={})=>{if(Gl(h.current,r4),!h.current)return;if(typeof g=="number"){n.go(g);return}let _=a4(g,JSON.parse(c),r,p.relative==="path");i==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Rr([t,_.pathname])),(p.replace?n.replace:n.push)(_,p.state,p)},[t,n,c,r,i])}st.createContext(null);function G_(){let{matches:i}=st.useContext(Bl),t=i[i.length-1];return t?t.params:{}}function q0(i,{relative:t}={}){let{matches:n}=st.useContext(Bl),{pathname:s}=ec(),r=JSON.stringify(i4(n));return st.useMemo(()=>a4(i,JSON.parse(r),s,t==="path"),[i,r,s,t])}function b6(i,t){return u4(i,t)}function u4(i,t,n,s){var L;dn(V0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=st.useContext(Ul),{matches:c}=st.useContext(Bl),h=c[c.length-1],f=h?h.params:{},g=h?h.pathname:"/",p=h?h.pathnameBase:"/",_=h&&h.route;{let T=_&&_.path||"";c4(g,!_||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let S=ec(),x;if(t){let T=typeof t=="string"?Yh(t):t;dn(p==="/"||((L=T.pathname)==null?void 0:L.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),x=T}else x=S;let b=x.pathname||"/",E=b;if(p!=="/"){let T=p.replace(/^\//,"").split("/");E="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let M=t4(i,{pathname:E});Gl(_||M!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Gl(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=M6(M&&M.map(T=>Object.assign({},T,{params:Object.assign({},f,T.params),pathname:Rr([p,r.encodeLocation?r.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:Rr([p,r.encodeLocation?r.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),c,n,s);return t&&D?st.createElement(Y0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},D):D}function C6(){let i=L6(),t=_6(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=st.createElement(st.Fragment,null,st.createElement("p",null," Hey developer "),st.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",st.createElement("code",{style:c},"ErrorBoundary")," or"," ",st.createElement("code",{style:c},"errorElement")," prop on your route.")),st.createElement(st.Fragment,null,st.createElement("h2",null,"Unexpected Application Error!"),st.createElement("h3",{style:{fontStyle:"italic"}},t),n?st.createElement("pre",{style:r},n):null,h)}var R6=st.createElement(C6,null),T6=class extends st.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){console.error("React Router caught the following error during render",i,t)}render(){return this.state.error!==void 0?st.createElement(Bl.Provider,{value:this.props.routeContext},st.createElement(z_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function A6({routeContext:i,match:t,children:n}){let s=st.useContext(Vh);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),st.createElement(Bl.Provider,{value:i},n)}function M6(i,t=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let r=i,c=n==null?void 0:n.errors;if(c!=null){let g=r.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);dn(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),r=r.slice(0,Math.min(r.length,g+1))}let h=!1,f=-1;if(n)for(let g=0;g<r.length;g++){let p=r[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=g),p.route.id){let{loaderData:_,errors:S}=n,x=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!S||S[p.route.id]===void 0);if(p.route.lazy||x){h=!0,f>=0?r=r.slice(0,f+1):r=[r[0]];break}}}return r.reduceRight((g,p,_)=>{let S,x=!1,b=null,E=null;n&&(S=c&&p.route.id?c[p.route.id]:void 0,b=p.route.errorElement||R6,h&&(f<0&&_===0?(c4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,E=null):f===_&&(x=!0,E=p.route.hydrateFallbackElement||null)));let M=t.concat(r.slice(0,_+1)),D=()=>{let L;return S?L=b:x?L=E:p.route.Component?L=st.createElement(p.route.Component,null):p.route.element?L=p.route.element:L=g,st.createElement(A6,{match:p,routeContext:{outlet:g,matches:M,isDataRoute:n!=null},children:L})};return n&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?st.createElement(T6,{location:n.location,revalidation:n.revalidation,component:b,error:S,children:D(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):D()},null)}function U_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D6(i){let t=st.useContext(Vh);return dn(t,U_(i)),t}function O6(i){let t=st.useContext(lm);return dn(t,U_(i)),t}function N6(i){let t=st.useContext(Bl);return dn(t,U_(i)),t}function B_(i){let t=N6(i),n=t.matches[t.matches.length-1];return dn(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function w6(){return B_("useRouteId")}function L6(){var s;let i=st.useContext(z_),t=O6("useRouteError"),n=B_("useRouteError");return i!==void 0?i:(s=t.errors)==null?void 0:s[n]}function z6(){let{router:i}=D6("useNavigate"),t=B_("useNavigate"),n=st.useRef(!1);return o4(()=>{n.current=!0}),st.useCallback(async(r,c={})=>{Gl(n.current,r4),n.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:t,...c}))},[i,t])}var xy={};function c4(i,t,n){!t&&!xy[i]&&(xy[i]=!0,Gl(!1,n))}st.memo(G6);function G6({routes:i,future:t,state:n}){return u4(i,void 0,n,t)}function vh(i){dn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function U6({basename:i="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:c=!1}){dn(!V0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),f=st.useMemo(()=>({basename:h,navigator:r,static:c,future:{}}),[h,r,c]);typeof n=="string"&&(n=Yh(n));let{pathname:g="/",search:p="",hash:_="",state:S=null,key:x="default"}=n,b=st.useMemo(()=>{let E=Mr(g,h);return E==null?null:{location:{pathname:E,search:p,hash:_,state:S,key:x},navigationType:s}},[h,g,p,_,S,x,s]);return Gl(b!=null,`<Router basename="${h}"> is not able to match the URL "${g}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:st.createElement(Ul.Provider,{value:f},st.createElement(Y0.Provider,{children:t,value:b}))}function B6({children:i,location:t}){return b6(u_(i),t)}function u_(i,t=[]){let n=[];return st.Children.forEach(i,(s,r)=>{if(!st.isValidElement(s))return;let c=[...t,r];if(s.type===st.Fragment){n.push.apply(n,u_(s.props.children,c));return}dn(s.type===vh,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=u_(s.props.children,c)),n.push(h)}),n}var j1="get",Y1="application/x-www-form-urlencoded";function rm(i){return i!=null&&typeof i.tagName=="string"}function H6(i){return rm(i)&&i.tagName.toLowerCase()==="button"}function I6(i){return rm(i)&&i.tagName.toLowerCase()==="form"}function j6(i){return rm(i)&&i.tagName.toLowerCase()==="input"}function Y6(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function V6(i,t){return i.button===0&&(!t||t==="_self")&&!Y6(i)}var A1=null;function q6(){if(A1===null)try{new FormData(document.createElement("form"),0),A1=!1}catch{A1=!0}return A1}var F6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vp(i){return i!=null&&!F6.has(i)?(Gl(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Y1}"`),null):i}function P6(i,t){let n,s,r,c,h;if(I6(i)){let f=i.getAttribute("action");s=f?Mr(f,t):null,n=i.getAttribute("method")||j1,r=vp(i.getAttribute("enctype"))||Y1,c=new FormData(i)}else if(H6(i)||j6(i)&&(i.type==="submit"||i.type==="image")){let f=i.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||f.getAttribute("action");if(s=g?Mr(g,t):null,n=i.getAttribute("formmethod")||f.getAttribute("method")||j1,r=vp(i.getAttribute("formenctype"))||vp(f.getAttribute("enctype"))||Y1,c=new FormData(f,i),!q6()){let{name:p,type:_,value:S}=i;if(_==="image"){let x=p?`${p}.`:"";c.append(`${x}x`,"0"),c.append(`${x}y`,"0")}else p&&c.append(p,S)}}else{if(rm(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=j1,s=null,r=Y1,h=i}return c&&r==="text/plain"&&(h=c,c=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:c,body:h}}function H_(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}async function X6(i,t){if(i.id in t)return t[i.id];try{let n=await import(i.module);return t[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function k6(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function K6(i,t,n){let s=await Promise.all(i.map(async r=>{let c=t.routes[r.route.id];if(c){let h=await X6(c,n);return h.links?h.links():[]}return[]}));return J6(s.flat(1).filter(k6).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function by(i,t,n,s,r,c){let h=(g,p)=>n[p]?g.route.id!==n[p].route.id:!0,f=(g,p)=>{var _;return n[p].pathname!==g.pathname||((_=n[p].route.path)==null?void 0:_.endsWith("*"))&&n[p].params["*"]!==g.params["*"]};return c==="assets"?t.filter((g,p)=>h(g,p)||f(g,p)):c==="data"?t.filter((g,p)=>{var S;let _=s.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(h(g,p)||f(g,p))return!0;if(g.route.shouldRevalidate){let x=g.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((S=n[0])==null?void 0:S.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function Z6(i,t,{includeHydrateFallback:n}={}){return Q6(i.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let c=[r.module];return r.clientActionModule&&(c=c.concat(r.clientActionModule)),r.clientLoaderModule&&(c=c.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(c=c.concat(r.hydrateFallbackModule)),r.imports&&(c=c.concat(r.imports)),c}).flat(1))}function Q6(i){return[...new Set(i)]}function W6(i){let t={},n=Object.keys(i).sort();for(let s of n)t[s]=i[s];return t}function J6(i,t){let n=new Set;return new Set(t),i.reduce((s,r)=>{let c=JSON.stringify(W6(r));return n.has(c)||(n.add(c),s.push({key:c,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $6=new Set([100,101,204,205]);function tE(i,t){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":t&&Mr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function h4(){let i=st.useContext(Vh);return H_(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function eE(){let i=st.useContext(lm);return H_(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var I_=st.createContext(void 0);I_.displayName="FrameworkContext";function f4(){let i=st.useContext(I_);return H_(i,"You must render this element inside a <HydratedRouter> element"),i}function nE(i,t){let n=st.useContext(I_),[s,r]=st.useState(!1),[c,h]=st.useState(!1),{onFocus:f,onBlur:g,onMouseEnter:p,onMouseLeave:_,onTouchStart:S}=t,x=st.useRef(null);st.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let M=L=>{L.forEach(T=>{h(T.isIntersecting)})},D=new IntersectionObserver(M,{threshold:.5});return x.current&&D.observe(x.current),()=>{D.disconnect()}}},[i]),st.useEffect(()=>{if(s){let M=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(M)}}},[s]);let b=()=>{r(!0)},E=()=>{r(!1),h(!1)};return n?i!=="intent"?[c,x,{}]:[c,x,{onFocus:Cd(f,b),onBlur:Cd(g,E),onMouseEnter:Cd(p,b),onMouseLeave:Cd(_,E),onTouchStart:Cd(S,b)}]:[!1,x,{}]}function Cd(i,t){return n=>{i&&i(n),n.defaultPrevented||t(n)}}function iE({page:i,...t}){let{router:n}=h4(),s=st.useMemo(()=>t4(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?st.createElement(sE,{page:i,matches:s,...t}):null}function aE(i){let{manifest:t,routeModules:n}=f4(),[s,r]=st.useState([]);return st.useEffect(()=>{let c=!1;return K6(i,t,n).then(h=>{c||r(h)}),()=>{c=!0}},[i,t,n]),s}function sE({page:i,matches:t,...n}){let s=ec(),{manifest:r,routeModules:c}=f4(),{basename:h}=h4(),{loaderData:f,matches:g}=eE(),p=st.useMemo(()=>by(i,t,g,r,s,"data"),[i,t,g,r,s]),_=st.useMemo(()=>by(i,t,g,r,s,"assets"),[i,t,g,r,s]),S=st.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let E=new Set,M=!1;if(t.forEach(L=>{var A;let T=r.routes[L.route.id];!T||!T.hasLoader||(!p.some(N=>N.route.id===L.route.id)&&L.route.id in f&&((A=c[L.route.id])!=null&&A.shouldRevalidate)||T.hasClientLoader?M=!0:E.add(L.route.id))}),E.size===0)return[];let D=tE(i,h);return M&&E.size>0&&D.searchParams.set("_routes",t.filter(L=>E.has(L.route.id)).map(L=>L.route.id).join(",")),[D.pathname+D.search]},[h,f,s,r,p,t,i,c]),x=st.useMemo(()=>Z6(_,r),[_,r]),b=aE(_);return st.createElement(st.Fragment,null,S.map(E=>st.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),x.map(E=>st.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),b.map(({key:E,link:M})=>st.createElement("link",{key:E,...M})))}function lE(...i){return t=>{i.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var d4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{d4&&(window.__reactRouterVersion="7.6.3")}catch{}function rE({basename:i,children:t,window:n}){let s=st.useRef();s.current==null&&(s.current=K5({window:n,v5Compat:!0}));let r=s.current,[c,h]=st.useState({action:r.action,location:r.location}),f=st.useCallback(g=>{st.startTransition(()=>h(g))},[h]);return st.useLayoutEffect(()=>r.listen(f),[r,f]),st.createElement(U6,{basename:i,children:t,location:c.location,navigationType:c.action,navigator:r})}var g4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,m4=st.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:r,reloadDocument:c,replace:h,state:f,target:g,to:p,preventScrollReset:_,viewTransition:S,...x},b){let{basename:E}=st.useContext(Ul),M=typeof p=="string"&&g4.test(p),D,L=!1;if(typeof p=="string"&&M&&(D=p,d4))try{let j=new URL(window.location.href),Y=p.startsWith("//")?new URL(j.protocol+p):new URL(p),X=Mr(Y.pathname,E);Y.origin===j.origin&&X!=null?p=X+Y.search+Y.hash:L=!0}catch{Gl(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=E6(p,{relative:r}),[A,N,z]=nE(s,x),I=hE(p,{replace:h,state:f,target:g,preventScrollReset:_,relative:r,viewTransition:S});function K(j){t&&t(j),j.defaultPrevented||I(j)}let H=st.createElement("a",{...x,...z,href:D||T,onClick:L||c?t:K,ref:lE(b,N),target:g,"data-discover":!M&&n==="render"?"true":void 0});return A&&!M?st.createElement(st.Fragment,null,H,st.createElement(iE,{page:T})):H});m4.displayName="Link";var oE=st.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:r=!1,style:c,to:h,viewTransition:f,children:g,...p},_){let S=q0(h,{relative:p.relative}),x=ec(),b=st.useContext(lm),{navigator:E,basename:M}=st.useContext(Ul),D=b!=null&&pE(S)&&f===!0,L=E.encodeLocation?E.encodeLocation(S).pathname:S.pathname,T=x.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(T=T.toLowerCase(),A=A?A.toLowerCase():null,L=L.toLowerCase()),A&&M&&(A=Mr(A,M)||A);const N=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let z=T===L||!r&&T.startsWith(L)&&T.charAt(N)==="/",I=A!=null&&(A===L||!r&&A.startsWith(L)&&A.charAt(L.length)==="/"),K={isActive:z,isPending:I,isTransitioning:D},H=z?t:void 0,j;typeof s=="function"?j=s(K):j=[s,z?"active":null,I?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let Y=typeof c=="function"?c(K):c;return st.createElement(m4,{...p,"aria-current":H,className:j,ref:_,style:Y,to:h,viewTransition:f},typeof g=="function"?g(K):g)});oE.displayName="NavLink";var uE=st.forwardRef(({discover:i="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:c,method:h=j1,action:f,onSubmit:g,relative:p,preventScrollReset:_,viewTransition:S,...x},b)=>{let E=gE(),M=mE(f,{relative:p}),D=h.toLowerCase()==="get"?"get":"post",L=typeof f=="string"&&g4.test(f),T=A=>{if(g&&g(A),A.defaultPrevented)return;A.preventDefault();let N=A.nativeEvent.submitter,z=(N==null?void 0:N.getAttribute("formmethod"))||h;E(N||A.currentTarget,{fetcherKey:t,method:z,navigate:n,replace:r,state:c,relative:p,preventScrollReset:_,viewTransition:S})};return st.createElement("form",{ref:b,method:D,action:M,onSubmit:s?g:T,...x,"data-discover":!L&&i==="render"?"true":void 0})});uE.displayName="Form";function cE(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p4(i){let t=st.useContext(Vh);return dn(t,cE(i)),t}function hE(i,{target:t,replace:n,state:s,preventScrollReset:r,relative:c,viewTransition:h}={}){let f=qh(),g=ec(),p=q0(i,{relative:c});return st.useCallback(_=>{if(V6(_,t)){_.preventDefault();let S=n!==void 0?n:A0(g)===A0(p);f(i,{replace:S,state:s,preventScrollReset:r,relative:c,viewTransition:h})}},[g,f,p,n,s,t,i,r,c,h])}var fE=0,dE=()=>`__${String(++fE)}__`;function gE(){let{router:i}=p4("useSubmit"),{basename:t}=st.useContext(Ul),n=w6();return st.useCallback(async(s,r={})=>{let{action:c,method:h,encType:f,formData:g,body:p}=P6(s,t);if(r.navigate===!1){let _=r.fetcherKey||dE();await i.fetch(_,n,r.action||c,{preventScrollReset:r.preventScrollReset,formData:g,body:p,formMethod:r.method||h,formEncType:r.encType||f,flushSync:r.flushSync})}else await i.navigate(r.action||c,{preventScrollReset:r.preventScrollReset,formData:g,body:p,formMethod:r.method||h,formEncType:r.encType||f,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,t,n])}function mE(i,{relative:t}={}){let{basename:n}=st.useContext(Ul),s=st.useContext(Bl);dn(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),c={...q0(i||".",{relative:t})},h=ec();if(i==null){c.search=h.search;let f=new URLSearchParams(c.search),g=f.getAll("index");if(g.some(_=>_==="")){f.delete("index"),g.filter(S=>S).forEach(S=>f.append("index",S));let _=f.toString();c.search=_?`?${_}`:""}}return(!i||i===".")&&r.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Rr([n,c.pathname])),A0(c)}function pE(i,t={}){let n=st.useContext(l4);dn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=p4("useViewTransitionState"),r=q0(i,{relative:t.relative});if(!n.isTransitioning)return!1;let c=Mr(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=Mr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return q1(r.pathname,h)!=null||q1(r.pathname,c)!=null}[...$6];const c_=(i,t)=>t.some(n=>i instanceof n);let Cy,Ry;function _E(){return Cy||(Cy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yE(){return Ry||(Ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h_=new WeakMap,Sp=new WeakMap,om=new WeakMap;function vE(i){const t=new Promise((n,s)=>{const r=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{n(Zu(i.result)),r()},h=()=>{s(i.error),r()};i.addEventListener("success",c),i.addEventListener("error",h)});return om.set(t,i),t}function SE(i){if(h_.has(i))return;const t=new Promise((n,s)=>{const r=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{n(),r()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});h_.set(i,t)}let f_={get(i,t,n){if(i instanceof IDBTransaction){if(t==="done")return h_.get(i);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zu(i[t])},set(i,t,n){return i[t]=n,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function _4(i){f_=i(f_)}function EE(i){return yE().includes(i)?function(...t){return i.apply(d_(this),t),Zu(this.request)}:function(...t){return Zu(i.apply(d_(this),t))}}function xE(i){return typeof i=="function"?EE(i):(i instanceof IDBTransaction&&SE(i),c_(i,_E())?new Proxy(i,f_):i)}function Zu(i){if(i instanceof IDBRequest)return vE(i);if(Sp.has(i))return Sp.get(i);const t=xE(i);return t!==i&&(Sp.set(i,t),om.set(t,i)),t}const d_=i=>om.get(i);function bE(i,t,{blocked:n,upgrade:s,blocking:r,terminated:c}={}){const h=indexedDB.open(i,t),f=Zu(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Zu(h.result),g.oldVersion,g.newVersion,Zu(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),r&&g.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const CE=["get","getKey","getAll","getAllKeys","count"],RE=["put","add","delete","clear"],Ep=new Map;function Ty(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Ep.get(t))return Ep.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=RE.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||CE.includes(n)))return;const c=async function(h,...f){const g=this.transaction(h,r?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),r&&g.done]))[0]};return Ep.set(t,c),c}_4(i=>({...i,get:(t,n,s)=>Ty(t,n)||i.get(t,n,s),has:(t,n)=>!!Ty(t,n)||i.has(t,n)}));const TE=["continue","continuePrimaryKey","advance"],Ay={},g_=new WeakMap,y4=new WeakMap,AE={get(i,t){if(!TE.includes(t))return i[t];let n=Ay[t];return n||(n=Ay[t]=function(...s){g_.set(this,y4.get(this)[t](...s))}),n}};async function*ME(...i){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...i)),!t)return;t=t;const n=new Proxy(t,AE);for(y4.set(n,t),om.set(n,d_(t));t;)yield n,t=await(g_.get(n)||t.continue()),g_.delete(n)}function My(i,t){return t===Symbol.asyncIterator&&c_(i,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&c_(i,[IDBIndex,IDBObjectStore])}_4(i=>({...i,get(t,n,s){return My(t,n)?ME:i.get(t,n,s)},has(t,n){return My(t,n)||i.has(t,n)}}));async function DE(i,t,n){return new Promise((s,r)=>{const c=new Image,h=URL.createObjectURL(i);c.onload=()=>{URL.revokeObjectURL(h);const f=Math.min(t/c.width,n/c.height),g=Math.round(c.width*f),p=Math.round(c.height*f),_=document.createElement("canvas");_.width=g,_.height=p;const S=_.getContext("2d");if(!S)return r(new Error("2D context failed"));S.drawImage(c,0,0,g,p),_.toBlob(x=>{x?s(x):r(new Error("Thumbnail blob failed"))},"image/jpeg",.7)},c.onerror=()=>{URL.revokeObjectURL(h),r(new Error("Image load error"))},c.src=h})}const OE="map-gallery-db",La="maps";async function Fh(){return bE(OE,1,{upgrade(i){i.objectStoreNames.contains(La)||i.createObjectStore(La)}})}async function NE(i,t,n,s,r=[]){const c=await DE(t,200,200);await(await Fh()).put(La,{blob:t,name:n,description:s,pins:r,thumb:c},i)}async function v4(i){return(await Fh()).get(La,i)}async function S4(){const n=(await Fh()).transaction(La,"readonly").objectStore(La),s=await n.getAllKeys(),r=[];for(const c of s){const h=await n.get(c);h&&r.push({id:c,blob:h.blob,thumb:h.thumb,name:h.name,description:h.description})}return r}async function wE(i,t){const n=await Fh(),s=await n.get(La,i);if(!s)throw new Error(`No map record found for id=${i}`);s.pins=t,await n.put(La,s,i)}async function E4(i,t,n){const s=await Fh(),r=await s.get(La,i);if(!r)throw new Error(`No map record found for id=${i}`);r.name=t,r.description=n,await s.put(La,r,i)}async function LE(i){const t=await Fh();await t.delete(La,i);const n=t.transaction(La,"readwrite"),s=n.objectStore(La),r=await s.getAllKeys();for(const c of r){const h=await s.get(c);if(!h)continue;let f=!1;const g=h.pins.map(p=>{if(p.linkedMapId===i){f=!0;const{linkedMapId:_,...S}=p;return S}return p});f&&(h.pins=g,await s.put(h,c))}await n.done}const Mi=[];for(let i=0;i<256;++i)Mi.push((i+256).toString(16).slice(1));function zE(i,t=0){return(Mi[i[t+0]]+Mi[i[t+1]]+Mi[i[t+2]]+Mi[i[t+3]]+"-"+Mi[i[t+4]]+Mi[i[t+5]]+"-"+Mi[i[t+6]]+Mi[i[t+7]]+"-"+Mi[i[t+8]]+Mi[i[t+9]]+"-"+Mi[i[t+10]]+Mi[i[t+11]]+Mi[i[t+12]]+Mi[i[t+13]]+Mi[i[t+14]]+Mi[i[t+15]]).toLowerCase()}let xp;const GE=new Uint8Array(16);function UE(){if(!xp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");xp=crypto.getRandomValues.bind(crypto)}return xp(GE)}const BE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Dy={randomUUID:BE};function HE(i,t,n){var r;if(Dy.randomUUID&&!i)return Dy.randomUUID();i=i||{};const s=i.random??((r=i.rng)==null?void 0:r.call(i))??UE();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,zE(s)}const IE=({onSaved:i,onCancel:t})=>{const n=st.useRef(null),s=st.useRef(null),r=st.useRef(null),c=async()=>{var _,S,x,b;const h=(S=(_=n.current)==null?void 0:_.files)==null?void 0:S[0],f=(x=s.current)==null?void 0:x.value.trim(),g=((b=r.current)==null?void 0:b.value.trim())||void 0;if(!h)return alert("Pick an image file");if(!f)return alert("Give your map a name");const p=HE();await NE(p,h,f,g),i()};return at.jsx("div",{className:"mg-form-overlay",children:at.jsxs("div",{className:"mg-form",children:[at.jsx("h2",{children:"New Map"}),at.jsxs("label",{children:["Image: ",at.jsx("input",{ref:n,type:"file",accept:"image/*"})]}),at.jsxs("label",{children:["Name: ",at.jsx("input",{ref:s,type:"text"})]}),at.jsxs("label",{children:["Description:",at.jsx("textarea",{ref:r,rows:3})]}),at.jsxs("div",{className:"mg-form-buttons",children:[at.jsx("button",{onClick:t,children:"Cancel"}),at.jsx("button",{onClick:c,children:"Save"})]})]})})},jE=Nn.memo(({id:i,url:t,name:n,description:s,loading:r,onLoad:c,onDelete:h})=>{const f=qh(),[g,p]=st.useState(!1),[_,S]=st.useState(n),[x,b]=st.useState(s||""),[E,M]=st.useState(!1),D=A=>{A.stopPropagation(),p(!0)},L=A=>{A.stopPropagation(),p(!1),S(n),b(s||"")},T=async A=>{A.stopPropagation(),M(!0),await E4(i,_,x),M(!1),p(!1),window.location.reload()};return at.jsxs("div",{className:"mg-card",onClick:()=>f(`/map/${i}`),children:[r&&at.jsx("div",{className:"mg-spinner-overlay",children:at.jsx("div",{className:"mg-spinner"})}),at.jsx("button",{className:"mg-delete-btn",onClick:A=>{A.stopPropagation(),h(A)},children:""}),at.jsx("button",{className:"mg-edit-btn",onClick:A=>{A.stopPropagation(),D(A)},title:"Edit map info",children:""}),at.jsx("img",{src:t,alt:n,className:"mg-thumb",onLoad:c,onError:c}),at.jsx("div",{className:"mg-info",onClick:A=>g&&A.stopPropagation(),children:g?at.jsxs("div",{className:"mg-edit-form",onClick:A=>A.stopPropagation(),children:[at.jsx("input",{className:"mg-edit-input",value:_,onChange:A=>S(A.target.value),disabled:E}),at.jsx("textarea",{className:"mg-edit-textarea",value:x,onChange:A=>b(A.target.value),rows:2,disabled:E}),at.jsxs("div",{className:"mg-edit-actions",children:[at.jsx("button",{onClick:A=>{A.stopPropagation(),T(A)},disabled:E,className:"mg-edit-save",children:"Save"}),at.jsx("button",{onClick:A=>{A.stopPropagation(),L(A)},disabled:E,className:"mg-edit-cancel",children:"Cancel"})]})]}):at.jsxs(at.Fragment,{children:[at.jsx("strong",{children:n}),s&&at.jsx("p",{className:"mg-desc",children:s})]})})]})}),YE=()=>{const[i,t]=st.useState([]),[n,s]=st.useState(!1),r=qh(),c=st.useCallback(async()=>{i.forEach(({fullUrl:_,thumbUrl:S})=>{URL.revokeObjectURL(_),URL.revokeObjectURL(S)});const p=(await S4()).map(_=>{const S=URL.createObjectURL(_.blob),x=_.thumb??_.blob,b=URL.createObjectURL(x);return{id:_.id,fullUrl:S,thumbUrl:b,name:_.name,description:_.description,loading:!0}});t(p)},[i]);st.useEffect(()=>(c(),()=>{i.forEach(({fullUrl:g,thumbUrl:p})=>{URL.revokeObjectURL(g),URL.revokeObjectURL(p)})}),[]);const h=g=>{t(p=>p.map(_=>_.id===g?{..._,loading:!1}:_))},f=async(g,p)=>{p.stopPropagation(),window.confirm("Delete this map?")&&(await LE(g),t(_=>{const S=_.find(x=>x.id===g);return S&&(URL.revokeObjectURL(S.fullUrl),URL.revokeObjectURL(S.thumbUrl)),_.filter(x=>x.id!==g)}))};return at.jsxs("div",{className:"mg-container",children:[at.jsx("button",{className:"mg-back-btn",onClick:()=>r("/"),children:" Back to Home"}),at.jsx("h1",{children:"Select a Map"}),at.jsx("div",{className:"mg-add-container",children:at.jsxs("button",{className:"mg-add-btn",onClick:()=>s(!0),children:[at.jsx("span",{className:"mg-add-icon",children:""}),"Add New Map"]})}),n&&at.jsx(IE,{onCancel:()=>s(!1),onSaved:async()=>{s(!1),await c()}}),at.jsx("div",{className:"mg-grid",children:i.map(g=>at.jsx(jE,{id:g.id,url:g.thumbUrl,name:g.name,description:g.description,loading:g.loading,onLoad:()=>h(g.id),onDelete:p=>f(g.id,p)},g.id))})]})},_a={ADD:"add",REMOVE:"remove"},wh={PROPERTYCHANGE:"propertychange"},le={CHANGE:"change",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class j_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function VE(i,t,n){let s,r;n=n||Qu;let c=0,h=i.length,f=!1;for(;c<h;)s=c+(h-c>>1),r=+n(i[s],t),r<0?c=s+1:(h=s,f=!r);return f?c:~c}function Qu(i,t){return i>t?1:i<t?-1:0}function qE(i,t){return i<t?1:i>t?-1:0}function Y_(i,t,n){if(i[0]<=t)return 0;const s=i.length;if(t<=i[s-1])return s-1;if(typeof n=="function"){for(let r=1;r<s;++r){const c=i[r];if(c===t)return r;if(c<t)return n(t,i[r-1],c)>0?r-1:r}return s-1}if(n>0){for(let r=1;r<s;++r)if(i[r]<t)return r-1;return s-1}if(n<0){for(let r=1;r<s;++r)if(i[r]<=t)return r;return s-1}for(let r=1;r<s;++r){if(i[r]==t)return r;if(i[r]<t)return i[r-1]-t<t-i[r]?r-1:r}return s-1}function FE(i,t,n){for(;t<n;){const s=i[t];i[t]=i[n],i[n]=s,++t,--n}}function V_(i,t){const n=Array.isArray(t)?t:[t],s=n.length;for(let r=0;r<s;r++)i[i.length]=n[r]}function Ho(i,t){const n=i.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(i[s]!==t[s])return!1;return!0}function Wu(){return!0}function um(){return!1}function M0(){}function x4(i){let t,n,s;return function(){const r=Array.prototype.slice.call(arguments);return(!n||this!==s||!Ho(r,n))&&(s=this,n=r,t=i.apply(this,arguments)),t}}function b4(i){function t(){let n;try{n=i()}catch(s){return Promise.reject(s)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function F0(i){for(const t in i)delete i[t]}function Lh(i){let t;for(t in i)return!1;return!t}class Hl{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class cm extends j_{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const s=this.listeners_||(this.listeners_={}),r=s[t]||(s[t]=[]);r.includes(n)||r.push(n)}dispatchEvent(t){const n=typeof t=="string",s=n?t:t.type,r=this.listeners_&&this.listeners_[s];if(!r)return;const c=n?new Hl(t):t;c.target||(c.target=this.eventTarget_||this);const h=this.dispatching_||(this.dispatching_={}),f=this.pendingRemovals_||(this.pendingRemovals_={});s in h||(h[s]=0,f[s]=0),++h[s];let g;for(let p=0,_=r.length;p<_;++p)if("handleEvent"in r[p]?g=r[p].handleEvent(c):g=r[p].call(this,c),g===!1||c.propagationStopped){g=!1;break}if(--h[s]===0){let p=f[s];for(delete f[s];p--;)this.removeEventListener(s,M0);delete h[s]}return g}disposeInternal(){this.listeners_&&F0(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){if(!this.listeners_)return;const s=this.listeners_[t];if(!s)return;const r=s.indexOf(n);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(s[r]=M0,++this.pendingRemovals_[t]):(s.splice(r,1),s.length===0&&delete this.listeners_[t]))}}function we(i,t,n,s,r){if(r){const h=n;n=function(f){return i.removeEventListener(t,n),h.call(s??this,f)}}else s&&s!==i&&(n=n.bind(s));const c={target:i,type:t,listener:n};return i.addEventListener(t,n),c}function Oy(i,t,n,s){return we(i,t,n,s,!0)}function bn(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),F0(i))}class C4 extends cm{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(le.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const s=t.length,r=new Array(s);for(let c=0;c<s;++c)r[c]=we(this,t[c],n);return r}return we(this,t,n)}onceInternal(t,n){let s;if(Array.isArray(t)){const r=t.length;s=new Array(r);for(let c=0;c<r;++c)s[c]=Oy(this,t[c],n)}else s=Oy(this,t,n);return n.ol_key=s,s}unInternal(t,n){const s=n.ol_key;if(s)PE(s);else if(Array.isArray(t))for(let r=0,c=t.length;r<c;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)}}function PE(i){if(Array.isArray(i))for(let t=0,n=i.length;t<n;++t)bn(i[t]);else bn(i)}function je(){throw new Error("Unimplemented abstract method.")}let XE=0;function wn(i){return i.ol_uid||(i.ol_uid=String(++XE))}class Ny extends Hl{constructor(t,n,s){super(t),this.key=n,this.oldValue=s}}class Il extends C4{constructor(t){super(),this.on,this.once,this.un,wn(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let s;s=`change:${t}`,this.hasListener(s)&&this.dispatchEvent(new Ny(s,t,n)),s=wh.PROPERTYCHANGE,this.hasListener(s)&&this.dispatchEvent(new Ny(s,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,s){const r=this.values_||(this.values_={});if(s)r[t]=n;else{const c=r[t];r[t]=n,c!==n&&this.notify(t,c)}}setProperties(t,n){for(const s in t)this.set(s,t[s],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const s=this.values_[t];delete this.values_[t],Lh(this.values_)&&(this.values_=null),n||this.notify(t,s)}}}const wy={LENGTH:"length"};class M1 extends Hl{constructor(t,n,s){super(t),this.element=n,this.index=s}}class Ea extends Il{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let s=0,r=this.array_.length;s<r;++s)this.assertUnique_(this.array_[s],s);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,s=t.length;n<s;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let s=0,r=n.length;s<r;++s)t(n[s],s,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(wy.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new M1(_a.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let s=0,r=n.length;s<r;++s)if(n[s]===t)return this.removeAt(s)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new M1(_a.REMOVE,n,t)),n}setAt(t,n){const s=this.getLength();if(t>=s){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const r=this.array_[t];this.array_[t]=n,this.dispatchEvent(new M1(_a.REMOVE,r,t)),this.dispatchEvent(new M1(_a.ADD,n,t))}updateLength_(){this.set(wy.LENGTH,this.array_.length)}assertUnique_(t,n){for(let s=0,r=this.array_.length;s<r;++s)if(this.array_[s]===t&&s!==n)throw new Error("Duplicate item added to a unique collection")}}class Sh extends Hl{constructor(t,n,s){super(t),this.map=n,this.frameState=s!==void 0?s:null}}class Oo extends Sh{constructor(t,n,s,r,c,h){super(t,n,c),this.originalEvent=s,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=h}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const En={SINGLECLICK:"singleclick",CLICK:le.CLICK,DBLCLICK:le.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ju=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",kE=Ju.includes("safari")&&!Ju.includes("chrom");kE&&(Ju.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ju));const KE=Ju.includes("webkit")&&!Ju.includes("edge"),R4=Ju.includes("macintosh"),ZE=typeof devicePixelRatio<"u"?devicePixelRatio:1,T4=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,A4=typeof Image<"u"&&Image.prototype.decode,M4=typeof createImageBitmap=="function",D4=function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}(),m_={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class QE extends cm{constructor(t,n){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const s=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=s,this.pointerdownListenerKey_=we(s,m_.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=we(s,m_.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(le.TOUCHMOVE,this.boundHandleTouchMove_,D4?{passive:!1}:!1)}emulateClick_(t){let n=new Oo(En.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Oo(En.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const s=new Oo(En.SINGLECLICK,this.map_,t);this.dispatchEvent(s)},250)}updateActivePointers_(t){const n=t,s=n.pointerId;if(n.type==En.POINTERUP||n.type==En.POINTERCANCEL){delete this.trackedTouches_[s];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==En.POINTERDOWN||n.type==En.POINTERMOVE)&&(this.trackedTouches_[s]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const n=new Oo(En.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(bn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const n=new Oo(En.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const s=this.map_.getOwnerDocument();this.dragListenerKeys_.push(we(s,En.POINTERMOVE,this.handlePointerMove_,this),we(s,En.POINTERUP,this.handlePointerUp_,this),we(this.element_,En.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==s&&this.dragListenerKeys_.push(we(this.element_.getRootNode(),En.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const n=new Oo(En.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Oo(En.POINTERMOVE,this.map_,t,n))}handleTouchMove_(t){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(bn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(le.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(bn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(bn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const No={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Fi={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Rd={IDLE:0,LOADED:2,ERROR:3,EMPTY:4};function xn(i,t){if(!i)throw new Error(t)}const F1=1/0;class WE{constructor(t,n){this.priorityFunction_=t,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,F0(this.queuedElements_)}dequeue(){const t=this.elements_,n=this.priorities_,s=t[0];t.length==1?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(s);return delete this.queuedElements_[r],s}enqueue(t){xn(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(t);return n!=F1?(this.elements_.push(t),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const n=this.elements_,s=this.priorities_,r=n.length,c=n[t],h=s[t],f=t;for(;t<r>>1;){const g=this.getLeftChildIndex_(t),p=this.getRightChildIndex_(t),_=p<r&&s[p]<s[g]?p:g;n[t]=n[_],s[t]=s[_],t=_}n[t]=c,s[t]=h,this.siftDown_(f,t)}siftDown_(t,n){const s=this.elements_,r=this.priorities_,c=s[n],h=r[n];for(;n>t;){const f=this.getParentIndex_(n);if(r[f]>h)s[n]=s[f],r[n]=r[f],n=f;else break}s[n]=c,r[n]=h}reprioritize(){const t=this.priorityFunction_,n=this.elements_,s=this.priorities_;let r=0;const c=n.length;let h,f,g;for(f=0;f<c;++f)h=n[f],g=t(h),g==F1?delete this.queuedElements_[this.keyFunction_(h)]:(s[r]=g,n[r++]=h);n.length=r,s.length=r,this.heapify_()}}class JE extends WE{constructor(t,n){super(s=>t.apply(null,s),s=>s[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const n=super.enqueue(t);return n&&t[0].addEventListener(le.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const n=t.target,s=n.getState();if(s===Rd.LOADED||s===Rd.ERROR||s===Rd.EMPTY){s!==Rd.ERROR&&n.removeEventListener(le.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,n){let s=0;for(;this.tilesLoading_<t&&s<n&&this.getCount()>0;){const r=this.dequeue()[0],c=r.getKey();r.getState()===Rd.IDLE&&!(c in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[c]=!0,++this.tilesLoading_,++s,r.load())}}}function $E(i,t,n,s,r){if(!i||!(n in i.wantedTiles)||!i.wantedTiles[n][t.getKey()])return F1;const c=i.viewState.center,h=s[0]-c[0],f=s[1]-c[1];return 65536*Math.log(r)+Math.sqrt(h*h+f*f)/r}const fi={ANIMATING:0,INTERACTING:1},js={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function In(i,t,n){return Math.min(Math.max(i,t),n)}function t8(i,t,n,s,r,c){const h=r-n,f=c-s;if(h!==0||f!==0){const g=((i-n)*h+(t-s)*f)/(h*h+f*f);g>1?(n=r,s=c):g>0&&(n+=h*g,s+=f*g)}return Dh(i,t,n,s)}function Dh(i,t,n,s){const r=n-i,c=s-t;return r*r+c*c}function e8(i){const t=i.length;for(let s=0;s<t;s++){let r=s,c=Math.abs(i[s][s]);for(let f=s+1;f<t;f++){const g=Math.abs(i[f][s]);g>c&&(c=g,r=f)}if(c===0)return null;const h=i[r];i[r]=i[s],i[s]=h;for(let f=s+1;f<t;f++){const g=-i[f][s]/i[s][s];for(let p=s;p<t+1;p++)s==p?i[f][p]=0:i[f][p]+=g*i[s][p]}}const n=new Array(t);for(let s=t-1;s>=0;s--){n[s]=i[s][t]/i[s][s];for(let r=s-1;r>=0;r--)i[r][t]-=i[r][s]*n[s]}return n}function Ly(i){return i*180/Math.PI}function Go(i){return i*Math.PI/180}function b0(i,t){const n=i%t;return n*t<0?n+t:n}function os(i,t,n){return i+n*(t-i)}function q_(i,t){const n=Math.pow(10,t);return Math.round(i*n)/n}function D1(i,t){return Math.ceil(q_(i,t))}function p_(i,t,n){if(i>=t&&i<n)return i;const s=n-t;return((i-t)%s+s)%s+t}function zy(i,t,n){return function(s,r,c,h,f){if(!s)return;if(!r&&!t)return s;const g=t?0:c[0]*r,p=t?0:c[1]*r,_=f?f[0]:0,S=f?f[1]:0;let x=i[0]+g/2+_,b=i[2]-g/2+_,E=i[1]+p/2+S,M=i[3]-p/2+S;x>b&&(x=(b+x)/2,b=x),E>M&&(E=(M+E)/2,M=E);let D=In(s[0],x,b),L=In(s[1],E,M);if(h&&n&&r){const T=30*r;D+=-T*Math.log(1+Math.max(0,x-s[0])/T)+T*Math.log(1+Math.max(0,s[0]-b)/T),L+=-T*Math.log(1+Math.max(0,E-s[1])/T)+T*Math.log(1+Math.max(0,s[1]-M)/T)}return[D,L]}}function n8(i){return i}const hi={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Gy(i){const t=Ps();for(let n=0,s=i.length;n<s;++n)C0(t,i[n]);return t}function F_(i,t,n){return n?(n[0]=i[0]-t,n[1]=i[1]-t,n[2]=i[2]+t,n[3]=i[3]+t,n):[i[0]-t,i[1]-t,i[2]+t,i[3]+t]}function O4(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function N4(i,t,n){let s,r;return t<i[0]?s=i[0]-t:i[2]<t?s=t-i[2]:s=0,n<i[1]?r=i[1]-n:i[3]<n?r=n-i[3]:r=0,s*s+r*r}function D0(i,t){return w4(i,t[0],t[1])}function Lo(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function w4(i,t,n){return i[0]<=t&&t<=i[2]&&i[1]<=n&&n<=i[3]}function __(i,t){const n=i[0],s=i[1],r=i[2],c=i[3],h=t[0],f=t[1];let g=hi.UNKNOWN;return h<n?g=g|hi.LEFT:h>r&&(g=g|hi.RIGHT),f<s?g=g|hi.BELOW:f>c&&(g=g|hi.ABOVE),g===hi.UNKNOWN&&(g=hi.INTERSECTING),g}function Ps(){return[1/0,1/0,-1/0,-1/0]}function zh(i,t,n,s,r){return r?(r[0]=i,r[1]=t,r[2]=n,r[3]=s,r):[i,t,n,s]}function hm(i){return zh(1/0,1/0,-1/0,-1/0,i)}function L4(i,t){const n=i[0],s=i[1];return zh(n,s,n,s,t)}function P_(i,t,n,s,r){const c=hm(r);return z4(c,i,t,n,s)}function O0(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function i8(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function C0(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function z4(i,t,n,s,r){for(;n<s;n+=r)a8(i,t[n],t[n+1]);return i}function a8(i,t,n){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],n),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],n)}function s8(i,t){let n;return n=t(X_(i)),n||(n=t(k_(i)),n)||(n=t(Z_(i)),n)||(n=t(fm(i)),n)?n:!1}function l8(i){let t=0;return Ph(i)||(t=Ye(i)*di(i)),t}function X_(i){return[i[0],i[1]]}function k_(i){return[i[2],i[1]]}function Dr(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function P1(i,t,n,s,r){const[c,h,f,g,p,_,S,x]=r8(i,t,n,s);return zh(Math.min(c,f,p,S),Math.min(h,g,_,x),Math.max(c,f,p,S),Math.max(h,g,_,x),r)}function r8(i,t,n,s){const r=t*s[0]/2,c=t*s[1]/2,h=Math.cos(n),f=Math.sin(n),g=r*h,p=r*f,_=c*h,S=c*f,x=i[0],b=i[1];return[x-g+S,b-p-_,x-g-S,b-p+_,x+g-S,b+p+_,x+g+S,b+p-_,x-g+S,b-p-_]}function di(i){return i[3]-i[1]}function K_(i,t,n){const s=n||Ps();return ia(i,t)?(i[0]>t[0]?s[0]=i[0]:s[0]=t[0],i[1]>t[1]?s[1]=i[1]:s[1]=t[1],i[2]<t[2]?s[2]=i[2]:s[2]=t[2],i[3]<t[3]?s[3]=i[3]:s[3]=t[3]):hm(s),s}function fm(i){return[i[0],i[3]]}function Z_(i){return[i[2],i[3]]}function Ye(i){return i[2]-i[0]}function ia(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function Ph(i){return i[2]<i[0]||i[3]<i[1]}function o8(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function u8(i,t,n){let s=!1;const r=__(i,t),c=__(i,n);if(r===hi.INTERSECTING||c===hi.INTERSECTING)s=!0;else{const h=i[0],f=i[1],g=i[2],p=i[3],_=t[0],S=t[1],x=n[0],b=n[1],E=(b-S)/(x-_);let M,D;c&hi.ABOVE&&!(r&hi.ABOVE)&&(M=x-(b-p)/E,s=M>=h&&M<=g),!s&&c&hi.RIGHT&&!(r&hi.RIGHT)&&(D=b-(x-g)*E,s=D>=f&&D<=p),!s&&c&hi.BELOW&&!(r&hi.BELOW)&&(M=x-(b-f)/E,s=M>=h&&M<=g),!s&&c&hi.LEFT&&!(r&hi.LEFT)&&(D=b-(x-h)*E,s=D>=f&&D<=p)}return s}function G4(i,t){const n=t.getExtent(),s=Dr(i);if(t.canWrapX()&&(s[0]<n[0]||s[0]>=n[2])){const r=Ye(n),h=Math.floor((s[0]-n[0])/r)*r;i[0]-=h,i[2]-=h}return i}function c8(i,t,n){if(t.canWrapX()){const s=t.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[s[0],i[1],s[2],i[3]]];G4(i,t);const r=Ye(s);if(Ye(i)>r)return[[s[0],i[1],s[2],i[3]]];if(i[0]<s[0])return[[i[0]+r,i[1],s[2],i[3]],[s[0],i[1],i[2],i[3]]];if(i[2]>s[2])return[[i[0],i[1],s[2],i[3]],[s[0],i[1],i[2]-r,i[3]]]}return[i]}function h8(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function X1(i,t){let n=!0;for(let s=i.length-1;s>=0;--s)if(i[s]!=t[s]){n=!1;break}return n}function Q_(i,t){const n=Math.cos(t),s=Math.sin(t),r=i[0]*n-i[1]*s,c=i[1]*n+i[0]*s;return i[0]=r,i[1]=c,i}function f8(i,t){return i[0]*=t,i[1]*=t,i}function U4(i,t){if(t.canWrapX()){const n=Ye(t.getExtent()),s=d8(i,t,n);s&&(i[0]-=s*n)}return i}function d8(i,t,n){const s=t.getExtent();let r=0;return t.canWrapX()&&(i[0]<s[0]||i[0]>s[2])&&(n=n||Ye(s),r=Math.floor((i[0]-s[0])/n)),r}function g8(i){return Math.pow(i,3)}function Xh(i){return 1-g8(1-i)}function m8(i){return 3*i*i-2*i*i*i}function p8(i){return i}const _8=63710088e-1;function Uy(i,t,n){n=n||_8;const s=Go(i[1]),r=Go(t[1]),c=(r-s)/2,h=Go(t[0]-i[0])/2,f=Math.sin(c)*Math.sin(c)+Math.sin(h)*Math.sin(h)*Math.cos(s)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))}function B4(...i){console.warn(...i)}const H4={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class dm{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||H4[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const P0=6378137,Th=Math.PI*P0,y8=[-Th,-Th,Th,Th],v8=[-180,-85,180,85],O1=P0*Math.log(Math.tan(Math.PI/2));class dh extends dm{constructor(t){super({code:t,units:"m",extent:y8,global:!0,worldExtent:v8,getPointResolution:function(n,s){return n/Math.cosh(s[1]/P0)}})}}const By=[new dh("EPSG:3857"),new dh("EPSG:102100"),new dh("EPSG:102113"),new dh("EPSG:900913"),new dh("http://www.opengis.net/def/crs/EPSG/0/3857"),new dh("http://www.opengis.net/gml/srs/epsg.xml#3857")];function S8(i,t,n,s){const r=i.length;n=n>1?n:2,s=s??n,t===void 0&&(n>2?t=i.slice():t=new Array(r));for(let c=0;c<r;c+=s){t[c]=Th*i[c]/180;let h=P0*Math.log(Math.tan(Math.PI*(+i[c+1]+90)/360));h>O1?h=O1:h<-O1&&(h=-O1),t[c+1]=h}return t}function E8(i,t,n,s){const r=i.length;n=n>1?n:2,s=s??n,t===void 0&&(n>2?t=i.slice():t=new Array(r));for(let c=0;c<r;c+=s)t[c]=180*i[c]/Th,t[c+1]=360*Math.atan(Math.exp(i[c+1]/P0))/Math.PI-90;return t}const x8=6378137,Hy=[-180,-90,180,90],b8=Math.PI*x8/180;class Iu extends dm{constructor(t,n){super({code:t,units:"degrees",extent:Hy,axisOrientation:n,global:!0,metersPerUnit:b8,worldExtent:Hy})}}const Iy=[new Iu("CRS:84"),new Iu("EPSG:4326","neu"),new Iu("urn:ogc:def:crs:OGC:1.3:CRS84"),new Iu("urn:ogc:def:crs:OGC:2:84"),new Iu("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Iu("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Iu("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let y_={};function C8(i){return y_[i]||y_[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function R8(i,t){y_[i]=t}let Oh={};function N0(i,t,n){const s=i.getCode(),r=t.getCode();s in Oh||(Oh[s]={}),Oh[s][r]=n}function bp(i,t){return i in Oh&&t in Oh[i]?Oh[i][t]:null}const k1=.9996,hs=.00669438,gm=hs*hs,mm=gm*hs,Fu=hs/(1-hs),jy=Math.sqrt(1-hs),Gh=(1-jy)/(1+jy),I4=Gh*Gh,W_=I4*Gh,J_=W_*Gh,j4=J_*Gh,Y4=1-hs/4-3*gm/64-5*mm/256,T8=3*hs/8+3*gm/32+45*mm/1024,A8=15*gm/256+45*mm/1024,M8=35*mm/3072,D8=3/2*Gh-27/32*W_+269/512*j4,O8=21/16*I4-55/32*J_,N8=151/96*W_-417/128*j4,w8=1097/512*J_,K1=6378137;function L8(i,t,n){const s=i-5e5,h=(n.north?t:t-1e7)/k1/(K1*Y4),f=h+D8*Math.sin(2*h)+O8*Math.sin(4*h)+N8*Math.sin(6*h)+w8*Math.sin(8*h),g=Math.sin(f),p=g*g,_=Math.cos(f),S=g/_,x=S*S,b=x*x,E=1-hs*p,M=Math.sqrt(1-hs*p),D=K1/M,L=(1-hs)/E,T=Fu*_**2,A=T*T,N=s/(D*k1),z=N*N,I=z*N,K=I*N,H=K*N,j=H*N,Y=f-S/L*(z/2-K/24*(5+3*x+10*T-4*A-9*Fu))+j/720*(61+90*x+298*T+45*b-252*Fu-3*A);let X=(N-I/6*(1+2*x+T)+H/120*(5-2*T+28*x-3*A+8*Fu+24*b))/_;return X=p_(X+Go(V4(n.number)),-Math.PI,Math.PI),[Ly(X),Ly(Y)]}const Yy=-80,Vy=84,z8=-180,G8=180;function U8(i,t,n){i=p_(i,z8,G8),t<Yy?t=Yy:t>Vy&&(t=Vy);const s=Go(t),r=Math.sin(s),c=Math.cos(s),h=r/c,f=h*h,g=f*f,p=Go(i),_=V4(n.number),S=Go(_),x=K1/Math.sqrt(1-hs*r**2),b=Fu*c**2,E=c*p_(p-S,-Math.PI,Math.PI),M=E*E,D=M*E,L=D*E,T=L*E,A=T*E,N=K1*(Y4*s-T8*Math.sin(2*s)+A8*Math.sin(4*s)-M8*Math.sin(6*s)),z=k1*x*(E+D/6*(1-f+b)+T/120*(5-18*f+g+72*b-58*Fu))+5e5;let I=k1*(N+x*h*(M/2+L/24*(5-f+9*b+4*b**2)+A/720*(61-58*f+g+600*b-330*Fu)));return n.north||(I+=1e7),[z,I]}function V4(i){return(i-1)*6-180+3}const B8=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function q4(i){let t=0;for(const r of B8){const c=i.match(r);if(c){t=parseInt(c[1]);break}}if(!t)return null;let n=0,s=!1;return t>32700&&t<32761?n=t-32700:t>32600&&t<32661&&(s=!0,n=t-32600),n?{number:n,north:s}:null}function qy(i,t){return function(n,s,r,c){const h=n.length;r=r>1?r:2,c=c??r,s||(r>2?s=n.slice():s=new Array(h));for(let f=0;f<h;f+=c){const g=n[f],p=n[f+1],_=i(g,p,t);s[f]=_[0],s[f+1]=_[1]}return s}}function H8(i){return q4(i)?new dm({code:i,units:"m"}):null}function I8(i){const t=q4(i.getCode());return t?{forward:qy(U8,t),inverse:qy(L8,t)}:null}const j8=[I8],Y8=[H8];let v_=!0;function V8(i){v_=!1}function $_(i,t){if(t!==void 0){for(let n=0,s=i.length;n<s;++n)t[n]=i[n];t=t}else t=i.slice();return t}function S_(i){R8(i.getCode(),i),N0(i,i,$_)}function q8(i){i.forEach(S_)}function fs(i){if(typeof i!="string")return i;const t=C8(i);if(t)return t;for(const n of Y8){const s=n(i);if(s)return s}return null}function Fy(i,t,n,s){i=fs(i);let r;const c=i.getPointResolutionFunc();if(c)r=c(t,n);else{const h=i.getUnits();if(h=="degrees"||s=="degrees")r=t;else{const f=e2(i,fs("EPSG:4326"));if(!f&&h!=="degrees")r=t*i.getMetersPerUnit();else{let p=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];p=f(p,p,2);const _=Uy(p.slice(0,2),p.slice(2,4)),S=Uy(p.slice(4,6),p.slice(6,8));r=(_+S)/2}const g=i.getMetersPerUnit();g!==void 0&&(r/=g)}}return r}function Py(i){q8(i),i.forEach(function(t){i.forEach(function(n){t!==n&&N0(t,n,$_)})})}function F8(i,t,n,s){i.forEach(function(r){t.forEach(function(c){N0(r,c,n),N0(c,r,s)})})}function t2(i,t){return i?typeof i=="string"?fs(i):i:fs(t)}function P8(i){return function(t,n,s,r){const c=t.length;s=s!==void 0?s:2,r=r??s,n=n!==void 0?n:new Array(c);for(let h=0;h<c;h+=r){const f=i(t.slice(h,h+s)),g=f.length;for(let p=0,_=r;p<_;++p)n[h+p]=p>=g?t[h+p]:f[p]}return n}}function Xy(i,t){if(i===t)return!0;const n=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||e2(i,t)===$_)&&n}function e2(i,t){const n=i.getCode(),s=t.getCode();let r=bp(n,s);if(r)return r;let c=null,h=null;for(const g of j8)c||(c=g(i)),h||(h=g(t));if(!c&&!h)return null;const f="EPSG:4326";if(h)if(c)r=Cp(c.inverse,h.forward);else{const g=bp(n,f);g&&(r=Cp(g,h.forward))}else{const g=bp(f,s);g&&(r=Cp(c.inverse,g))}return r&&(S_(i),S_(t),N0(i,t,r)),r}function Cp(i,t){return function(n,s,r,c){return s=i(n,s,r,c),t(s,s,r,c)}}function Z1(i,t){const n=fs(i),s=fs(t);return e2(n,s)}function F4(i,t,n){const s=Z1(t,n);if(!s){const r=fs(t).getCode(),c=fs(n).getCode();throw new Error(`No transform available between ${r} and ${c}`)}return s(i,void 0,i.length)}function E_(i,t){return i}function Ys(i,t){return v_&&!X1(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(v_=!1,B4("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function P4(i,t){return i}function Pu(i,t){return i}function X8(){Py(By),Py(Iy),F8(Iy,By,S8,E8)}X8();new Array(6);function Fs(){return[1,0,0,1,0,0]}function k8(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function Di(i,t){const n=t[0],s=t[1];return t[0]=i[0]*n+i[2]*s+i[4],t[1]=i[1]*n+i[3]*s+i[5],t}function Or(i,t,n,s,r,c,h,f){const g=Math.sin(c),p=Math.cos(c);return i[0]=s*p,i[1]=r*g,i[2]=-s*g,i[3]=r*p,i[4]=h*s*p-f*s*g+t,i[5]=h*r*g+f*r*p+n,i}function X4(i,t){const n=K8(t);xn(n!==0,"Transformation matrix cannot be inverted");const s=t[0],r=t[1],c=t[2],h=t[3],f=t[4],g=t[5];return i[0]=h/n,i[1]=-r/n,i[2]=-c/n,i[3]=s/n,i[4]=(c*g-h*f)/n,i[5]=-(s*g-r*f)/n,i}function K8(i){return i[0]*i[3]-i[1]*i[2]}const Z8=[1e5,1e5,1e5,1e5,2,2];function Q8(i){return"matrix("+i.join(", ")+")"}function ky(i){return i.substring(7,i.length-1).split(",").map(parseFloat)}function W8(i,t){const n=ky(i),s=ky(t);for(let r=0;r<6;++r)if(Math.round((n[r]-s[r])*Z8[r])!==0)return!1;return!0}function Uo(i,t,n,s,r,c,h){c=c||[],h=h||2;let f=0;for(let g=t;g<n;g+=s){const p=i[g],_=i[g+1];c[f++]=r[0]*p+r[2]*_+r[4],c[f++]=r[1]*p+r[3]*_+r[5];for(let S=2;S<h;S++)c[f++]=i[g+S]}return c&&c.length!=f&&(c.length=f),c}function k4(i,t,n,s,r,c,h){h=h||[];const f=Math.cos(r),g=Math.sin(r),p=c[0],_=c[1];let S=0;for(let x=t;x<n;x+=s){const b=i[x]-p,E=i[x+1]-_;h[S++]=p+b*f-E*g,h[S++]=_+b*g+E*f;for(let M=x+2;M<x+s;++M)h[S++]=i[M]}return h&&h.length!=S&&(h.length=S),h}function J8(i,t,n,s,r,c,h,f){f=f||[];const g=h[0],p=h[1];let _=0;for(let S=t;S<n;S+=s){const x=i[S]-g,b=i[S+1]-p;f[_++]=g+r*x,f[_++]=p+c*b;for(let E=S+2;E<S+s;++E)f[_++]=i[E]}return f&&f.length!=_&&(f.length=_),f}function $8(i,t,n,s,r,c,h){h=h||[];let f=0;for(let g=t;g<n;g+=s){h[f++]=i[g]+r,h[f++]=i[g+1]+c;for(let p=g+2;p<g+s;++p)h[f++]=i[p]}return h&&h.length!=f&&(h.length=f),h}const Ky=Fs(),tx=[NaN,NaN];class ex extends Il{constructor(){super(),this.extent_=Ps(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=x4((t,n,s)=>{if(!s)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(s),r.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return je()}closestPointXY(t,n,s,r){return je()}containsXY(t,n){return this.closestPointXY(t,n,tx,Number.MIN_VALUE)===0}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return je()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&hm(n),this.extentRevision_=this.getRevision()}return o8(this.extent_,t)}rotate(t,n){je()}scale(t,n,s){je()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return je()}getType(){return je()}applyTransform(t){je()}intersectsExtent(t){return je()}translate(t,n){je()}transform(t,n){const s=fs(t),r=s.getUnits()=="tile-pixels"?function(c,h,f){const g=s.getExtent(),p=s.getWorldExtent(),_=di(p)/di(g);Or(Ky,p[0],p[3],_,-_,0,0,0);const S=Uo(c,0,c.length,f,Ky,h),x=Z1(s,n);return x?x(S,S,f):S}:Z1(s,n);return this.applyTransform(r),this}}class n2 extends ex{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return P_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return je()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=Zy(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){je()}setLayout(t,n,s){let r;if(t)r=Zy(t);else{for(let c=0;c<s;++c){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,t=nx(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,n){const s=this.getFlatCoordinates();if(s){const r=this.getStride();k4(s,0,s.length,r,t,n,s),this.changed()}}scale(t,n,s){n===void 0&&(n=t),s||(s=Dr(this.getExtent()));const r=this.getFlatCoordinates();if(r){const c=this.getStride();J8(r,0,r.length,c,t,n,s,r),this.changed()}}translate(t,n){const s=this.getFlatCoordinates();if(s){const r=this.getStride();$8(s,0,s.length,r,t,n,s),this.changed()}}}function nx(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function Zy(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}function ix(i,t,n){const s=i.getFlatCoordinates();if(!s)return null;const r=i.getStride();return Uo(s,0,s.length,r,t,n)}function K4(i,t,n,s){let r=0;const c=i[n-s],h=i[n-s+1];let f=0,g=0;for(;t<n;t+=s){const p=i[t]-c,_=i[t+1]-h;r+=g*p-f*_,f=p,g=_}return r/2}function ax(i,t,n,s){let r=0;for(let c=0,h=n.length;c<h;++c){const f=n[c];r+=K4(i,t,f,s),t=f}return r}function Qy(i,t,n,s,r,c,h){const f=i[t],g=i[t+1],p=i[n]-f,_=i[n+1]-g;let S;if(p===0&&_===0)S=t;else{const x=((r-f)*p+(c-g)*_)/(p*p+_*_);if(x>1)S=n;else if(x>0){for(let b=0;b<s;++b)h[b]=os(i[t+b],i[n+b],x);h.length=s;return}else S=t}for(let x=0;x<s;++x)h[x]=i[S+x];h.length=s}function Z4(i,t,n,s,r){let c=i[t],h=i[t+1];for(t+=s;t<n;t+=s){const f=i[t],g=i[t+1],p=Dh(c,h,f,g);p>r&&(r=p),c=f,h=g}return r}function sx(i,t,n,s,r){for(let c=0,h=n.length;c<h;++c){const f=n[c];r=Z4(i,t,f,s,r),t=f}return r}function Q4(i,t,n,s,r,c,h,f,g,p,_){if(t==n)return p;let S,x;if(r===0){if(x=Dh(h,f,i[t],i[t+1]),x<p){for(S=0;S<s;++S)g[S]=i[t+S];return g.length=s,x}return p}_=_||[NaN,NaN];let b=t+s;for(;b<n;)if(Qy(i,b-s,b,s,h,f,_),x=Dh(h,f,_[0],_[1]),x<p){for(p=x,S=0;S<s;++S)g[S]=_[S];g.length=s,b+=s}else b+=s*Math.max((Math.sqrt(x)-Math.sqrt(p))/r|0,1);if(Qy(i,n-s,t,s,h,f,_),x=Dh(h,f,_[0],_[1]),x<p){for(p=x,S=0;S<s;++S)g[S]=_[S];g.length=s}return p}function lx(i,t,n,s,r,c,h,f,g,p,_){_=_||[NaN,NaN];for(let S=0,x=n.length;S<x;++S){const b=n[S];p=Q4(i,t,b,s,r,c,h,f,g,p,_),t=b}return p}function rx(i,t,n,s){for(let r=0,c=n.length;r<c;++r)i[t++]=n[r];return t}function W4(i,t,n,s){for(let r=0,c=n.length;r<c;++r){const h=n[r];for(let f=0;f<s;++f)i[t++]=h[f]}return t}function ox(i,t,n,s,r){r=r||[];let c=0;for(let h=0,f=n.length;h<f;++h){const g=W4(i,t,n[h],s);r[c++]=g,t=g}return r.length=c,r}function Ah(i,t,n,s,r){r=r!==void 0?r:[];let c=0;for(let h=t;h<n;h+=s)r[c++]=i.slice(h,h+s);return r.length=c,r}function Q1(i,t,n,s,r){r=r!==void 0?r:[];let c=0;for(let h=0,f=n.length;h<f;++h){const g=n[h];r[c++]=Ah(i,t,g,s,r[c]),t=g}return r.length=c,r}function Wy(i,t,n,s,r){r=r!==void 0?r:[];let c=0;for(let h=0,f=n.length;h<f;++h){const g=n[h];r[c++]=g.length===1&&g[0]===t?[]:Q1(i,t,g,s,r[c]),t=g[g.length-1]}return r.length=c,r}function i2(i,t,n,s,r,c,h){const f=(n-t)/s;if(f<3){for(;t<n;t+=s)c[h++]=i[t],c[h++]=i[t+1];return h}const g=new Array(f);g[0]=1,g[f-1]=1;const p=[t,n-s];let _=0;for(;p.length>0;){const S=p.pop(),x=p.pop();let b=0;const E=i[x],M=i[x+1],D=i[S],L=i[S+1];for(let T=x+s;T<S;T+=s){const A=i[T],N=i[T+1],z=t8(A,N,E,M,D,L);z>b&&(_=T,b=z)}b>r&&(g[(_-t)/s]=1,x+s<_&&p.push(x,_),_+s<S&&p.push(_,S))}for(let S=0;S<f;++S)g[S]&&(c[h++]=i[t+S*s],c[h++]=i[t+S*s+1]);return h}function ux(i,t,n,s,r,c,h,f){for(let g=0,p=n.length;g<p;++g){const _=n[g];h=i2(i,t,_,s,r,c,h),f.push(h),t=_}return h}function Vu(i,t){return t*Math.round(i/t)}function cx(i,t,n,s,r,c,h){if(t==n)return h;let f=Vu(i[t],r),g=Vu(i[t+1],r);t+=s,c[h++]=f,c[h++]=g;let p,_;do if(p=Vu(i[t],r),_=Vu(i[t+1],r),t+=s,t==n)return c[h++]=p,c[h++]=_,h;while(p==f&&_==g);for(;t<n;){const S=Vu(i[t],r),x=Vu(i[t+1],r);if(t+=s,S==p&&x==_)continue;const b=p-f,E=_-g,M=S-f,D=x-g;if(b*D==E*M&&(b<0&&M<b||b==M||b>0&&M>b)&&(E<0&&D<E||E==D||E>0&&D>E)){p=S,_=x;continue}c[h++]=p,c[h++]=_,f=p,g=_,p=S,_=x}return c[h++]=p,c[h++]=_,h}function J4(i,t,n,s,r,c,h,f){for(let g=0,p=n.length;g<p;++g){const _=n[g];h=cx(i,t,_,s,r,c,h),f.push(h),t=_}return h}class w0 extends n2{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new w0(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,s,r){return r<N4(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Z4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Q4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,s,r))}getArea(){return K4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ah(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=i2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new w0(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=W4(this.flatCoordinates,0,t,this.stride),this.changed()}}class pm extends n2{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new pm(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,s,r){const c=this.flatCoordinates,h=Dh(t,n,c[0],c[1]);if(h<r){const f=this.stride;for(let g=0;g<f;++g)s[g]=c[g];return s.length=f,h}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return L4(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return w4(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rx(this.flatCoordinates,0,t,this.stride),this.changed()}}function hx(i,t,n,s,r){return!s8(r,function(h){return!Xu(i,t,n,s,h[0],h[1])})}function Xu(i,t,n,s,r,c){let h=0,f=i[n-s],g=i[n-s+1];for(;t<n;t+=s){const p=i[t],_=i[t+1];g<=c?_>c&&(p-f)*(c-g)-(r-f)*(_-g)>0&&h++:_<=c&&(p-f)*(c-g)-(r-f)*(_-g)<0&&h--,f=p,g=_}return h!==0}function $4(i,t,n,s,r,c){if(n.length===0||!Xu(i,t,n[0],s,r,c))return!1;for(let h=1,f=n.length;h<f;++h)if(Xu(i,n[h-1],n[h],s,r,c))return!1;return!0}function a2(i,t,n,s,r,c,h){let f,g,p,_,S,x,b;const E=r[c+1],M=[];for(let T=0,A=n.length;T<A;++T){const N=n[T];for(_=i[N-s],x=i[N-s+1],f=t;f<N;f+=s)S=i[f],b=i[f+1],(E<=x&&b<=E||x<=E&&E<=b)&&(p=(E-x)/(b-x)*(S-_)+_,M.push(p)),_=S,x=b}let D=NaN,L=-1/0;for(M.sort(Qu),_=M[0],f=1,g=M.length;f<g;++f){S=M[f];const T=Math.abs(S-_);T>L&&(p=(_+S)/2,$4(i,t,n,s,p,E)&&(D=p,L=T)),_=S}return isNaN(D)&&(D=r[c]),h?(h.push(D,E,L),h):[D,E,L]}function fx(i,t,n,s,r){let c=[];for(let h=0,f=n.length;h<f;++h){const g=n[h];c=a2(i,t,g,s,r,2*h,c),t=g[g.length-1]}return c}function dx(i,t,n,s,r){let c;for(t+=s;t<n;t+=s)if(c=r(i.slice(t-s,t),i.slice(t,t+s)),c)return c;return!1}function tS(i,t,n,s,r,c){return c=c??z4(Ps(),i,t,n,s),ia(r,c)?c[0]>=r[0]&&c[2]<=r[2]||c[1]>=r[1]&&c[3]<=r[3]?!0:dx(i,t,n,s,function(h,f){return u8(r,h,f)}):!1}function gx(i,t,n,s,r){return!!(tS(i,t,n,s,r)||Xu(i,t,n,s,r[0],r[1])||Xu(i,t,n,s,r[0],r[3])||Xu(i,t,n,s,r[2],r[1])||Xu(i,t,n,s,r[2],r[3]))}function mx(i,t,n,s,r){if(!gx(i,t,n[0],s,r))return!1;if(n.length===1)return!0;for(let c=1,h=n.length;c<h;++c)if(hx(i,n[c-1],n[c],s,r)&&!tS(i,n[c-1],n[c],s,r))return!1;return!0}function px(i,t,n,s){for(;t<n-s;){for(let r=0;r<s;++r){const c=i[t+r];i[t+r]=i[n-s+r],i[n-s+r]=c}t+=s,n-=s}}function s2(i,t,n,s){let r=0,c=i[n-s],h=i[n-s+1];for(;t<n;t+=s){const f=i[t],g=i[t+1];r+=(f-c)*(g+h),c=f,h=g}return r===0?void 0:r>0}function _x(i,t,n,s,r){r=r!==void 0?r:!1;for(let c=0,h=n.length;c<h;++c){const f=n[c],g=s2(i,t,f,s);if(c===0){if(r&&g||!r&&!g)return!1}else if(r&&!g||!r&&g)return!1;t=f}return!0}function Jy(i,t,n,s,r){r=r!==void 0?r:!1;for(let c=0,h=n.length;c<h;++c){const f=n[c],g=s2(i,t,f,s);(c===0?r&&g||!r&&!g:r&&!g||!r&&g)&&px(i,t,f,s),t=f}return t}function yx(i,t){const n=[];let s=0,r=0,c;for(let h=0,f=t.length;h<f;++h){const g=t[h],p=s2(i,s,g,2);if(c===void 0&&(c=p),p===c)n.push(t.slice(r,h+1));else{if(n.length===0)continue;n[n.length-1].push(t[r])}r=h+1,s=g}return n}class L0 extends n2{constructor(t,n,s){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&s?(this.setFlatCoordinates(n,t),this.ends_=s):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?V_(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new L0(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,s,r){return r<N4(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sx(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lx(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,s,r))}containsXY(t,n){return $4(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return ax(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Jy(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,Q1(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Dr(this.getExtent());this.flatInteriorPoint_=a2(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new pm(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new w0(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,s=this.ends_,r=[];let c=0;for(let h=0,f=s.length;h<f;++h){const g=s[h],p=new w0(n.slice(c,g),t);r.push(p),c=g}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;_x(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Jy(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],s=[];return n.length=J4(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,s),new L0(n,"XY",s)}getType(){return"Polygon"}intersectsExtent(t){return mx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=ox(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}}function $y(i){if(Ph(i))throw new Error("Cannot create polygon from empty extent");const t=i[0],n=i[1],s=i[2],r=i[3],c=[t,n,t,r,s,r,s,n,t,n];return new L0(c,"XY",[c.length])}function l2(i,t,n,s){const r=Ye(t)/n[0],c=di(t)/n[1];return s?Math.min(i,Math.max(r,c)):Math.min(i,Math.min(r,c))}function r2(i,t,n){let s=Math.min(i,t);const r=50;return s*=Math.log(1+r*Math.max(0,i/t-1))/r+1,n&&(s=Math.max(s,n),s/=Math.log(1+r*Math.max(0,n/i-1))/r+1),In(s,n/2,t*2)}function vx(i,t,n,s){return t=t!==void 0?t:!0,function(r,c,h,f){if(r!==void 0){const g=i[0],p=i[i.length-1],_=n?l2(g,n,h,s):g;if(f)return t?r2(r,_,p):In(r,p,_);const S=Math.min(_,r),x=Math.floor(Y_(i,S,c));return i[x]>_&&x<i.length-1?i[x+1]:i[x]}}}function Sx(i,t,n,s,r,c){return s=s!==void 0?s:!0,n=n!==void 0?n:0,function(h,f,g,p){if(h!==void 0){const _=r?l2(t,r,g,c):t;if(p)return s?r2(h,_,n):In(h,n,_);const S=1e-9,x=Math.ceil(Math.log(t/_)/Math.log(i)-S),b=-f*(.5-S)+.5,E=Math.min(_,h),M=Math.floor(Math.log(t/E)/Math.log(i)+b),D=Math.max(x,M),L=t/Math.pow(i,D);return In(L,n,_)}}}function tv(i,t,n,s,r){return n=n!==void 0?n:!0,function(c,h,f,g){if(c!==void 0){const p=s?l2(i,s,f,r):i;return!n||!g?In(c,t,p):r2(c,p,t)}}}function o2(i){if(i!==void 0)return 0}function ev(i){if(i!==void 0)return i}function Ex(i){const t=2*Math.PI/i;return function(n,s){if(s)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function xx(i){const t=Go(5);return function(n,s){return s||n===void 0?n:Math.abs(n)<=t?0:n}}const bx=256,Rp=0;class wl extends Il{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=t2(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&V8(),t.center&&(t.center=Ys(t.center,this.projection_)),t.extent&&(t.extent=Pu(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const f in js)delete n[f];this.setProperties(n,!0);const s=Rx(t);this.maxResolution_=s.maxResolution,this.minResolution_=s.minResolution,this.zoomFactor_=s.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=s.minZoom;const r=Cx(t),c=s.constraint,h=Tx(t);this.constraints_={center:r,resolution:c,rotation:h},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const s=this.getCenterInternal();if(s){const r=t||[0,0,0,0];n=n||[0,0,0,0];const c=this.getResolution(),h=c/2*(r[3]-n[3]+n[1]-r[1]),f=c/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([s[0]+h,s[1]-f])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let s=0;s<n.length;++s){let r=arguments[s];r.center&&(r=Object.assign({},r),r.center=Ys(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Ys(r.anchor,this.getProjection())),n[s]=r}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,s;n>1&&typeof arguments[n-1]=="function"&&(s=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const _=arguments[r];_.center&&this.setCenterInternal(_.center),_.zoom!==void 0?this.setZoom(_.zoom):_.resolution&&this.setResolution(_.resolution),_.rotation!==void 0&&this.setRotation(_.rotation)}if(r===n){s&&N1(s,!0);return}let c=Date.now(),h=this.targetCenter_.slice(),f=this.targetResolution_,g=this.targetRotation_;const p=[];for(;r<n;++r){const _=arguments[r],S={start:c,complete:!1,anchor:_.anchor,duration:_.duration!==void 0?_.duration:1e3,easing:_.easing||m8,callback:s};if(_.center&&(S.sourceCenter=h,S.targetCenter=_.center.slice(),h=S.targetCenter),_.zoom!==void 0?(S.sourceResolution=f,S.targetResolution=this.getResolutionForZoom(_.zoom),f=S.targetResolution):_.resolution&&(S.sourceResolution=f,S.targetResolution=_.resolution,f=S.targetResolution),_.rotation!==void 0){S.sourceRotation=g;const x=b0(_.rotation-g+Math.PI,2*Math.PI)-Math.PI;S.targetRotation=g+x,g=S.targetRotation}Ax(S)?S.complete=!0:c+=S.duration,p.push(S)}this.animations_.push(p),this.setHint(fi.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[fi.ANIMATING]>0}getInteracting(){return this.hints_[fi.INTERACTING]>0}cancelAnimations(){this.setHint(fi.ANIMATING,-this.hints_[fi.ANIMATING]);let t;for(let n=0,s=this.animations_.length;n<s;++n){const r=this.animations_[n];if(r[0].callback&&N1(r[0].callback,!1),!t)for(let c=0,h=r.length;c<h;++c){const f=r[c];if(!f.complete){t=f.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let s=this.animations_.length-1;s>=0;--s){const r=this.animations_[s];let c=!0;for(let h=0,f=r.length;h<f;++h){const g=r[h];if(g.complete)continue;const p=t-g.start;let _=g.duration>0?p/g.duration:1;_>=1?(g.complete=!0,_=1):c=!1;const S=g.easing(_);if(g.sourceCenter){const x=g.sourceCenter[0],b=g.sourceCenter[1],E=g.targetCenter[0],M=g.targetCenter[1];this.nextCenter_=g.targetCenter;const D=x+S*(E-x),L=b+S*(M-b);this.targetCenter_=[D,L]}if(g.sourceResolution&&g.targetResolution){const x=S===1?g.targetResolution:g.sourceResolution+S*(g.targetResolution-g.sourceResolution);if(g.anchor){const b=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(x,0,b,!0);this.targetCenter_=this.calculateCenterZoom(E,g.anchor)}this.nextResolution_=g.targetResolution,this.targetResolution_=x,this.applyTargetState_(!0)}if(g.sourceRotation!==void 0&&g.targetRotation!==void 0){const x=S===1?b0(g.targetRotation+Math.PI,2*Math.PI)-Math.PI:g.sourceRotation+S*(g.targetRotation-g.sourceRotation);if(g.anchor){const b=this.constraints_.rotation(x,!0);this.targetCenter_=this.calculateCenterRotate(b,g.anchor)}this.nextRotation_=g.targetRotation,this.targetRotation_=x}if(this.applyTargetState_(!0),n=!0,!g.complete)break}if(c){this.animations_[s]=null,this.setHint(fi.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const h=r[0].callback;h&&N1(h,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let s;const r=this.getCenterInternal();return r!==void 0&&(s=[r[0]-n[0],r[1]-n[1]],Q_(s,t-this.getRotation()),h8(s,n)),s}calculateCenterZoom(t,n){let s;const r=this.getCenterInternal(),c=this.getResolution();if(r!==void 0&&c!==void 0){const h=n[0]-t*(n[0]-r[0])/c,f=n[1]-t*(n[1]-r[1])/c;s=[h,f]}return s}getViewportSize_(t){const n=this.viewportSize_;if(t){const s=n[0],r=n[1];return[Math.abs(s*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(s*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&E_(t,this.getProjection())}getCenterInternal(){return this.get(js.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return P4(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();xn(n,"The view center is not defined");const s=this.getResolution();xn(s!==void 0,"The view resolution is not defined");const r=this.getRotation();return xn(r!==void 0,"The view rotation is not defined"),P1(n,s,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(js.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal(Pu(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const s=Ye(t)/n[0],r=di(t)/n[1];return Math.max(s,r)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/Math.log(t);return function(c){return n/Math.pow(t,c*r)}}getRotation(){return this.get(js.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),s=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,c=Math.log(s/r)/n;return function(h){return Math.log(s/h)/n/c}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const s=this.padding_;return s&&(n=[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),s=this.getRotation();let r=this.getCenterInternal();const c=this.padding_;if(c){const h=this.getViewportSizeMinusPadding_();r=Tp(r,this.getViewportSize_(),[h[0]/2+c[3],h[1]/2+c[0]],n,s)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:s,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,s,r;if(this.resolutions_){const c=Y_(this.resolutions_,t,1);n=c,s=this.resolutions_[c],c==this.resolutions_.length-1?r=2:r=s/this.resolutions_[c+1]}else s=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(s/t)/Math.log(r)}getResolutionForZoom(t){var n;if((n=this.resolutions_)!=null&&n.length){if(this.resolutions_.length===1)return this.resolutions_[0];const s=In(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[s]/this.resolutions_[s+1];return this.resolutions_[s]/Math.pow(r,In(t-s,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let s;if(xn(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){xn(!Ph(t),"Cannot fit empty extent provided as `geometry`");const r=Pu(t,this.getProjection());s=$y(r)}else if(t.getType()==="Circle"){const r=Pu(t.getExtent(),this.getProjection());s=$y(r),s.rotate(this.getRotation(),Dr(r))}else s=t;this.fitInternal(s,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),s=Math.cos(n),r=Math.sin(-n),c=t.getFlatCoordinates(),h=t.getStride();let f=1/0,g=1/0,p=-1/0,_=-1/0;for(let S=0,x=c.length;S<x;S+=h){const b=c[S]*s-c[S+1]*r,E=c[S]*r+c[S+1]*s;f=Math.min(f,b),g=Math.min(g,E),p=Math.max(p,b),_=Math.max(_,E)}return[f,g,p,_]}fitInternal(t,n){n=n||{};let s=n.size;s||(s=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],c=n.nearest!==void 0?n.nearest:!1;let h;n.minResolution!==void 0?h=n.minResolution:n.maxZoom!==void 0?h=this.getResolutionForZoom(n.maxZoom):h=0;const f=this.rotatedExtentForGeometry(t);let g=this.getResolutionForExtentInternal(f,[s[0]-r[1]-r[3],s[1]-r[0]-r[2]]);g=isNaN(g)?h:Math.max(g,h),g=this.getConstrainedResolution(g,c?0:1);const p=this.getRotation(),_=Math.sin(p),S=Math.cos(p),x=Dr(f);x[0]+=(r[1]-r[3])/2*g,x[1]+=(r[0]-r[2])/2*g;const b=x[0]*S-x[1]*_,E=x[1]*S+x[0]*_,M=this.getConstrainedCenter([b,E],g),D=n.callback?n.callback:M0;n.duration!==void 0?this.animateInternal({resolution:g,center:M,duration:n.duration,easing:n.easing},D):(this.targetResolution_=g,this.targetCenter_=M,this.applyTargetState_(!1,!0),N1(D,!0))}centerOn(t,n,s){this.centerOnInternal(Ys(t,this.getProjection()),n,s)}centerOnInternal(t,n,s){this.setCenterInternal(Tp(t,n,s,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,s,r){let c;const h=this.padding_;if(h&&t){const f=this.getViewportSizeMinusPadding_(-s),g=Tp(t,r,[f[0]/2+h[3],f[1]/2+h[0]],n,s);c=[t[0]-g[0],t[1]-g[1]]}return c}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=E_(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&Ys(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const s=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),c=this.constraints_.resolution(this.targetResolution_*t,0,r,s);n&&(this.targetCenter_=this.calculateCenterZoom(c,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=Ys(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const s=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,s);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Ys(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const s=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,s),c=this.getViewportSize_(r),h=this.constraints_.resolution(this.targetResolution_,0,c,s),f=this.constraints_.center(this.targetCenter_,h,c,s,this.calculateCenterShift(this.targetCenter_,h,r,c));this.get(js.ROTATION)!==r&&this.set(js.ROTATION,r),this.get(js.RESOLUTION)!==h&&(this.set(js.RESOLUTION,h),this.set("zoom",this.getZoom(),!0)),(!f||!this.get(js.CENTER)||!X1(this.get(js.CENTER),f))&&this.set(js.CENTER,f),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,s){t=t!==void 0?t:200;const r=n||0,c=this.constraints_.rotation(this.targetRotation_),h=this.getViewportSize_(c),f=this.constraints_.resolution(this.targetResolution_,r,h),g=this.constraints_.center(this.targetCenter_,f,h,!1,this.calculateCenterShift(this.targetCenter_,f,c,h));if(t===0&&!this.cancelAnchor_){this.targetResolution_=f,this.targetRotation_=c,this.targetCenter_=g,this.applyTargetState_();return}s=s||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==f||this.getRotation()!==c||!this.getCenterInternal()||!X1(this.getCenterInternal(),g))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:c,center:g,resolution:f,duration:t,easing:Xh,anchor:s}))}beginInteraction(){this.resolveConstraints(0),this.setHint(fi.INTERACTING,1)}endInteraction(t,n,s){s=s&&Ys(s,this.getProjection()),this.endInteractionInternal(t,n,s)}endInteractionInternal(t,n,s){this.getInteracting()&&(this.setHint(fi.INTERACTING,-1),this.resolveConstraints(t,n,s))}getConstrainedCenter(t,n){const s=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),s)}getConstrainedZoom(t,n){const s=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(s,n))}getConstrainedResolution(t,n){n=n||0;const s=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,s)}}function N1(i,t){setTimeout(function(){i(t)},0)}function Cx(i){if(i.extent!==void 0){const n=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return zy(i.extent,i.constrainOnlyCenter,n)}const t=t2(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,zy(n,!1,!1)}return n8}function Rx(i){let t,n,s,h=i.minZoom!==void 0?i.minZoom:Rp,f=i.maxZoom!==void 0?i.maxZoom:28;const g=i.zoomFactor!==void 0?i.zoomFactor:2,p=i.multiWorld!==void 0?i.multiWorld:!1,_=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,S=i.showFullExtent!==void 0?i.showFullExtent:!1,x=t2(i.projection,"EPSG:3857"),b=x.getExtent();let E=i.constrainOnlyCenter,M=i.extent;if(!p&&!M&&x.isGlobal()&&(E=!1,M=b),i.resolutions!==void 0){const D=i.resolutions;n=D[h],s=D[f]!==void 0?D[f]:D[D.length-1],i.constrainResolution?t=vx(D,_,!E&&M,S):t=tv(n,s,_,!E&&M,S)}else{const L=(b?Math.max(Ye(b),di(b)):360*H4.degrees/x.getMetersPerUnit())/bx/Math.pow(2,Rp),T=L/Math.pow(2,28-Rp);n=i.maxResolution,n!==void 0?h=0:n=L/Math.pow(g,h),s=i.minResolution,s===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?s=n/Math.pow(g,f):s=L/Math.pow(g,f):s=T),f=h+Math.floor(Math.log(n/s)/Math.log(g)),s=n/Math.pow(g,f-h),i.constrainResolution?t=Sx(g,n,s,_,!E&&M,S):t=tv(n,s,_,!E&&M,S)}return{constraint:t,maxResolution:n,minResolution:s,minZoom:h,zoomFactor:g}}function Tx(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const n=i.constrainRotation;return n===void 0||n===!0?xx():n===!1?ev:typeof n=="number"?Ex(n):ev}return o2}function Ax(i){return!(i.sourceCenter&&i.targetCenter&&!X1(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function Tp(i,t,n,s,r){const c=Math.cos(-r);let h=Math.sin(-r),f=i[0]*c-i[1]*h,g=i[1]*c+i[0]*h;f+=(t[0]/2-n[0])*s,g+=(n[1]-t[1]/2)*s,h=-h;const p=f*c-g*h,_=g*c+f*h;return[p,_]}const w1="ol-hidden",_m="ol-unselectable",u2="ol-control",nv="ol-collapsed",Mx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),iv=["style","variant","weight","size","lineHeight","family"],eS=function(i){const t=i.match(Mx);if(!t)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let s=0,r=iv.length;s<r;++s){const c=t[s+1];c!==void 0&&(n[iv[s]]=c)}return n.families=n.family.split(/,\s?/),n};function gi(i,t,n,s){let r;return n&&n.length?r=n.shift():T4?r=new OffscreenCanvas(i||300,t||300):r=document.createElement("canvas"),i&&(r.width=i),t&&(r.height=t),r.getContext("2d",s)}let Ap;function W1(){return Ap||(Ap=gi(1,1)),Ap}function c2(i){const t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function av(i,t){const n=t.parentNode;n&&n.replaceChild(i,t)}function Dx(i){for(;i.lastChild;)i.lastChild.remove()}function Ox(i,t){const n=i.childNodes;for(let s=0;;++s){const r=n[s],c=t[s];if(!r&&!c)break;if(r!==c){if(!r){i.appendChild(c);continue}if(!c){i.removeChild(r),--s;continue}i.insertBefore(c,r)}}}class h2 extends Il{constructor(t){super();const n=t.element;n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){var t;(t=this.element)==null||t.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){var n;this.map_&&((n=this.element)==null||n.remove());for(let s=0,r=this.listenerKeys.length;s<r;++s)bn(this.listenerKeys[s]);if(this.listenerKeys.length=0,this.map_=t,t){const s=this.target_??t.getOverlayContainerStopEvent();this.element&&s.appendChild(this.element),this.render!==M0&&this.listenerKeys.push(we(t,No.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class Nx extends h2{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const n=t.className!==void 0?t.className:"ol-attribution",s=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:n+"-expand",c=t.collapseLabel!==void 0?t.collapseLabel:"",h=t.collapseClassName!==void 0?t.collapseClassName:n+"-collapse";typeof c=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=c,this.collapseLabel_.className=h):this.collapseLabel_=c;const f=t.label!==void 0?t.label:"i";typeof f=="string"?(this.label_=document.createElement("span"),this.label_.textContent=f,this.label_.className=r):this.label_=f;const g=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=s,this.toggleButton_.appendChild(g),this.toggleButton_.addEventListener(le.CLICK,this.handleClick_.bind(this),!1);const p=n+" "+_m+" "+u2+(this.collapsed_&&this.collapsible_?" "+nv:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=p,_.appendChild(this.toggleButton_),_.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const n=this.getMap().getAllLayers(),s=new Set(n.flatMap(r=>r.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>s.add(r)):s.add(this.attributions_)),!this.overrideCollapsible_){const r=!n.some(c=>{var h;return((h=c.getSource())==null?void 0:h.getAttributionsCollapsible())===!1});this.setCollapsible(r)}return Array.from(s)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(t).map(r=>b4(()=>r))),s=n.length>0;if(this.renderedVisible_!=s&&(this.element.style.display=s?"":"none",this.renderedVisible_=s),!Ho(n,this.renderedAttributions_)){Dx(this.ulElement_);for(let r=0,c=n.length;r<c;++r){const h=document.createElement("li");h.innerHTML=n[r],this.ulElement_.appendChild(h)}this.renderedAttributions_=n}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(nv),this.collapsed_?av(this.collapseLabel_,this.label_):av(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class wx extends h2{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const n=t.className!==void 0?t.className:"ol-rotate",s=t.label!==void 0?t.label:"",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof s=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=s):(this.label_=s,this.label_.classList.add(r));const c=t.tipLabel?t.tipLabel:"Reset rotation",h=document.createElement("button");h.className=n+"-reset",h.setAttribute("type","button"),h.title=c,h.appendChild(this.label_),h.addEventListener(le.CLICK,this.handleClick_.bind(this),!1);const f=n+" "+_m+" "+u2,g=this.element;g.className=f,g.appendChild(h),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(w1)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const s=n.getRotation();s!==void 0&&(this.duration_>0&&s%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Xh}):n.setRotation(0))}render(t){const n=t.frameState;if(!n)return;const s=n.viewState.rotation;if(s!=this.rotation_){const r="rotate("+s+"rad)";if(this.autoHide_){const c=this.element.classList.contains(w1);!c&&s===0?this.element.classList.add(w1):c&&s!==0&&this.element.classList.remove(w1)}this.label_.style.transform=r}this.rotation_=s}}class Lx extends h2{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const n=t.className!==void 0?t.className:"ol-zoom",s=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:n+"-in",c=t.zoomOutClassName!==void 0?t.zoomOutClassName:n+"-out",h=t.zoomInLabel!==void 0?t.zoomInLabel:"+",f=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",g=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",p=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",_=document.createElement("button");_.className=r,_.setAttribute("type","button"),_.title=g,_.appendChild(typeof h=="string"?document.createTextNode(h):h),_.addEventListener(le.CLICK,this.handleClick_.bind(this,s),!1);const S=document.createElement("button");S.className=c,S.setAttribute("type","button"),S.title=p,S.appendChild(typeof f=="string"?document.createTextNode(f):f),S.addEventListener(le.CLICK,this.handleClick_.bind(this,-s),!1);const x=n+" "+_m+" "+u2,b=this.element;b.className=x,b.appendChild(_),b.appendChild(S),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,n){n.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const s=this.getMap().getView();if(!s)return;const r=s.getZoom();if(r!==void 0){const c=s.getConstrainedZoom(r+t);this.duration_>0?(s.getAnimating()&&s.cancelAnimations(),s.animate({zoom:c,duration:this.duration_,easing:Xh})):s.setZoom(c)}}}function zx(i){i=i||{};const t=new Ea;return(i.zoom!==void 0?i.zoom:!0)&&t.push(new Lx(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&t.push(new wx(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&t.push(new Nx(i.attributionOptions)),t}class Gx{constructor(t,n,s){this.decay_=t,this.minVelocity_=n,this.delay_=s,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,n){this.points_.push(t,n,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<t)return!1;let s=n-3;for(;s>0&&this.points_[s+2]>t;)s-=3;const r=this.points_[n+2]-this.points_[s+2];if(r<1e3/60)return!1;const c=this.points_[n]-this.points_[s],h=this.points_[n+1]-this.points_[s+1];return this.angle_=Math.atan2(h,c),this.initialVelocity_=Math.sqrt(c*c+h*h)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const x_={ACTIVE:"active"};class X0 extends Il{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(x_.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(x_.ACTIVE,t)}setMap(t){this.map_=t}}function Ux(i,t,n){const s=i.getCenterInternal();if(s){const r=[s[0]+t[0],s[1]+t[1]];i.animateInternal({duration:n!==void 0?n:250,easing:p8,center:i.getConstrainedCenter(r)})}}function f2(i,t,n,s){const r=i.getZoom();if(r===void 0)return;const c=i.getConstrainedZoom(r+t),h=i.getResolutionForZoom(c);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:h,anchor:n,duration:s!==void 0?s:250,easing:Xh})}class Bx extends X0{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let n=!1;if(t.type==En.DBLCLICK){const s=t.originalEvent,r=t.map,c=t.coordinate,h=s.shiftKey?-this.delta_:this.delta_,f=r.getView();f2(f,h,c,this.duration_),s.preventDefault(),n=!0}return!n}}function b_(i){const t=arguments;return function(n){let s=!0;for(let r=0,c=t.length;r<c&&(s=s&&t[r](n),!!s);++r);return s}}const Hx=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Ix=function(i){const t=i.map.getTargetElement(),n=t.getRootNode(),s=i.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(s):t.contains(s)},nS=function(i){const t=i.map.getTargetElement(),n=t.getRootNode();return(n instanceof ShadowRoot?n.host:t).hasAttribute("tabindex")?Ix(i):!0},iS=Wu,aS=function(i){const t=i.originalEvent;return t instanceof PointerEvent&&t.button==0&&!(KE&&R4&&t.ctrlKey)},sS=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},jx=function(i){const t=i.originalEvent;return R4?t.metaKey:t.ctrlKey},Yx=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},lS=function(i){const t=i.originalEvent,n=t.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!t.target.isContentEditable},Mp=function(i){const t=i.originalEvent;return t instanceof PointerEvent&&t.pointerType=="mouse"},Vx=function(i){const t=i.originalEvent;return t instanceof PointerEvent&&t.isPrimary&&t.button===0};class kh extends X0{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==En.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==En.POINTERUP){const s=this.handleUpEvent(t);this.handlingDownUpSequence=s&&this.targetPointers.length>0}}else if(t.type==En.POINTERDOWN){const s=this.handleDownEvent(t);this.handlingDownUpSequence=s,n=this.stopDown(s)}else t.type==En.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function d2(i){const t=i.length;let n=0,s=0;for(let r=0;r<t;r++)n+=i[r].clientX,s+=i[r].clientY;return{clientX:n/t,clientY:s/t}}class qx extends kh{constructor(t){super({stopDown:um}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=t.condition?t.condition:b_(sS,Vx);this.condition_=t.onFocusOnly?b_(nS,n):n,this.noKinetic_=!1}handleDragEvent(t){const n=t.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const s=this.targetPointers,r=n.getEventPixel(d2(s));if(s.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const c=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],f=t.map.getView();f8(c,f.getResolution()),Q_(c,f.getRotation()),f.adjustCenterInternal(c)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=s.length,t.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,s=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),c=this.kinetic_.getAngle(),h=s.getCenterInternal(),f=n.getPixelFromCoordinateInternal(h),g=n.getCoordinateFromPixelInternal([f[0]-r*Math.cos(c),f[1]-r*Math.sin(c)]);s.animateInternal({center:s.getConstrainedCenter(g),duration:500,easing:Xh})}return this.panning_&&(this.panning_=!1,s.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const s=t.map.getView();return this.lastCentroid=null,s.getAnimating()&&s.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Fx extends kh{constructor(t){t=t||{},super({stopDown:um}),this.condition_=t.condition?t.condition:Hx,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Mp(t))return;const n=t.map,s=n.getView();if(s.getConstraints().rotation===o2)return;const r=n.getSize(),c=t.pixel,h=Math.atan2(r[1]/2-c[1],c[0]-r[0]/2);if(this.lastAngle_!==void 0){const f=h-this.lastAngle_;s.adjustRotationInternal(-f)}this.lastAngle_=h}handleUpEvent(t){return Mp(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Mp(t)&&aS(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Px extends j_{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,n=this.endPixel_,s="px",r=this.element_.style;r.left=Math.min(t[0],n[0])+s,r.top=Math.min(t[1],n[1])+s,r.width=Math.abs(n[0]-t[0])+s,r.height=Math.abs(n[1]-t[1])+s}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,n=this.endPixel_,r=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new L0([r])}getGeometry(){return this.geometry_}}const gh={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Td extends Hl{constructor(t,n,s){super(t),this.coordinate=n,this.mapBrowserEvent=s}}class Xx extends kh{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new Px(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??aS,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,n,s){const r=s[0]-n[0],c=s[1]-n[1];return r*r+c*c>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Td(gh.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new Td(n?gh.BOXEND:gh.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Td(gh.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Td(gh.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Td(gh.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class kx extends Xx{constructor(t){t=t||{};const n=t.condition?t.condition:Yx;super({condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const s=this.getMap().getView();let r=this.getGeometry();if(this.out_){const c=s.rotatedExtentForGeometry(r),h=s.getResolutionForExtentInternal(c),f=s.getResolution()/h;r=r.clone(),r.scale(f*f)}s.fitInternal(r,{duration:this.duration_,easing:Xh})}}const ju={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Kx extends X0{constructor(t){super(),t=t||{},this.defaultCondition_=function(n){return sS(n)&&lS(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let n=!1;if(t.type==le.KEYDOWN){const s=t.originalEvent,r=s.key;if(this.condition_(t)&&(r==ju.DOWN||r==ju.LEFT||r==ju.RIGHT||r==ju.UP)){const h=t.map.getView(),f=h.getResolution()*this.pixelDelta_;let g=0,p=0;r==ju.DOWN?p=-f:r==ju.LEFT?g=-f:r==ju.RIGHT?g=f:p=f;const _=[g,p];Q_(_,h.getRotation()),Ux(h,_,this.duration_),s.preventDefault(),n=!0}}return!n}}class Zx extends X0{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(n){return!jx(n)&&lS(n)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let n=!1;if(t.type==le.KEYDOWN||t.type==le.KEYPRESS){const s=t.originalEvent,r=s.key;if(this.condition_(t)&&(r==="+"||r==="-")){const c=t.map,h=r==="+"?this.delta_:-this.delta_,f=c.getView();f2(f,h,void 0,this.duration_),s.preventDefault(),n=!0}}return!n}}class Qx extends X0{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const n=t.condition?t.condition:iS;this.condition_=t.onFocusOnly?b_(nS,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==le.WHEEL)return!0;const s=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let c;if(t.type==le.WHEEL&&(c=r.deltaY,r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(c*=40)),c===0)return!1;this.lastDelta_=c;const h=Date.now();this.startTime_===void 0&&(this.startTime_=h),(!this.mode_||h-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(c)<4?"trackpad":"wheel");const f=s.getView();if(this.mode_==="trackpad"&&!(f.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(f.getAnimating()&&f.cancelAnimations(),f.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),f.adjustZoom(-c/this.deltaPerZoom_,this.lastAnchor_?s.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=h,!1;this.totalDelta_+=c;const g=Math.max(this.timeout_-(h-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,s),g),!1}handleWheelZoom_(t){const n=t.getView();n.getAnimating()&&n.cancelAnimations();let s=-In(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(s=s?s>0?1:-1:0),f2(n,s,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class Wx extends kh{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=um),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let n=0;const s=this.targetPointers[0],r=this.targetPointers[1],c=Math.atan2(r.clientY-s.clientY,r.clientX-s.clientX);if(this.lastAngle_!==void 0){const g=c-this.lastAngle_;this.rotationDelta_+=g,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=g}this.lastAngle_=c;const h=t.map,f=h.getView();f.getConstraints().rotation!==o2&&(this.anchor_=h.getCoordinateFromPixelInternal(h.getEventPixel(d2(this.targetPointers))),this.rotating_&&(h.render(),f.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class Jx extends kh{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=um),super(n),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const s=this.targetPointers[0],r=this.targetPointers[1],c=s.clientX-r.clientX,h=s.clientY-r.clientY,f=Math.sqrt(c*c+h*h);this.lastDistance_!==void 0&&(n=this.lastDistance_/f),this.lastDistance_=f;const g=t.map,p=g.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=g.getCoordinateFromPixelInternal(g.getEventPixel(d2(this.targetPointers))),g.render(),p.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const s=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return s.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function $x(i){i=i||{};const t=new Ea,n=new Gx(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&t.push(new Fx),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&t.push(new Bx({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&t.push(new qx({onFocusOnly:i.onFocusOnly,kinetic:n})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&t.push(new Wx),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&t.push(new Jx({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(t.push(new Kx),t.push(new Zx({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&t.push(new Qx({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&t.push(new kx({duration:i.zoomDuration})),t}const Xe={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class rS extends Il{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[Xe.OPACITY]=t.opacity!==void 0?t.opacity:1,xn(typeof n[Xe.OPACITY]=="number","Layer opacity must be a number"),n[Xe.VISIBLE]=t.visible!==void 0?t.visible:!0,n[Xe.Z_INDEX]=t.zIndex,n[Xe.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[Xe.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[Xe.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[Xe.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},s=this.getZIndex();return n.opacity=In(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=s===void 0&&!n.managed?1/0:s,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return je()}getLayerStatesArray(t){return je()}getExtent(){return this.get(Xe.EXTENT)}getMaxResolution(){return this.get(Xe.MAX_RESOLUTION)}getMinResolution(){return this.get(Xe.MIN_RESOLUTION)}getMinZoom(){return this.get(Xe.MIN_ZOOM)}getMaxZoom(){return this.get(Xe.MAX_ZOOM)}getOpacity(){return this.get(Xe.OPACITY)}getSourceState(){return je()}getVisible(){return this.get(Xe.VISIBLE)}getZIndex(){return this.get(Xe.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Xe.EXTENT,t)}setMaxResolution(t){this.set(Xe.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Xe.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Xe.MAX_ZOOM,t)}setMinZoom(t){this.set(Xe.MIN_ZOOM,t)}setOpacity(t){xn(typeof t=="number","Layer opacity must be a number"),this.set(Xe.OPACITY,t)}setVisible(t){this.set(Xe.VISIBLE,t)}setZIndex(t){this.set(Xe.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class wo extends Hl{constructor(t,n){super(t),this.layer=n}}const Dp={LAYERS:"layers"};class Kh extends rS{constructor(t){t=t||{};const n=Object.assign({},t);delete n.layers;let s=t.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Dp.LAYERS,this.handleLayersChanged_),s?Array.isArray(s)?s=new Ea(s.slice(),{unique:!0}):xn(typeof s.getArray=="function","Expected `layers` to be an array or a `Collection`"):s=new Ea(void 0,{unique:!0}),this.setLayers(s)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(bn),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(we(t,_a.ADD,this.handleLayersAdd_,this),we(t,_a.REMOVE,this.handleLayersRemove_,this));for(const s in this.listenerKeys_)this.listenerKeys_[s].forEach(bn);F0(this.listenerKeys_);const n=t.getArray();for(let s=0,r=n.length;s<r;s++){const c=n[s];this.registerLayerListeners_(c),this.dispatchEvent(new wo("addlayer",c))}this.changed()}registerLayerListeners_(t){const n=[we(t,wh.PROPERTYCHANGE,this.handleLayerChange_,this),we(t,le.CHANGE,this.handleLayerChange_,this)];t instanceof Kh&&n.push(we(t,"addlayer",this.handleLayerGroupAdd_,this),we(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[wn(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new wo("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new wo("removelayer",t.layer))}handleLayersAdd_(t){const n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new wo("addlayer",n)),this.changed()}handleLayersRemove_(t){const n=t.element,s=wn(n);this.listenerKeys_[s].forEach(bn),delete this.listenerKeys_[s],this.dispatchEvent(new wo("removelayer",n)),this.changed()}getLayers(){return this.get(Dp.LAYERS)}setLayers(t){const n=this.getLayers();if(n){const s=n.getArray();for(let r=0,c=s.length;r<c;++r)this.dispatchEvent(new wo("removelayer",s[r]))}this.set(Dp.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(n){n.getLayersArray(t)}),t}getLayerStatesArray(t){const n=t!==void 0?t:[],s=n.length;this.getLayers().forEach(function(h){h.getLayerStatesArray(n)});const r=this.getLayerState();let c=r.zIndex;!t&&r.zIndex===void 0&&(c=0);for(let h=s,f=n.length;h<f;h++){const g=n[h];g.opacity*=r.opacity,g.visible=g.visible&&r.visible,g.maxResolution=Math.min(g.maxResolution,r.maxResolution),g.minResolution=Math.max(g.minResolution,r.minResolution),g.minZoom=Math.max(g.minZoom,r.minZoom),g.maxZoom=Math.min(g.maxZoom,r.maxZoom),r.extent!==void 0&&(g.extent!==void 0?g.extent=K_(g.extent,r.extent):g.extent=r.extent),g.zIndex===void 0&&(g.zIndex=c)}return n}getSourceState(){return"ready"}}const us={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};let ym=class extends rS{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Xe.SOURCE,this.handleSourcePropertyChange_);const s=t.source?t.source:null;this.setSource(s)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Xe.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(bn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=we(t,le.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const s=this.getMapInternal();!t&&s&&(t=s.getView()),t instanceof wl?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&s&&(n.layerStatesArray=s.getLayerGroup().getLayerStatesArray());let r;if(n.layerStatesArray){if(r=n.layerStatesArray.find(h=>h.layer===this),!r)return!1}else r=this.getLayerState();const c=this.getExtent();return g2(r,n.viewState)&&(!c||ia(c,n.extent))}getAttributions(t){var c;if(!this.isVisible(t))return[];const n=(c=this.getSource())==null?void 0:c.getAttributions();if(!n)return[];const s=t instanceof wl?t.getViewStateAndExtent():t;let r=n(s);return Array.isArray(r)||(r=[r]),r}render(t,n){const s=this.getRenderer();return s.prepareFrame(t)?(this.rendered=!0,s.renderFrame(t,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,n){}renderDeferred(t){const n=this.getRenderer();n&&n.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Xe.MAP,t)}getMapInternal(){return this.get(Xe.MAP)}setMap(t){this.mapPrecomposeKey_&&(bn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(bn(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=we(t,us.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=we(this,le.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const n=t.frameState.layerStatesArray,s=this.getLayerState(!1);xn(!n.some(r=>r.layer===s.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(s)}setSource(t){this.set(Xe.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function g2(i,t){if(!i.visible)return!1;const n=t.resolution;if(n<i.minResolution||n>=i.maxResolution)return!1;const s=t.zoom;return s>i.minZoom&&s<=i.maxZoom}function oS(i,t,n=0,s=i.length-1,r=tb){for(;s>n;){if(s-n>600){const g=s-n+1,p=t-n+1,_=Math.log(g),S=.5*Math.exp(2*_/3),x=.5*Math.sqrt(_*S*(g-S)/g)*(p-g/2<0?-1:1),b=Math.max(n,Math.floor(t-p*S/g+x)),E=Math.min(s,Math.floor(t+(g-p)*S/g+x));oS(i,t,b,E,r)}const c=i[t];let h=n,f=s;for(Ad(i,n,t),r(i[s],c)>0&&Ad(i,n,s);h<f;){for(Ad(i,h,f),h++,f--;r(i[h],c)<0;)h++;for(;r(i[f],c)>0;)f--}r(i[n],c)===0?Ad(i,n,f):(f++,Ad(i,f,s)),f<=t&&(n=f+1),t<=f&&(s=f-1)}}function Ad(i,t,n){const s=i[t];i[t]=i[n],i[n]=s}function tb(i,t){return i<t?-1:i>t?1:0}let uS=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const s=[];if(!z1(t,n))return s;const r=this.toBBox,c=[];for(;n;){for(let h=0;h<n.children.length;h++){const f=n.children[h],g=n.leaf?r(f):f;z1(t,g)&&(n.leaf?s.push(f):Np(t,g)?this._all(f,s):c.push(f))}n=c.pop()}return s}collides(t){let n=this.data;if(!z1(t,n))return!1;const s=[];for(;n;){for(let r=0;r<n.children.length;r++){const c=n.children[r],h=n.leaf?this.toBBox(c):c;if(z1(t,h)){if(n.leaf||Np(t,h))return!0;s.push(c)}}n=s.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let s=0;s<t.length;s++)this.insert(t[s]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const s=this.data;this.data=n,n=s}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Eh([]),this}remove(t,n){if(!t)return this;let s=this.data;const r=this.toBBox(t),c=[],h=[];let f,g,p;for(;s||c.length;){if(s||(s=c.pop(),g=c[c.length-1],f=h.pop(),p=!0),s.leaf){const _=eb(t,s.children,n);if(_!==-1)return s.children.splice(_,1),c.push(s),this._condense(c),this}!p&&!s.leaf&&Np(s,r)?(c.push(s),h.push(f),f=0,g=s,s=s.children[0]):g?(f++,s=g.children[f],p=!1):s=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const s=[];for(;t;)t.leaf?n.push(...t.children):s.push(...t.children),t=s.pop();return n}_build(t,n,s,r){const c=s-n+1;let h=this._maxEntries,f;if(c<=h)return f=Eh(t.slice(n,s+1)),mh(f,this.toBBox),f;r||(r=Math.ceil(Math.log(c)/Math.log(h)),h=Math.ceil(c/Math.pow(h,r-1))),f=Eh([]),f.leaf=!1,f.height=r;const g=Math.ceil(c/h),p=g*Math.ceil(Math.sqrt(h));sv(t,n,s,p,this.compareMinX);for(let _=n;_<=s;_+=p){const S=Math.min(_+p-1,s);sv(t,_,S,g,this.compareMinY);for(let x=_;x<=S;x+=g){const b=Math.min(x+g-1,S);f.children.push(this._build(t,x,b,r-1))}}return mh(f,this.toBBox),f}_chooseSubtree(t,n,s,r){for(;r.push(n),!(n.leaf||r.length-1===s);){let c=1/0,h=1/0,f;for(let g=0;g<n.children.length;g++){const p=n.children[g],_=Op(p),S=ab(t,p)-_;S<h?(h=S,c=_<c?_:c,f=p):S===h&&_<c&&(c=_,f=p)}n=f||n.children[0]}return n}_insert(t,n,s){const r=s?t:this.toBBox(t),c=[],h=this._chooseSubtree(r,this.data,n,c);for(h.children.push(t),y0(h,r);n>=0&&c[n].children.length>this._maxEntries;)this._split(c,n),n--;this._adjustParentBBoxes(r,c,n)}_split(t,n){const s=t[n],r=s.children.length,c=this._minEntries;this._chooseSplitAxis(s,c,r);const h=this._chooseSplitIndex(s,c,r),f=Eh(s.children.splice(h,s.children.length-h));f.height=s.height,f.leaf=s.leaf,mh(s,this.toBBox),mh(f,this.toBBox),n?t[n-1].children.push(f):this._splitRoot(s,f)}_splitRoot(t,n){this.data=Eh([t,n]),this.data.height=t.height+1,this.data.leaf=!1,mh(this.data,this.toBBox)}_chooseSplitIndex(t,n,s){let r,c=1/0,h=1/0;for(let f=n;f<=s-n;f++){const g=_0(t,0,f,this.toBBox),p=_0(t,f,s,this.toBBox),_=sb(g,p),S=Op(g)+Op(p);_<c?(c=_,r=f,h=S<h?S:h):_===c&&S<h&&(h=S,r=f)}return r||s-n}_chooseSplitAxis(t,n,s){const r=t.leaf?this.compareMinX:nb,c=t.leaf?this.compareMinY:ib,h=this._allDistMargin(t,n,s,r),f=this._allDistMargin(t,n,s,c);h<f&&t.children.sort(r)}_allDistMargin(t,n,s,r){t.children.sort(r);const c=this.toBBox,h=_0(t,0,n,c),f=_0(t,s-n,s,c);let g=L1(h)+L1(f);for(let p=n;p<s-n;p++){const _=t.children[p];y0(h,t.leaf?c(_):_),g+=L1(h)}for(let p=s-n-1;p>=n;p--){const _=t.children[p];y0(f,t.leaf?c(_):_),g+=L1(f)}return g}_adjustParentBBoxes(t,n,s){for(let r=s;r>=0;r--)y0(n[r],t)}_condense(t){for(let n=t.length-1,s;n>=0;n--)t[n].children.length===0?n>0?(s=t[n-1].children,s.splice(s.indexOf(t[n]),1)):this.clear():mh(t[n],this.toBBox)}};function eb(i,t,n){if(!n)return t.indexOf(i);for(let s=0;s<t.length;s++)if(n(i,t[s]))return s;return-1}function mh(i,t){_0(i,0,i.children.length,t,i)}function _0(i,t,n,s,r){r||(r=Eh(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let c=t;c<n;c++){const h=i.children[c];y0(r,i.leaf?s(h):h)}return r}function y0(i,t){return i.minX=Math.min(i.minX,t.minX),i.minY=Math.min(i.minY,t.minY),i.maxX=Math.max(i.maxX,t.maxX),i.maxY=Math.max(i.maxY,t.maxY),i}function nb(i,t){return i.minX-t.minX}function ib(i,t){return i.minY-t.minY}function Op(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function L1(i){return i.maxX-i.minX+(i.maxY-i.minY)}function ab(i,t){return(Math.max(t.maxX,i.maxX)-Math.min(t.minX,i.minX))*(Math.max(t.maxY,i.maxY)-Math.min(t.minY,i.minY))}function sb(i,t){const n=Math.max(i.minX,t.minX),s=Math.max(i.minY,t.minY),r=Math.min(i.maxX,t.maxX),c=Math.min(i.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,c-s)}function Np(i,t){return i.minX<=t.minX&&i.minY<=t.minY&&t.maxX<=i.maxX&&t.maxY<=i.maxY}function z1(i,t){return t.minX<=i.maxX&&t.minY<=i.maxY&&t.maxX>=i.minX&&t.maxY>=i.minY}function Eh(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function sv(i,t,n,s,r){const c=[t,n];for(;c.length;){if(n=c.pop(),t=c.pop(),n-t<=s)continue;const h=t+Math.ceil((n-t)/s/2)*s;oS(i,h,t,n,r),c.push(t,h,h,n)}}const m2=[NaN,NaN,NaN,0];let wp;function lb(){return wp||(wp=gi(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),wp}const rb=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,ob=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,ub=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,cb=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function G1(i,t){return i.endsWith("%")?Number(i.substring(0,i.length-1))/t:Number(i)}function R0(i){throw new Error('failed to parse "'+i+'" as color')}function cS(i){if(i.toLowerCase().startsWith("rgb")){const c=i.match(ob)||i.match(rb)||i.match(ub);if(c){const h=c[4],f=100/255;return[In(G1(c[1],f)+.5|0,0,255),In(G1(c[2],f)+.5|0,0,255),In(G1(c[3],f)+.5|0,0,255),h!==void 0?In(G1(h,100),0,1):1]}R0(i)}if(i.startsWith("#")){if(cb.test(i)){const c=i.substring(1),h=c.length<=4?1:2,f=[0,0,0,255];for(let g=0,p=c.length;g<p;g+=h){let _=parseInt(c.substring(g,g+h),16);h===1&&(_+=_<<4),f[g/h]=_}return f[3]=f[3]/255,f}R0(i)}const t=lb();t.fillStyle="#abcdef";let n=t.fillStyle;t.fillStyle=i,t.fillStyle===n&&(t.fillStyle="#fedcba",n=t.fillStyle,t.fillStyle=i,t.fillStyle===n&&R0(i));const s=t.fillStyle;if(s.startsWith("#")||s.startsWith("rgba"))return cS(s);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const r=Array.from(t.getImageData(0,0,1,1).data);return r[3]=q_(r[3]/255,3),r}function hb(i){return typeof i=="string"?i:_2(i)}const fb=1024,Md={};let Lp=0;function db(i){if(i.length===4)return i;const t=i.slice();return t[3]=1,t}function zp(i){return i>.0031308?Math.pow(i,1/2.4)*269.025-14.025:i*3294.6}function Gp(i){return i>.2068965?Math.pow(i,3):(i-4/29)*(108/841)}function Up(i){return i>10.314724?Math.pow((i+14.025)/269.025,2.4):i/3294.6}function Bp(i){return i>.0088564?Math.pow(i,1/3):i/(108/841)+4/29}function lv(i){const t=Up(i[0]),n=Up(i[1]),s=Up(i[2]),r=Bp(t*.222488403+n*.716873169+s*.06060791),c=500*(Bp(t*.452247074+n*.399439023+s*.148375274)-r),h=200*(r-Bp(t*.016863605+n*.117638439+s*.865350722)),f=Math.atan2(h,c)*(180/Math.PI);return[116*r-16,Math.sqrt(c*c+h*h),f<0?f+360:f,i[3]]}function gb(i){const t=(i[0]+16)/116,n=i[1],s=i[2]*Math.PI/180,r=Gp(t),c=Gp(t+n/500*Math.cos(s)),h=Gp(t-n/200*Math.sin(s)),f=zp(c*3.021973625-r*1.617392459-h*.404875592),g=zp(c*-.943766287+r*1.916279586+h*.027607165),p=zp(c*.069407491-r*.22898585+h*1.159737864);return[In(f+.5|0,0,255),In(g+.5|0,0,255),In(p+.5|0,0,255),i[3]]}function p2(i){if(i==="none")return m2;if(Md.hasOwnProperty(i))return Md[i];if(Lp>=fb){let n=0;for(const s in Md)(n++&3)===0&&(delete Md[s],--Lp)}const t=cS(i);t.length!==4&&R0(i);for(const n of t)isNaN(n)&&R0(i);return Md[i]=t,++Lp,t}function Uh(i){return Array.isArray(i)?i:p2(i)}function _2(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let n=i[1];n!=(n|0)&&(n=n+.5|0);let s=i[2];s!=(s|0)&&(s=s+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+t+","+n+","+s+","+r+")"}function rv(i){return i[0]>0&&i[1]>0}function Bh(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}let nc=0;const na=1<<nc++,Re=1<<nc++,ya=1<<nc++,qs=1<<nc++,$u=1<<nc++,v0=1<<nc++,U1=Math.pow(2,nc)-1,y2={[na]:"boolean",[Re]:"number",[ya]:"string",[qs]:"color",[$u]:"number[]",[v0]:"size"},mb=Object.keys(y2).map(Number).sort(Qu);function pb(i){return i in y2}function S0(i){const t=[];for(const n of mb)E0(i,n)&&t.push(y2[n]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function E0(i,t){return(i&t)===t}function Ro(i,t){return i===t}class Kn{constructor(t,n){if(!pb(t))throw new Error(`literal expressions must have a specific type, got ${S0(t)}`);this.type=t,this.value=n}}class _b{constructor(t,n,...s){this.type=t,this.operator=n,this.args=s}}function hS(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Oi(i,t,n){switch(typeof i){case"boolean":{if(Ro(t,ya))return new Kn(ya,i?"true":"false");if(!E0(t,na))throw new Error(`got a boolean, but expected ${S0(t)}`);return new Kn(na,i)}case"number":{if(Ro(t,v0))return new Kn(v0,Bh(i));if(Ro(t,na))return new Kn(na,!!i);if(Ro(t,ya))return new Kn(ya,i.toString());if(!E0(t,Re))throw new Error(`got a number, but expected ${S0(t)}`);return new Kn(Re,i)}case"string":{if(Ro(t,qs))return new Kn(qs,p2(i));if(Ro(t,na))return new Kn(na,!!i);if(!E0(t,ya))throw new Error(`got a string, but expected ${S0(t)}`);return new Kn(ya,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return Mb(i,t,n);for(const s of i)if(typeof s!="number")throw new Error("expected an array of numbers");if(Ro(t,v0)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new Kn(v0,i)}if(Ro(t,qs)){if(i.length===3)return new Kn(qs,[...i,1]);if(i.length===4)return new Kn(qs,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!E0(t,$u))throw new Error(`got an array of numbers, but expected ${S0(t)}`);return new Kn($u,i)}const bt={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},yb={[bt.Get]:kt(se(1,1/0),ov),[bt.Var]:kt(se(1,1),vb),[bt.Has]:kt(se(1,1/0),ov),[bt.Id]:kt(Sb,ph),[bt.Concat]:kt(se(2,1/0),Ge(ya)),[bt.GeometryType]:kt(Eb,ph),[bt.LineMetric]:kt(ph),[bt.Resolution]:kt(Hp,ph),[bt.Zoom]:kt(Hp,ph),[bt.Time]:kt(Hp,ph),[bt.Any]:kt(se(2,1/0),Ge(na)),[bt.All]:kt(se(2,1/0),Ge(na)),[bt.Not]:kt(se(1,1),Ge(na)),[bt.Equal]:kt(se(2,2),Ge(U1)),[bt.NotEqual]:kt(se(2,2),Ge(U1)),[bt.GreaterThan]:kt(se(2,2),Ge(Re)),[bt.GreaterThanOrEqualTo]:kt(se(2,2),Ge(Re)),[bt.LessThan]:kt(se(2,2),Ge(Re)),[bt.LessThanOrEqualTo]:kt(se(2,2),Ge(Re)),[bt.Multiply]:kt(se(2,1/0),uv),[bt.Coalesce]:kt(se(2,1/0),uv),[bt.Divide]:kt(se(2,2),Ge(Re)),[bt.Add]:kt(se(2,1/0),Ge(Re)),[bt.Subtract]:kt(se(2,2),Ge(Re)),[bt.Clamp]:kt(se(3,3),Ge(Re)),[bt.Mod]:kt(se(2,2),Ge(Re)),[bt.Pow]:kt(se(2,2),Ge(Re)),[bt.Abs]:kt(se(1,1),Ge(Re)),[bt.Floor]:kt(se(1,1),Ge(Re)),[bt.Ceil]:kt(se(1,1),Ge(Re)),[bt.Round]:kt(se(1,1),Ge(Re)),[bt.Sin]:kt(se(1,1),Ge(Re)),[bt.Cos]:kt(se(1,1),Ge(Re)),[bt.Atan]:kt(se(1,2),Ge(Re)),[bt.Sqrt]:kt(se(1,1),Ge(Re)),[bt.Match]:kt(se(4,1/0),cv,bb),[bt.Between]:kt(se(3,3),Ge(Re)),[bt.Interpolate]:kt(se(6,1/0),cv,Cb),[bt.Case]:kt(se(3,1/0),xb,Rb),[bt.In]:kt(se(2,2),Tb),[bt.Number]:kt(se(1,1/0),Ge(U1)),[bt.String]:kt(se(1,1/0),Ge(U1)),[bt.Array]:kt(se(1,1/0),Ge(Re)),[bt.Color]:kt(se(1,4),Ge(Re)),[bt.Band]:kt(se(1,3),Ge(Re)),[bt.Palette]:kt(se(2,2),Ab),[bt.ToString]:kt(se(1,1),Ge(na|Re|ya|qs))};function ov(i,t,n){const s=i.length-1,r=new Array(s);for(let c=0;c<s;++c){const h=i[c+1];switch(typeof h){case"number":{r[c]=new Kn(Re,h);break}case"string":{r[c]=new Kn(ya,h);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${h}`)}c===0&&n.properties.add(String(h))}return r}function vb(i,t,n){const s=i[1];if(typeof s!="string")throw new Error("expected a string argument for var operation");return n.variables.add(s),[new Kn(ya,s)]}function Sb(i,t,n){n.featureId=!0}function Eb(i,t,n){n.geometryType=!0}function Hp(i,t,n){n.mapState=!0}function ph(i,t,n){const s=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${s} operation`);return[]}function se(i,t){return function(n,s,r){const c=n[0],h=n.length-1;if(i===t){if(h!==i){const f=i===1?"":"s";throw new Error(`expected ${i} argument${f} for ${c}, got ${h}`)}}else if(h<i||h>t){const f=t===1/0?`${i} or more`:`${i} to ${t}`;throw new Error(`expected ${f} arguments for ${c}, got ${h}`)}}}function uv(i,t,n){const s=i.length-1,r=new Array(s);for(let c=0;c<s;++c){const h=Oi(i[c+1],t,n);r[c]=h}return r}function Ge(i){return function(t,n,s){const r=t.length-1,c=new Array(r);for(let h=0;h<r;++h){const f=Oi(t[h+1],i,s);c[h]=f}return c}}function xb(i,t,n){const s=i[0],r=i.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${s}, got ${r} instead`)}function cv(i,t,n){const s=i[0],r=i.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${s}, got ${r} instead`)}function bb(i,t,n){const s=i.length-1,r=ya|Re|na,c=Oi(i[1],r,n),h=Oi(i[i.length-1],t,n),f=new Array(s-2);for(let g=0;g<s-2;g+=2){try{const p=Oi(i[g+2],c.type,n);f[g]=p}catch(p){throw new Error(`failed to parse argument ${g+1} of match expression: ${p.message}`)}try{const p=Oi(i[g+3],h.type,n);f[g+1]=p}catch(p){throw new Error(`failed to parse argument ${g+2} of match expression: ${p.message}`)}}return[c,...f,h]}function Cb(i,t,n){const s=i[1];let r;switch(s[0]){case"linear":r=1;break;case"exponential":const g=s[1];if(typeof g!="number"||g<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(g)} instead`);r=g;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(s)}`)}const c=new Kn(Re,r);let h;try{h=Oi(i[2],Re,n)}catch(g){throw new Error(`failed to parse argument 1 in interpolate expression: ${g.message}`)}const f=new Array(i.length-3);for(let g=0;g<f.length;g+=2){try{const p=Oi(i[g+3],Re,n);f[g]=p}catch(p){throw new Error(`failed to parse argument ${g+2} for interpolate expression: ${p.message}`)}try{const p=Oi(i[g+4],t,n);f[g+1]=p}catch(p){throw new Error(`failed to parse argument ${g+3} for interpolate expression: ${p.message}`)}}return[c,h,...f]}function Rb(i,t,n){const s=Oi(i[i.length-1],t,n),r=new Array(i.length-1);for(let c=0;c<r.length-1;c+=2){try{const h=Oi(i[c+1],na,n);r[c]=h}catch(h){throw new Error(`failed to parse argument ${c} of case expression: ${h.message}`)}try{const h=Oi(i[c+2],s.type,n);r[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+1} of case expression: ${h.message}`)}}return r[r.length-1]=s,r}function Tb(i,t,n){let s=i[2];if(!Array.isArray(s))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof s[0]=="string"){if(s[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(s[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');s=s[1],r=ya}else r=Re;const c=new Array(s.length);for(let f=0;f<c.length;f++)try{const g=Oi(s[f],r,n);c[f]=g}catch(g){throw new Error(`failed to parse haystack item ${f} for "in" expression: ${g.message}`)}return[Oi(i[1],r,n),...c]}function Ab(i,t,n){let s;try{s=Oi(i[1],Re,n)}catch(h){throw new Error(`failed to parse first argument in palette expression: ${h.message}`)}const r=i[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const c=new Array(r.length);for(let h=0;h<c.length;h++){let f;try{f=Oi(r[h],qs,n)}catch(g){throw new Error(`failed to parse color at index ${h} in palette expression: ${g.message}`)}if(!(f instanceof Kn))throw new Error(`the palette color at index ${h} must be a literal value`);c[h]=f}return[s,...c]}function kt(...i){return function(t,n,s){const r=t[0];let c;for(let h=0;h<i.length;h++){const f=i[h](t,n,s);if(h==i.length-1){if(!f)throw new Error("expected last argument validator to return the parsed args");c=f}}return new _b(n,r,...c)}}function Mb(i,t,n){const s=i[0],r=yb[s];if(!r)throw new Error(`unknown operator: ${s}`);return r(i,t,n)}function fS(i){if(!i)return"";const t=i.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return fS(i.getGeometries()[0]);default:return""}}function dS(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Nr(i,t,n){const s=Oi(i,t,n);return Xs(s)}function Xs(i,t){if(i instanceof Kn){if(i.type===qs&&typeof i.value=="string"){const s=p2(i.value);return function(){return s}}return function(){return i.value}}const n=i.operator;switch(n){case bt.Number:case bt.String:case bt.Coalesce:return Db(i);case bt.Get:case bt.Var:case bt.Has:return Ob(i);case bt.Id:return s=>s.featureId;case bt.GeometryType:return s=>s.geometryType;case bt.Concat:{const s=i.args.map(r=>Xs(r));return r=>"".concat(...s.map(c=>c(r).toString()))}case bt.Resolution:return s=>s.resolution;case bt.Any:case bt.All:case bt.Between:case bt.In:case bt.Not:return wb(i);case bt.Equal:case bt.NotEqual:case bt.LessThan:case bt.LessThanOrEqualTo:case bt.GreaterThan:case bt.GreaterThanOrEqualTo:return Nb(i);case bt.Multiply:case bt.Divide:case bt.Add:case bt.Subtract:case bt.Clamp:case bt.Mod:case bt.Pow:case bt.Abs:case bt.Floor:case bt.Ceil:case bt.Round:case bt.Sin:case bt.Cos:case bt.Atan:case bt.Sqrt:return Lb(i);case bt.Case:return zb(i);case bt.Match:return Gb(i);case bt.Interpolate:return Ub(i);case bt.ToString:return Bb(i);default:throw new Error(`Unsupported operator ${n}`)}}function Db(i,t){const n=i.operator,s=i.args.length,r=new Array(s);for(let c=0;c<s;++c)r[c]=Xs(i.args[c]);switch(n){case bt.Coalesce:return c=>{for(let h=0;h<s;++h){const f=r[h](c);if(typeof f<"u"&&f!==null)return f}throw new Error("Expected one of the values to be non-null")};case bt.Number:case bt.String:return c=>{for(let h=0;h<s;++h){const f=r[h](c);if(typeof f===n)return f}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function Ob(i,t){const s=i.args[0].value;switch(i.operator){case bt.Get:return r=>{const c=i.args;let h=r.properties[s];for(let f=1,g=c.length;f<g;++f){const _=c[f].value;h=h[_]}return h};case bt.Var:return r=>r.variables[s];case bt.Has:return r=>{const c=i.args;if(!(s in r.properties))return!1;let h=r.properties[s];for(let f=1,g=c.length;f<g;++f){const _=c[f].value;if(!h||!Object.hasOwn(h,_))return!1;h=h[_]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function Nb(i,t){const n=i.operator,s=Xs(i.args[0]),r=Xs(i.args[1]);switch(n){case bt.Equal:return c=>s(c)===r(c);case bt.NotEqual:return c=>s(c)!==r(c);case bt.LessThan:return c=>s(c)<r(c);case bt.LessThanOrEqualTo:return c=>s(c)<=r(c);case bt.GreaterThan:return c=>s(c)>r(c);case bt.GreaterThanOrEqualTo:return c=>s(c)>=r(c);default:throw new Error(`Unsupported comparison operator ${n}`)}}function wb(i,t){const n=i.operator,s=i.args.length,r=new Array(s);for(let c=0;c<s;++c)r[c]=Xs(i.args[c]);switch(n){case bt.Any:return c=>{for(let h=0;h<s;++h)if(r[h](c))return!0;return!1};case bt.All:return c=>{for(let h=0;h<s;++h)if(!r[h](c))return!1;return!0};case bt.Between:return c=>{const h=r[0](c),f=r[1](c),g=r[2](c);return h>=f&&h<=g};case bt.In:return c=>{const h=r[0](c);for(let f=1;f<s;++f)if(h===r[f](c))return!0;return!1};case bt.Not:return c=>!r[0](c);default:throw new Error(`Unsupported logical operator ${n}`)}}function Lb(i,t){const n=i.operator,s=i.args.length,r=new Array(s);for(let c=0;c<s;++c)r[c]=Xs(i.args[c]);switch(n){case bt.Multiply:return c=>{let h=1;for(let f=0;f<s;++f)h*=r[f](c);return h};case bt.Divide:return c=>r[0](c)/r[1](c);case bt.Add:return c=>{let h=0;for(let f=0;f<s;++f)h+=r[f](c);return h};case bt.Subtract:return c=>r[0](c)-r[1](c);case bt.Clamp:return c=>{const h=r[0](c),f=r[1](c);if(h<f)return f;const g=r[2](c);return h>g?g:h};case bt.Mod:return c=>r[0](c)%r[1](c);case bt.Pow:return c=>Math.pow(r[0](c),r[1](c));case bt.Abs:return c=>Math.abs(r[0](c));case bt.Floor:return c=>Math.floor(r[0](c));case bt.Ceil:return c=>Math.ceil(r[0](c));case bt.Round:return c=>Math.round(r[0](c));case bt.Sin:return c=>Math.sin(r[0](c));case bt.Cos:return c=>Math.cos(r[0](c));case bt.Atan:return s===2?c=>Math.atan2(r[0](c),r[1](c)):c=>Math.atan(r[0](c));case bt.Sqrt:return c=>Math.sqrt(r[0](c));default:throw new Error(`Unsupported numeric operator ${n}`)}}function zb(i,t){const n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Xs(i.args[r]);return r=>{for(let c=0;c<n-1;c+=2)if(s[c](r))return s[c+1](r);return s[n-1](r)}}function Gb(i,t){const n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Xs(i.args[r]);return r=>{const c=s[0](r);for(let h=1;h<n-1;h+=2)if(c===s[h](r))return s[h+1](r);return s[n-1](r)}}function Ub(i,t){const n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Xs(i.args[r]);return r=>{const c=s[0](r),h=s[1](r);let f,g;for(let p=2;p<n;p+=2){const _=s[p](r);let S=s[p+1](r);const x=Array.isArray(S);if(x&&(S=db(S)),_>=h)return p===2?S:x?Hb(c,h,f,g,_,S):x0(c,h,f,g,_,S);f=_,g=S}return g}}function Bb(i,t){const n=i.operator,s=i.args.length,r=new Array(s);for(let c=0;c<s;++c)r[c]=Xs(i.args[c]);switch(n){case bt.ToString:return c=>{const h=r[0](c);return i.args[0].type===qs?_2(h):h.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function x0(i,t,n,s,r,c){const h=r-n;if(h===0)return s;const f=t-n,g=i===1?f/h:(Math.pow(i,f)-1)/(Math.pow(i,h)-1);return s+g*(c-s)}function Hb(i,t,n,s,r,c){if(r-n===0)return s;const f=lv(s),g=lv(c);let p=g[2]-f[2];p>180?p-=360:p<-180&&(p+=360);const _=[x0(i,t,n,f[0],r,g[0]),x0(i,t,n,f[1],r,g[1]),f[2]+x0(i,t,n,0,r,p),x0(i,t,n,s[3],r,c[3])];return gb(_)}const Gt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class v2 extends cm{constructor(t,n,s,r){super(),this.extent=t,this.pixelRatio_=s,this.resolution=n,this.state=typeof r=="function"?Gt.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(le.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Gt.IDLE&&this.loader){this.state=Gt.LOADING,this.changed();const t=this.getResolution(),n=Array.isArray(t)?t[0]:t;b4(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(s=>{"image"in s&&(this.image_=s.image),"extent"in s&&(this.extent=s.extent),"resolution"in s&&(this.resolution=s.resolution),"pixelRatio"in s&&(this.pixelRatio_=s.pixelRatio),(s instanceof HTMLImageElement||M4&&s instanceof ImageBitmap||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement)&&(this.image_=s),this.state=Gt.LOADED}).catch(s=>{this.state=Gt.ERROR,console.error(s)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function Ib(i,t){return new Promise((n,s)=>{function r(){h(),n(i)}function c(){h(),s(new Error("Image load error"))}function h(){i.removeEventListener("load",r),i.removeEventListener("error",c)}i.addEventListener("load",r),i.addEventListener("error",c)})}function gS(i,t){return t&&(i.src=t),i.src&&A4?new Promise((n,s)=>i.decode().then(()=>n(i)).catch(r=>i.complete&&i.width?n(i):s(r))):Ib(i)}function mS(i,t){return t&&(i.src=t),i.src&&A4&&M4?i.decode().then(()=>createImageBitmap(i)).catch(n=>{if(i.complete&&i.width)return i;throw n}):gS(i)}class jb{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const s=this.cache_[n];(t++&3)===0&&!s.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(t,n,s){const r=Ip(t,n,s);return r in this.cache_?this.cache_[r]:null}getPattern(t,n,s){const r=Ip(t,n,s);return r in this.patternCache_?this.patternCache_[r]:null}set(t,n,s,r,c){const h=Ip(t,n,s),f=h in this.cache_;this.cache_[h]=r,c&&(r.getImageState()===Gt.IDLE&&r.load(),r.getImageState()===Gt.LOADING?r.ready().then(()=>{this.patternCache_[h]=W1().createPattern(r.getImage(1),"repeat")}):this.patternCache_[h]=W1().createPattern(r.getImage(1),"repeat")),f||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Ip(i,t,n){const s=n?Uh(n):"null";return t+":"+i+":"+s}const cs=new jb;let Dd=null;class pS extends cm{constructor(t,n,s,r,c){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=s,this.canvas_={},this.color_=c,this.imageState_=r===void 0?Gt.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Gt.LOADED){Dd||(Dd=gi(1,1,void 0,{willReadFrequently:!0})),Dd.drawImage(this.image_,0,0);try{Dd.getImageData(0,0,1,1),this.tainted_=!1}catch{Dd=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(le.CHANGE)}handleImageError_(){this.imageState_=Gt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Gt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],n=this.size_[1],s=gi(t,n);s.fillRect(0,0,t,n),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Gt.IDLE){this.image_||this.initializeImage_(),this.imageState_=Gt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&gS(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Gt.LOADED)return;const n=this.image_,s=gi(Math.ceil(n.width*t),Math.ceil(n.height*t)),r=s.canvas;s.scale(t,t),s.drawImage(n,0,0),s.globalCompositeOperation="multiply",s.fillStyle=hb(this.color_),s.fillRect(0,0,r.width/t,r.height/t),s.globalCompositeOperation="destination-in",s.drawImage(n,0,0),this.canvas_[t]=r}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===Gt.LOADED||this.imageState_===Gt.ERROR)t();else{const n=()=>{(this.imageState_===Gt.LOADED||this.imageState_===Gt.ERROR)&&(this.removeEventListener(le.CHANGE,n),t())};this.addEventListener(le.CHANGE,n)}})),this.ready_}}function S2(i,t,n,s,r,c){let h=t===void 0?void 0:cs.get(t,n,r);return h||(h=new pS(i,i&&"src"in i?i.src||void 0:t,n,s,r),cs.set(t,n,r,h,c)),c&&h&&!cs.getPattern(t,n,r)&&cs.set(t,n,r,h,c),h}function zl(i){return i?Array.isArray(i)?_2(i):typeof i=="object"&&"src"in i?Yb(i):i:null}function Yb(i){if(!i.offset||!i.size)return cs.getPattern(i.src,"anonymous",i.color);const t=i.src+":"+i.offset,n=cs.getPattern(t,void 0,i.color);if(n)return n;const s=cs.get(i.src,"anonymous",null);if(s.getImageState()!==Gt.LOADED)return null;const r=gi(i.size[0],i.size[1]);return r.drawImage(s.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),S2(r.canvas,t,void 0,Gt.LOADED,i.color,!0),cs.getPattern(t,void 0,i.color)}const _S="10px sans-serif",va="#000",Hh="round",Tr=[],Ar=0,Ih="round",z0=10,G0="#000",U0="center",J1="middle",ku=[0,0,0,0],B0=1,br=new Il;let xh=null,C_;const R_={},Vb=function(){const t="32px ",n=["monospace","serif"],s=n.length,r="wmytzilWMYTZIL@#/&?$%10";let c,h;function f(p,_,S){let x=!0;for(let b=0;b<s;++b){const E=n[b];if(h=$1(p+" "+_+" "+t+E,r),S!=E){const M=$1(p+" "+_+" "+t+S+","+E,r);x=x&&M!=h}}return!!x}function g(){let p=!0;const _=br.getKeys();for(let S=0,x=_.length;S<x;++S){const b=_[S];if(br.get(b)<100){const[E,M,D]=b.split(`
`);f(E,M,D)?(F0(R_),xh=null,C_=void 0,br.set(b,100)):(br.set(b,br.get(b)+1,!0),p=!1)}}p&&(clearInterval(c),c=void 0)}return function(p){const _=eS(p);if(!_)return;const S=_.families;for(let x=0,b=S.length;x<b;++x){const E=S[x],M=_.style+`
`+_.weight+`
`+E;br.get(M)===void 0&&(br.set(M,100,!0),f(_.style,_.weight,E)||(br.set(M,0,!0),c===void 0&&(c=setInterval(g,32))))}}}(),qb=function(){let i;return function(t){let n=R_[t];if(n==null){if(T4){const s=eS(t),r=yS(t,"g");n=(isNaN(Number(s.lineHeight))?1.2:Number(s.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=t,document.body.appendChild(i),n=i.offsetHeight,document.body.removeChild(i);R_[t]=n}return n}}();function yS(i,t){return xh||(xh=gi(1,1)),i!=C_&&(xh.font=i,C_=xh.font),xh.measureText(t)}function $1(i,t){return yS(i,t).width}function hv(i,t,n){if(t in n)return n[t];const s=t.split(`
`).reduce((r,c)=>Math.max(r,$1(i,c)),0);return n[t]=s,s}function Fb(i,t){const n=[],s=[],r=[];let c=0,h=0,f=0,g=0;for(let p=0,_=t.length;p<=_;p+=2){const S=t[p];if(S===`
`||p===_){c=Math.max(c,h),r.push(h),h=0,f+=g,g=0;continue}const x=t[p+1]||i.font,b=$1(x,S);n.push(b),h+=b;const E=qb(x);s.push(E),g=Math.max(g,E)}return{width:c,height:f,widths:n,heights:s,lineWidths:r}}function Pb(i,t,n,s,r,c,h,f,g,p,_){i.save(),n!==1&&(i.globalAlpha===void 0?i.globalAlpha=S=>S.globalAlpha*=n:i.globalAlpha*=n),t&&i.transform.apply(i,t),s.contextInstructions?(i.translate(g,p),i.scale(_[0],_[1]),Xb(s,i)):_[0]<0||_[1]<0?(i.translate(g,p),i.scale(_[0],_[1]),i.drawImage(s,r,c,h,f,0,0,h,f)):i.drawImage(s,r,c,h,f,g,p,h*_[0],f*_[1]),i.restore()}function Xb(i,t){const n=i.contextInstructions;for(let s=0,r=n.length;s<r;s+=2)Array.isArray(n[s+1])?t[n[s]].apply(t,n[s+1]):t[n[s]]=n[s+1]}class vm{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Bh(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new vm({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return je()}getImage(t){return je()}getHitDetectionImage(){return je()}getPixelRatio(t){return 1}getImageState(){return je()}getImageSize(){return je()}getOrigin(){return je()}getSize(){return je()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Bh(t)}listenImageChange(t){je()}load(){je()}unlistenImageChange(t){je()}ready(){return Promise.resolve()}}class Sm extends vm{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Gt.LOADING:Gt.LOADED,this.imageState_===Gt.LOADING&&this.ready().then(()=>this.imageState_=Gt.LOADED),this.render()}clone(){const t=this.getScale(),n=new Sm({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const t=this.size_,n=this.getDisplacement(),s=this.getScaleArray();return[t[0]/2-n[0]/s[0],t[1]/2+n[1]/s[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var c,h;const n=(c=this.fill_)==null?void 0:c.getKey(),s=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let r=(h=cs.get(s,null,null))==null?void 0:h.getImage(1);if(!r){const f=this.renderOptions_,g=Math.ceil(f.size*t),p=gi(g,g);this.draw_(f,p,t),r=p.canvas,cs.set(s,null,null,new pS(r,void 0,null,Gt.LOADED,null))}return r}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,n,s){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;let r=this.radius,c=this.radius2_===void 0?r:this.radius2_;if(r<c){const I=r;r=c,c=I}const h=this.radius2_===void 0?this.points_:this.points_*2,f=2*Math.PI/h,g=c*Math.sin(f),p=Math.sqrt(c*c-g*g),_=r-p,S=Math.sqrt(g*g+_*_),x=S/g;if(t==="miter"&&x<=s)return x*n;const b=n/2/x,E=n/2*(_/S),D=Math.sqrt((r+b)*(r+b)+E*E)-r;if(this.radius2_===void 0||t==="bevel")return D*2;const L=r*Math.sin(f),T=Math.sqrt(r*r-L*L),A=c-T,z=Math.sqrt(L*L+A*A)/L;if(z<=s){const I=z*n/2-c-r;return 2*Math.max(D,I)}return D*2}createRenderOptions(){let t=Hh,n=Ih,s=0,r=null,c=0,h,f=0;this.stroke_&&(h=zl(this.stroke_.getColor()??G0),f=this.stroke_.getWidth()??B0,r=this.stroke_.getLineDash(),c=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Ih,t=this.stroke_.getLineCap()??Hh,s=this.stroke_.getMiterLimit()??z0);const g=this.calculateLineJoinSize_(n,f,s),p=Math.max(this.radius,this.radius2_||0),_=Math.ceil(2*p+g);return{strokeStyle:h,strokeWidth:f,size:_,lineCap:t,lineDash:r,lineDashOffset:c,lineJoin:n,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,n,s){if(n.scale(s,s),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=va),n.fillStyle=zl(r),n.fill()}t.strokeStyle&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineCap=t.lineCap,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}createHitDetectionCanvas_(t){let n;if(this.fill_){let s=this.fill_.getColor(),r=0;typeof s=="string"&&(s=Uh(s)),s===null?r=1:Array.isArray(s)&&(r=s.length===4?s[3]:1),r===0&&(n=gi(t.size,t.size),this.drawHitDetectionCanvas_(t,n))}return n?n.canvas:this.getImage(1)}createPath_(t){let n=this.points_;const s=this.radius;if(n===1/0)t.arc(0,0,s,0,2*Math.PI);else{const r=this.radius2_===void 0?s:this.radius2_;this.radius2_!==void 0&&(n*=2);const c=this.angle_-Math.PI/2,h=2*Math.PI/n;for(let f=0;f<n;f++){const g=c+f*h,p=f%2===0?s:r;t.lineTo(p*Math.cos(g),p*Math.sin(g))}t.closePath()}}drawHitDetectionCanvas_(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=va,n.fill(),t.strokeStyle&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class k0 extends Sm{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),n=new k0({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(t){this.radius=t,this.render()}}class tc{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new tc({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const n=S2(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===Gt.IDLE&&n.load(),n.getImageState()===Gt.LOADING&&(this.patternImage_=n)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?wn(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:Uh(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function fv(i,t,n,s){return n!==void 0&&s!==void 0?[n/i,s/t]:n!==void 0?n/i:s!==void 0?s/t:1}let vS=class SS extends vm{constructor(t){t=t||{};const n=t.opacity!==void 0?t.opacity:1,s=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,c=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:n,rotation:s,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:c,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const h=t.img!==void 0?t.img:null;let f=t.src;xn(!(f!==void 0&&h),"`image` and `src` cannot be provided at the same time"),(f===void 0||f.length===0)&&h&&(f=h.src||wn(h)),xn(f!==void 0&&f.length>0,"A defined and non-empty `src` or `image` must be provided"),xn(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let g;if(t.src!==void 0?g=Gt.IDLE:h!==void 0&&("complete"in h?h.complete?g=h.src?Gt.LOADED:Gt.IDLE:g=Gt.LOADING:g=Gt.LOADED),this.color_=t.color!==void 0?Uh(t.color):null,this.iconImage_=S2(h,f,this.crossOrigin_,g,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let p,_;if(t.size)[p,_]=t.size;else{const S=this.getImage(1);if(S.width&&S.height)p=S.width,_=S.height;else if(S instanceof HTMLImageElement){this.initialOptions_=t;const x=()=>{if(this.unlistenImageChange(x),!this.initialOptions_)return;const b=this.iconImage_.getSize();this.setScale(fv(b[0],b[1],t.width,t.height))};this.listenImageChange(x);return}}p!==void 0&&this.setScale(fv(p,_,t.width,t.height))}}clone(){let t,n,s;return this.initialOptions_?(n=this.initialOptions_.width,s=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new SS({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:s,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const n=this.getDisplacement(),s=this.getScaleArray();return[t[0]-n[0]/s[0],t[1]+n[1]/s[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),s=this.iconImage_.getSize();if(!n||!s)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=s[0]-n[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=s[1]-n[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Gt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Gt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(le.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(le.CHANGE,t)}ready(){return this.iconImage_.ready()}};class K0{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new K0({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class Bo{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=dv,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Bo({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(n){return n.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=dv,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function kb(i){let t;if(typeof i=="function")t=i;else{let n;Array.isArray(i)?n=i:(xn(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[i]),t=function(){return n}}return t}let jp=null;function ES(i,t){if(!jp){const n=new tc({color:"rgba(255,255,255,0.4)"}),s=new K0({color:"#3399CC",width:1.25});jp=[new Bo({image:new k0({fill:n,stroke:s,radius:5}),fill:n,stroke:s})]}return jp}function dv(i){return i.getGeometry()}const Kb="#333";let xS=class bS{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=Bh(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new tc({color:Kb}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new bS({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Bh(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}};function Zb(i){return!0}function Qb(i){const t=hS(),n=Wb(i,t),s=dS();return function(r,c){if(s.properties=r.getPropertiesInternal(),s.resolution=c,t.featureId){const h=r.getId();h!==void 0?s.featureId=h:s.featureId=null}return t.geometryType&&(s.geometryType=fS(r.getGeometry())),n(s)}}function gv(i){const t=hS(),n=i.length,s=new Array(n);for(let h=0;h<n;++h)s[h]=T_(i[h],t);const r=dS(),c=new Array(n);return function(h,f){if(r.properties=h.getPropertiesInternal(),r.resolution=f,t.featureId){const p=h.getId();p!==void 0?r.featureId=p:r.featureId=null}let g=0;for(let p=0;p<n;++p){const _=s[p](r);_&&(c[g]=_,g+=1)}return c.length=g,c}}function Wb(i,t){const n=i.length,s=new Array(n);for(let r=0;r<n;++r){const c=i[r],h="filter"in c?Nr(c.filter,na,t):Zb;let f;if(Array.isArray(c.style)){const g=c.style.length;f=new Array(g);for(let p=0;p<g;++p)f[p]=T_(c.style[p],t)}else f=[T_(c.style,t)];s[r]={filter:h,styles:f}}return function(r){const c=[];let h=!1;for(let f=0;f<n;++f){const g=s[f].filter;if(g(r)&&!(i[f].else&&h)){h=!0;for(const p of s[f].styles){const _=p(r);_&&c.push(_)}}}return c}}function T_(i,t){const n=H0(i,"",t),s=I0(i,"",t),r=Jb(i,t),c=$b(i,t),h=Sa(i,"z-index",t);if(!n&&!s&&!r&&!c&&!Lh(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const f=new Bo;return function(g){let p=!0;if(n){const _=n(g);_&&(p=!1),f.setFill(_)}if(s){const _=s(g);_&&(p=!1),f.setStroke(_)}if(r){const _=r(g);_&&(p=!1),f.setText(_)}if(c){const _=c(g);_&&(p=!1),f.setImage(_)}return h&&f.setZIndex(h(g)),p?null:f}}function H0(i,t,n){let s;if(t+"fill-pattern-src"in i)s=i7(i,t+"fill-",n);else{if(i[t+"fill-color"]==="none")return c=>null;s=E2(i,t+"fill-color",n)}if(!s)return null;const r=new tc;return function(c){const h=s(c);return h===m2?null:(r.setColor(h),r)}}function I0(i,t,n){const s=Sa(i,t+"stroke-width",n),r=E2(i,t+"stroke-color",n);if(!s&&!r)return null;const c=Cr(i,t+"stroke-line-cap",n),h=Cr(i,t+"stroke-line-join",n),f=CS(i,t+"stroke-line-dash",n),g=Sa(i,t+"stroke-line-dash-offset",n),p=Sa(i,t+"stroke-miter-limit",n),_=new K0;return function(S){if(r){const x=r(S);if(x===m2)return null;_.setColor(x)}if(s&&_.setWidth(s(S)),c){const x=c(S);if(x!=="butt"&&x!=="round"&&x!=="square")throw new Error("Expected butt, round, or square line cap");_.setLineCap(x)}if(h){const x=h(S);if(x!=="bevel"&&x!=="round"&&x!=="miter")throw new Error("Expected bevel, round, or miter line join");_.setLineJoin(x)}return f&&_.setLineDash(f(S)),g&&_.setLineDashOffset(g(S)),p&&_.setMiterLimit(p(S)),_}}function Jb(i,t){const n="text-",s=Cr(i,n+"value",t);if(!s)return null;const r=H0(i,n,t),c=H0(i,n+"background-",t),h=I0(i,n,t),f=I0(i,n+"background-",t),g=Cr(i,n+"font",t),p=Sa(i,n+"max-angle",t),_=Sa(i,n+"offset-x",t),S=Sa(i,n+"offset-y",t),x=Nh(i,n+"overflow",t),b=Cr(i,n+"placement",t),E=Sa(i,n+"repeat",t),M=Em(i,n+"scale",t),D=Nh(i,n+"rotate-with-view",t),L=Sa(i,n+"rotation",t),T=Cr(i,n+"align",t),A=Cr(i,n+"justify",t),N=Cr(i,n+"baseline",t),z=Nh(i,n+"keep-upright",t),I=CS(i,n+"padding",t),K=xm(i,n+"declutter-mode"),H=new xS({declutterMode:K});return function(j){if(H.setText(s(j)),r&&H.setFill(r(j)),c&&H.setBackgroundFill(c(j)),h&&H.setStroke(h(j)),f&&H.setBackgroundStroke(f(j)),g&&H.setFont(g(j)),p&&H.setMaxAngle(p(j)),_&&H.setOffsetX(_(j)),S&&H.setOffsetY(S(j)),x&&H.setOverflow(x(j)),b){const Y=b(j);if(Y!=="point"&&Y!=="line")throw new Error("Expected point or line for text-placement");H.setPlacement(Y)}if(E&&H.setRepeat(E(j)),M&&H.setScale(M(j)),D&&H.setRotateWithView(D(j)),L&&H.setRotation(L(j)),T){const Y=T(j);if(Y!=="left"&&Y!=="center"&&Y!=="right"&&Y!=="end"&&Y!=="start")throw new Error("Expected left, right, center, start, or end for text-align");H.setTextAlign(Y)}if(A){const Y=A(j);if(Y!=="left"&&Y!=="right"&&Y!=="center")throw new Error("Expected left, right, or center for text-justify");H.setJustify(Y)}if(N){const Y=N(j);if(Y!=="bottom"&&Y!=="top"&&Y!=="middle"&&Y!=="alphabetic"&&Y!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");H.setTextBaseline(Y)}return I&&H.setPadding(I(j)),z&&H.setKeepUpright(z(j)),H}}function $b(i,t){return"icon-src"in i?t7(i,t):"shape-points"in i?e7(i,t):"circle-radius"in i?n7(i,t):null}function t7(i,t){const n="icon-",s=n+"src",r=RS(i[s],s),c=tm(i,n+"anchor",t),h=Em(i,n+"scale",t),f=Sa(i,n+"opacity",t),g=tm(i,n+"displacement",t),p=Sa(i,n+"rotation",t),_=Nh(i,n+"rotate-with-view",t),S=pv(i,n+"anchor-origin"),x=_v(i,n+"anchor-x-units"),b=_v(i,n+"anchor-y-units"),E=r7(i,n+"color"),M=s7(i,n+"cross-origin"),D=l7(i,n+"offset"),L=pv(i,n+"offset-origin"),T=em(i,n+"width"),A=em(i,n+"height"),N=a7(i,n+"size"),z=xm(i,n+"declutter-mode"),I=new vS({src:r,anchorOrigin:S,anchorXUnits:x,anchorYUnits:b,color:E,crossOrigin:M,offset:D,offsetOrigin:L,height:A,width:T,size:N,declutterMode:z});return function(K){return f&&I.setOpacity(f(K)),g&&I.setDisplacement(g(K)),p&&I.setRotation(p(K)),_&&I.setRotateWithView(_(K)),h&&I.setScale(h(K)),c&&I.setAnchor(c(K)),I}}function e7(i,t){const n="shape-",s=n+"points",r=n+"radius",c=A_(i[s],s),h=A_(i[r],r),f=H0(i,n,t),g=I0(i,n,t),p=Em(i,n+"scale",t),_=tm(i,n+"displacement",t),S=Sa(i,n+"rotation",t),x=Nh(i,n+"rotate-with-view",t),b=em(i,n+"radius2"),E=em(i,n+"angle"),M=xm(i,n+"declutter-mode"),D=new Sm({points:c,radius:h,radius2:b,angle:E,declutterMode:M});return function(L){return f&&D.setFill(f(L)),g&&D.setStroke(g(L)),_&&D.setDisplacement(_(L)),S&&D.setRotation(S(L)),x&&D.setRotateWithView(x(L)),p&&D.setScale(p(L)),D}}function n7(i,t){const n="circle-",s=H0(i,n,t),r=I0(i,n,t),c=Sa(i,n+"radius",t),h=Em(i,n+"scale",t),f=tm(i,n+"displacement",t),g=Sa(i,n+"rotation",t),p=Nh(i,n+"rotate-with-view",t),_=xm(i,n+"declutter-mode"),S=new k0({radius:5,declutterMode:_});return function(x){return c&&S.setRadius(c(x)),s&&S.setFill(s(x)),r&&S.setStroke(r(x)),f&&S.setDisplacement(f(x)),g&&S.setRotation(g(x)),p&&S.setRotateWithView(p(x)),h&&S.setScale(h(x)),S}}function Sa(i,t,n){if(!(t in i))return;const s=Nr(i[t],Re,n);return function(r){return A_(s(r),t)}}function Cr(i,t,n){if(!(t in i))return null;const s=Nr(i[t],ya,n);return function(r){return RS(s(r),t)}}function i7(i,t,n){const s=Cr(i,t+"pattern-src",n),r=mv(i,t+"pattern-offset",n),c=mv(i,t+"pattern-size",n),h=E2(i,t+"color",n);return function(f){return{src:s(f),offset:r&&r(f),size:c&&c(f),color:h&&h(f)}}}function Nh(i,t,n){if(!(t in i))return null;const s=Nr(i[t],na,n);return function(r){const c=s(r);if(typeof c!="boolean")throw new Error(`Expected a boolean for ${t}`);return c}}function E2(i,t,n){if(!(t in i))return null;const s=Nr(i[t],qs,n);return function(r){return TS(s(r),t)}}function CS(i,t,n){if(!(t in i))return null;const s=Nr(i[t],$u,n);return function(r){return Z0(s(r),t)}}function tm(i,t,n){if(!(t in i))return null;const s=Nr(i[t],$u,n);return function(r){const c=Z0(s(r),t);if(c.length!==2)throw new Error(`Expected two numbers for ${t}`);return c}}function mv(i,t,n){if(!(t in i))return null;const s=Nr(i[t],$u,n);return function(r){return AS(s(r),t)}}function Em(i,t,n){if(!(t in i))return null;const s=Nr(i[t],$u|Re,n);return function(r){return o7(s(r),t)}}function em(i,t){const n=i[t];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}}function a7(i,t){const n=i[t];if(n!==void 0){if(typeof n=="number")return Bh(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${t}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return n}}function s7(i,t){const n=i[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}}function pv(i,t){const n=i[t];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function _v(i,t){const n=i[t];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return n}}function l7(i,t){const n=i[t];if(n!==void 0)return Z0(n,t)}function xm(i,t){const n=i[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function r7(i,t){const n=i[t];if(n!==void 0)return TS(n,t)}function Z0(i,t){if(!Array.isArray(i))throw new Error(`Expected an array for ${t}`);const n=i.length;for(let s=0;s<n;++s)if(typeof i[s]!="number")throw new Error(`Expected an array of numbers for ${t}`);return i}function RS(i,t){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);return i}function A_(i,t){if(typeof i!="number")throw new Error(`Expected a number for ${t}`);return i}function TS(i,t){if(typeof i=="string")return i;const n=Z0(i,t),s=n.length;if(s<3||s>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return n}function AS(i,t){const n=Z0(i,t);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return n}function o7(i,t){return typeof i=="number"?i:AS(i,t)}const yv={RENDER_ORDER:"renderOrder"};class MS extends ym{constructor(t){t=t||{};const n=Object.assign({},t);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(yv.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,n){const s=this.getDeclutter();s in t.declutter||(t.declutter[s]=new uS(9)),this.getRenderer().renderDeclutter(t,n)}setRenderOrder(t){this.set(yv.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?ES:t;const n=u7(t);this.styleFunction_=t===null?void 0:kb(n),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function u7(i){if(i===void 0)return ES;if(!i)return null;if(typeof i=="function"||i instanceof Bo)return i;if(!Array.isArray(i))return gv([i]);if(i.length===0)return[];const t=i.length,n=i[0];if(n instanceof Bo){const r=new Array(t);for(let c=0;c<t;++c){const h=i[c];if(!(h instanceof Bo))throw new Error("Expected a list of style instances");r[c]=h}return r}if("style"in n){const r=new Array(t);for(let c=0;c<t;++c){const h=i[c];if(!("style"in h))throw new Error("Expected a list of rules with a style property");r[c]=h}return Qb(r)}return gv(i)}class DS extends Hl{constructor(t,n,s,r){super(t),this.inversePixelTransform=n,this.frameState=s,this.context=r}}class c7 extends j_{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,n){je()}calculateMatrices2D(t){const n=t.viewState,s=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Or(s,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),X4(r,s)}forEachFeatureAtCoordinate(t,n,s,r,c,h,f,g){let p;const _=n.viewState;function S(N,z,I,K){return c.call(h,z,N?I:null,K)}const x=_.projection,b=U4(t.slice(),x),E=[[0,0]];if(x.canWrapX()&&r){const N=x.getExtent(),z=Ye(N);E.push([-z,0],[z,0])}const M=n.layerStatesArray,D=M.length,L=[],T=[];for(let N=0;N<E.length;N++)for(let z=D-1;z>=0;--z){const I=M[z],K=I.layer;if(K.hasRenderer()&&g2(I,_)&&f.call(g,K)){const H=K.getRenderer(),j=K.getSource();if(H&&j){const Y=j.getWrapX()?b:t,X=S.bind(null,I.managed);T[0]=Y[0]+E[N][0],T[1]=Y[1]+E[N][1],p=H.forEachFeatureAtCoordinate(T,n,s,X,L)}if(p)return p}}if(L.length===0)return;const A=1/L.length;return L.forEach((N,z)=>N.distanceSq+=z*A),L.sort((N,z)=>N.distanceSq-z.distanceSq),L.some(N=>p=N.callback(N.feature,N.layer,N.geometry)),p}hasFeatureAtCoordinate(t,n,s,r,c,h){return this.forEachFeatureAtCoordinate(t,n,s,r,Wu,this,c,h)!==void 0}getMap(){return this.map_}renderFrame(t){je()}scheduleExpireIconCache(t){cs.canExpireCache()&&t.postRenderFunctions.push(h7)}}function h7(i,t){cs.expire()}class f7 extends c7{constructor(t){super(t),this.fontChangeListenerKey_=we(br,wh.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=_m+" ol-layers";const s=t.getViewport();s.insertBefore(this.element_,s.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,n){const s=this.getMap();if(s.hasListener(t)){const r=new DS(t,void 0,n);s.dispatchEvent(r)}}disposeInternal(){bn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(us.PRECOMPOSE,t);const n=t.layerStatesArray.sort((f,g)=>f.zIndex-g.zIndex);n.some(f=>f.layer instanceof MS&&f.layer.getDeclutter())&&(t.declutter={});const r=t.viewState;this.children_.length=0;const c=[];let h=null;for(let f=0,g=n.length;f<g;++f){const p=n[f];t.layerIndex=f;const _=p.layer,S=_.getSourceState();if(!g2(p,r)||S!="ready"&&S!="undefined"){_.unrender();continue}const x=_.render(t,h);x&&(x!==h&&(this.children_.push(x),h=x),c.push(p))}this.declutter(t,c),Ox(this.element_,this.children_),this.dispatchRenderEvent(us.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,n){if(t.declutter){for(let s=n.length-1;s>=0;--s){const r=n[s],c=r.layer;c.getDeclutter()&&c.renderDeclutter(t,r)}n.forEach(s=>s.layer.renderDeferred(t))}}}function OS(i){if(i instanceof ym){i.setMapInternal(null);return}i instanceof Kh&&i.getLayers().forEach(OS)}function NS(i,t){if(i instanceof ym){i.setMapInternal(t);return}if(i instanceof Kh){const n=i.getLayers().getArray();for(let s=0,r=n.length;s<r;++s)NS(n[s],t)}}let d7=class extends Il{constructor(t){super(),t=t||{},this.on,this.once,this.un;const n=g7(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:ZE,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Fs(),this.pixelToCoordinateTransform_=Fs(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||zx(),this.interactions=n.interactions||$x({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new JE(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Fi.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Fi.VIEW,this.handleViewChanged_),this.addChangeListener(Fi.SIZE,this.handleSizeChanged_),this.addChangeListener(Fi.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const s=this;t.view&&!(t.view instanceof wl)&&t.view.then(function(r){s.setView(new wl(r))}),this.controls.addEventListener(_a.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(_a.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(_a.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(_a.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(_a.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(_a.REMOVE,r=>{const c=r.element.getId();c!==void 0&&delete this.overlayIdIndex_[c.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){NS(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,n,s){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);s=s!==void 0?s:{};const c=s.hitTolerance!==void 0?s.hitTolerance:0,h=s.layerFilter!==void 0?s.layerFilter:Wu,f=s.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,c,f,n,null,h,null)}getFeaturesAtPixel(t,n){const s=[];return this.forEachFeatureAtPixel(t,function(r){s.push(r)},n),s}getAllLayers(){const t=[];function n(s){s.forEach(function(r){r instanceof Kh?n(r.getLayers()):t.push(r)})}return n(this.getLayers()),t}hasFeatureAtPixel(t,n){if(!this.frameState_||!this.renderer_)return!1;const s=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:Wu,c=n.hitTolerance!==void 0?n.hitTolerance:0,h=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(s,this.frameState_,c,h,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const s=this.viewport_.getBoundingClientRect(),r=this.getSize(),c=s.width/r[0],h=s.height/r[1],f="changedTouches"in t?t.changedTouches[0]:t;return[(f.clientX-s.left)/c,(f.clientY-s.top)/h]}getTarget(){return this.get(Fi.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return E_(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const n=this.frameState_;return n?Di(n.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Fi.LAYERGROUP)}setLayers(t){const n=this.getLayerGroup();if(t instanceof Ea){n.setLayers(t);return}const s=n.getLayers();s.clear(),s.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,s=t.length;n<s;++n){const r=t[n];if(!r.visible)continue;const c=r.layer.getRenderer();if(c&&!c.ready)return!0;const h=r.layer.getSource();if(h&&h.loading)return!0}return!1}getPixelFromCoordinate(t){const n=Ys(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(t){const n=this.frameState_;return n?Di(n.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Fi.SIZE)}getView(){return this.get(Fi.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,n,s,r){return $E(this.frameState_,t,n,s,r)}handleBrowserEvent(t,n){n=n||t.type;const s=new Oo(n,this,t);this.handleMapBrowserEvent(s)}handleMapBrowserEvent(t){if(!this.frameState_)return;const n=t.originalEvent,s=n.type;if(s===m_.POINTERDOWN||s===le.WHEEL||s===le.KEYDOWN){const r=this.getOwnerDocument(),c=this.viewport_.getRootNode?this.viewport_.getRootNode():r,h=n.target,f=c instanceof ShadowRoot?c.host===h?c.host.ownerDocument:c:c===r?r.documentElement:c;if(this.overlayContainerStopEvent_.contains(h)||!f.contains(h))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let c=r.length-1;c>=0;c--){const h=r[c];if(h.getMap()!==this||!h.getActive()||!this.getTargetElement())continue;if(!h.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,c=r;if(t){const h=t.viewHints;if(h[fi.ANIMATING]||h[fi.INTERACTING]){const f=Date.now()-t.time>8;r=f?0:8,c=f?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,c))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(us.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(us.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Sh(No.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Sh(No.LOADSTART,this,t))));const s=this.postRenderFunctions_;if(t)for(let r=0,c=s.length;r<c;++r)s[r](this,t);s.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let s=0,r=this.targetChangeHandlerKeys_.length;s<r;++s)bn(this.targetChangeHandlerKeys_[s]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(le.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(le.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const s=this.targetElement_.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.unobserve(s.host),this.setSize(void 0)}const t=this.getTarget(),n=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new f7(this)),this.mapBrowserEventHandler_=new QE(this,this.moveTolerance_);for(const c in En)this.mapBrowserEventHandler_.addEventListener(En[c],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(le.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(le.WHEEL,this.boundHandleBrowserEvent_,D4?{passive:!1}:!1);let s;if(this.keyboardEventTarget_)s=this.keyboardEventTarget_;else{const c=n.getRootNode();s=c instanceof ShadowRoot?c.host:n}this.targetChangeHandlerKeys_=[we(s,le.KEYDOWN,this.handleBrowserEvent,this),we(s,le.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(bn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(bn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=we(t,wh.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=we(t,le.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(bn),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new wo("addlayer",t)),this.layerGroupPropertyListenerKeys_=[we(t,wh.PROPERTYCHANGE,this.render,this),we(t,le.CHANGE,this.render,this),we(t,"addlayer",this.handleLayerAdd_,this),we(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,s=t.length;n<s;++n){const r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){OS(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const n=this.getSize(),s=this.getView(),r=this.frameState_;let c=null;if(n!==void 0&&rv(n)&&s&&s.isDef()){const h=s.getHints(this.frameState_?this.frameState_.viewHints:void 0),f=s.getState();if(c={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:P1(f.center,f.resolution,f.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:f,viewHints:h,wantedTiles:{},mapId:wn(this),renderTargets:{}},f.nextCenter&&f.nextResolution){const g=isNaN(f.nextRotation)?f.rotation:f.nextRotation;c.nextExtent=P1(f.nextCenter,f.nextResolution,g,n)}}this.frameState_=c,this.renderer_.renderFrame(c),c&&(c.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,c.postRenderFunctions),r&&(!this.previousExtent_||!Ph(this.previousExtent_)&&!O0(c.extent,this.previousExtent_))&&(this.dispatchEvent(new Sh(No.MOVESTART,this,r)),this.previousExtent_=hm(this.previousExtent_)),this.previousExtent_&&!c.viewHints[fi.ANIMATING]&&!c.viewHints[fi.INTERACTING]&&!O0(c.extent,this.previousExtent_)&&(this.dispatchEvent(new Sh(No.MOVEEND,this,c)),O4(c.extent,this.previousExtent_))),this.dispatchEvent(new Sh(No.POSTRENDER,this,c)),this.renderComplete_=(this.hasListener(No.LOADSTART)||this.hasListener(No.LOADEND)||this.hasListener(us.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new wo("removelayer",n)),this.set(Fi.LAYERGROUP,t)}setSize(t){this.set(Fi.SIZE,t)}setTarget(t){this.set(Fi.TARGET,t)}setView(t){if(!t||t instanceof wl){this.set(Fi.VIEW,t);return}this.set(Fi.VIEW,new wl);const n=this;t.then(function(s){n.setView(new wl(s))})}updateSize(){const t=this.getTargetElement();let n;if(t){const r=getComputedStyle(t),c=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),h=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(c)&&!isNaN(h)&&(n=[Math.max(0,c),Math.max(0,h)],!rv(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&B4("No map visible because the map container's width or height are 0."))}const s=this.getSize();n&&(!s||!Ho(n,s))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(t){const n=this.getView();n&&n.setViewportSize(t)}};function g7(i){let t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const n={},s=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Kh({layers:i.layers});n[Fi.LAYERGROUP]=s,n[Fi.TARGET]=i.target,n[Fi.VIEW]=i.view instanceof wl?i.view:new wl;let r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new Ea(i.controls.slice()):(xn(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=i.controls));let c;i.interactions!==void 0&&(Array.isArray(i.interactions)?c=new Ea(i.interactions.slice()):(xn(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),c=i.interactions));let h;return i.overlays!==void 0?Array.isArray(i.overlays)?h=new Ea(i.overlays.slice()):(xn(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),h=i.overlays):h=new Ea,{controls:r,interactions:c,keyboardEventTarget:t,overlays:h,values:n}}class wS{constructor(){ly(this,"pushMethodArgs_",(...t)=>(this.push_(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(W1(),{get:(t,n)=>{if(typeof W1()[n]=="function")return this.push_(n),this.pushMethodArgs_},set:(t,n,s)=>(this.push_(n,s),!0)})}push_(...t){const n=this.instructions_,s=this.zIndex+this.offset_;n[s]||(n[s]=[]),n[s].push(...t)}pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(n=>{for(let s=0,r=n.length;s<r;++s){const c=n[s];if(typeof c=="function"){c(t);continue}const h=n[++s];if(typeof t[c]=="function")t[c](...h);else{if(typeof h=="function"){t[c]=h(t);continue}t[c]=h}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const m7=5;class p7 extends C4{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=m7}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return je()}getData(t){return null}prepareFrame(t){return je()}renderFrame(t,n){return je()}forEachFeatureAtCoordinate(t,n,s,r,c){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===Gt.LOADED||n.getState()===Gt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=Gt.LOADED&&n!=Gt.ERROR&&t.addEventListener(le.CHANGE,this.boundHandleImageChange_),n==Gt.IDLE&&(t.load(),n=t.getState()),n==Gt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const vv=[];let bh=null;function _7(){bh=gi(1,1,void 0,{willReadFrequently:!0})}class LS extends p7{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Fs(),this.pixelTransform=Fs(),this.inversePixelTransform=Fs(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,n,s){bh||_7(),bh.clearRect(0,0,1,1);let r;try{bh.drawImage(t,n,s,1,1,0,0,1,1),r=bh.getImageData(0,0,1,1).data}catch{return bh=null,null}return r}getBackground(t){let s=this.getLayer().getBackground();return typeof s=="function"&&(s=s(t.viewState.resolution)),s||void 0}useContainer(t,n,s){const r=this.getLayer().getClassName();let c,h;if(t&&t.className===r&&(!s||t&&t.style.backgroundColor&&Ho(Uh(t.style.backgroundColor),Uh(s)))){const f=t.firstElementChild;f instanceof HTMLCanvasElement&&(h=f.getContext("2d"))}if(h&&W8(h.canvas.style.transform,n)?(this.container=t,this.context=h,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){c=document.createElement("div"),c.className=r;let f=c.style;f.position="absolute",f.width="100%",f.height="100%",h=gi();const g=h.canvas;c.appendChild(g),f=g.style,f.position="absolute",f.left="0",f.transformOrigin="top left",this.container=c,this.context=h}!this.containerReused&&s&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=s)}clipUnrotated(t,n,s){const r=fm(s),c=Z_(s),h=k_(s),f=X_(s);Di(n.coordinateToPixelTransform,r),Di(n.coordinateToPixelTransform,c),Di(n.coordinateToPixelTransform,h),Di(n.coordinateToPixelTransform,f);const g=this.inversePixelTransform;Di(g,r),Di(g,c),Di(g,h),Di(g,f),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(c[0]),Math.round(c[1])),t.lineTo(Math.round(h[0]),Math.round(h[1])),t.lineTo(Math.round(f[0]),Math.round(f[1])),t.clip()}prepareContainer(t,n){const s=t.extent,r=t.viewState.resolution,c=t.viewState.rotation,h=t.pixelRatio,f=Math.round(Ye(s)/r*h),g=Math.round(di(s)/r*h);Or(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,c,-f/2,-g/2),X4(this.inversePixelTransform,this.pixelTransform);const p=Q8(this.pixelTransform);if(this.useContainer(n,p,this.getBackground(t)),!this.containerReused){const _=this.context.canvas;_.width!=f||_.height!=g?(_.width=f,_.height=g):this.context.clearRect(0,0,f,g),p!==_.style.transform&&(_.style.transform=p)}}dispatchRenderEvent_(t,n,s){const r=this.getLayer();if(r.hasListener(t)){const c=new DS(t,this.inversePixelTransform,s,n);r.dispatchEvent(c)}}preRender(t,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(us.PRERENDER,t,n)}postRender(t,n){n.declutter||this.dispatchRenderEvent_(us.POSTRENDER,t,n)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new wS),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(us.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(us.POSTRENDER,this.context,t))}getRenderTransform(t,n,s,r,c,h,f){const g=c/2,p=h/2,_=r/n,S=-_,x=-t[0]+f,b=-t[1];return Or(this.tempTransform,g,p,_,S,-s,x,b)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class y7 extends LS{constructor(t){super(t),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(t){const n=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,r=t.viewState,c=r.resolution,h=this.getLayer().getSource(),f=t.viewHints;let g=t.extent;if(n.extent!==void 0&&(g=K_(g,Pu(n.extent,r.projection))),!f[fi.ANIMATING]&&!f[fi.INTERACTING]&&!Ph(g))if(h){const p=r.projection,_=h.getImage(g,c,s,p);_&&(this.loadImage(_)?this.image=_:_.getState()===Gt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(t){const n=this.frameState;if(!n)return null;const s=this.getLayer(),r=Di(n.pixelToCoordinateTransform,t.slice()),c=s.getExtent();if(c&&!D0(c,r))return null;const h=this.image.getExtent(),f=this.image.getImage(),g=Ye(h),p=Math.floor(f.width*((r[0]-h[0])/g));if(p<0||p>=f.width)return null;const _=di(h),S=Math.floor(f.height*((h[3]-r[1])/_));return S<0||S>=f.height?null:this.getImageData(f,p,S)}renderFrame(t,n){const s=this.image,r=s.getExtent(),c=s.getResolution(),[h,f]=Array.isArray(c)?c:[c,c],g=s.getPixelRatio(),p=t.layerStatesArray[t.layerIndex],_=t.pixelRatio,S=t.viewState,x=S.center,b=S.resolution,E=_*h/(b*g),M=_*f/(b*g);this.prepareContainer(t,n);const D=this.context.canvas.width,L=this.context.canvas.height,T=this.getRenderContext(t);let A=!1,N=!0;if(p.extent){const j=Pu(p.extent,S.projection);N=ia(j,t.extent),A=N&&!Lo(j,t.extent),A&&this.clipUnrotated(T,t,j)}const z=s.getImage(),I=Or(this.tempTransform,D/2,L/2,E,M,0,g*(r[0]-x[0])/h,g*(x[1]-r[3])/f);this.renderedResolution=f*_/g;const K=z.width*I[0],H=z.height*I[3];if(this.getLayer().getSource().getInterpolate()||(T.imageSmoothingEnabled=!1),this.preRender(T,t),N&&K>=.5&&H>=.5){const j=I[4],Y=I[5],X=p.opacity;X!==1&&(T.save(),T.globalAlpha=X),T.drawImage(z,0,0,+z.width,+z.height,j,Y,K,H),X!==1&&T.restore()}return this.postRender(this.context,t),A&&T.restore(),T.imageSmoothingEnabled=!0,this.container}}class v7 extends ym{constructor(t){t=t||{},super(t)}}class S7 extends v7{constructor(t){super(t)}createRenderer(){return new y7(this)}getData(t){return super.getData(t)}}let Yp;const T0=[];function Sv(i,t,n,s,r){i.beginPath(),i.moveTo(0,0),i.lineTo(t,n),i.lineTo(s,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,s)+1,Math.max(n,r)),i.restore()}function Vp(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-.75*255)>2}function E7(){if(Yp===void 0){const i=gi(6,6,T0);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",Sv(i,4,5,4,0),Sv(i,4,5,0,5);const t=i.getImageData(0,0,3,3).data;Yp=Vp(t,0)||Vp(t,4)||Vp(t,8),c2(i),T0.push(i.canvas)}return Yp}function x7(i,t,n,s){const r=F4(n,t,i);let c=Fy(t,s,n);const h=t.getMetersPerUnit();h!==void 0&&(c*=h);const f=i.getMetersPerUnit();f!==void 0&&(c/=f);const g=i.getExtent();if(!g||D0(g,r)){const p=Fy(i,c,r)/c;isFinite(p)&&p>0&&(c/=p)}return c}function b7(i,t,n,s,r,c,h,f,g,p,_,S,x,b){const E=gi(Math.round(n*i),Math.round(n*t),T0);if(S||(E.imageSmoothingEnabled=!1),g.length===0)return E.canvas;E.scale(n,n);function M(z){return Math.round(z*n)/n}E.globalCompositeOperation="lighter";const D=Ps();g.forEach(function(z,I,K){i8(D,z.extent)});let L;const T=n/s,A=(S?1:1+Math.pow(2,-24))/T;(g.length!==1||p!==0)&&(L=gi(Math.round(Ye(D)*T),Math.round(di(D)*T),T0),S||(L.imageSmoothingEnabled=!1),g.forEach(function(z,I,K){if(z.image.width>0&&z.image.height>0){if(z.clipExtent){L.save();const J=(z.clipExtent[0]-D[0])*T,w=-(z.clipExtent[3]-D[3])*T,V=Ye(z.clipExtent)*T,G=di(z.clipExtent)*T;L.rect(S?J:Math.round(J),S?w:Math.round(w),S?V:Math.round(J+V)-Math.round(J),S?G:Math.round(w+G)-Math.round(w)),L.clip()}const H=(z.extent[0]-D[0])*T,j=-(z.extent[3]-D[3])*T,Y=Ye(z.extent)*T,X=di(z.extent)*T;L.drawImage(z.image,p,p,z.image.width-2*p,z.image.height-2*p,S?H:Math.round(H),S?j:Math.round(j),S?Y:Math.round(H+Y)-Math.round(H),S?X:Math.round(j+X)-Math.round(j)),z.clipExtent&&L.restore()}}));const N=fm(h);return f.getTriangles().forEach(function(z,I,K){const H=z.source,j=z.target;let Y=H[0][0],X=H[0][1],J=H[1][0],w=H[1][1],V=H[2][0],G=H[2][1];const B=M((j[0][0]-N[0])/c),F=M(-(j[0][1]-N[1])/c),$=M((j[1][0]-N[0])/c),rt=M(-(j[1][1]-N[1])/c),q=M((j[2][0]-N[0])/c),Q=M(-(j[2][1]-N[1])/c),tt=Y,nt=X;Y=0,X=0,J-=tt,w-=nt,V-=tt,G-=nt;const ht=[[J,w,0,0,$-B],[V,G,0,0,q-B],[0,0,J,w,rt-F],[0,0,V,G,Q-F]],vt=e8(ht);if(!vt)return;if(E.save(),E.beginPath(),E7()||!S){E.moveTo($,rt);const W=4,Z=B-$,dt=F-rt;for(let Et=0;Et<W;Et++)E.lineTo($+M((Et+1)*Z/W),rt+M(Et*dt/(W-1))),Et!=W-1&&E.lineTo($+M((Et+1)*Z/W),rt+M((Et+1)*dt/(W-1)));E.lineTo(q,Q)}else E.moveTo($,rt),E.lineTo(B,F),E.lineTo(q,Q);E.clip(),E.transform(vt[0],vt[2],vt[1],vt[3],B,F),E.translate(D[0]-tt,D[3]-nt);let St;if(L)St=L.canvas,E.scale(A,-A);else{const W=g[0],Z=W.extent;St=W.image,E.scale(Ye(Z)/St.width,-di(Z)/St.height)}E.drawImage(St,0,0),E.restore()}),L&&(c2(L),T0.push(L.canvas)),E.canvas}function M_(i){return Array.isArray(i)?Math.min(...i):i}const C7=10,Ev=.25;class R7{constructor(t,n,s,r,c,h,f){this.sourceProj_=t,this.targetProj_=n;let g={};const p=f?P8(A=>Di(f,F4(A,this.targetProj_,this.sourceProj_))):Z1(this.targetProj_,this.sourceProj_);this.transformInv_=function(A){const N=A[0]+"/"+A[1];return g[N]||(g[N]=p(A)),g[N]},this.maxSourceExtent_=r,this.errorThresholdSquared_=c*c,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Ye(r)>=Ye(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ye(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ye(this.targetProj_.getExtent()):null;const _=fm(s),S=Z_(s),x=k_(s),b=X_(s),E=this.transformInv_(_),M=this.transformInv_(S),D=this.transformInv_(x),L=this.transformInv_(b),T=C7+(h?Math.max(0,Math.ceil(Math.log2(l8(s)/(h*h*256*256)))):0);if(this.addQuad_(_,S,x,b,E,M,D,L,T),this.wrapsXInSource_){let A=1/0;this.triangles_.forEach(function(N,z,I){A=Math.min(A,N.source[0][0],N.source[1][0],N.source[2][0])}),this.triangles_.forEach(N=>{if(Math.max(N.source[0][0],N.source[1][0],N.source[2][0])-A>this.sourceWorldWidth_/2){const z=[[N.source[0][0],N.source[0][1]],[N.source[1][0],N.source[1][1]],[N.source[2][0],N.source[2][1]]];z[0][0]-A>this.sourceWorldWidth_/2&&(z[0][0]-=this.sourceWorldWidth_),z[1][0]-A>this.sourceWorldWidth_/2&&(z[1][0]-=this.sourceWorldWidth_),z[2][0]-A>this.sourceWorldWidth_/2&&(z[2][0]-=this.sourceWorldWidth_);const I=Math.min(z[0][0],z[1][0],z[2][0]);Math.max(z[0][0],z[1][0],z[2][0])-I<this.sourceWorldWidth_/2&&(N.source=z)}})}g={}}addTriangle_(t,n,s,r,c,h){this.triangles_.push({source:[r,c,h],target:[t,n,s]})}addQuad_(t,n,s,r,c,h,f,g,p){const _=Gy([c,h,f,g]),S=this.sourceWorldWidth_?Ye(_)/this.sourceWorldWidth_:null,x=this.sourceWorldWidth_,b=this.sourceProj_.canWrapX()&&S>.5&&S<1;let E=!1;if(p>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const D=Gy([t,n,s,r]);E=Ye(D)/this.targetWorldWidth_>Ev||E}!b&&this.sourceProj_.isGlobal()&&S&&(E=S>Ev||E)}if(!E&&this.maxSourceExtent_&&isFinite(_[0])&&isFinite(_[1])&&isFinite(_[2])&&isFinite(_[3])&&!ia(_,this.maxSourceExtent_))return;let M=0;if(!E&&(!isFinite(c[0])||!isFinite(c[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(f[0])||!isFinite(f[1])||!isFinite(g[0])||!isFinite(g[1]))){if(p>0)E=!0;else if(M=(!isFinite(c[0])||!isFinite(c[1])?8:0)+(!isFinite(h[0])||!isFinite(h[1])?4:0)+(!isFinite(f[0])||!isFinite(f[1])?2:0)+(!isFinite(g[0])||!isFinite(g[1])?1:0),M!=1&&M!=2&&M!=4&&M!=8)return}if(p>0){if(!E){const D=[(t[0]+s[0])/2,(t[1]+s[1])/2],L=this.transformInv_(D);let T;b?T=(b0(c[0],x)+b0(f[0],x))/2-b0(L[0],x):T=(c[0]+f[0])/2-L[0];const A=(c[1]+f[1])/2-L[1];E=T*T+A*A>this.errorThresholdSquared_}if(E){if(Math.abs(t[0]-s[0])<=Math.abs(t[1]-s[1])){const D=[(n[0]+s[0])/2,(n[1]+s[1])/2],L=this.transformInv_(D),T=[(r[0]+t[0])/2,(r[1]+t[1])/2],A=this.transformInv_(T);this.addQuad_(t,n,D,T,c,h,L,A,p-1),this.addQuad_(T,D,s,r,A,L,f,g,p-1)}else{const D=[(t[0]+n[0])/2,(t[1]+n[1])/2],L=this.transformInv_(D),T=[(s[0]+r[0])/2,(s[1]+r[1])/2],A=this.transformInv_(T);this.addQuad_(t,D,T,r,c,L,A,g,p-1),this.addQuad_(D,n,s,T,L,h,f,A,p-1)}return}}if(b){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(M&11)==0&&this.addTriangle_(t,s,r,c,f,g),(M&14)==0&&this.addTriangle_(t,s,n,c,f,h),M&&((M&13)==0&&this.addTriangle_(n,r,t,h,g,c),(M&7)==0&&this.addTriangle_(n,r,s,h,g,f))}calculateSourceExtent(){const t=Ps();return this.triangles_.forEach(function(n,s,r){const c=n.source;C0(t,c[0]),C0(t,c[1]),C0(t,c[2])}),t}getTriangles(){return this.triangles_}}const T7=.5;class A7 extends v2{constructor(t,n,s,r,c,h,f){let g=t.getExtent();g&&t.canWrapX()&&(g=g.slice(),g[0]=-1/0,g[2]=1/0);let p=n.getExtent();p&&n.canWrapX()&&(p=p.slice(),p[0]=-1/0,p[2]=1/0);const _=p?K_(s,p):s,S=Dr(_),x=x7(t,n,S,r),b=T7,E=new R7(t,n,_,g,x*b,r),M=E.calculateSourceExtent(),D=Ph(M)?null:h(M,x,c),L=D?Gt.IDLE:Gt.EMPTY,T=D?D.getPixelRatio():1;super(s,r,T,L),this.targetProj_=n,this.maxSourceExtent_=g,this.triangulation_=E,this.targetResolution_=r,this.targetExtent_=s,this.sourceImage_=D,this.sourcePixelRatio_=T,this.interpolate_=f,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Gt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==Gt.LOADED){const n=Ye(this.targetExtent_)/this.targetResolution_,s=di(this.targetExtent_)/this.targetResolution_;this.canvas_=b7(n,s,this.sourcePixelRatio_,M_(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==Gt.IDLE){this.state=Gt.LOADING,this.changed();const t=this.sourceImage_.getState();t==Gt.LOADED||t==Gt.ERROR?this.reproject_():(this.sourceListenerKey_=we(this.sourceImage_,le.CHANGE,n=>{const s=this.sourceImage_.getState();(s==Gt.LOADED||s==Gt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){bn(this.sourceListenerKey_),this.sourceListenerKey_=null}}class zS extends Il{constructor(t){super(),this.projection=fs(t.projection),this.attributions_=xv(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(s,r){n.viewResolver=s,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=xv(t),this.changed()}setState(t){this.state_=t,this.changed()}}function xv(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),t=>i):null}const B1=4,qp={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class M7 extends Hl{constructor(t,n){super(t),this.image=n}}class D7 extends zS{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:t.interpolate!==void 0?t.interpolate:!0}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=t.resolutions!==void 0?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=t.loader?t.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const n=this.getResolutions();if(n){const s=Y_(n,t,0);t=n[s]}return t}getImage(t,n,s,r){const c=this.getProjection();if(!c||!r||Xy(c,r))return c&&(r=c),this.getImageInternal(t,n,s,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Xy(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==n&&O0(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new A7(c,r,t,n,s,(h,f,g)=>this.getImageInternal(h,f,g,c),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,n,s,r){if(this.loader){const c=N7(t,n,s,1),h=this.findNearestResolution(n);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&Lo(this.wantedExtent_,c)||Lo(this.image.getExtent(),c))&&(this.wantedResolution_&&M_(this.wantedResolution_)===h||M_(this.image.getResolution())===h)))return this.image;this.wantedProjection_=r,this.wantedExtent_=c,this.wantedResolution_=h,this.image=new v2(c,h,s,this.loader),this.image.addEventListener(le.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const n=t.target;let s;switch(n.getState()){case Gt.LOADING:this.loading=!0,s=qp.IMAGELOADSTART;break;case Gt.LOADED:this.loading=!1,s=qp.IMAGELOADEND;break;case Gt.ERROR:this.loading=!1,s=qp.IMAGELOADERROR;break;default:return}this.hasListener(s)&&this.dispatchEvent(new M7(s,n))}}function O7(i,t){i.getImage().src=t}function N7(i,t,n,s){const r=t/n,c=Dr(i),h=D1(Ye(i)/r,B1),f=D1(di(i)/r,B1),g=D1((s-1)*h/2,B1),p=h+2*g,_=D1((s-1)*f/2,B1),S=f+2*_;return P1(c,r,0,[p,S])}function w7(i){const t=i.load||mS,n=i.imageExtent,s=i.crossOrigin??null;return()=>{const r=new Image;return r.crossOrigin=s,t(r,i.url).then(c=>{const h=Ye(n)/c.width,f=di(n)/c.height;return{image:c,extent:n,resolution:h!==f?[h,f]:f,pixelRatio:1}})}}class L7 extends D7{constructor(t){const n=t.crossOrigin!==void 0?t.crossOrigin:null,s=t.imageLoadFunction!==void 0?t.imageLoadFunction:O7;super({attributions:t.attributions,interpolate:t.interpolate,projection:fs(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new v2(this.imageExtent_,void 0,1,w7({url:t.url,imageExtent:t.imageExtent,crossOrigin:n,load:(r,c)=>(this.image.setImage(r),s(this.image,c),mS(r))})),this.image.addEventListener(le.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,n,s,r){return ia(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}let z7=!1;function G7(i,t,n,s,r,c,h){const f=new XMLHttpRequest;f.open("GET",typeof i=="function"?i(n,s,r):i,!0),t.getType()=="arraybuffer"&&(f.responseType="arraybuffer"),f.withCredentials=z7,f.onload=function(g){if(!f.status||f.status>=200&&f.status<300){const p=t.getType();try{let _;p=="text"||p=="json"?_=f.responseText:p=="xml"?_=f.responseXML||f.responseText:p=="arraybuffer"&&(_=f.response),_?c(t.readFeatures(_,{extent:n,featureProjection:r}),t.readProjection(_)):h()}catch{h()}}else h()},f.onerror=h,f.send()}function bv(i,t){return function(n,s,r,c,h){G7(i,t,n,s,r,(f,g)=>{this.addFeatures(f),c!==void 0&&c(f)},()=>{this.changed(),h!==void 0&&h()})}}function U7(i,t){return[[-1/0,-1/0,1/0,1/0]]}class bm extends Il{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const n=t;this.setGeometry(n)}else{const n=t;this.setProperties(n)}}clone(){const t=new bm(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&t.setGeometry(n.clone());const s=this.getStyle();return s&&t.setStyle(s),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(bn(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=we(t,le.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?B7(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function B7(i){if(typeof i=="function")return i;let t;return Array.isArray(i)?t=i:(xn(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[i]),function(){return t}}function H7(i,t,n,s){const r=[];let c=Ps();for(let h=0,f=n.length;h<f;++h){const g=n[h];c=P_(i,t,g[0],s),r.push((c[0]+c[2])/2,(c[1]+c[3])/2),t=g[g.length-1]}return r}function Cv(i,t,n,s,r,c,h){let f,g;const p=(n-t)/s;if(p===1)f=t;else if(p===2)f=t,g=r;else if(p!==0){let _=i[t],S=i[t+1],x=0;const b=[0];for(let D=t+s;D<n;D+=s){const L=i[D],T=i[D+1];x+=Math.sqrt((L-_)*(L-_)+(T-S)*(T-S)),b.push(x),_=L,S=T}const E=r*x,M=VE(b,E);M<0?(g=(E-b[-M-2])/(b[-M-1]-b[-M-2]),f=t+(-M-2)*s):f=t+M*s}h=h>1?h:2,c=c||new Array(h);for(let _=0;_<h;++_)c[_]=f===void 0?NaN:g===void 0?i[f+_]:os(i[f+_],i[f+s+_],g);return c}function I7(i,t,n,s){let r=i[t],c=i[t+1],h=0;for(let f=t+s;f<n;f+=s){const g=i[f],p=i[f+1];h+=Math.sqrt((g-r)*(g-r)+(p-c)*(p-c)),r=g,c=p}return h}const Rv=Fs();class Vs{constructor(t,n,s,r,c,h){this.styleFunction,this.extent_,this.id_=h,this.type_=t,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=s||null,this.properties_=c,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?L4(this.flatCoordinates_):P_(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Dr(this.getExtent());this.flatInteriorPoints_=a2(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=yx(this.flatCoordinates_,this.ends_),n=H7(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=fx(this.flatCoordinates_,0,t,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Cv(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let n=0;const s=this.ends_;for(let r=0,c=s.length;r<c;++r){const h=s[r],f=Cv(t,n,h,2,.5);V_(this.flatMidpoints_,f),n=h}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=fs(t);const n=t.getExtent(),s=t.getWorldExtent();if(n&&s){const r=di(s)/di(n);Or(Rv,s[0],s[3],r,-r,0,0,0),Uo(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Rv,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new Vs(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=x4((t,n)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const s=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":s.length=i2(s,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,s,0),r=[s.length];break;case"MultiLineString":r=[],s.length=ux(s,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,s,0,r);break;case"Polygon":r=[],s.length=J4(s,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),s,0,r);break}return r&&(this.simplifiedGeometry_=new Vs(this.type_,s,r,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}Vs.prototype.getFlatCoordinates=Vs.prototype.getOrientedFlatCoordinates;class Tv{constructor(t){this.rbush_=new uS(t),this.items_={}}insert(t,n){const s={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.rbush_.insert(s),this.items_[wn(n)]=s}load(t,n){const s=new Array(n.length);for(let r=0,c=n.length;r<c;r++){const h=t[r],f=n[r],g={minX:h[0],minY:h[1],maxX:h[2],maxY:h[3],value:f};s[r]=g,this.items_[wn(f)]=g}this.rbush_.load(s)}remove(t){const n=wn(t),s=this.items_[n];return delete this.items_[n],this.rbush_.remove(s)!==null}update(t,n){const s=this.items_[wn(n)],r=[s.minX,s.minY,s.maxX,s.maxY];O0(r,t)||(this.remove(n),this.insert(t,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(t){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,n){return this.forEach_(this.getInExtent(t),n)}forEach_(t,n){let s;for(let r=0,c=t.length;r<c;r++)if(s=n(t[r]),s)return s;return s}isEmpty(){return Lh(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const n=this.rbush_.toJSON();return zh(n.minX,n.minY,n.maxX,n.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const n in t.items_)this.items_[n]=t.items_[n]}}const rs={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class To extends Hl{constructor(t,n,s){super(t),this.feature=n,this.features=s}}class j7 extends zS{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=M0,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(xn(this.format_,"`format` must be set when `url` is set"),this.loader_=bv(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:U7;const n=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=n?new Tv:null,this.loadedExtentsRtree_=new Tv,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let s,r;Array.isArray(t.features)?r=t.features:t.features&&(s=t.features,r=s.getArray()),!n&&s===void 0&&(s=new Ea(r)),r!==void 0&&this.addFeaturesInternal(r),s!==void 0&&this.bindFeaturesCollection_(s)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const n=wn(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);const s=t.getGeometry();if(s){const r=s.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new To(rs.ADDFEATURE,t))}setupChangeEvents_(t,n){n instanceof Vs||(this.featureChangeKeys_[t]=[we(n,le.CHANGE,this.handleFeatureChange_,this),we(n,wh.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,n){let s=!0;if(n.getId()!==void 0){const r=String(n.getId());if(!(r in this.idIndex_))this.idIndex_[r]=n;else if(n instanceof Vs){const c=this.idIndex_[r];c instanceof Vs?Array.isArray(c)?c.push(n):this.idIndex_[r]=[c,n]:s=!1}else s=!1}return s&&(xn(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=n),s}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const n=[],s=[],r=[];for(let c=0,h=t.length;c<h;c++){const f=t[c],g=wn(f);this.addToIndex_(g,f)&&s.push(f)}for(let c=0,h=s.length;c<h;c++){const f=s[c],g=wn(f);this.setupChangeEvents_(g,f);const p=f.getGeometry();if(p){const _=p.getExtent();n.push(_),r.push(f)}else this.nullGeometryFeatures_[g]=f}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(rs.ADDFEATURE))for(let c=0,h=s.length;c<h;c++)this.dispatchEvent(new To(rs.ADDFEATURE,s[c]))}bindFeaturesCollection_(t){let n=!1;this.addEventListener(rs.ADDFEATURE,function(s){n||(n=!0,t.push(s.feature),n=!1)}),this.addEventListener(rs.REMOVEFEATURE,function(s){n||(n=!0,t.remove(s.feature),n=!1)}),t.addEventListener(_a.ADD,s=>{n||(n=!0,this.addFeature(s.element),n=!1)}),t.addEventListener(_a.REMOVE,s=>{n||(n=!0,this.removeFeature(s.element),n=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const s in this.featureChangeKeys_)this.featureChangeKeys_[s].forEach(bn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(s=>{this.removeFeatureInternal(s)});for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new To(rs.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,n){const s=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(s,function(r){const c=r.getGeometry();if(c instanceof Vs||c.intersectsCoordinate(t))return n(r)})}forEachFeatureInExtent(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(t,n){return this.forEachFeatureInExtent(t,function(s){const r=s.getGeometry();if(r instanceof Vs||r.intersectsExtent(t)){const c=n(s);if(c)return c}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Lh(this.nullGeometryFeatures_)||V_(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const n=[];return this.forEachFeatureAtCoordinateDirect(t,function(s){n.push(s)}),n}getFeaturesInExtent(t,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=c8(t,n);return[].concat(...r.map(c=>this.featuresRtree_.getInExtent(c)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,n){const s=t[0],r=t[1];let c=null;const h=[NaN,NaN];let f=1/0;const g=[-1/0,-1/0,1/0,1/0];return n=n||Wu,this.featuresRtree_.forEachInExtent(g,function(p){if(n(p)){const _=p.getGeometry(),S=f;if(f=_ instanceof Vs?0:_.closestPointXY(s,r,h,f),f<S){c=p;const x=Math.sqrt(f);g[0]=s-x,g[1]=r-x,g[2]=s+x,g[3]=r+x}}}),c}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const n=this.idIndex_[t.toString()];return n!==void 0?n:null}getFeatureByUid(t){const n=this.uidIndex_[t];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const n=t.target,s=wn(n),r=n.getGeometry();if(!r)s in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[s]=n);else{const h=r.getExtent();s in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[s],this.featuresRtree_&&this.featuresRtree_.insert(h,n)):this.featuresRtree_&&this.featuresRtree_.update(h,n)}const c=n.getId();if(c!==void 0){const h=c.toString();this.idIndex_[h]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[h]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[s]=n;this.changed(),this.dispatchEvent(new To(rs.CHANGEFEATURE,n))}hasFeature(t){const n=t.getId();return n!==void 0?n in this.idIndex_:wn(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Lh(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,n,s){const r=this.loadedExtentsRtree_,c=this.strategy_(t,n,s);for(let h=0,f=c.length;h<f;++h){const g=c[h];r.forEachInExtent(g,function(_){return Lo(_.extent,g)})||(++this.loadingExtentsCount_,this.dispatchEvent(new To(rs.FEATURESLOADSTART)),this.loader_.call(this,g,n,s,_=>{--this.loadingExtentsCount_,this.dispatchEvent(new To(rs.FEATURESLOADEND,void 0,_))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new To(rs.FEATURESLOADERROR))}),r.insert(g,{extent:g.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const n=this.loadedExtentsRtree_,s=n.forEachInExtent(t,function(r){if(O0(r.extent,t))return r});s&&n.remove(s)}removeFeatures(t){let n=!1;for(let s=0,r=t.length;s<r;++s)n=this.removeFeatureInternal(t[s])||n;n&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const n=wn(t);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t);const s=this.featureChangeKeys_[n];s==null||s.forEach(bn),delete this.featureChangeKeys_[n];const r=t.getId();if(r!==void 0){const c=r.toString(),h=this.idIndex_[c];h===t?delete this.idIndex_[c]:Array.isArray(h)&&(h.splice(h.indexOf(t),1),h.length===1&&(this.idIndex_[c]=h[0]))}return delete this.uidIndex_[n],this.hasListener(rs.REMOVEFEATURE)&&this.dispatchEvent(new To(rs.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n];break}}setLoader(t){this.loader_=t}setUrl(t){xn(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(bv(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}class GS{drawCustom(t,n,s,r,c){}drawGeometry(t){}setStyle(t){}drawCircle(t,n,s){}drawFeature(t,n,s){}drawGeometryCollection(t,n,s){}drawLineString(t,n,s){}drawMultiLineString(t,n,s){}drawMultiPoint(t,n,s){}drawMultiPolygon(t,n,s){}drawPoint(t,n,s){}drawPolygon(t,n,s){}drawText(t,n,s){}setFillStrokeStyle(t,n){}setImageStyle(t,n){}setTextStyle(t,n){}}const jt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},H1=[jt.FILL],zo=[jt.STROKE],Ku=[jt.BEGIN_PATH],Av=[jt.CLOSE_PATH];class Q0 extends GS{constructor(t,n,s,r){super(),this.tolerance=t,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=s,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const n=this.pixelRatio;return n==1?t:t.map(function(s){return s*n})}appendFlatPointCoordinates(t,n){const s=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,c=this.coordinates;let h=c.length;for(let f=0,g=t.length;f<g;f+=n)r[0]=t[f],r[1]=t[f+1],D0(s,r)&&(c[h++]=r[0],c[h++]=r[1]);return h}appendFlatLineCoordinates(t,n,s,r,c,h){const f=this.coordinates;let g=f.length;const p=this.getBufferedMaxExtent();h&&(n+=r);let _=t[n],S=t[n+1];const x=this.tmpCoordinate_;let b=!0,E,M,D;for(E=n+r;E<s;E+=r)x[0]=t[E],x[1]=t[E+1],D=__(p,x),D!==M?(b&&(f[g++]=_,f[g++]=S,b=!1),f[g++]=x[0],f[g++]=x[1]):D===hi.INTERSECTING?(f[g++]=x[0],f[g++]=x[1],b=!1):b=!0,_=x[0],S=x[1],M=D;return(c&&b||E===n+r)&&(f[g++]=_,f[g++]=S),g}drawCustomCoordinates_(t,n,s,r,c){for(let h=0,f=s.length;h<f;++h){const g=s[h],p=this.appendFlatLineCoordinates(t,n,g,r,!1,!1);c.push(p),n=g}return n}drawCustom(t,n,s,r,c){this.beginGeometry(t,n,c);const h=t.getType(),f=t.getStride(),g=this.coordinates.length;let p,_,S,x,b;switch(h){case"MultiPolygon":p=t.getOrientedFlatCoordinates(),x=[];const E=t.getEndss();b=0;for(let M=0,D=E.length;M<D;++M){const L=[];b=this.drawCustomCoordinates_(p,b,E[M],f,L),x.push(L)}this.instructions.push([jt.CUSTOM,g,x,t,s,Wy,c]),this.hitDetectionInstructions.push([jt.CUSTOM,g,x,t,r||s,Wy,c]);break;case"Polygon":case"MultiLineString":S=[],p=h=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),b=this.drawCustomCoordinates_(p,0,t.getEnds(),f,S),this.instructions.push([jt.CUSTOM,g,S,t,s,Q1,c]),this.hitDetectionInstructions.push([jt.CUSTOM,g,S,t,r||s,Q1,c]);break;case"LineString":case"Circle":p=t.getFlatCoordinates(),_=this.appendFlatLineCoordinates(p,0,p.length,f,!1,!1),this.instructions.push([jt.CUSTOM,g,_,t,s,Ah,c]),this.hitDetectionInstructions.push([jt.CUSTOM,g,_,t,r||s,Ah,c]);break;case"MultiPoint":p=t.getFlatCoordinates(),_=this.appendFlatPointCoordinates(p,f),_>g&&(this.instructions.push([jt.CUSTOM,g,_,t,s,Ah,c]),this.hitDetectionInstructions.push([jt.CUSTOM,g,_,t,r||s,Ah,c]));break;case"Point":p=t.getFlatCoordinates(),this.coordinates.push(p[0],p[1]),_=this.coordinates.length,this.instructions.push([jt.CUSTOM,g,_,t,s,void 0,c]),this.hitDetectionInstructions.push([jt.CUSTOM,g,_,t,r||s,void 0,c]);break}this.endGeometry(n)}beginGeometry(t,n,s){this.beginGeometryInstruction1_=[jt.BEGIN_GEOMETRY,n,0,t,s],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[jt.BEGIN_GEOMETRY,n,0,t,s],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let n;const s=t.length;let r,c,h=-1;for(n=0;n<s;++n)r=t[n],c=r[0],c==jt.END_GEOMETRY?h=n:c==jt.BEGIN_GEOMETRY&&(r[2]=n,FE(this.hitDetectionInstructions,h,n),h=-1)}fillStyleToState(t,n={}){if(t){const s=t.getColor();n.fillPatternScale=s&&typeof s=="object"&&"src"in s?this.pixelRatio:1,n.fillStyle=zl(s||va)}else n.fillStyle=void 0;return n}strokeStyleToState(t,n={}){if(t){const s=t.getColor();n.strokeStyle=zl(s||G0);const r=t.getLineCap();n.lineCap=r!==void 0?r:Hh;const c=t.getLineDash();n.lineDash=c?c.slice():Tr;const h=t.getLineDashOffset();n.lineDashOffset=h||Ar;const f=t.getLineJoin();n.lineJoin=f!==void 0?f:Ih;const g=t.getWidth();n.lineWidth=g!==void 0?g:B0;const p=t.getMiterLimit();n.miterLimit=p!==void 0?p:z0,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0;return n}setFillStrokeStyle(t,n){const s=this.state;this.fillStyleToState(t,s),this.strokeStyleToState(n,s)}createFill(t){const n=t.fillStyle,s=[jt.SET_FILL_STYLE,n];return typeof n!="string"&&s.push(t.fillPatternScale),s}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[jt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,n){const s=t.fillStyle;(typeof s!="string"||t.currentFillStyle!=s)&&(s!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=s)}updateStrokeStyle(t,n){const s=t.strokeStyle,r=t.lineCap,c=t.lineDash,h=t.lineDashOffset,f=t.lineJoin,g=t.lineWidth,p=t.miterLimit;(t.currentStrokeStyle!=s||t.currentLineCap!=r||c!=t.currentLineDash&&!Ho(t.currentLineDash,c)||t.currentLineDashOffset!=h||t.currentLineJoin!=f||t.currentLineWidth!=g||t.currentMiterLimit!=p)&&(s!==void 0&&n.call(this,t),t.currentStrokeStyle=s,t.currentLineCap=r,t.currentLineDash=c,t.currentLineDashOffset=h,t.currentLineJoin=f,t.currentLineWidth=g,t.currentMiterLimit=p)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[jt.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=O4(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;F_(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Y7 extends Q0{constructor(t,n,s,r){super(t,n,s,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,n,s){if(!this.image_||this.maxExtent&&!D0(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,n,s);const r=t.getFlatCoordinates(),c=t.getStride(),h=this.coordinates.length,f=this.appendFlatPointCoordinates(r,c);this.instructions.push([jt.DRAW_IMAGE,h,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([jt.DRAW_IMAGE,h,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(t,n,s){if(!this.image_)return;this.beginGeometry(t,n,s);const r=t.getFlatCoordinates(),c=[];for(let g=0,p=r.length;g<p;g+=t.getStride())(!this.maxExtent||D0(this.maxExtent,r.slice(g,g+2)))&&c.push(r[g],r[g+1]);const h=this.coordinates.length,f=this.appendFlatPointCoordinates(c,2);this.instructions.push([jt.DRAW_IMAGE,h,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([jt.DRAW_IMAGE,h,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,n){const s=t.getAnchor(),r=t.getSize(),c=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=s[0],this.anchorY_=s[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=c[0],this.originY_=c[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}class V7 extends Q0{constructor(t,n,s,r){super(t,n,s,r)}drawFlatCoordinates_(t,n,s,r){const c=this.coordinates.length,h=this.appendFlatLineCoordinates(t,n,s,r,!1,!1),f=[jt.MOVE_TO_LINE_TO,c,h];return this.instructions.push(f),this.hitDetectionInstructions.push(f),s}drawLineString(t,n,s){const r=this.state,c=r.strokeStyle,h=r.lineWidth;if(c===void 0||h===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,n,s),this.hitDetectionInstructions.push([jt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Tr,Ar],Ku);const f=t.getFlatCoordinates(),g=t.getStride();this.drawFlatCoordinates_(f,0,f.length,g),this.hitDetectionInstructions.push(zo),this.endGeometry(n)}drawMultiLineString(t,n,s){const r=this.state,c=r.strokeStyle,h=r.lineWidth;if(c===void 0||h===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,n,s),this.hitDetectionInstructions.push([jt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Tr,Ar],Ku);const f=t.getEnds(),g=t.getFlatCoordinates(),p=t.getStride();let _=0;for(let S=0,x=f.length;S<x;++S)_=this.drawFlatCoordinates_(g,_,f[S],p);this.hitDetectionInstructions.push(zo),this.endGeometry(n)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(zo),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(zo),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Ku)}}class Mv extends Q0{constructor(t,n,s,r){super(t,n,s,r)}drawFlatCoordinatess_(t,n,s,r){const c=this.state,h=c.fillStyle!==void 0,f=c.strokeStyle!==void 0,g=s.length;this.instructions.push(Ku),this.hitDetectionInstructions.push(Ku);for(let p=0;p<g;++p){const _=s[p],S=this.coordinates.length,x=this.appendFlatLineCoordinates(t,n,_,r,!0,!f),b=[jt.MOVE_TO_LINE_TO,S,x];this.instructions.push(b),this.hitDetectionInstructions.push(b),f&&(this.instructions.push(Av),this.hitDetectionInstructions.push(Av)),n=_}return h&&(this.instructions.push(H1),this.hitDetectionInstructions.push(H1)),f&&(this.instructions.push(zo),this.hitDetectionInstructions.push(zo)),n}drawCircle(t,n,s){const r=this.state,c=r.fillStyle,h=r.strokeStyle;if(c===void 0&&h===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n,s),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([jt.SET_FILL_STYLE,va]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([jt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Tr,Ar]);const f=t.getFlatCoordinates(),g=t.getStride(),p=this.coordinates.length;this.appendFlatLineCoordinates(f,0,f.length,g,!1,!1);const _=[jt.CIRCLE,p];this.instructions.push(Ku,_),this.hitDetectionInstructions.push(Ku,_),r.fillStyle!==void 0&&(this.instructions.push(H1),this.hitDetectionInstructions.push(H1)),r.strokeStyle!==void 0&&(this.instructions.push(zo),this.hitDetectionInstructions.push(zo)),this.endGeometry(n)}drawPolygon(t,n,s){const r=this.state,c=r.fillStyle,h=r.strokeStyle;if(c===void 0&&h===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n,s),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([jt.SET_FILL_STYLE,va]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([jt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Tr,Ar]);const f=t.getEnds(),g=t.getOrientedFlatCoordinates(),p=t.getStride();this.drawFlatCoordinatess_(g,0,f,p),this.endGeometry(n)}drawMultiPolygon(t,n,s){const r=this.state,c=r.fillStyle,h=r.strokeStyle;if(c===void 0&&h===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n,s),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([jt.SET_FILL_STYLE,va]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([jt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Tr,Ar]);const f=t.getEndss(),g=t.getOrientedFlatCoordinates(),p=t.getStride();let _=0;for(let S=0,x=f.length;S<x;++S)_=this.drawFlatCoordinatess_(g,_,f[S],p);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const n=this.coordinates;for(let s=0,r=n.length;s<r;++s)n[s]=Vu(n[s],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}function q7(i,t,n,s,r){const c=[];let h=n,f=0,g=t.slice(n,2);for(;f<i&&h+r<s;){const[p,_]=g.slice(-2),S=t[h+r],x=t[h+r+1],b=Math.sqrt((S-p)*(S-p)+(x-_)*(x-_));if(f+=b,f>=i){const E=(i-f+b)/b,M=os(p,S,E),D=os(_,x,E);g.push(M,D),c.push(g),g=[M,D],f==i&&(h+=r),f=0}else if(f<i)g.push(t[h+r],t[h+r+1]),h+=r;else{const E=b-f,M=os(p,S,E/b),D=os(_,x,E/b);g.push(M,D),c.push(g),g=[M,D],f=0,h+=r}}return f>0&&c.push(g),c}function F7(i,t,n,s,r){let c=n,h=n,f=0,g=0,p=n,_,S,x,b,E,M,D,L,T,A;for(S=n;S<s;S+=r){const N=t[S],z=t[S+1];E!==void 0&&(T=N-E,A=z-M,b=Math.sqrt(T*T+A*A),D!==void 0&&(g+=x,_=Math.acos((D*T+L*A)/(x*b)),_>i&&(g>f&&(f=g,c=p,h=S),g=0,p=S-r)),x=b,D=T,L=A),E=N,M=z}return g+=b,g>f?[p,S]:[c,h]}const nm={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class P7 extends Q0{constructor(t,n,s,r){super(t,n,s,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[va]={fillStyle:va},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,n,s){const r=this.textFillState_,c=this.textStrokeState_,h=this.textState_;if(this.text_===""||!h||!r&&!c)return;const f=this.coordinates;let g=f.length;const p=t.getType();let _=null,S=t.getStride();if(h.placement==="line"&&(p=="LineString"||p=="MultiLineString"||p=="Polygon"||p=="MultiPolygon")){if(!ia(this.maxExtent,t.getExtent()))return;let x;if(_=t.getFlatCoordinates(),p=="LineString")x=[_.length];else if(p=="MultiLineString")x=t.getEnds();else if(p=="Polygon")x=t.getEnds().slice(0,1);else if(p=="MultiPolygon"){const D=t.getEndss();x=[];for(let L=0,T=D.length;L<T;++L)x.push(D[L][0])}this.beginGeometry(t,n,s);const b=h.repeat,E=b?void 0:h.textAlign;let M=0;for(let D=0,L=x.length;D<L;++D){let T;b?T=q7(b*this.resolution,_,M,x[D],S):T=[_.slice(M,x[D])];for(let A=0,N=T.length;A<N;++A){const z=T[A];let I=0,K=z.length;if(E==null){const j=F7(h.maxAngle,z,0,z.length,2);I=j[0],K=j[1]}for(let j=I;j<K;j+=S)f.push(z[j],z[j+1]);const H=f.length;M=x[D],this.drawChars_(g,H),g=H}}this.endGeometry(n)}else{let x=h.overflow?null:[];switch(p){case"Point":case"MultiPoint":_=t.getFlatCoordinates();break;case"LineString":_=t.getFlatMidpoint();break;case"Circle":_=t.getCenter();break;case"MultiLineString":_=t.getFlatMidpoints(),S=2;break;case"Polygon":_=t.getFlatInteriorPoint(),h.overflow||x.push(_[2]/this.resolution),S=3;break;case"MultiPolygon":const N=t.getFlatInteriorPoints();_=[];for(let z=0,I=N.length;z<I;z+=3)h.overflow||x.push(N[z+2]/this.resolution),_.push(N[z],N[z+1]);if(_.length===0)return;S=2;break}const b=this.appendFlatPointCoordinates(_,S);if(b===g)return;if(x&&(b-g)/2!==_.length/S){let N=g/2;x=x.filter((z,I)=>{const K=f[(N+I)*2]===_[I*S]&&f[(N+I)*2+1]===_[I*S+1];return K||--N,K})}this.saveTextStates_();const E=h.backgroundFill?this.createFill(this.fillStyleToState(h.backgroundFill)):null,M=h.backgroundStroke?this.createStroke(this.strokeStyleToState(h.backgroundStroke)):null;this.beginGeometry(t,n,s);let D=h.padding;if(D!=ku&&(h.scale[0]<0||h.scale[1]<0)){let N=h.padding[0],z=h.padding[1],I=h.padding[2],K=h.padding[3];h.scale[0]<0&&(z=-z,K=-K),h.scale[1]<0&&(N=-N,I=-I),D=[N,z,I,K]}const L=this.pixelRatio;this.instructions.push([jt.DRAW_IMAGE,g,b,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,D==ku?ku:D.map(function(N){return N*L}),E,M,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]);const T=1/L,A=E?E.slice(0):null;A&&(A[1]=va),this.hitDetectionInstructions.push([jt.DRAW_IMAGE,g,b,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[T,T],NaN,this.declutterMode_,this.declutterImageWithText_,D,A,M,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?va:this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]),this.endGeometry(n)}}saveTextStates_(){const t=this.textStrokeState_,n=this.textState_,s=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const c=this.textKey_;c in this.textStates||(this.textStates[c]={font:n.font,textAlign:n.textAlign||U0,justify:n.justify,textBaseline:n.textBaseline||J1,scale:n.scale});const h=this.fillKey_;s&&(h in this.fillStates||(this.fillStates[h]={fillStyle:s.fillStyle}))}drawChars_(t,n){const s=this.textStrokeState_,r=this.textState_,c=this.strokeKey_,h=this.textKey_,f=this.fillKey_;this.saveTextStates_();const g=this.pixelRatio,p=nm[r.textBaseline],_=this.textOffsetY_*g,S=this.text_,x=s?s.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([jt.DRAW_CHARS,t,n,p,r.overflow,f,r.maxAngle,g,_,c,x*g,S,h,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([jt.DRAW_CHARS,t,n,p,r.overflow,f&&va,r.maxAngle,g,_,c,x*g,S,h,1/g,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,n){let s,r,c;if(!t)this.text_="";else{const h=t.getFill();h?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=zl(h.getColor()||va)):(r=null,this.textFillState_=r);const f=t.getStroke();if(!f)c=null,this.textStrokeState_=c;else{c=this.textStrokeState_,c||(c={},this.textStrokeState_=c);const M=f.getLineDash(),D=f.getLineDashOffset(),L=f.getWidth(),T=f.getMiterLimit();c.lineCap=f.getLineCap()||Hh,c.lineDash=M?M.slice():Tr,c.lineDashOffset=D===void 0?Ar:D,c.lineJoin=f.getLineJoin()||Ih,c.lineWidth=L===void 0?B0:L,c.miterLimit=T===void 0?z0:T,c.strokeStyle=zl(f.getColor()||G0)}s=this.textState_;const g=t.getFont()||_S;Vb(g);const p=t.getScaleArray();s.overflow=t.getOverflow(),s.font=g,s.maxAngle=t.getMaxAngle(),s.placement=t.getPlacement(),s.textAlign=t.getTextAlign(),s.repeat=t.getRepeat(),s.justify=t.getJustify(),s.textBaseline=t.getTextBaseline()||J1,s.backgroundFill=t.getBackgroundFill(),s.backgroundStroke=t.getBackgroundStroke(),s.padding=t.getPadding()||ku,s.scale=p===void 0?[1,1]:p;const _=t.getOffsetX(),S=t.getOffsetY(),x=t.getRotateWithView(),b=t.getKeepUpright(),E=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=_===void 0?0:_,this.textOffsetY_=S===void 0?0:S,this.textRotateWithView_=x===void 0?!1:x,this.textKeepUpright_=b===void 0?!0:b,this.textRotation_=E===void 0?0:E,this.strokeKey_=c?(typeof c.strokeStyle=="string"?c.strokeStyle:wn(c.strokeStyle))+c.lineCap+c.lineDashOffset+"|"+c.lineWidth+c.lineJoin+c.miterLimit+"["+c.lineDash.join()+"]":"",this.textKey_=s.font+s.scale+(s.textAlign||"?")+(s.repeat||"?")+(s.justify||"?")+(s.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+wn(r.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}const X7={Circle:Mv,Default:Q0,Image:Y7,LineString:V7,Polygon:Mv,Text:P7};class k7{constructor(t,n,s,r){this.tolerance_=t,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=s,this.buildersByZIndex_={}}finish(){const t={};for(const n in this.buildersByZIndex_){t[n]=t[n]||{};const s=this.buildersByZIndex_[n];for(const r in s){const c=s[r].finish();t[n][r]=c}}return t}getBuilder(t,n){const s=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[s];r===void 0&&(r={},this.buildersByZIndex_[s]=r);let c=r[n];if(c===void 0){const h=X7[n];c=new h(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=c}return c}}function K7(i,t,n,s,r,c,h,f,g,p,_,S,x=!0){let b=i[t],E=i[t+1],M=0,D=0,L=0,T=0;function A(){M=b,D=E,t+=s,b=i[t],E=i[t+1],T+=L,L=Math.sqrt((b-M)*(b-M)+(E-D)*(E-D))}do A();while(t<n-s&&T+L<c);let N=L===0?0:(c-T)/L;const z=os(M,b,N),I=os(D,E,N),K=t-s,H=T,j=c+f*g(p,r,_);for(;t<n-s&&T+L<j;)A();N=L===0?0:(j-T)/L;const Y=os(M,b,N),X=os(D,E,N);let J=!1;if(x)if(S){const F=[z,I,Y,X];k4(F,0,4,2,S,F,F),J=F[0]>F[2]}else J=z>Y;const w=Math.PI,V=[],G=K+s===t;t=K,L=0,T=H,b=i[t],E=i[t+1];let B;if(G){A(),B=Math.atan2(E-D,b-M),J&&(B+=B>0?-w:w);const F=(Y+z)/2,$=(X+I)/2;return V[0]=[F,$,(j-c)/2,B,r],V}r=r.replace(/\n/g," ");for(let F=0,$=r.length;F<$;){A();let rt=Math.atan2(E-D,b-M);if(J&&(rt+=rt>0?-w:w),B!==void 0){let vt=rt-B;if(vt+=vt>w?-2*w:vt<-w?2*w:0,Math.abs(vt)>h)return null}B=rt;const q=F;let Q=0;for(;F<$;++F){const vt=J?$-F-1:F,St=f*g(p,r[vt],_);if(t+s<n&&T+L<c+Q+St/2)break;Q+=St}if(F===q)continue;const tt=J?r.substring($-q,$-F):r.substring(q,F);N=L===0?0:(c+Q/2-T)/L;const nt=os(M,b,N),ht=os(D,E,N);V.push([nt,ht,Q/2,rt,tt]),c+=Q}return V}const _h=Ps(),Ao=[],yr=[],vr=[],Mo=[];function Dv(i){return i[3].declutterBox}const Ov=new RegExp("[-----]");function Fp(i,t){return t==="start"?t=Ov.test(i)?"right":"left":t==="end"&&(t=Ov.test(i)?"left":"right"),nm[t]}function Z7(i,t,n){return n>0&&i.push(`
`,""),i.push(t,""),i}function Q7(i,t,n){return n%2===0&&(i+=t),i}class W7{constructor(t,n,s,r,c){this.overlaps=s,this.pixelRatio=n,this.resolution=t,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Fs(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=c?new wS:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,n,s,r){const c=t+n+s+r;if(this.labels_[c])return this.labels_[c];const h=r?this.strokeStates[r]:null,f=s?this.fillStates[s]:null,g=this.textStates[n],p=this.pixelRatio,_=[g.scale[0]*p,g.scale[1]*p],S=g.justify?nm[g.justify]:Fp(Array.isArray(t)?t[0]:t,g.textAlign||U0),x=r&&h.lineWidth?h.lineWidth:0,b=Array.isArray(t)?t:String(t).split(`
`).reduce(Z7,[]),{width:E,height:M,widths:D,heights:L,lineWidths:T}=Fb(g,b),A=E+x,N=[],z=(A+2)*_[0],I=(M+x)*_[1],K={width:z<0?Math.floor(z):Math.ceil(z),height:I<0?Math.floor(I):Math.ceil(I),contextInstructions:N};(_[0]!=1||_[1]!=1)&&N.push("scale",_),r&&(N.push("strokeStyle",h.strokeStyle),N.push("lineWidth",x),N.push("lineCap",h.lineCap),N.push("lineJoin",h.lineJoin),N.push("miterLimit",h.miterLimit),N.push("setLineDash",[h.lineDash]),N.push("lineDashOffset",h.lineDashOffset)),s&&N.push("fillStyle",f.fillStyle),N.push("textBaseline","middle"),N.push("textAlign","center");const H=.5-S;let j=S*A+H*x;const Y=[],X=[];let J=0,w=0,V=0,G=0,B;for(let F=0,$=b.length;F<$;F+=2){const rt=b[F];if(rt===`
`){w+=J,J=0,j=S*A+H*x,++G;continue}const q=b[F+1]||g.font;q!==B&&(r&&Y.push("font",q),s&&X.push("font",q),B=q),J=Math.max(J,L[V]);const Q=[rt,j+H*D[V]+S*(D[V]-T[G]),.5*(x+J)+w];j+=D[V],r&&Y.push("strokeText",Q),s&&X.push("fillText",Q),++V}return Array.prototype.push.apply(N,Y),Array.prototype.push.apply(N,X),this.labels_[c]=K,K}replayTextBackground_(t,n,s,r,c,h,f){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,c),t.lineTo.apply(t,n),h&&(this.alignAndScaleFill_=h[2],t.fillStyle=h[1],this.fill_(t)),f&&(this.setStrokeStyle_(t,f),t.stroke())}calculateImageOrLabelDimensions_(t,n,s,r,c,h,f,g,p,_,S,x,b,E,M,D){f*=x[0],g*=x[1];let L=s-f,T=r-g;const A=c+p>t?t-p:c,N=h+_>n?n-_:h,z=E[3]+A*x[0]+E[1],I=E[0]+N*x[1]+E[2],K=L-E[3],H=T-E[0];(M||S!==0)&&(Ao[0]=K,Mo[0]=K,Ao[1]=H,yr[1]=H,yr[0]=K+z,vr[0]=yr[0],vr[1]=H+I,Mo[1]=vr[1]);let j;return S!==0?(j=Or(Fs(),s,r,1,1,S,-s,-r),Di(j,Ao),Di(j,yr),Di(j,vr),Di(j,Mo),zh(Math.min(Ao[0],yr[0],vr[0],Mo[0]),Math.min(Ao[1],yr[1],vr[1],Mo[1]),Math.max(Ao[0],yr[0],vr[0],Mo[0]),Math.max(Ao[1],yr[1],vr[1],Mo[1]),_h)):zh(Math.min(K,K+z),Math.min(H,H+I),Math.max(K,K+z),Math.max(H,H+I),_h),b&&(L=Math.round(L),T=Math.round(T)),{drawImageX:L,drawImageY:T,drawImageW:A,drawImageH:N,originX:p,originY:_,declutterBox:{minX:_h[0],minY:_h[1],maxX:_h[2],maxY:_h[3],value:D},canvasTransform:j,scale:x}}replayImageOrLabel_(t,n,s,r,c,h,f){const g=!!(h||f),p=r.declutterBox,_=f?f[2]*r.scale[0]/2:0;return p.minX-_<=n[0]&&p.maxX+_>=0&&p.minY-_<=n[1]&&p.maxY+_>=0&&(g&&this.replayTextBackground_(t,Ao,yr,vr,Mo,h,f),Pb(t,r.canvasTransform,c,s,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){const n=this.alignAndScaleFill_;if(n){const s=Di(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(s[0]%r,s[1]%r),n!==1&&t.scale(n,n),t.rotate(this.viewRotation_)}t.fill(),n&&t.restore()}setStrokeStyle_(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.lineDashOffset=n[7],t.setLineDash(n[6])}drawLabelWithPointPlacement_(t,n,s,r){const c=this.textStates[n],h=this.createLabel(t,n,r,s),f=this.strokeStates[s],g=this.pixelRatio,p=Fp(Array.isArray(t)?t[0]:t,c.textAlign||U0),_=nm[c.textBaseline||J1],S=f&&f.lineWidth?f.lineWidth:0,x=h.width/g-2*c.scale[0],b=p*x+2*(.5-p)*S,E=_*h.height/g+2*(.5-_)*S;return{label:h,anchorX:b,anchorY:E}}execute_(t,n,s,r,c,h,f,g){const p=this.zIndexContext_;let _;this.pixelCoordinates_&&Ho(s,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=Uo(this.coordinates,0,this.coordinates.length,2,s,this.pixelCoordinates_),k8(this.renderedTransform_,s));let S=0;const x=r.length;let b=0,E,M,D,L,T,A,N,z,I,K,H,j,Y,X=0,J=0;const w=this.coordinateCache_,V=this.viewRotation_,G=Math.round(Math.atan2(-s[1],s[0])*1e12)/1e12,B={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:V},F=this.instructions!=r||this.overlaps?0:200;let $,rt,q,Q;for(;S<x;){const tt=r[S];switch(tt[0]){case jt.BEGIN_GEOMETRY:$=tt[1],Q=tt[3],$.getGeometry()?f!==void 0&&!ia(f,Q.getExtent())?S=tt[2]+1:++S:S=tt[2],p&&(p.zIndex=tt[4]);break;case jt.BEGIN_PATH:X>F&&(this.fill_(t),X=0),J>F&&(t.stroke(),J=0),!X&&!J&&(t.beginPath(),T=NaN,A=NaN),++S;break;case jt.CIRCLE:b=tt[1];const ht=_[b],vt=_[b+1],St=_[b+2],W=_[b+3],Z=St-ht,dt=W-vt,Et=Math.sqrt(Z*Z+dt*dt);t.moveTo(ht+Et,vt),t.arc(ht,vt,Et,0,2*Math.PI,!0),++S;break;case jt.CLOSE_PATH:t.closePath(),++S;break;case jt.CUSTOM:b=tt[1],E=tt[2];const Tt=tt[3],Ot=tt[4],Kt=tt[5];B.geometry=Tt,B.feature=$,S in w||(w[S]=[]);const re=w[S];Kt?Kt(_,b,E,2,re):(re[0]=_[b],re[1]=_[b+1],re.length=2),p&&(p.zIndex=tt[6]),Ot(re,B),++S;break;case jt.DRAW_IMAGE:b=tt[1],E=tt[2],I=tt[3],M=tt[4],D=tt[5];let Ht=tt[6];const Ue=tt[7],Qt=tt[8],Ve=tt[9],Zn=tt[10];let un=tt[11];const zn=tt[12];let Zt=tt[13];L=tt[14]||"declutter";const nn=tt[15];if(!I&&tt.length>=20){K=tt[19],H=tt[20],j=tt[21],Y=tt[22];const Jn=this.drawLabelWithPointPlacement_(K,H,j,Y);I=Jn.label,tt[3]=I;const aa=tt[23];M=(Jn.anchorX-aa)*this.pixelRatio,tt[4]=M;const Vn=tt[24];D=(Jn.anchorY-Vn)*this.pixelRatio,tt[5]=D,Ht=I.height,tt[6]=Ht,Zt=I.width,tt[13]=Zt}let jn;tt.length>25&&(jn=tt[25]);let Yn,Le,fe;tt.length>17?(Yn=tt[16],Le=tt[17],fe=tt[18]):(Yn=ku,Le=null,fe=null),Zn&&G?un+=V:!Zn&&!G&&(un-=V);let Je=0;for(;b<E;b+=2){if(jn&&jn[Je++]<Zt/this.pixelRatio)continue;const Jn=this.calculateImageOrLabelDimensions_(I.width,I.height,_[b],_[b+1],Zt,Ht,M,D,Qt,Ve,un,zn,c,Yn,!!Le||!!fe,$),aa=[t,n,I,Jn,Ue,Le,fe];if(g){let Vn,$n,qn;if(nn){const oe=E-b;if(!nn[oe]){nn[oe]={args:aa,declutterMode:L};continue}const tn=nn[oe];Vn=tn.args,$n=tn.declutterMode,delete nn[oe],qn=Dv(Vn)}let gn,Ae;if(Vn&&($n!=="declutter"||!g.collides(qn))&&(gn=!0),(L!=="declutter"||!g.collides(Jn.declutterBox))&&(Ae=!0),$n==="declutter"&&L==="declutter"){const oe=gn&&Ae;gn=oe,Ae=oe}gn&&($n!=="none"&&g.insert(qn),this.replayImageOrLabel_.apply(this,Vn)),Ae&&(L!=="none"&&g.insert(Jn.declutterBox),this.replayImageOrLabel_.apply(this,aa))}else this.replayImageOrLabel_.apply(this,aa)}++S;break;case jt.DRAW_CHARS:const $e=tt[1],Ni=tt[2],pi=tt[3],Qn=tt[4];Y=tt[5];const Rn=tt[6],Tn=tt[7],Wn=tt[8];j=tt[9];const za=tt[10];K=tt[11],Array.isArray(K)&&(K=K.reduce(Q7,"")),H=tt[12];const ds=[tt[13],tt[13]];L=tt[14]||"declutter";const Zh=tt[15],ks=this.textStates[H],xa=ks.font,Ga=[ks.scale[0]*Tn,ks.scale[1]*Tn];let wi;xa in this.widths_?wi=this.widths_[xa]:(wi={},this.widths_[xa]=wi);const Yo=I7(_,$e,Ni,2),Ks=Math.abs(Ga[0])*hv(xa,K,wi);if(Qn||Ks<=Yo){const Jn=this.textStates[H].textAlign,aa=(Yo-Ks)*Fp(K,Jn),Vn=K7(_,$e,Ni,2,K,aa,Rn,Math.abs(Ga[0]),hv,xa,wi,G?0:this.viewRotation_,Zh);t:if(Vn){const $n=[];let qn,gn,Ae,oe,tn;if(j)for(qn=0,gn=Vn.length;qn<gn;++qn){tn=Vn[qn],Ae=tn[4],oe=this.createLabel(Ae,H,"",j),M=tn[2]+(Ga[0]<0?-za:za),D=pi*oe.height+(.5-pi)*2*za*Ga[1]/Ga[0]-Wn;const _i=this.calculateImageOrLabelDimensions_(oe.width,oe.height,tn[0],tn[1],oe.width,oe.height,M,D,0,0,tn[3],ds,!1,ku,!1,$);if(g&&L==="declutter"&&g.collides(_i.declutterBox))break t;$n.push([t,n,oe,_i,1,null,null])}if(Y)for(qn=0,gn=Vn.length;qn<gn;++qn){tn=Vn[qn],Ae=tn[4],oe=this.createLabel(Ae,H,Y,""),M=tn[2],D=pi*oe.height-Wn;const _i=this.calculateImageOrLabelDimensions_(oe.width,oe.height,tn[0],tn[1],oe.width,oe.height,M,D,0,0,tn[3],ds,!1,ku,!1,$);if(g&&L==="declutter"&&g.collides(_i.declutterBox))break t;$n.push([t,n,oe,_i,1,null,null])}g&&L!=="none"&&g.load($n.map(Dv));for(let _i=0,Vo=$n.length;_i<Vo;++_i)this.replayImageOrLabel_.apply(this,$n[_i])}}++S;break;case jt.END_GEOMETRY:if(h!==void 0){$=tt[1];const Jn=h($,Q,L);if(Jn)return Jn}++S;break;case jt.FILL:F?X++:this.fill_(t),++S;break;case jt.MOVE_TO_LINE_TO:for(b=tt[1],E=tt[2],rt=_[b],q=_[b+1],t.moveTo(rt,q),T=rt+.5|0,A=q+.5|0,b+=2;b<E;b+=2)rt=_[b],q=_[b+1],N=rt+.5|0,z=q+.5|0,(b==E-2||N!==T||z!==A)&&(t.lineTo(rt,q),T=N,A=z);++S;break;case jt.SET_FILL_STYLE:this.alignAndScaleFill_=tt[2],X&&(this.fill_(t),X=0,J&&(t.stroke(),J=0)),t.fillStyle=tt[1],++S;break;case jt.SET_STROKE_STYLE:J&&(t.stroke(),J=0),this.setStrokeStyle_(t,tt),++S;break;case jt.STROKE:F?J++:t.stroke(),++S;break;default:++S;break}}X&&this.fill_(t),J&&t.stroke()}execute(t,n,s,r,c,h){this.viewRotation_=r,this.execute_(t,n,s,this.instructions,c,void 0,void 0,h)}executeHitDetection(t,n,s,r,c){return this.viewRotation_=s,this.execute_(t,[t.canvas.width,t.canvas.height],n,this.hitDetectionInstructions,!0,r,c)}}const Mh=["Polygon","Circle","LineString","Image","Text","Default"],US=["Image","Text"],J7=Mh.filter(i=>!US.includes(i));class $7{constructor(t,n,s,r,c,h,f){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=s,this.resolution_=n,this.renderBuffer_=h,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Fs(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(c,f)}clip(t,n){const s=this.getClipCoords(n);t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(s[2],s[3]),t.lineTo(s[4],s[5]),t.lineTo(s[6],s[7]),t.clip()}createExecutors_(t,n){for(const s in t){let r=this.executorsByZIndex_[s];r===void 0&&(r={},this.executorsByZIndex_[s]=r);const c=t[s];for(const h in c){const f=c[h];r[h]=new W7(this.resolution_,this.pixelRatio_,this.overlaps_,f,n)}}}hasExecutors(t){for(const n in this.executorsByZIndex_){const s=this.executorsByZIndex_[n];for(let r=0,c=t.length;r<c;++r)if(t[r]in s)return!0}return!1}forEachFeatureAtCoordinate(t,n,s,r,c,h){r=Math.round(r);const f=r*2+1,g=Or(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-s,-t[0],-t[1]),p=!this.hitDetectionContext_;p&&(this.hitDetectionContext_=gi(f,f));const _=this.hitDetectionContext_;_.canvas.width!==f||_.canvas.height!==f?(_.canvas.width=f,_.canvas.height=f):p||_.clearRect(0,0,f,f);let S;this.renderBuffer_!==void 0&&(S=Ps(),C0(S,t),F_(S,n*(this.renderBuffer_+r),S));const x=t9(r);let b;function E(z,I,K){const H=_.getImageData(0,0,f,f).data;for(let j=0,Y=x.length;j<Y;j++)if(H[x[j]]>0){if(!h||K==="none"||b!=="Image"&&b!=="Text"||h.includes(z)){const X=(x[j]-3)/4,J=r-X%f,w=r-(X/f|0),V=c(z,I,J*J+w*w);if(V)return V}_.clearRect(0,0,f,f);break}}const M=Object.keys(this.executorsByZIndex_).map(Number);M.sort(Qu);let D,L,T,A,N;for(D=M.length-1;D>=0;--D){const z=M[D].toString();for(T=this.executorsByZIndex_[z],L=Mh.length-1;L>=0;--L)if(b=Mh[L],A=T[b],A!==void 0&&(N=A.executeHitDetection(_,g,s,E,S),N))return N}}getClipCoords(t){const n=this.maxExtent_;if(!n)return null;const s=n[0],r=n[1],c=n[2],h=n[3],f=[s,r,s,h,c,h,c,r];return Uo(f,0,8,2,t,f),f}isEmpty(){return Lh(this.executorsByZIndex_)}execute(t,n,s,r,c,h,f){const g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(f?qE:Qu),h=h||Mh;const p=Mh.length;for(let _=0,S=g.length;_<S;++_){const x=g[_].toString(),b=this.executorsByZIndex_[x];for(let E=0,M=h.length;E<M;++E){const D=h[E],L=b[D];if(L!==void 0){const T=f===null?void 0:L.getZIndexContext(),A=T?T.getContext():t,N=this.maxExtent_&&D!=="Image"&&D!=="Text";if(N&&(A.save(),this.clip(A,s)),!T||D==="Text"||D==="Image"?L.execute(A,n,s,r,c,f):T.pushFunction(z=>L.execute(z,n,s,r,c,f)),N&&A.restore(),T){T.offset();const z=g[_]*p+E;this.deferredZIndexContexts_[z]||(this.deferredZIndexContexts_[z]=[]),this.deferredZIndexContexts_[z].push(T)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,n=Object.keys(t).map(Number).sort(Qu);for(let s=0,r=n.length;s<r;++s)t[n[s]].forEach(c=>{c.draw(this.renderedContext_),c.clear()}),t[n[s]].length=0}}const Pp={};function t9(i){if(Pp[i]!==void 0)return Pp[i];const t=i*2+1,n=i*i,s=new Array(n+1);for(let c=0;c<=i;++c)for(let h=0;h<=i;++h){const f=c*c+h*h;if(f>n)break;let g=s[f];g||(g=[],s[f]=g),g.push(((i+c)*t+(i+h))*4+3),c>0&&g.push(((i-c)*t+(i+h))*4+3),h>0&&(g.push(((i+c)*t+(i-h))*4+3),c>0&&g.push(((i-c)*t+(i-h))*4+3))}const r=[];for(let c=0,h=s.length;c<h;++c)s[c]&&r.push(...s[c]);return Pp[i]=r,r}class e9 extends GS{constructor(t,n,s,r,c,h,f){super(),this.context_=t,this.pixelRatio_=n,this.extent_=s,this.transform_=r,this.transformRotation_=r?q_(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=c,this.squaredTolerance_=h,this.userTransform_=f,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Fs()}drawImages_(t,n,s,r){if(!this.image_)return;const c=Uo(t,n,s,r,this.transform_,this.pixelCoordinates_),h=this.context_,f=this.tmpLocalTransform_,g=h.globalAlpha;this.imageOpacity_!=1&&(h.globalAlpha=g*this.imageOpacity_);let p=this.imageRotation_;this.transformRotation_===0&&(p-=this.viewRotation_),this.imageRotateWithView_&&(p+=this.viewRotation_);for(let _=0,S=c.length;_<S;_+=2){const x=c[_]-this.imageAnchorX_,b=c[_+1]-this.imageAnchorY_;if(p!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=x+this.imageAnchorX_,M=b+this.imageAnchorY_;Or(f,E,M,1,1,p,-E,-M),h.save(),h.transform.apply(h,f),h.translate(E,M),h.scale(this.imageScale_[0],this.imageScale_[1]),h.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),h.restore()}else h.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,x,b,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(h.globalAlpha=g)}drawText_(t,n,s,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const c=Uo(t,n,s,r,this.transform_,this.pixelCoordinates_),h=this.context_;let f=this.textRotation_;for(this.transformRotation_===0&&(f-=this.viewRotation_),this.textRotateWithView_&&(f+=this.viewRotation_);n<s;n+=r){const g=c[n]+this.textOffsetX_,p=c[n+1]+this.textOffsetY_;f!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(h.save(),h.translate(g-this.textOffsetX_,p-this.textOffsetY_),h.rotate(f),h.translate(this.textOffsetX_,this.textOffsetY_),h.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&h.strokeText(this.text_,0,0),this.textFillState_&&h.fillText(this.text_,0,0),h.restore()):(this.textStrokeState_&&h.strokeText(this.text_,g,p),this.textFillState_&&h.fillText(this.text_,g,p))}}moveToLineTo_(t,n,s,r,c){const h=this.context_,f=Uo(t,n,s,r,this.transform_,this.pixelCoordinates_);h.moveTo(f[0],f[1]);let g=f.length;c&&(g-=2);for(let p=2;p<g;p+=2)h.lineTo(f[p],f[p+1]);return c&&h.closePath(),s}drawRings_(t,n,s,r){for(let c=0,h=s.length;c<h;++c)n=this.moveToLineTo_(t,n,s[c],r,!0);return n}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ia(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=ix(t,this.transform_,this.pixelCoordinates_),s=n[2]-n[0],r=n[3]-n[1],c=Math.sqrt(s*s+r*r),h=this.context_;h.beginPath(),h.arc(n[0],n[1],c,0,2*Math.PI),this.fillState_&&h.fill(),this.strokeState_&&h.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,n){const s=n.getGeometryFunction()(t);s&&(this.setStyle(n),this.drawGeometry(s))}drawGeometryCollection(t){const n=t.getGeometriesArray();for(let s=0,r=n.length;s<r;++s)this.drawGeometry(n[s])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),s=t.getStride();this.image_&&this.drawImages_(n,0,n.length,s),this.text_!==""&&this.drawText_(n,0,n.length,s)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),s=t.getStride();this.image_&&this.drawImages_(n,0,n.length,s),this.text_!==""&&this.drawText_(n,0,n.length,s)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ia(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(s,0,s.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getExtent();if(ia(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const s=this.context_,r=t.getFlatCoordinates();let c=0;const h=t.getEnds(),f=t.getStride();s.beginPath();for(let g=0,p=h.length;g<p;++g)c=this.moveToLineTo_(r,c,h[g],f,!1);s.stroke()}if(this.text_!==""){const s=t.getFlatMidpoints();this.drawText_(s,0,s.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ia(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ia(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=t.getOrientedFlatCoordinates();let r=0;const c=t.getEndss(),h=t.getStride();n.beginPath();for(let f=0,g=c.length;f<g;++f){const p=c[f];r=this.drawRings_(s,r,p,h)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(t){const n=this.context_,s=this.contextFillState_;s?s.fillStyle!=t.fillStyle&&(s.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const n=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=t.lineCap&&(s.lineCap=t.lineCap,n.lineCap=t.lineCap),Ho(s.lineDash,t.lineDash)||n.setLineDash(s.lineDash=t.lineDash),s.lineDashOffset!=t.lineDashOffset&&(s.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset),s.lineJoin!=t.lineJoin&&(s.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),s.lineWidth!=t.lineWidth&&(s.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),s.miterLimit!=t.miterLimit&&(s.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),s.strokeStyle!=t.strokeStyle&&(s.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset,n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const n=this.context_,s=this.contextTextState_,r=t.textAlign?t.textAlign:U0;s?(s.font!=t.font&&(s.font=t.font,n.font=t.font),s.textAlign!=r&&(s.textAlign=r,n.textAlign=r),s.textBaseline!=t.textBaseline&&(s.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,n){if(!t)this.fillState_=null;else{const s=t.getColor();this.fillState_={fillStyle:zl(s||va)}}if(!n)this.strokeState_=null;else{const s=n.getColor(),r=n.getLineCap(),c=n.getLineDash(),h=n.getLineDashOffset(),f=n.getLineJoin(),g=n.getWidth(),p=n.getMiterLimit(),_=c||Tr;this.strokeState_={lineCap:r!==void 0?r:Hh,lineDash:this.pixelRatio_===1?_:_.map(S=>S*this.pixelRatio_),lineDashOffset:(h||Ar)*this.pixelRatio_,lineJoin:f!==void 0?f:Ih,lineWidth:(g!==void 0?g:B0)*this.pixelRatio_,miterLimit:p!==void 0?p:z0,strokeStyle:zl(s||G0)}}}setImageStyle(t){let n;if(!t||!(n=t.getSize())){this.image_=null;return}const s=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),c=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*s,this.imageAnchorY_=r[1]*s,this.imageHeight_=n[1]*s,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=c[0],this.imageOriginY_=c[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const h=t.getScaleArray();this.imageScale_=[h[0]*this.pixelRatio_/s,h[1]*this.pixelRatio_/s],this.imageWidth_=n[0]*s}setTextStyle(t){if(!t)this.text_="";else{const n=t.getFill();if(!n)this.textFillState_=null;else{const b=n.getColor();this.textFillState_={fillStyle:zl(b||va)}}const s=t.getStroke();if(!s)this.textStrokeState_=null;else{const b=s.getColor(),E=s.getLineCap(),M=s.getLineDash(),D=s.getLineDashOffset(),L=s.getLineJoin(),T=s.getWidth(),A=s.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:Hh,lineDash:M||Tr,lineDashOffset:D||Ar,lineJoin:L!==void 0?L:Ih,lineWidth:T!==void 0?T:B0,miterLimit:A!==void 0?A:z0,strokeStyle:zl(b||G0)}}const r=t.getFont(),c=t.getOffsetX(),h=t.getOffsetY(),f=t.getRotateWithView(),g=t.getRotation(),p=t.getScaleArray(),_=t.getText(),S=t.getTextAlign(),x=t.getTextBaseline();this.textState_={font:r!==void 0?r:_S,textAlign:S!==void 0?S:U0,textBaseline:x!==void 0?x:J1},this.text_=_!==void 0?Array.isArray(_)?_.reduce((b,E,M)=>b+=M%2?" ":E,""):_:"",this.textOffsetX_=c!==void 0?this.pixelRatio_*c:0,this.textOffsetY_=h!==void 0?this.pixelRatio_*h:0,this.textRotateWithView_=f!==void 0?f:!1,this.textRotation_=g!==void 0?g:0,this.textScale_=[this.pixelRatio_*p[0],this.pixelRatio_*p[1]]}}}const Ll=.5;function n9(i,t,n,s,r,c,h,f,g){const p=r,_=i[0]*Ll,S=i[1]*Ll,x=gi(_,S);x.imageSmoothingEnabled=!1;const b=x.canvas,E=new e9(x,Ll,r,null,h,f,null),M=n.length,D=Math.floor((256*256*256-1)/M),L={};for(let A=1;A<=M;++A){const N=n[A-1],z=N.getStyleFunction()||s;if(!z)continue;let I=z(N,c);if(!I)continue;Array.isArray(I)||(I=[I]);const H=(A*D).toString(16).padStart(7,"#00000");for(let j=0,Y=I.length;j<Y;++j){const X=I[j],J=X.getGeometryFunction()(N);if(!J||!ia(p,J.getExtent()))continue;const w=X.clone(),V=w.getFill();V&&V.setColor(H);const G=w.getStroke();G&&(G.setColor(H),G.setLineDash(null)),w.setText(void 0);const B=X.getImage();if(B){const q=B.getImageSize();if(!q)continue;const Q=gi(q[0],q[1],void 0,{alpha:!1}),tt=Q.canvas;Q.fillStyle=H,Q.fillRect(0,0,tt.width,tt.height),w.setImage(new vS({img:tt,anchor:B.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:B.getOrigin(),opacity:1,size:B.getSize(),scale:B.getScale(),rotation:B.getRotation(),rotateWithView:B.getRotateWithView()}))}const F=w.getZIndex()||0;let $=L[F];$||($={},L[F]=$,$.Polygon=[],$.Circle=[],$.LineString=[],$.Point=[]);const rt=J.getType();if(rt==="GeometryCollection"){const q=J.getGeometriesArrayRecursive();for(let Q=0,tt=q.length;Q<tt;++Q){const nt=q[Q];$[nt.getType().replace("Multi","")].push(nt,w)}}else $[rt.replace("Multi","")].push(J,w)}}const T=Object.keys(L).map(Number).sort(Qu);for(let A=0,N=T.length;A<N;++A){const z=L[T[A]];for(const I in z){const K=z[I];for(let H=0,j=K.length;H<j;H+=2){E.setStyle(K[H+1]);for(let Y=0,X=t.length;Y<X;++Y)E.setTransform(t[Y]),E.drawGeometry(K[H])}}}return x.getImageData(0,0,b.width,b.height)}function i9(i,t,n){const s=[];if(n){const r=Math.floor(Math.round(i[0])*Ll),c=Math.floor(Math.round(i[1])*Ll),h=(In(r,0,n.width-1)+In(c,0,n.height-1)*n.width)*4,f=n.data[h],g=n.data[h+1],_=n.data[h+2]+256*(g+256*f),S=Math.floor((256*256*256-1)/t.length);_&&_%S===0&&s.push(t[_/S-1])}return s}const a9=.5,BS={Point:f9,LineString:u9,Polygon:g9,MultiPoint:d9,MultiLineString:c9,MultiPolygon:h9,GeometryCollection:o9,Circle:l9};function s9(i,t){return parseInt(wn(i),10)-parseInt(wn(t),10)}function Nv(i,t){const n=HS(i,t);return n*n}function HS(i,t){return a9*i/t}function l9(i,t,n,s,r){const c=n.getFill(),h=n.getStroke();if(c||h){const g=i.getBuilder(n.getZIndex(),"Circle");g.setFillStrokeStyle(c,h),g.drawCircle(t,s,r)}const f=n.getText();if(f&&f.getText()){const g=i.getBuilder(n.getZIndex(),"Text");g.setTextStyle(f),g.drawText(t,s)}}function wv(i,t,n,s,r,c,h,f){const g=[],p=n.getImage();if(p){let x=!0;const b=p.getImageState();b==Gt.LOADED||b==Gt.ERROR?x=!1:b==Gt.IDLE&&p.load(),x&&g.push(p.ready())}const _=n.getFill();_&&_.loading()&&g.push(_.ready());const S=g.length>0;return S&&Promise.all(g).then(()=>r(null)),r9(i,t,n,s,c,h,f),S}function r9(i,t,n,s,r,c,h){const f=n.getGeometryFunction()(t);if(!f)return;const g=f.simplifyTransformed(s,r);if(n.getRenderer())IS(i,g,n,t,h);else{const _=BS[g.getType()];_(i,g,n,t,h,c)}}function IS(i,t,n,s,r){if(t.getType()=="GeometryCollection"){const h=t.getGeometries();for(let f=0,g=h.length;f<g;++f)IS(i,h[f],n,s,r);return}i.getBuilder(n.getZIndex(),"Default").drawCustom(t,s,n.getRenderer(),n.getHitDetectionRenderer(),r)}function o9(i,t,n,s,r,c){const h=t.getGeometriesArray();let f,g;for(f=0,g=h.length;f<g;++f){const p=BS[h[f].getType()];p(i,h[f],n,s,r,c)}}function u9(i,t,n,s,r){const c=n.getStroke();if(c){const f=i.getBuilder(n.getZIndex(),"LineString");f.setFillStrokeStyle(null,c),f.drawLineString(t,s,r)}const h=n.getText();if(h&&h.getText()){const f=i.getBuilder(n.getZIndex(),"Text");f.setTextStyle(h),f.drawText(t,s,r)}}function c9(i,t,n,s,r){const c=n.getStroke();if(c){const f=i.getBuilder(n.getZIndex(),"LineString");f.setFillStrokeStyle(null,c),f.drawMultiLineString(t,s,r)}const h=n.getText();if(h&&h.getText()){const f=i.getBuilder(n.getZIndex(),"Text");f.setTextStyle(h),f.drawText(t,s,r)}}function h9(i,t,n,s,r){const c=n.getFill(),h=n.getStroke();if(h||c){const g=i.getBuilder(n.getZIndex(),"Polygon");g.setFillStrokeStyle(c,h),g.drawMultiPolygon(t,s,r)}const f=n.getText();if(f&&f.getText()){const g=i.getBuilder(n.getZIndex(),"Text");g.setTextStyle(f),g.drawText(t,s,r)}}function f9(i,t,n,s,r,c){const h=n.getImage(),f=n.getText(),g=f&&f.getText(),p=c&&h&&g?{}:void 0;if(h){if(h.getImageState()!=Gt.LOADED)return;const _=i.getBuilder(n.getZIndex(),"Image");_.setImageStyle(h,p),_.drawPoint(t,s,r)}if(g){const _=i.getBuilder(n.getZIndex(),"Text");_.setTextStyle(f,p),_.drawText(t,s,r)}}function d9(i,t,n,s,r,c){const h=n.getImage(),f=h&&h.getOpacity()!==0,g=n.getText(),p=g&&g.getText(),_=c&&f&&p?{}:void 0;if(f){if(h.getImageState()!=Gt.LOADED)return;const S=i.getBuilder(n.getZIndex(),"Image");S.setImageStyle(h,_),S.drawMultiPoint(t,s,r)}if(p){const S=i.getBuilder(n.getZIndex(),"Text");S.setTextStyle(g,_),S.drawText(t,s,r)}}function g9(i,t,n,s,r){const c=n.getFill(),h=n.getStroke();if(c||h){const g=i.getBuilder(n.getZIndex(),"Polygon");g.setFillStrokeStyle(c,h),g.drawPolygon(t,s,r)}const f=n.getText();if(f&&f.getText()){const g=i.getBuilder(n.getZIndex(),"Text");g.setTextStyle(f),g.drawText(t,s,r)}}class m9 extends LS{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ps(),this.wrappedRenderedExtent_=Ps(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,n,s){const r=n.extent,c=n.viewState,h=c.center,f=c.resolution,g=c.projection,p=c.rotation,_=g.getExtent(),S=this.getLayer().getSource(),x=this.getLayer().getDeclutter(),b=n.pixelRatio,E=n.viewHints,M=!(E[fi.ANIMATING]||E[fi.INTERACTING]),D=this.context,L=Math.round(Ye(r)/f*b),T=Math.round(di(r)/f*b),A=S.getWrapX()&&g.canWrapX(),N=A?Ye(_):null,z=A?Math.ceil((r[2]-_[2])/N)+1:1;let I=A?Math.floor((r[0]-_[0])/N):0;do{let K=this.getRenderTransform(h,f,0,b,L,T,I*N);n.declutter&&(K=K.slice(0)),t.execute(D,[D.canvas.width,D.canvas.height],K,p,M,s===void 0?Mh:s?US:J7,s?x&&n.declutter[x]:void 0)}while(++I<z)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=gi(this.context.canvas.width,this.context.canvas.height,vv))}resetDrawContext_(){if(this.opacity_!==1){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,c2(this.context),vv.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,n){const s=t.layerStatesArray[t.layerIndex];this.opacity_=s.opacity;const r=t.viewState;this.prepareContainer(t,n);const c=this.context,h=this.replayGroup_;let f=h&&!h.isEmpty();if(!f&&!(this.getLayer().hasListener(us.PRERENDER)||this.getLayer().hasListener(us.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(c,t),r.projection,this.clipped_=!1,f&&s.extent&&this.clipping){const g=Pu(s.extent);f=ia(g,t.extent),this.clipped_=f&&!Lo(g,t.extent),this.clipped_&&this.clipUnrotated(c,t,g)}return f&&this.renderWorlds(h,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&c.restore(),this.postRender(c,t),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const s=this.frameState.size.slice(),r=this.renderedCenter_,c=this.renderedResolution_,h=this.renderedRotation_,f=this.renderedProjection_,g=this.wrappedRenderedExtent_,p=this.getLayer(),_=[],S=s[0]*Ll,x=s[1]*Ll;_.push(this.getRenderTransform(r,c,h,Ll,S,x,0).slice());const b=p.getSource(),E=f.getExtent();if(b.getWrapX()&&f.canWrapX()&&!Lo(E,g)){let M=g[0];const D=Ye(E);let L=0,T;for(;M<E[0];)--L,T=D*L,_.push(this.getRenderTransform(r,c,h,Ll,S,x,T).slice()),M+=D;for(L=0,M=g[2];M>E[2];)++L,T=D*L,_.push(this.getRenderTransform(r,c,h,Ll,S,x,T).slice()),M-=D}this.hitDetectionImageData_=n9(s,_,this.renderedFeatures_,p.getStyleFunction(),g,c,h,Nv(c,this.renderedPixelRatio_))}n(i9(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,n,s,r,c){var x,b;if(!this.replayGroup_)return;const h=n.viewState.resolution,f=n.viewState.rotation,g=this.getLayer(),p={},_=function(E,M,D){const L=wn(E),T=p[L];if(T){if(T!==!0&&D<T.distanceSq){if(D===0)return p[L]=!0,c.splice(c.lastIndexOf(T),1),r(E,g,M);T.geometry=M,T.distanceSq=D}}else{if(D===0)return p[L]=!0,r(E,g,M);c.push(p[L]={feature:E,layer:g,geometry:M,distanceSq:D,callback:r})}},S=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,h,f,s,_,S?(b=(x=n.declutter)==null?void 0:x[S])==null?void 0:b.all().map(E=>E.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const n=this.getLayer(),s=n.getSource();if(!s)return!1;const r=t.viewHints[fi.ANIMATING],c=t.viewHints[fi.INTERACTING],h=n.getUpdateWhileAnimating(),f=n.getUpdateWhileInteracting();if(this.ready&&!h&&r||!f&&c)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const g=t.extent,p=t.viewState,_=p.projection,S=p.resolution,x=t.pixelRatio,b=n.getRevision(),E=n.getRenderBuffer();let M=n.getRenderOrder();M===void 0&&(M=s9);const D=p.center.slice(),L=F_(g,E*S),T=L.slice(),A=[L.slice()],N=_.getExtent();if(s.getWrapX()&&_.canWrapX()&&!Lo(N,t.extent)){const V=Ye(N),G=Math.max(Ye(L)/2,V);L[0]=N[0]-G,L[2]=N[2]+G,U4(D,_);const B=G4(A[0],_);B[0]<N[0]&&B[2]<N[2]?A.push([B[0]+V,B[1],B[2]+V,B[3]]):B[0]>N[0]&&B[2]>N[2]&&A.push([B[0]-V,B[1],B[2]-V,B[3]])}if(this.ready&&this.renderedResolution_==S&&this.renderedRevision_==b&&this.renderedRenderOrder_==M&&this.renderedFrameDeclutter_===!!t.declutter&&Lo(this.wrappedRenderedExtent_,L))return Ho(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=D,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const z=new k7(HS(S,x),L,S,x);let I;for(let V=0,G=A.length;V<G;++V)s.loadFeatures(A[V],S,_);const K=Nv(S,x);let H=!0;const j=(V,G)=>{let B;const F=V.getStyleFunction()||n.getStyleFunction();if(F&&(B=F(V,S)),B){const $=this.renderFeature(V,K,B,z,I,this.getLayer().getDeclutter(),G);H=H&&!$}},Y=P4(L),X=s.getFeaturesInExtent(Y);M&&X.sort(M);for(let V=0,G=X.length;V<G;++V)j(X[V],V);this.renderedFeatures_=X,this.ready=H;const J=z.finish(),w=new $7(L,S,x,s.getOverlaps(),J,n.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=S,this.renderedRevision_=b,this.renderedRenderOrder_=M,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=T,this.wrappedRenderedExtent_=L,this.renderedCenter_=D,this.renderedProjection_=_,this.renderedPixelRatio_=x,this.replayGroup_=w,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,n,s,r,c,h,f){if(!s)return!1;let g=!1;if(Array.isArray(s))for(let p=0,_=s.length;p<_;++p)g=wv(r,t,s[p],n,this.boundHandleStyleImageChange_,c,h,f)||g;else g=wv(r,t,s,n,this.boundHandleStyleImageChange_,c,h,f);return g}}class p9 extends MS{constructor(t){super(t)}createRenderer(){return new m9(this)}}const Xp={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};class kp extends Hl{constructor(t,n,s,r,c){super(t),this.features=n,this.coordinate=s,this.startCoordinate=r,this.mapBrowserEvent=c}}class _9 extends kh{constructor(t){t=t||{},super(t),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=t.features!==void 0?t.features:null;let n;if(t.layers&&!this.features_)if(typeof t.layers=="function")n=t.layers;else{const s=t.layers;n=function(r){return s.includes(r)}}else n=Wu;this.layerFilter_=n,this.filter_=t.filter&&!this.features_?t.filter:Wu,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.condition_=t.condition?t.condition:iS,this.lastFeature_=null,this.addChangeListener(x_.ACTIVE,this.handleActiveChanged_)}handleDownEvent(t){if(!t.originalEvent||!this.condition_(t))return!1;if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);const n=this.features_||new Ea([this.lastFeature_]);return this.dispatchEvent(new kp(Xp.TRANSLATESTART,n,t.coordinate,this.startCoordinate_,t)),!0}return!1}handleUpEvent(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);const n=this.features_||new Ea([this.lastFeature_]);return this.dispatchEvent(new kp(Xp.TRANSLATEEND,n,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1}handleDragEvent(t){if(this.lastCoordinate_){const n=t.coordinate;t.map.getView().getProjection();const s=Ys(n),r=Ys(this.lastCoordinate_),c=s[0]-r[0],h=s[1]-r[1],f=this.features_||new Ea([this.lastFeature_]);f.forEach(function(g){const p=g.getGeometry();p.translate(c,h),g.setGeometry(p)}),this.lastCoordinate_=n,this.dispatchEvent(new kp(Xp.TRANSLATING,f,n,this.startCoordinate_,t))}}handleMoveEvent(t){const n=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(n.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),n.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(t,n){return n.forEachFeatureAtPixel(t,(s,r)=>{if(!(!(s instanceof bm)||!this.filter_(s,r))&&!(this.features_&&!this.features_.getArray().includes(s)))return s},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(t){this.hitTolerance_=t}setMap(t){const n=this.getMap();super.setMap(t),this.updateState_(n)}handleActiveChanged_(){this.updateState_(null)}updateState_(t){let n=this.getMap();const s=this.getActive();(!n||!s)&&(n=n||t,n&&n.getViewport().classList.remove("ol-grab","ol-grabbing"))}}const y9=({source:i,x:t,y:n,pin:s})=>(st.useEffect(()=>{const r=new bm({geometry:new pm([t,n])});return r.set("pin",s.label),i.addFeature(r),()=>{i.removeFeature(r)}},[t,n,s.label,i]),null);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S9=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),Lv=i=>{const t=S9(i);return t.charAt(0).toUpperCase()+t.slice(1)},jS=(...i)=>i.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),E9=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=st.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:c,iconNode:h,...f},g)=>st.createElement("svg",{ref:g,...x9,width:t,height:t,stroke:i,strokeWidth:s?Number(n)*24/Number(t):n,className:jS("lucide",r),...!c&&!E9(f)&&{"aria-hidden":"true"},...f},[...h.map(([p,_])=>st.createElement(p,_)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=(i,t)=>{const n=st.forwardRef(({className:s,...r},c)=>st.createElement(b9,{ref:c,iconNode:t,className:jS(`lucide-${v9(Lv(i))}`,`lucide-${i}`,s),...r}));return n.displayName=Lv(i),n};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zv=Cm("chevron-down",C9);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Gv=Cm("chevron-up",R9);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Uv=Cm("plus",T9);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],M9=Cm("tag",A9),D9={position:"absolute",left:0,top:0,bottom:0,width:"5px",cursor:"col-resize",backgroundColor:"#6c757d",zIndex:10},O9={display:"flex",alignItems:"center",justifyContent:"space-between"},N9={margin:0,paddingBottom:"8px",borderBottom:"1px solid #495057",color:"#fff"},w9={marginTop:"12px",lineHeight:"1.5",color:"#e9ecef"},Bv={marginTop:"16px",fontStyle:"italic",color:"#adb5bd"},L9=({selectedLabel:i,updateInfo:t})=>{var W;const n=qh(),{mapId:s}=G_(),[r,c]=st.useState(!1),[h,f]=st.useState(""),[g,p]=st.useState(""),[_,S]=st.useState([]),[x,b]=st.useState(""),[E,M]=st.useState([]),[D,L]=st.useState([]),[T,A]=st.useState(""),[N,z]=st.useState([]),[I,K]=st.useState([]),[H,j]=st.useState(300),[Y,X]=st.useState(!1),[J,w]=st.useState(0),V=st.useRef(null),G=st.useRef(null),B=st.useRef(!1),F=st.useRef(0),$=st.useRef(0);st.useEffect(()=>{S4().then(Z=>z(Z.map(dt=>({id:dt.id,name:dt.name}))))},[]),st.useEffect(()=>{if(!s){K([]);return}(async()=>{const Z=[];for(const{id:dt,name:Et}of N){if(dt===s)continue;const Tt=await v4(dt);Tt!=null&&Tt.pins.some(Ot=>Ot.linkedMapId===s)&&Z.push({id:dt,name:Et})}K(Z)})()},[s,N]),st.useEffect(()=>{i?(f(i.info),p(i.areaName||""),S(i.tags||[]),M(i.extraSections.map(Z=>({title:Z.title,content:Z.content}))),A(i.linkedMapId||""),c(!1)):(f(""),p(""),S([]),M([]),A(""),c(!1))},[i]),st.useLayoutEffect(()=>{G.current&&w(G.current.clientHeight)}),st.useEffect(()=>{const Z=Et=>{if(!B.current)return;const Tt=F.current-Et.clientX;j(Math.max(200,$.current+Tt))},dt=()=>{B.current=!1};return window.addEventListener("mousemove",Z),window.addEventListener("mouseup",dt),()=>{window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",dt)}},[]),st.useEffect(()=>{L(E.map(()=>!1))},[E,r]);const rt=Z=>{B.current=!0,F.current=Z.clientX,$.current=H},q=()=>{i&&t(i.label,h,g,E,T||void 0,_),c(!1)},Q=()=>{M(Z=>[...Z,{title:"",content:""}]),c(!0)},tt=(Z,dt,Et)=>{M(Tt=>Tt.map((Ot,Kt)=>Kt===Z?{...Ot,[dt]:Et}:Ot))},nt=Z=>{M(dt=>dt.filter((Et,Tt)=>Tt!==Z))},ht=Z=>{L(dt=>dt.map((Et,Tt)=>Tt===Z?!Et:Et))},vt=()=>{const Z=x.trim();Z&&!_.includes(Z)&&S(dt=>[...dt,Z]),b("")},St=Z=>{S(dt=>dt.filter(Et=>Et!==Z))};return at.jsxs("div",{ref:V,style:{position:"fixed",top:0,right:0,height:"100%",width:H,backgroundColor:"#343a40",color:"#fff",borderLeft:"1px solid #495057",boxSizing:"border-box",padding:"16px",display:"flex",flexDirection:"column",maxHeight:Y?`${J+32}px`:"100%",overflowX:"hidden",transition:"max-height 0.2s ease"},children:[at.jsx("div",{style:D9,onMouseDown:rt}),at.jsxs("div",{style:{flex:1,overflowY:"auto"},children:[at.jsxs("div",{ref:G,style:O9,children:[at.jsx("h2",{style:N9,children:"Pin Details"}),at.jsx("button",{onClick:()=>X(Z=>!Z),style:{background:"none",border:"none",color:"#fff",cursor:"pointer",padding:0,display:"flex",alignItems:"center"},"aria-label":Y?"Expand":"Collapse",children:Y?at.jsx(zv,{size:20}):at.jsx(Gv,{size:20})})]}),!Y&&at.jsxs(at.Fragment,{children:[at.jsxs("div",{style:{marginTop:"12px",color:"#e9ecef"},children:[at.jsx("h3",{children:"Parent Maps"}),I.length>0?I.map(Z=>at.jsx("button",{onClick:()=>n(`/map/${Z.id}`),style:{display:"block",background:"none",border:"none",color:"#0d6efd",cursor:"pointer",padding:"4px 0",textAlign:"left"},children:Z.name},Z.id)):at.jsx("p",{style:Bv,children:"No parent maps."})]}),i?at.jsxs("div",{style:w9,children:[at.jsxs("p",{children:[at.jsx("strong",{children:"Pin:"})," ",i.label]}),at.jsx("h3",{children:"Area Name:"}),r?at.jsx("input",{type:"text",value:g,onChange:Z=>p(Z.target.value),style:{width:"100%",padding:"8px",marginBottom:"12px",boxSizing:"border-box"}}):at.jsx("p",{onClick:()=>c(!0),style:{cursor:"pointer"},children:i.areaName||at.jsx("em",{children:"Click to add area name"})}),at.jsx("h3",{children:"Description:"}),r?at.jsxs(at.Fragment,{children:[at.jsx("textarea",{value:h,onChange:Z=>f(Z.target.value),style:{width:"100%",minHeight:"100px",padding:"8px",boxSizing:"border-box"}}),at.jsxs("div",{style:{marginTop:"8px"},children:[at.jsx("button",{onClick:q,style:{marginRight:8,cursor:"pointer"},children:"Save"}),at.jsx("button",{onClick:()=>c(!1),style:{cursor:"pointer"},children:"Cancel"})]})]}):at.jsx("p",{onClick:()=>c(!0),style:{cursor:"pointer"},children:i.info||at.jsx("em",{children:"Click to add description"})}),at.jsxs("div",{style:{marginTop:"20px"},children:[at.jsx("h3",{children:"Linked Map:"}),r?at.jsxs("select",{value:T,onChange:Z=>A(Z.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box",marginBottom:"12px"},children:[at.jsx("option",{value:"",children:" No link "}),N.map(Z=>at.jsx("option",{value:Z.id,children:Z.name},Z.id))]}):i.linkedMapId?at.jsxs("button",{onClick:()=>n(`/map/${i.linkedMapId}`),style:{background:"none",border:"none",color:"#0d6efd",cursor:"pointer",padding:0,fontSize:"14px"},children:["Go to ",((W=N.find(Z=>Z.id===i.linkedMapId))==null?void 0:W.name)||i.linkedMapId,""]}):at.jsx("p",{onClick:()=>c(!0),style:{fontStyle:"italic",color:"#adb5bd",cursor:"pointer"},children:"No linked map."})]}),at.jsxs("div",{style:{marginTop:20},children:[at.jsx("h3",{style:{margin:0,marginBottom:8},children:"Tags:"}),r&&at.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:12},children:[at.jsx("input",{type:"text",value:x,onChange:Z=>b(Z.target.value),placeholder:"New tag",style:{padding:"4px 8px",flexGrow:1,marginRight:6},onKeyDown:Z=>{Z.key==="Enter"&&vt()}}),at.jsx("button",{onClick:vt,style:{background:"none",border:"none",cursor:"pointer"},children:at.jsx(Uv,{size:16})})]}),at.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",paddingBottom:8,cursor:r?"default":"pointer"},onClick:()=>{r||c(!0)},children:(r?_:(i==null?void 0:i.tags)||[]).length>0?(r?_:(i==null?void 0:i.tags)||[]).map(Z=>at.jsxs("span",{style:{display:"flex",alignItems:"center",backgroundColor:"#495057",color:"#e9ecef",padding:"4px 8px",borderRadius:12,maxWidth:"100%",wordBreak:"break-word"},children:[at.jsx(M9,{size:12,style:{marginRight:4}}),at.jsx("span",{children:Z}),r&&at.jsx("button",{onClick:dt=>{dt.stopPropagation(),St(Z)},style:{background:"none",border:"none",color:"#e55353",marginLeft:4,cursor:"pointer"},children:""})]},Z)):r?null:at.jsx("span",{style:{fontStyle:"italic",color:"#adb5bd"},children:"No tags. Click to add."})})]}),at.jsxs("div",{style:{marginTop:"20px"},children:[at.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[at.jsx("h3",{style:{margin:0},children:"Extra Sections:"}),at.jsxs("button",{onClick:Q,style:{background:"none",border:"none",color:"#0d6efd",cursor:"pointer",display:"flex",alignItems:"center"},children:[at.jsx(Uv,{size:16,style:{marginRight:"4px"}})," Add Section"]})]}),E.length===0&&!r&&at.jsx("p",{style:{fontStyle:"italic",color:"#adb5bd"},children:"No extra sections yet."}),!r&&E.map((Z,dt)=>at.jsxs("div",{style:{marginTop:"12px",padding:"8px",backgroundColor:"#495057",borderRadius:"4px"},children:[at.jsxs("div",{onClick:()=>ht(dt),style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},children:[at.jsx("h4",{style:{margin:0,color:"#e9ecef"},children:Z.title||at.jsx("em",{children:"(No title)"})}),D[dt]?at.jsx(zv,{size:16}):at.jsx(Gv,{size:16})]}),!D[dt]&&at.jsx("p",{style:{marginTop:"8px",color:"#e9ecef"},children:Z.content||at.jsx("em",{children:"(No content)"})})]},dt)),r&&E.map((Z,dt)=>at.jsxs("div",{style:{position:"relative",marginTop:"12px",padding:"8px",backgroundColor:"#495057",borderRadius:"4px"},children:[at.jsx("button",{onClick:()=>nt(dt),style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",color:"#e55353",cursor:"pointer",fontWeight:"bold"},"aria-label":`Delete section ${dt+1}`,children:""}),at.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"bold",color:"#e9ecef"},children:"Title:"}),at.jsx("input",{type:"text",value:Z.title,onChange:Et=>tt(dt,"title",Et.target.value),style:{width:"100%",padding:"6px",marginBottom:"8px",boxSizing:"border-box"}}),at.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"bold",color:"#e9ecef"},children:"Content:"}),at.jsx("textarea",{value:Z.content,onChange:Et=>tt(dt,"content",Et.target.value),style:{width:"100%",minHeight:"80px",padding:"6px",boxSizing:"border-box"}})]},dt))]})]}):at.jsx("p",{style:Bv,children:"Click a pin to see details"})]})]})]})},D_=10200,O_=6600,qu=[0,0,D_,O_],Hv=new dm({code:"pixel",units:"pixels",extent:qu}),z9=()=>{const i=qh(),{mapId:t}=G_(),[n,s]=st.useState(null),[r,c]=st.useState(!0),h=st.useRef(null),f=st.useRef(null),[g]=st.useState(()=>new j7),p=st.useRef(null),[_,S]=st.useState([]),[x,b]=st.useState(""),[E,M]=st.useState(1),[D,L]=st.useState(null),T=st.useRef(null),[A,N]=st.useState(!1),[z,I]=st.useState(!1),[K,H]=st.useState(""),[j,Y]=st.useState(!1),[X,J]=st.useState(!1),[w,V]=st.useState(""),[G,B]=st.useState(""),[F,$]=st.useState(!1);st.useEffect(()=>{T.current=D,p.current&&p.current.changed()},[D]);const rt=(Q,tt,nt,ht,vt,St)=>{const W=_.map(Z=>Z.label===Q?{...Z,info:tt,areaName:nt??Z.areaName,extraSections:ht??Z.extraSections,linkedMapId:vt,tags:St??Z.tags}:Z);S(W)};st.useEffect(()=>{if(!t)return;let Q;return v4(t).then(tt=>{var nt;tt&&(Q=URL.createObjectURL(tt.blob),s(Q),S(tt.pins||[]),M((((nt=tt.pins)==null?void 0:nt.length)??0)+1),b(tt.name),H(tt.description||""),V(tt.name),B(tt.description||""))}),()=>{Q&&URL.revokeObjectURL(Q)}},[t]),st.useEffect(()=>{t&&wE(t,_).catch(console.error)},[t,_]),st.useEffect(()=>{if(!h.current||!n)return;c(!0);const Q=new L7({url:n,projection:Hv,imageExtent:qu});Q.on("imageloadstart",()=>c(!0)),Q.on("imageloadend",()=>c(!1)),Q.on("imageloaderror",()=>c(!1));const tt=new p9({source:g,zIndex:1,style:(ht,vt)=>{const St=100/vt,W=ht.get("pin"),Z=T.current===W;return new Bo({image:new k0({radius:St,fill:new tc({color:"black"}),stroke:new K0({color:Z?"blue":"white",width:2})}),text:new xS({text:W,font:`${St}px sans-serif`,fill:new tc({color:"white"})})})}});p.current=tt;const nt=new d7({target:h.current,layers:[new S7({source:Q,zIndex:0}),tt],view:new wl({projection:Hv,center:Dr(qu),zoom:3,minZoom:.1,maxZoom:8,extent:[qu[0]-D_,qu[1]-O_,qu[2]+D_,qu[3]+O_]})});return f.current=nt,()=>{var ht;nt.setTarget(void 0),(ht=nt.dispose)==null||ht.call(nt)}},[g,n]),st.useEffect(()=>{const Q=f.current;if(!Q)return;const tt=nt=>{if(A){const[vt,St]=nt.coordinate,W=`${E}`;S(Z=>[...Z,{label:W,info:"",areaName:"",x:vt,y:St,extraSections:[],tags:[]}]),M(Z=>Z+1);return}if(z){let vt=null;if(Q.forEachFeatureAtPixel(nt.pixel,St=>{typeof St.get("pin")=="string"&&(vt=St.get("pin"))}),vt){const W=_.filter(Z=>Z.label!==vt).map((Z,dt)=>({...Z,label:`${dt+1}`}));S(W),M(W.length+1),L(null)}return}let ht=null;Q.forEachFeatureAtPixel(nt.pixel,vt=>{typeof vt.get("pin")=="string"&&(ht=vt.get("pin"))}),L(ht)};return Q.on("singleclick",tt),Q.on("pointermove",nt=>{const ht=Q.hasFeatureAtPixel(nt.pixel);Q.getTargetElement().style.cursor=ht?"pointer":""}),()=>Q.un("singleclick",tt)},[A,z,E,_]),st.useEffect(()=>{const Q=f.current;if(!Q)return;let tt=null;if(D){const nt=g.getFeatures().find(ht=>ht.get("pin")===D);nt&&(tt=new _9({features:new Ea([nt])}),Q.addInteraction(tt),tt.on("translateend",ht=>{const vt=ht.features.item(0),St=vt==null?void 0:vt.get("pin"),W=vt==null?void 0:vt.getGeometry();if(typeof St=="string"&&W){const[Z,dt]=W.getCoordinates();S(Et=>Et.map(Tt=>Tt.label===St?{...Tt,x:Z,y:dt}:Tt))}}))}return()=>{tt&&Q.removeInteraction(tt)}},[D,g,_]);const q=D&&_.find(Q=>Q.label===D)||null;return at.jsxs("div",{className:"ci-container",children:[r&&at.jsx("div",{className:"ci-spinner-overlay",children:at.jsx("div",{className:"ci-spinner"})}),at.jsx("div",{className:"ci-map-name-block",children:X?at.jsxs("form",{className:"ci-meta-edit-form",onSubmit:async Q=>{Q.preventDefault(),$(!0),await E4(t,w,G),b(w),H(G),J(!1),$(!1)},children:[at.jsx("input",{className:"ci-meta-edit-input",value:w,onChange:Q=>V(Q.target.value),disabled:F,maxLength:80,required:!0}),at.jsx("textarea",{className:"ci-meta-edit-textarea",value:G,onChange:Q=>B(Q.target.value),rows:2,disabled:F,maxLength:400,placeholder:"Description (optional)"}),at.jsxs("div",{className:"ci-meta-edit-actions",children:[at.jsx("button",{type:"submit",className:"ci-meta-edit-save",disabled:F,children:"Save"}),at.jsx("button",{type:"button",className:"ci-meta-edit-cancel",disabled:F,onClick:()=>J(!1),children:"Cancel"})]})]}):at.jsxs(at.Fragment,{children:[at.jsx("span",{className:"ci-map-name",children:x}),K&&at.jsx("button",{className:"ci-map-desc-btn",onClick:()=>Y(!0),title:"Show map description",children:""}),at.jsx("button",{className:"ci-map-meta-edit-btn",onClick:()=>J(!0),title:"Edit map name/description",children:""})]})}),j&&at.jsx("div",{className:"ci-desc-modal-bg",onClick:()=>Y(!1),children:at.jsxs("div",{className:"ci-desc-modal",onClick:Q=>Q.stopPropagation(),children:[at.jsx("h2",{children:"Description"}),at.jsx("div",{className:"ci-desc-content",children:K}),at.jsx("button",{className:"ci-desc-close",onClick:()=>Y(!1),children:"Close"})]})}),at.jsx("button",{className:"ci-back-btn",onClick:()=>i("/gallery"),children:" Back to Maps"}),at.jsxs("div",{className:"ci-mode-btns",children:[at.jsx("button",{className:A?"ci-btn active":"ci-btn",onClick:()=>{N(Q=>!Q),A||(I(!1),L(null))},children:A?"Exit Add-Pin Mode":"Enter Add-Pin Mode"}),at.jsx("button",{className:z?"ci-btn active":"ci-btn",onClick:()=>{I(Q=>!Q),z||(N(!1),L(null))},children:z?"Exit Delete-Pin Mode":"Enter Delete-Pin Mode"})]}),at.jsx("div",{ref:h,className:"ci-map"}),at.jsx(L9,{selectedLabel:q,updateInfo:rt}),_.map(Q=>at.jsx(y9,{source:g,x:Q.x,y:Q.y,pin:Q},Q.label))]})};function G9(i,t){return st.useCallback(n=>t?Math.round(n/i)*i:n,[i,t])}function U9({initial:i}){const[t,n]=st.useState([]),[s,r]=st.useState(i),[c,h]=st.useState([]);function f(_){n([...t,s]),r(_),h([])}function g(){if(t.length){const _=t[t.length-1];n(t.slice(0,-1)),h([s,...c]),r(_)}}function p(){if(c.length){const _=c[0];h(c.slice(1)),n([...t,s]),r(_)}}return{state:s,setState:f,undo:g,redo:p,clearHistory:()=>{n([]),h([])}}}function B9(i){const[t,n]=st.useState(i);return{bgColor:t,setBgColor:n}}function H9(i,t){const n=i.toDataURL({pixelRatio:2}),s=document.createElement("a");s.download=t,s.href=n,document.body.appendChild(s),s.click(),document.body.removeChild(s)}function I9(i,t){localStorage.setItem(`dungeonMap-${i}`,JSON.stringify(t))}function j9(i){const t=localStorage.getItem(`dungeonMap-${i}`);return t?JSON.parse(t):null}var V1={exports:{}},Od={},Kp={},Zp={},Iv;function he(){return Iv||(Iv=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i._registerNode=i.Konva=i.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}i.glob=typeof ry<"u"?ry:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},i.Konva={_global:i.glob,version:"9.3.20",isBrowser:n(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return i.Konva.angleDeg?r*t:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return i.Konva.DD.isDragging},isTransforming(){var r;return(r=i.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!i.Konva.DD.node},releaseCanvasOnDestroy:!0,document:i.glob.document,_injectGlobal(r){i.glob.Konva=r}};const s=r=>{i.Konva[r.prototype.getClassName()]=r};i._registerNode=s,i.Konva._injectGlobal(i.Konva)}(Zp)),Zp}var Qp={},jv;function Cn(){return jv||(jv=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Util=i.Transform=void 0;const t=he();class n{constructor(N=[1,0,0,1,0,0]){this.dirty=!1,this.m=N&&N.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(N){N.m[0]=this.m[0],N.m[1]=this.m[1],N.m[2]=this.m[2],N.m[3]=this.m[3],N.m[4]=this.m[4],N.m[5]=this.m[5]}point(N){const z=this.m;return{x:z[0]*N.x+z[2]*N.y+z[4],y:z[1]*N.x+z[3]*N.y+z[5]}}translate(N,z){return this.m[4]+=this.m[0]*N+this.m[2]*z,this.m[5]+=this.m[1]*N+this.m[3]*z,this}scale(N,z){return this.m[0]*=N,this.m[1]*=N,this.m[2]*=z,this.m[3]*=z,this}rotate(N){const z=Math.cos(N),I=Math.sin(N),K=this.m[0]*z+this.m[2]*I,H=this.m[1]*z+this.m[3]*I,j=this.m[0]*-I+this.m[2]*z,Y=this.m[1]*-I+this.m[3]*z;return this.m[0]=K,this.m[1]=H,this.m[2]=j,this.m[3]=Y,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(N,z){const I=this.m[0]+this.m[2]*z,K=this.m[1]+this.m[3]*z,H=this.m[2]+this.m[0]*N,j=this.m[3]+this.m[1]*N;return this.m[0]=I,this.m[1]=K,this.m[2]=H,this.m[3]=j,this}multiply(N){const z=this.m[0]*N.m[0]+this.m[2]*N.m[1],I=this.m[1]*N.m[0]+this.m[3]*N.m[1],K=this.m[0]*N.m[2]+this.m[2]*N.m[3],H=this.m[1]*N.m[2]+this.m[3]*N.m[3],j=this.m[0]*N.m[4]+this.m[2]*N.m[5]+this.m[4],Y=this.m[1]*N.m[4]+this.m[3]*N.m[5]+this.m[5];return this.m[0]=z,this.m[1]=I,this.m[2]=K,this.m[3]=H,this.m[4]=j,this.m[5]=Y,this}invert(){const N=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),z=this.m[3]*N,I=-this.m[1]*N,K=-this.m[2]*N,H=this.m[0]*N,j=N*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),Y=N*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=z,this.m[1]=I,this.m[2]=K,this.m[3]=H,this.m[4]=j,this.m[5]=Y,this}getMatrix(){return this.m}decompose(){const N=this.m[0],z=this.m[1],I=this.m[2],K=this.m[3],H=this.m[4],j=this.m[5],Y=N*K-z*I,X={x:H,y:j,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(N!=0||z!=0){const J=Math.sqrt(N*N+z*z);X.rotation=z>0?Math.acos(N/J):-Math.acos(N/J),X.scaleX=J,X.scaleY=Y/J,X.skewX=(N*I+z*K)/Y,X.skewY=0}else if(I!=0||K!=0){const J=Math.sqrt(I*I+K*K);X.rotation=Math.PI/2-(K>0?Math.acos(-I/J):-Math.acos(I/J)),X.scaleX=Y/J,X.scaleY=J,X.skewX=0,X.skewY=(N*I+z*K)/Y}return X.rotation=i.Util._getRotation(X.rotation),X}}i.Transform=n;const s="[object Array]",r="[object Number]",c="[object String]",h="[object Boolean]",f=Math.PI/180,g=180/Math.PI,p="#",_="",S="0",x="Konva warning: ",b="Konva error: ",E="rgb(",M={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},D=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let L=[];const T=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(A){setTimeout(A,60)};i.Util={_isElement(A){return!!(A&&A.nodeType==1)},_isFunction(A){return!!(A&&A.constructor&&A.call&&A.apply)},_isPlainObject(A){return!!A&&A.constructor===Object},_isArray(A){return Object.prototype.toString.call(A)===s},_isNumber(A){return Object.prototype.toString.call(A)===r&&!isNaN(A)&&isFinite(A)},_isString(A){return Object.prototype.toString.call(A)===c},_isBoolean(A){return Object.prototype.toString.call(A)===h},isObject(A){return A instanceof Object},isValidSelector(A){if(typeof A!="string")return!1;const N=A[0];return N==="#"||N==="."||N===N.toUpperCase()},_sign(A){return A===0||A>0?1:-1},requestAnimFrame(A){L.push(A),L.length===1&&T(function(){const N=L;L=[],N.forEach(function(z){z()})})},createCanvasElement(){const A=document.createElement("canvas");try{A.style=A.style||{}}catch{}return A},createImageElement(){return document.createElement("img")},_isInDocument(A){for(;A=A.parentNode;)if(A==document)return!0;return!1},_urlToImage(A,N){const z=i.Util.createImageElement();z.onload=function(){N(z)},z.src=A},_rgbToHex(A,N,z){return((1<<24)+(A<<16)+(N<<8)+z).toString(16).slice(1)},_hexToRgb(A){A=A.replace(p,_);const N=parseInt(A,16);return{r:N>>16&255,g:N>>8&255,b:N&255}},getRandomColor(){let A=(Math.random()*16777215<<0).toString(16);for(;A.length<6;)A=S+A;return p+A},getRGB(A){let N;return A in M?(N=M[A],{r:N[0],g:N[1],b:N[2]}):A[0]===p?this._hexToRgb(A.substring(1)):A.substr(0,4)===E?(N=D.exec(A.replace(/ /g,"")),{r:parseInt(N[1],10),g:parseInt(N[2],10),b:parseInt(N[3],10)}):{r:0,g:0,b:0}},colorToRGBA(A){return A=A||"black",i.Util._namedColorToRBA(A)||i.Util._hex3ColorToRGBA(A)||i.Util._hex4ColorToRGBA(A)||i.Util._hex6ColorToRGBA(A)||i.Util._hex8ColorToRGBA(A)||i.Util._rgbColorToRGBA(A)||i.Util._rgbaColorToRGBA(A)||i.Util._hslColorToRGBA(A)},_namedColorToRBA(A){const N=M[A.toLowerCase()];return N?{r:N[0],g:N[1],b:N[2],a:1}:null},_rgbColorToRGBA(A){if(A.indexOf("rgb(")===0){A=A.match(/rgb\(([^)]+)\)/)[1];const N=A.split(/ *, */).map(Number);return{r:N[0],g:N[1],b:N[2],a:1}}},_rgbaColorToRGBA(A){if(A.indexOf("rgba(")===0){A=A.match(/rgba\(([^)]+)\)/)[1];const N=A.split(/ *, */).map((z,I)=>z.slice(-1)==="%"?I===3?parseInt(z)/100:parseInt(z)/100*255:Number(z));return{r:N[0],g:N[1],b:N[2],a:N[3]}}},_hex8ColorToRGBA(A){if(A[0]==="#"&&A.length===9)return{r:parseInt(A.slice(1,3),16),g:parseInt(A.slice(3,5),16),b:parseInt(A.slice(5,7),16),a:parseInt(A.slice(7,9),16)/255}},_hex6ColorToRGBA(A){if(A[0]==="#"&&A.length===7)return{r:parseInt(A.slice(1,3),16),g:parseInt(A.slice(3,5),16),b:parseInt(A.slice(5,7),16),a:1}},_hex4ColorToRGBA(A){if(A[0]==="#"&&A.length===5)return{r:parseInt(A[1]+A[1],16),g:parseInt(A[2]+A[2],16),b:parseInt(A[3]+A[3],16),a:parseInt(A[4]+A[4],16)/255}},_hex3ColorToRGBA(A){if(A[0]==="#"&&A.length===4)return{r:parseInt(A[1]+A[1],16),g:parseInt(A[2]+A[2],16),b:parseInt(A[3]+A[3],16),a:1}},_hslColorToRGBA(A){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(A)){const[N,...z]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(A),I=Number(z[0])/360,K=Number(z[1])/100,H=Number(z[2])/100;let j,Y,X;if(K===0)return X=H*255,{r:Math.round(X),g:Math.round(X),b:Math.round(X),a:1};H<.5?j=H*(1+K):j=H+K-H*K;const J=2*H-j,w=[0,0,0];for(let V=0;V<3;V++)Y=I+1/3*-(V-1),Y<0&&Y++,Y>1&&Y--,6*Y<1?X=J+(j-J)*6*Y:2*Y<1?X=j:3*Y<2?X=J+(j-J)*(2/3-Y)*6:X=J,w[V]=X*255;return{r:Math.round(w[0]),g:Math.round(w[1]),b:Math.round(w[2]),a:1}}},haveIntersection(A,N){return!(N.x>A.x+A.width||N.x+N.width<A.x||N.y>A.y+A.height||N.y+N.height<A.y)},cloneObject(A){const N={};for(const z in A)this._isPlainObject(A[z])?N[z]=this.cloneObject(A[z]):this._isArray(A[z])?N[z]=this.cloneArray(A[z]):N[z]=A[z];return N},cloneArray(A){return A.slice(0)},degToRad(A){return A*f},radToDeg(A){return A*g},_degToRad(A){return i.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),i.Util.degToRad(A)},_radToDeg(A){return i.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),i.Util.radToDeg(A)},_getRotation(A){return t.Konva.angleDeg?i.Util.radToDeg(A):A},_capitalize(A){return A.charAt(0).toUpperCase()+A.slice(1)},throw(A){throw new Error(b+A)},error(A){console.error(b+A)},warn(A){t.Konva.showWarnings&&console.warn(x+A)},each(A,N){for(const z in A)N(z,A[z])},_inRange(A,N,z){return N<=A&&A<z},_getProjectionToSegment(A,N,z,I,K,H){let j,Y,X;const J=(A-z)*(A-z)+(N-I)*(N-I);if(J==0)j=A,Y=N,X=(K-z)*(K-z)+(H-I)*(H-I);else{const w=((K-A)*(z-A)+(H-N)*(I-N))/J;w<0?(j=A,Y=N,X=(A-K)*(A-K)+(N-H)*(N-H)):w>1?(j=z,Y=I,X=(z-K)*(z-K)+(I-H)*(I-H)):(j=A+w*(z-A),Y=N+w*(I-N),X=(j-K)*(j-K)+(Y-H)*(Y-H))}return[j,Y,X]},_getProjectionToLine(A,N,z){const I=i.Util.cloneObject(A);let K=Number.MAX_VALUE;return N.forEach(function(H,j){if(!z&&j===N.length-1)return;const Y=N[(j+1)%N.length],X=i.Util._getProjectionToSegment(H.x,H.y,Y.x,Y.y,A.x,A.y),J=X[0],w=X[1],V=X[2];V<K&&(I.x=J,I.y=w,K=V)}),I},_prepareArrayForTween(A,N,z){const I=[],K=[];if(A.length>N.length){const j=N;N=A,A=j}for(let j=0;j<A.length;j+=2)I.push({x:A[j],y:A[j+1]});for(let j=0;j<N.length;j+=2)K.push({x:N[j],y:N[j+1]});const H=[];return K.forEach(function(j){const Y=i.Util._getProjectionToLine(j,I,z);H.push(Y.x),H.push(Y.y)}),H},_prepareToStringify(A){let N;A.visitedByCircularReferenceRemoval=!0;for(const z in A)if(A.hasOwnProperty(z)&&A[z]&&typeof A[z]=="object"){if(N=Object.getOwnPropertyDescriptor(A,z),A[z].visitedByCircularReferenceRemoval||i.Util._isElement(A[z]))if(N.configurable)delete A[z];else return null;else if(i.Util._prepareToStringify(A[z])===null)if(N.configurable)delete A[z];else return null}return delete A.visitedByCircularReferenceRemoval,A},_assign(A,N){for(const z in N)A[z]=N[z];return A},_getFirstPointerId(A){return A.touches?A.changedTouches[0].identifier:A.pointerId||999},releaseCanvas(...A){t.Konva.releaseCanvasOnDestroy&&A.forEach(N=>{N.width=0,N.height=0})},drawRoundedRectPath(A,N,z,I){let K=0,H=0,j=0,Y=0;typeof I=="number"?K=H=j=Y=Math.min(I,N/2,z/2):(K=Math.min(I[0]||0,N/2,z/2),H=Math.min(I[1]||0,N/2,z/2),Y=Math.min(I[2]||0,N/2,z/2),j=Math.min(I[3]||0,N/2,z/2)),A.moveTo(K,0),A.lineTo(N-H,0),A.arc(N-H,H,H,Math.PI*3/2,0,!1),A.lineTo(N,z-Y),A.arc(N-Y,z-Y,Y,0,Math.PI/2,!1),A.lineTo(j,z),A.arc(j,z-j,j,Math.PI/2,Math.PI,!1),A.lineTo(0,K),A.arc(K,K,K,Math.PI,Math.PI*3/2,!1)}}}(Qp)),Qp}var Nd={},Wp={},ma={},Yv;function Se(){if(Yv)return ma;Yv=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.RGBComponent=s,ma.alphaComponent=r,ma.getNumberValidator=c,ma.getNumberOrArrayOfNumbersValidator=h,ma.getNumberOrAutoValidator=f,ma.getStringValidator=g,ma.getStringOrGradientValidator=p,ma.getFunctionValidator=_,ma.getNumberArrayValidator=S,ma.getBooleanValidator=x,ma.getComponentValidator=b;const i=he(),t=Cn();function n(E){return t.Util._isString(E)?'"'+E+'"':Object.prototype.toString.call(E)==="[object Number]"||t.Util._isBoolean(E)?E:Object.prototype.toString.call(E)}function s(E){return E>255?255:E<0?0:Math.round(E)}function r(E){return E>1?1:E<1e-4?1e-4:E}function c(){if(i.Konva.isUnminified)return function(E,M){return t.Util._isNumber(E)||t.Util.warn(n(E)+' is a not valid value for "'+M+'" attribute. The value should be a number.'),E}}function h(E){if(i.Konva.isUnminified)return function(M,D){let L=t.Util._isNumber(M),T=t.Util._isArray(M)&&M.length==E;return!L&&!T&&t.Util.warn(n(M)+' is a not valid value for "'+D+'" attribute. The value should be a number or Array<number>('+E+")"),M}}function f(){if(i.Konva.isUnminified)return function(E,M){var D=t.Util._isNumber(E),L=E==="auto";return D||L||t.Util.warn(n(E)+' is a not valid value for "'+M+'" attribute. The value should be a number or "auto".'),E}}function g(){if(i.Konva.isUnminified)return function(E,M){return t.Util._isString(E)||t.Util.warn(n(E)+' is a not valid value for "'+M+'" attribute. The value should be a string.'),E}}function p(){if(i.Konva.isUnminified)return function(E,M){const D=t.Util._isString(E),L=Object.prototype.toString.call(E)==="[object CanvasGradient]"||E&&E.addColorStop;return D||L||t.Util.warn(n(E)+' is a not valid value for "'+M+'" attribute. The value should be a string or a native gradient.'),E}}function _(){if(i.Konva.isUnminified)return function(E,M){return t.Util._isFunction(E)||t.Util.warn(n(E)+' is a not valid value for "'+M+'" attribute. The value should be a function.'),E}}function S(){if(i.Konva.isUnminified)return function(E,M){const D=Int8Array?Object.getPrototypeOf(Int8Array):null;return D&&E instanceof D||(t.Util._isArray(E)?E.forEach(function(L){t.Util._isNumber(L)||t.Util.warn('"'+M+'" attribute has non numeric element '+L+". Make sure that all elements are numbers.")}):t.Util.warn(n(E)+' is a not valid value for "'+M+'" attribute. The value should be a array of numbers.')),E}}function x(){if(i.Konva.isUnminified)return function(E,M){var D=E===!0||E===!1;return D||t.Util.warn(n(E)+' is a not valid value for "'+M+'" attribute. The value should be a boolean.'),E}}function b(E){if(i.Konva.isUnminified)return function(M,D){return M==null||t.Util.isObject(M)||t.Util.warn(n(M)+' is a not valid value for "'+D+'" attribute. The value should be an object with properties '+E),M}}return ma}var Vv;function ye(){return Vv||(Vv=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Factory=void 0;const t=Cn(),n=Se(),s="get",r="set";i.Factory={addGetterSetter(c,h,f,g,p){i.Factory.addGetter(c,h,f),i.Factory.addSetter(c,h,g,p),i.Factory.addOverloadedGetterSetter(c,h)},addGetter(c,h,f){var g=s+t.Util._capitalize(h);c.prototype[g]=c.prototype[g]||function(){const p=this.attrs[h];return p===void 0?f:p}},addSetter(c,h,f,g){var p=r+t.Util._capitalize(h);c.prototype[p]||i.Factory.overWriteSetter(c,h,f,g)},overWriteSetter(c,h,f,g){var p=r+t.Util._capitalize(h);c.prototype[p]=function(_){return f&&_!==void 0&&_!==null&&(_=f.call(this,_,h)),this._setAttr(h,_),g&&g.call(this),this}},addComponentsGetterSetter(c,h,f,g,p){const _=f.length,S=t.Util._capitalize,x=s+S(h),b=r+S(h);c.prototype[x]=function(){const M={};for(let D=0;D<_;D++){const L=f[D];M[L]=this.getAttr(h+S(L))}return M};const E=(0,n.getComponentValidator)(f);c.prototype[b]=function(M){const D=this.attrs[h];g&&(M=g.call(this,M,h)),E&&E.call(this,M,h);for(const L in M)M.hasOwnProperty(L)&&this._setAttr(h+S(L),M[L]);return M||f.forEach(L=>{this._setAttr(h+S(L),void 0)}),this._fireChangeEvent(h,D,M),p&&p.call(this),this},i.Factory.addOverloadedGetterSetter(c,h)},addOverloadedGetterSetter(c,h){var f=t.Util._capitalize(h),g=r+f,p=s+f;c.prototype[h]=function(){return arguments.length?(this[g](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(c,h,f,g){t.Util.error("Adding deprecated "+h);const p=s+t.Util._capitalize(h),_=h+" property is deprecated and will be removed soon. Look at Konva change log for more information.";c.prototype[p]=function(){t.Util.error(_);const S=this.attrs[h];return S===void 0?f:S},i.Factory.addSetter(c,h,g,function(){t.Util.error(_)}),i.Factory.addOverloadedGetterSetter(c,h)},backCompat(c,h){t.Util.each(h,function(f,g){const p=c.prototype[g],_=s+t.Util._capitalize(f),S=r+t.Util._capitalize(f);function x(){p.apply(this,arguments),t.Util.error('"'+f+'" method is deprecated and will be removed soon. Use ""'+g+'" instead.')}c.prototype[f]=x,c.prototype[_]=x,c.prototype[S]=x})},afterSetFilter(){this._filterUpToDate=!1}}}(Wp)),Wp}var Sr={},Er={},qv;function YS(){if(qv)return Er;qv=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.HitContext=Er.SceneContext=Er.Context=void 0;const i=Cn(),t=he();function n(L){const T=[],A=L.length,N=i.Util;for(let z=0;z<A;z++){let I=L[z];N._isNumber(I)?I=Math.round(I*1e3)/1e3:N._isString(I)||(I=I+""),T.push(I)}return T}const s=",",r="(",c=")",h="([",f="])",g=";",p="()",_="=",S=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],x=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],b=100;let E=class{constructor(T){this.canvas=T,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(T){T.fillEnabled()&&this._fill(T)}_fill(T){}strokeShape(T){T.hasStroke()&&this._stroke(T)}_stroke(T){}fillStrokeShape(T){T.attrs.fillAfterStrokeEnabled?(this.strokeShape(T),this.fillShape(T)):(this.fillShape(T),this.strokeShape(T))}getTrace(T,A){let N=this.traceArr,z=N.length,I="",K,H,j,Y;for(K=0;K<z;K++)H=N[K],j=H.method,j?(Y=H.args,I+=j,T?I+=p:i.Util._isArray(Y[0])?I+=h+Y.join(s)+f:(A&&(Y=Y.map(X=>typeof X=="number"?Math.floor(X):X)),I+=r+Y.join(s)+c)):(I+=H.property,T||(I+=_+H.val)),I+=g;return I}clearTrace(){this.traceArr=[]}_trace(T){let A=this.traceArr,N;A.push(T),N=A.length,N>=b&&A.shift()}reset(){const T=this.getCanvas().getPixelRatio();this.setTransform(1*T,0,0,1*T,0,0)}getCanvas(){return this.canvas}clear(T){const A=this.getCanvas();T?this.clearRect(T.x||0,T.y||0,T.width||0,T.height||0):this.clearRect(0,0,A.getWidth()/A.pixelRatio,A.getHeight()/A.pixelRatio)}_applyLineCap(T){const A=T.attrs.lineCap;A&&this.setAttr("lineCap",A)}_applyOpacity(T){const A=T.getAbsoluteOpacity();A!==1&&this.setAttr("globalAlpha",A)}_applyLineJoin(T){const A=T.attrs.lineJoin;A&&this.setAttr("lineJoin",A)}setAttr(T,A){this._context[T]=A}arc(T,A,N,z,I,K){this._context.arc(T,A,N,z,I,K)}arcTo(T,A,N,z,I){this._context.arcTo(T,A,N,z,I)}beginPath(){this._context.beginPath()}bezierCurveTo(T,A,N,z,I,K){this._context.bezierCurveTo(T,A,N,z,I,K)}clearRect(T,A,N,z){this._context.clearRect(T,A,N,z)}clip(...T){this._context.clip.apply(this._context,T)}closePath(){this._context.closePath()}createImageData(T,A){const N=arguments;if(N.length===2)return this._context.createImageData(T,A);if(N.length===1)return this._context.createImageData(T)}createLinearGradient(T,A,N,z){return this._context.createLinearGradient(T,A,N,z)}createPattern(T,A){return this._context.createPattern(T,A)}createRadialGradient(T,A,N,z,I,K){return this._context.createRadialGradient(T,A,N,z,I,K)}drawImage(T,A,N,z,I,K,H,j,Y){const X=arguments,J=this._context;X.length===3?J.drawImage(T,A,N):X.length===5?J.drawImage(T,A,N,z,I):X.length===9&&J.drawImage(T,A,N,z,I,K,H,j,Y)}ellipse(T,A,N,z,I,K,H,j){this._context.ellipse(T,A,N,z,I,K,H,j)}isPointInPath(T,A,N,z){return N?this._context.isPointInPath(N,T,A,z):this._context.isPointInPath(T,A,z)}fill(...T){this._context.fill.apply(this._context,T)}fillRect(T,A,N,z){this._context.fillRect(T,A,N,z)}strokeRect(T,A,N,z){this._context.strokeRect(T,A,N,z)}fillText(T,A,N,z){z?this._context.fillText(T,A,N,z):this._context.fillText(T,A,N)}measureText(T){return this._context.measureText(T)}getImageData(T,A,N,z){return this._context.getImageData(T,A,N,z)}lineTo(T,A){this._context.lineTo(T,A)}moveTo(T,A){this._context.moveTo(T,A)}rect(T,A,N,z){this._context.rect(T,A,N,z)}roundRect(T,A,N,z,I){this._context.roundRect(T,A,N,z,I)}putImageData(T,A,N){this._context.putImageData(T,A,N)}quadraticCurveTo(T,A,N,z){this._context.quadraticCurveTo(T,A,N,z)}restore(){this._context.restore()}rotate(T){this._context.rotate(T)}save(){this._context.save()}scale(T,A){this._context.scale(T,A)}setLineDash(T){this._context.setLineDash?this._context.setLineDash(T):"mozDash"in this._context?this._context.mozDash=T:"webkitLineDash"in this._context&&(this._context.webkitLineDash=T)}getLineDash(){return this._context.getLineDash()}setTransform(T,A,N,z,I,K){this._context.setTransform(T,A,N,z,I,K)}stroke(T){T?this._context.stroke(T):this._context.stroke()}strokeText(T,A,N,z){this._context.strokeText(T,A,N,z)}transform(T,A,N,z,I,K){this._context.transform(T,A,N,z,I,K)}translate(T,A){this._context.translate(T,A)}_enableTrace(){let T=this,A=S.length,N=this.setAttr,z,I;const K=function(H){let j=T[H],Y;T[H]=function(){return I=n(Array.prototype.slice.call(arguments,0)),Y=j.apply(T,arguments),T._trace({method:H,args:I}),Y}};for(z=0;z<A;z++)K(S[z]);T.setAttr=function(){N.apply(T,arguments);const H=arguments[0];let j=arguments[1];(H==="shadowOffsetX"||H==="shadowOffsetY"||H==="shadowBlur")&&(j=j/this.canvas.getPixelRatio()),T._trace({property:H,val:j})}}_applyGlobalCompositeOperation(T){const A=T.attrs.globalCompositeOperation;!A||A==="source-over"||this.setAttr("globalCompositeOperation",A)}};Er.Context=E,x.forEach(function(L){Object.defineProperty(E.prototype,L,{get(){return this._context[L]},set(T){this._context[L]=T}})});class M extends E{constructor(T,{willReadFrequently:A=!1}={}){super(T),this._context=T._canvas.getContext("2d",{willReadFrequently:A})}_fillColor(T){const A=T.fill();this.setAttr("fillStyle",A),T._fillFunc(this)}_fillPattern(T){this.setAttr("fillStyle",T._getFillPattern()),T._fillFunc(this)}_fillLinearGradient(T){const A=T._getLinearGradient();A&&(this.setAttr("fillStyle",A),T._fillFunc(this))}_fillRadialGradient(T){const A=T._getRadialGradient();A&&(this.setAttr("fillStyle",A),T._fillFunc(this))}_fill(T){const A=T.fill(),N=T.getFillPriority();if(A&&N==="color"){this._fillColor(T);return}const z=T.getFillPatternImage();if(z&&N==="pattern"){this._fillPattern(T);return}const I=T.getFillLinearGradientColorStops();if(I&&N==="linear-gradient"){this._fillLinearGradient(T);return}const K=T.getFillRadialGradientColorStops();if(K&&N==="radial-gradient"){this._fillRadialGradient(T);return}A?this._fillColor(T):z?this._fillPattern(T):I?this._fillLinearGradient(T):K&&this._fillRadialGradient(T)}_strokeLinearGradient(T){const A=T.getStrokeLinearGradientStartPoint(),N=T.getStrokeLinearGradientEndPoint(),z=T.getStrokeLinearGradientColorStops(),I=this.createLinearGradient(A.x,A.y,N.x,N.y);if(z){for(let K=0;K<z.length;K+=2)I.addColorStop(z[K],z[K+1]);this.setAttr("strokeStyle",I)}}_stroke(T){const A=T.dash(),N=T.getStrokeScaleEnabled();if(T.hasStroke()){if(!N){this.save();const I=this.getCanvas().getPixelRatio();this.setTransform(I,0,0,I,0,0)}this._applyLineCap(T),A&&T.dashEnabled()&&(this.setLineDash(A),this.setAttr("lineDashOffset",T.dashOffset())),this.setAttr("lineWidth",T.strokeWidth()),T.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),T.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(T):this.setAttr("strokeStyle",T.stroke()),T._strokeFunc(this),N||this.restore()}}_applyShadow(T){var A,N,z;const I=(A=T.getShadowRGBA())!==null&&A!==void 0?A:"black",K=(N=T.getShadowBlur())!==null&&N!==void 0?N:5,H=(z=T.getShadowOffset())!==null&&z!==void 0?z:{x:0,y:0},j=T.getAbsoluteScale(),Y=this.canvas.getPixelRatio(),X=j.x*Y,J=j.y*Y;this.setAttr("shadowColor",I),this.setAttr("shadowBlur",K*Math.min(Math.abs(X),Math.abs(J))),this.setAttr("shadowOffsetX",H.x*X),this.setAttr("shadowOffsetY",H.y*J)}}Er.SceneContext=M;class D extends E{constructor(T){super(T),this._context=T._canvas.getContext("2d",{willReadFrequently:!0})}_fill(T){this.save(),this.setAttr("fillStyle",T.colorKey),T._fillFuncHit(this),this.restore()}strokeShape(T){T.hasHitStroke()&&this._stroke(T)}_stroke(T){if(T.hasHitStroke()){const A=T.getStrokeScaleEnabled();if(!A){this.save();const I=this.getCanvas().getPixelRatio();this.setTransform(I,0,0,I,0,0)}this._applyLineCap(T);const N=T.hitStrokeWidth(),z=N==="auto"?T.strokeWidth():N;this.setAttr("lineWidth",z),this.setAttr("strokeStyle",T.colorKey),T._strokeFuncHit(this),A||this.restore()}}}return Er.HitContext=D,Er}var Fv;function Rm(){if(Fv)return Sr;Fv=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.HitCanvas=Sr.SceneCanvas=Sr.Canvas=void 0;const i=Cn(),t=YS(),n=he();let s;function r(){if(s)return s;const g=i.Util.createCanvasElement(),p=g.getContext("2d");return s=function(){const _=n.Konva._global.devicePixelRatio||1,S=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return _/S}(),i.Util.releaseCanvas(g),s}let c=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const S=(p||{}).pixelRatio||n.Konva.pixelRatio||r();this.pixelRatio=S,this._canvas=i.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){const _=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/_,this.getHeight()/_)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";const _=this.pixelRatio;this.getContext()._context.scale(_,_)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";const _=this.pixelRatio;this.getContext()._context.scale(_,_)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,_){this.setWidth(p||0),this.setHeight(_||0)}toDataURL(p,_){try{return this._canvas.toDataURL(p,_)}catch{try{return this._canvas.toDataURL()}catch(x){return i.Util.error("Unable to get data URL. "+x.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Sr.Canvas=c;class h extends c{constructor(p={width:0,height:0,willReadFrequently:!1}){super(p),this.context=new t.SceneContext(this,{willReadFrequently:p.willReadFrequently}),this.setSize(p.width,p.height)}}Sr.SceneCanvas=h;class f extends c{constructor(p={width:0,height:0}){super(p),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(p.width,p.height)}}return Sr.HitCanvas=f,Sr}var Jp={},Pv;function x2(){return Pv||(Pv=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DD=void 0;const t=he(),n=Cn();i.DD={get isDragging(){let s=!1;return i.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(s=!0)}),s},justDragged:!1,get node(){let s;return i.DD._dragElements.forEach(r=>{s=r.node}),s},_dragElements:new Map,_drag(s){const r=[];i.DD._dragElements.forEach((c,h)=>{const{node:f}=c,g=f.getStage();g.setPointersPositions(s),c.pointerId===void 0&&(c.pointerId=n.Util._getFirstPointerId(s));const p=g._changedPointerPositions.find(_=>_.id===c.pointerId);if(p){if(c.dragStatus!=="dragging"){const _=f.dragDistance();if(Math.max(Math.abs(p.x-c.startPointerPos.x),Math.abs(p.y-c.startPointerPos.y))<_||(f.startDrag({evt:s}),!f.isDragging()))return}f._setDragPosition(s,c),r.push(f)}}),r.forEach(c=>{c.fire("dragmove",{type:"dragmove",target:c,evt:s},!0)})},_endDragBefore(s){const r=[];i.DD._dragElements.forEach(c=>{const{node:h}=c,f=h.getStage();if(s&&f.setPointersPositions(s),!f._changedPointerPositions.find(_=>_.id===c.pointerId))return;(c.dragStatus==="dragging"||c.dragStatus==="stopped")&&(i.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,c.dragStatus="stopped");const p=c.node.getLayer()||c.node instanceof t.Konva.Stage&&c.node;p&&r.indexOf(p)===-1&&r.push(p)}),r.forEach(c=>{c.draw()})},_endDragAfter(s){i.DD._dragElements.forEach((r,c)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:s},!0),r.dragStatus!=="dragging"&&i.DD._dragElements.delete(c)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",i.DD._endDragBefore,!0),window.addEventListener("touchend",i.DD._endDragBefore,!0),window.addEventListener("touchcancel",i.DD._endDragBefore,!0),window.addEventListener("mousemove",i.DD._drag),window.addEventListener("touchmove",i.DD._drag),window.addEventListener("mouseup",i.DD._endDragAfter,!1),window.addEventListener("touchend",i.DD._endDragAfter,!1),window.addEventListener("touchcancel",i.DD._endDragAfter,!1))}(Jp)),Jp}var Xv;function Ln(){if(Xv)return Nd;Xv=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.Node=void 0;const i=Cn(),t=ye(),n=Rm(),s=he(),r=x2(),c=Se(),h="absoluteOpacity",f="allEventListeners",g="absoluteTransform",p="absoluteScale",_="canvas",S="Change",x="children",b="konva",E="listening",M="mouseenter",D="mouseleave",L="set",T="Shape",A=" ",N="stage",z="transform",I="Stage",K="visible",H=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(A);let j=1,Y=class N_{constructor(w){this._id=j++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(w),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(w){(w===z||w===g)&&this._cache.get(w)?this._cache.get(w).dirty=!0:w?this._cache.delete(w):this._cache.clear()}_getCache(w,V){let G=this._cache.get(w);return(G===void 0||(w===z||w===g)&&G.dirty===!0)&&(G=V.call(this),this._cache.set(w,G)),G}_calculate(w,V,G){if(!this._attachedDepsListeners.get(w)){const B=V.map(F=>F+"Change.konva").join(A);this.on(B,()=>{this._clearCache(w)}),this._attachedDepsListeners.set(w,!0)}return this._getCache(w,G)}_getCanvasCache(){return this._cache.get(_)}_clearSelfAndDescendantCache(w){this._clearCache(w),w===g&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(_)){const{scene:w,filter:V,hit:G}=this._cache.get(_);i.Util.releaseCanvas(w,V,G),this._cache.delete(_)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(w){const V=w||{};let G={};(V.x===void 0||V.y===void 0||V.width===void 0||V.height===void 0)&&(G=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let B=Math.ceil(V.width||G.width),F=Math.ceil(V.height||G.height),$=V.pixelRatio,rt=V.x===void 0?Math.floor(G.x):V.x,q=V.y===void 0?Math.floor(G.y):V.y,Q=V.offset||0,tt=V.drawBorder||!1,nt=V.hitCanvasPixelRatio||1;if(!B||!F){i.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const ht=Math.abs(Math.round(G.x)-rt)>.5?1:0,vt=Math.abs(Math.round(G.y)-q)>.5?1:0;B+=Q*2+ht,F+=Q*2+vt,rt-=Q,q-=Q;const St=new n.SceneCanvas({pixelRatio:$,width:B,height:F}),W=new n.SceneCanvas({pixelRatio:$,width:0,height:0,willReadFrequently:!0}),Z=new n.HitCanvas({pixelRatio:nt,width:B,height:F}),dt=St.getContext(),Et=Z.getContext();return Z.isCache=!0,St.isCache=!0,this._cache.delete(_),this._filterUpToDate=!1,V.imageSmoothingEnabled===!1&&(St.getContext()._context.imageSmoothingEnabled=!1,W.getContext()._context.imageSmoothingEnabled=!1),dt.save(),Et.save(),dt.translate(-rt,-q),Et.translate(-rt,-q),this._isUnderCache=!0,this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(p),this.drawScene(St,this),this.drawHit(Z,this),this._isUnderCache=!1,dt.restore(),Et.restore(),tt&&(dt.save(),dt.beginPath(),dt.rect(0,0,B,F),dt.closePath(),dt.setAttr("strokeStyle","red"),dt.setAttr("lineWidth",5),dt.stroke(),dt.restore()),this._cache.set(_,{scene:St,filter:W,hit:Z,x:rt,y:q}),this._requestDraw(),this}isCached(){return this._cache.has(_)}getClientRect(w){throw new Error('abstract "getClientRect" method call')}_transformedRect(w,V){const G=[{x:w.x,y:w.y},{x:w.x+w.width,y:w.y},{x:w.x+w.width,y:w.y+w.height},{x:w.x,y:w.y+w.height}];let B=1/0,F=1/0,$=-1/0,rt=-1/0;const q=this.getAbsoluteTransform(V);return G.forEach(function(Q){const tt=q.point(Q);B===void 0&&(B=$=tt.x,F=rt=tt.y),B=Math.min(B,tt.x),F=Math.min(F,tt.y),$=Math.max($,tt.x),rt=Math.max(rt,tt.y)}),{x:B,y:F,width:$-B,height:rt-F}}_drawCachedSceneCanvas(w){w.save(),w._applyOpacity(this),w._applyGlobalCompositeOperation(this);const V=this._getCanvasCache();w.translate(V.x,V.y);const G=this._getCachedSceneCanvas(),B=G.pixelRatio;w.drawImage(G._canvas,0,0,G.width/B,G.height/B),w.restore()}_drawCachedHitCanvas(w){const V=this._getCanvasCache(),G=V.hit;w.save(),w.translate(V.x,V.y),w.drawImage(G._canvas,0,0,G.width/G.pixelRatio,G.height/G.pixelRatio),w.restore()}_getCachedSceneCanvas(){let w=this.filters(),V=this._getCanvasCache(),G=V.scene,B=V.filter,F=B.getContext(),$,rt,q,Q;if(w){if(!this._filterUpToDate){const tt=G.pixelRatio;B.setSize(G.width/G.pixelRatio,G.height/G.pixelRatio);try{for($=w.length,F.clear(),F.drawImage(G._canvas,0,0,G.getWidth()/tt,G.getHeight()/tt),rt=F.getImageData(0,0,B.getWidth(),B.getHeight()),q=0;q<$;q++){if(Q=w[q],typeof Q!="function"){i.Util.error("Filter should be type of function, but got "+typeof Q+" instead. Please check correct filters");continue}Q.call(this,rt),F.putImageData(rt,0,0)}}catch(nt){i.Util.error("Unable to apply filter. "+nt.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return B}return G}on(w,V){if(this._cache&&this._cache.delete(f),arguments.length===3)return this._delegate.apply(this,arguments);let G=w.split(A),B=G.length,F,$,rt,q,Q;for(F=0;F<B;F++)$=G[F],rt=$.split("."),q=rt[0],Q=rt[1]||"",this.eventListeners[q]||(this.eventListeners[q]=[]),this.eventListeners[q].push({name:Q,handler:V});return this}off(w,V){let G=(w||"").split(A),B=G.length,F,$,rt,q,Q,tt;if(this._cache&&this._cache.delete(f),!w)for($ in this.eventListeners)this._off($);for(F=0;F<B;F++)if(rt=G[F],q=rt.split("."),Q=q[0],tt=q[1],Q)this.eventListeners[Q]&&this._off(Q,tt,V);else for($ in this.eventListeners)this._off($,tt,V);return this}dispatchEvent(w){const V={target:this,type:w.type,evt:w};return this.fire(w.type,V),this}addEventListener(w,V){return this.on(w,function(G){V.call(this,G.evt)}),this}removeEventListener(w){return this.off(w),this}_delegate(w,V,G){const B=this;this.on(w,function(F){const $=F.target.findAncestors(V,!0,B);for(let rt=0;rt<$.length;rt++)F=i.Util.cloneObject(F),F.currentTarget=$[rt],G.call($[rt],F)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(N),this._clearSelfAndDescendantCache(K),this._clearSelfAndDescendantCache(E)}_remove(){this._clearCaches();const w=this.getParent();w&&w.children&&(w.children.splice(this.index,1),w._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(w){const V="get"+i.Util._capitalize(w);return i.Util._isFunction(this[V])?this[V]():this.attrs[w]}getAncestors(){let w=this.getParent(),V=[];for(;w;)V.push(w),w=w.getParent();return V}getAttrs(){return this.attrs||{}}setAttrs(w){return this._batchTransformChanges(()=>{let V,G;if(!w)return this;for(V in w)V!==x&&(G=L+i.Util._capitalize(V),i.Util._isFunction(this[G])?this[G](w[V]):this._setAttr(V,w[V]))}),this}isListening(){return this._getCache(E,this._isListening)}_isListening(w){if(!this.listening())return!1;const G=this.getParent();return G&&G!==w&&this!==w?G._isListening(w):!0}isVisible(){return this._getCache(K,this._isVisible)}_isVisible(w){if(!this.visible())return!1;const G=this.getParent();return G&&G!==w&&this!==w?G._isVisible(w):!0}shouldDrawHit(w,V=!1){if(w)return this._isVisible(w)&&this._isListening(w);const G=this.getLayer();let B=!1;r.DD._dragElements.forEach($=>{$.dragStatus==="dragging"&&($.node.nodeType==="Stage"||$.node.getLayer()===G)&&(B=!0)});const F=!V&&!s.Konva.hitOnDragEnabled&&(B||s.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!F}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let w=this.getDepth(),V=this,G=0,B,F,$,rt;function q(tt){for(B=[],F=tt.length,$=0;$<F;$++)rt=tt[$],G++,rt.nodeType!==T&&(B=B.concat(rt.getChildren().slice())),rt._id===V._id&&($=F);B.length>0&&B[0].getDepth()<=w&&q(B)}const Q=this.getStage();return V.nodeType!==I&&Q&&q(Q.getChildren()),G}getDepth(){let w=0,V=this.parent;for(;V;)w++,V=V.parent;return w}_batchTransformChanges(w){this._batchingTransformChange=!0,w(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(z),this._clearSelfAndDescendantCache(g)),this._needClearTransformCache=!1}setPosition(w){return this._batchTransformChanges(()=>{this.x(w.x),this.y(w.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const w=this.getStage();if(!w)return null;const V=w.getPointerPosition();if(!V)return null;const G=this.getAbsoluteTransform().copy();return G.invert(),G.point(V)}getAbsolutePosition(w){let V=!1,G=this.parent;for(;G;){if(G.isCached()){V=!0;break}G=G.parent}V&&!w&&(w=!0);const B=this.getAbsoluteTransform(w).getMatrix(),F=new i.Transform,$=this.offset();return F.m=B.slice(),F.translate($.x,$.y),F.getTranslation()}setAbsolutePosition(w){const{x:V,y:G,...B}=this._clearTransform();this.attrs.x=V,this.attrs.y=G,this._clearCache(z);const F=this._getAbsoluteTransform().copy();return F.invert(),F.translate(w.x,w.y),w={x:this.attrs.x+F.getTranslation().x,y:this.attrs.y+F.getTranslation().y},this._setTransform(B),this.setPosition({x:w.x,y:w.y}),this._clearCache(z),this._clearSelfAndDescendantCache(g),this}_setTransform(w){let V;for(V in w)this.attrs[V]=w[V]}_clearTransform(){const w={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,w}move(w){let V=w.x,G=w.y,B=this.x(),F=this.y();return V!==void 0&&(B+=V),G!==void 0&&(F+=G),this.setPosition({x:B,y:F}),this}_eachAncestorReverse(w,V){let G=[],B=this.getParent(),F,$;if(!(V&&V._id===this._id)){for(G.unshift(this);B&&(!V||B._id!==V._id);)G.unshift(B),B=B.parent;for(F=G.length,$=0;$<F;$++)w(G[$])}}rotate(w){return this.rotation(this.rotation()+w),this}moveToTop(){if(!this.parent)return i.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const w=this.index,V=this.parent.getChildren().length;return w<V-1?(this.parent.children.splice(w,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return i.Util.warn("Node has no parent. moveUp function is ignored."),!1;const w=this.index,V=this.parent.getChildren().length;return w<V-1?(this.parent.children.splice(w,1),this.parent.children.splice(w+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return i.Util.warn("Node has no parent. moveDown function is ignored."),!1;const w=this.index;return w>0?(this.parent.children.splice(w,1),this.parent.children.splice(w-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return i.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const w=this.index;return w>0?(this.parent.children.splice(w,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(w){if(!this.parent)return i.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(w<0||w>=this.parent.children.length)&&i.Util.warn("Unexpected value "+w+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const V=this.index;return this.parent.children.splice(V,1),this.parent.children.splice(w,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(h,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let w=this.opacity();const V=this.getParent();return V&&!V._isUnderCache&&(w*=V.getAbsoluteOpacity()),w}moveTo(w){return this.getParent()!==w&&(this._remove(),w.add(this)),this}toObject(){let w=this.getAttrs(),V,G,B,F,$;const rt={attrs:{},className:this.getClassName()};for(V in w)G=w[V],$=i.Util.isObject(G)&&!i.Util._isPlainObject(G)&&!i.Util._isArray(G),!$&&(B=typeof this[V]=="function"&&this[V],delete w[V],F=B?B.call(this):null,w[V]=G,F!==G&&(rt.attrs[V]=G));return i.Util._prepareToStringify(rt)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(w,V,G){const B=[];V&&this._isMatch(w)&&B.push(this);let F=this.parent;for(;F;){if(F===G)return B;F._isMatch(w)&&B.push(F),F=F.parent}return B}isAncestorOf(w){return!1}findAncestor(w,V,G){return this.findAncestors(w,V,G)[0]}_isMatch(w){if(!w)return!1;if(typeof w=="function")return w(this);let V=w.replace(/ /g,"").split(","),G=V.length,B,F;for(B=0;B<G;B++)if(F=V[B],i.Util.isValidSelector(F)||(i.Util.warn('Selector "'+F+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),i.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),i.Util.warn("Konva is awesome, right?")),F.charAt(0)==="#"){if(this.id()===F.slice(1))return!0}else if(F.charAt(0)==="."){if(this.hasName(F.slice(1)))return!0}else if(this.className===F||this.nodeType===F)return!0;return!1}getLayer(){const w=this.getParent();return w?w.getLayer():null}getStage(){return this._getCache(N,this._getStage)}_getStage(){const w=this.getParent();return w?w.getStage():null}fire(w,V={},G){return V.target=V.target||this,G?this._fireAndBubble(w,V):this._fire(w,V),this}getAbsoluteTransform(w){return w?this._getAbsoluteTransform(w):this._getCache(g,this._getAbsoluteTransform)}_getAbsoluteTransform(w){let V;if(w)return V=new i.Transform,this._eachAncestorReverse(function(G){const B=G.transformsEnabled();B==="all"?V.multiply(G.getTransform()):B==="position"&&V.translate(G.x()-G.offsetX(),G.y()-G.offsetY())},w),V;{V=this._cache.get(g)||new i.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(V):V.reset();const G=this.transformsEnabled();if(G==="all")V.multiply(this.getTransform());else if(G==="position"){const B=this.attrs.x||0,F=this.attrs.y||0,$=this.attrs.offsetX||0,rt=this.attrs.offsetY||0;V.translate(B-$,F-rt)}return V.dirty=!1,V}}getAbsoluteScale(w){let V=this;for(;V;)V._isUnderCache&&(w=V),V=V.getParent();const B=this.getAbsoluteTransform(w).decompose();return{x:B.scaleX,y:B.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(z,this._getTransform)}_getTransform(){var w,V;const G=this._cache.get(z)||new i.Transform;G.reset();const B=this.x(),F=this.y(),$=s.Konva.getAngle(this.rotation()),rt=(w=this.attrs.scaleX)!==null&&w!==void 0?w:1,q=(V=this.attrs.scaleY)!==null&&V!==void 0?V:1,Q=this.attrs.skewX||0,tt=this.attrs.skewY||0,nt=this.attrs.offsetX||0,ht=this.attrs.offsetY||0;return(B!==0||F!==0)&&G.translate(B,F),$!==0&&G.rotate($),(Q!==0||tt!==0)&&G.skew(Q,tt),(rt!==1||q!==1)&&G.scale(rt,q),(nt!==0||ht!==0)&&G.translate(-1*nt,-1*ht),G.dirty=!1,G}clone(w){let V=i.Util.cloneObject(this.attrs),G,B,F,$,rt;for(G in w)V[G]=w[G];const q=new this.constructor(V);for(G in this.eventListeners)for(B=this.eventListeners[G],F=B.length,$=0;$<F;$++)rt=B[$],rt.name.indexOf(b)<0&&(q.eventListeners[G]||(q.eventListeners[G]=[]),q.eventListeners[G].push(rt));return q}_toKonvaCanvas(w){w=w||{};const V=this.getClientRect(),G=this.getStage(),B=w.x!==void 0?w.x:Math.floor(V.x),F=w.y!==void 0?w.y:Math.floor(V.y),$=w.pixelRatio||1,rt=new n.SceneCanvas({width:w.width||Math.ceil(V.width)||(G?G.width():0),height:w.height||Math.ceil(V.height)||(G?G.height():0),pixelRatio:$}),q=rt.getContext(),Q=new n.SceneCanvas({width:rt.width/rt.pixelRatio+Math.abs(B),height:rt.height/rt.pixelRatio+Math.abs(F),pixelRatio:rt.pixelRatio});return w.imageSmoothingEnabled===!1&&(q._context.imageSmoothingEnabled=!1),q.save(),(B||F)&&q.translate(-1*B,-1*F),this.drawScene(rt,void 0,Q),q.restore(),rt}toCanvas(w){return this._toKonvaCanvas(w)._canvas}toDataURL(w){w=w||{};const V=w.mimeType||null,G=w.quality||null,B=this._toKonvaCanvas(w).toDataURL(V,G);return w.callback&&w.callback(B),B}toImage(w){return new Promise((V,G)=>{try{const B=w==null?void 0:w.callback;B&&delete w.callback,i.Util._urlToImage(this.toDataURL(w),function(F){V(F),B==null||B(F)})}catch(B){G(B)}})}toBlob(w){return new Promise((V,G)=>{try{const B=w==null?void 0:w.callback;B&&delete w.callback,this.toCanvas(w).toBlob(F=>{V(F),B==null||B(F)},w==null?void 0:w.mimeType,w==null?void 0:w.quality)}catch(B){G(B)}})}setSize(w){return this.width(w.width),this.height(w.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.Konva.dragDistance}_off(w,V,G){let B=this.eventListeners[w],F,$,rt;for(F=0;F<B.length;F++)if($=B[F].name,rt=B[F].handler,($!=="konva"||V==="konva")&&(!V||$===V)&&(!G||G===rt)){if(B.splice(F,1),B.length===0){delete this.eventListeners[w];break}F--}}_fireChangeEvent(w,V,G){this._fire(w+S,{oldVal:V,newVal:G})}addName(w){if(!this.hasName(w)){const V=this.name(),G=V?V+" "+w:w;this.name(G)}return this}hasName(w){if(!w)return!1;const V=this.name();return V?(V||"").split(/\s/g).indexOf(w)!==-1:!1}removeName(w){const V=(this.name()||"").split(/\s/g),G=V.indexOf(w);return G!==-1&&(V.splice(G,1),this.name(V.join(" "))),this}setAttr(w,V){const G=this[L+i.Util._capitalize(w)];return i.Util._isFunction(G)?G.call(this,V):this._setAttr(w,V),this}_requestDraw(){if(s.Konva.autoDrawEnabled){const w=this.getLayer()||this.getStage();w==null||w.batchDraw()}}_setAttr(w,V){const G=this.attrs[w];G===V&&!i.Util.isObject(V)||(V==null?delete this.attrs[w]:this.attrs[w]=V,this._shouldFireChangeEvents&&this._fireChangeEvent(w,G,V),this._requestDraw())}_setComponentAttr(w,V,G){let B;G!==void 0&&(B=this.attrs[w],B||(this.attrs[w]=this.getAttr(w)),this.attrs[w][V]=G,this._fireChangeEvent(w,B,G))}_fireAndBubble(w,V,G){if(V&&this.nodeType===T&&(V.target=this),!((w===M||w===D)&&(G&&(this===G||this.isAncestorOf&&this.isAncestorOf(G))||this.nodeType==="Stage"&&!G))){this._fire(w,V);const F=(w===M||w===D)&&G&&G.isAncestorOf&&G.isAncestorOf(this)&&!G.isAncestorOf(this.parent);(V&&!V.cancelBubble||!V)&&this.parent&&this.parent.isListening()&&!F&&(G&&G.parent?this._fireAndBubble.call(this.parent,w,V,G):this._fireAndBubble.call(this.parent,w,V))}}_getProtoListeners(w){var V,G,B;const F=(V=this._cache.get(f))!==null&&V!==void 0?V:{};let $=F==null?void 0:F[w];if($===void 0){$=[];let rt=Object.getPrototypeOf(this);for(;rt;){const q=(B=(G=rt.eventListeners)===null||G===void 0?void 0:G[w])!==null&&B!==void 0?B:[];$.push(...q),rt=Object.getPrototypeOf(rt)}F[w]=$,this._cache.set(f,F)}return $}_fire(w,V){V=V||{},V.currentTarget=this,V.type=w;const G=this._getProtoListeners(w);if(G)for(var B=0;B<G.length;B++)G[B].handler.call(this,V);const F=this.eventListeners[w];if(F)for(var B=0;B<F.length;B++)F[B].handler.call(this,V)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(w){const V=w?w.pointerId:void 0,G=this.getStage(),B=this.getAbsolutePosition();if(!G)return;const F=G._getPointerById(V)||G._changedPointerPositions[0]||B;r.DD._dragElements.set(this._id,{node:this,startPointerPos:F,offset:{x:F.x-B.x,y:F.y-B.y},dragStatus:"ready",pointerId:V})}startDrag(w,V=!0){r.DD._dragElements.has(this._id)||this._createDragElement(w);const G=r.DD._dragElements.get(this._id);G.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:w&&w.evt},V)}_setDragPosition(w,V){const G=this.getStage()._getPointerById(V.pointerId);if(!G)return;let B={x:G.x-V.offset.x,y:G.y-V.offset.y};const F=this.dragBoundFunc();if(F!==void 0){const $=F.call(this,B,w);$?B=$:i.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==B.x||this._lastPos.y!==B.y)&&(this.setAbsolutePosition(B),this._requestDraw()),this._lastPos=B}stopDrag(w){const V=r.DD._dragElements.get(this._id);V&&(V.dragStatus="stopped"),r.DD._endDragBefore(w),r.DD._endDragAfter(w)}setDraggable(w){this._setAttr("draggable",w),this._dragChange()}isDragging(){const w=r.DD._dragElements.get(this._id);return w?w.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(w){if(!(!(w.evt.button!==void 0)||s.Konva.dragButtons.indexOf(w.evt.button)>=0)||this.isDragging())return;let B=!1;r.DD._dragElements.forEach(F=>{this.isAncestorOf(F.node)&&(B=!0)}),B||this._createDragElement(w)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const V=r.DD._dragElements.get(this._id),G=V&&V.dragStatus==="dragging",B=V&&V.dragStatus==="ready";G?this.stopDrag():B&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(w={x:0,y:0}){const V=this.getStage();if(!V)return!1;const G={x:-w.x,y:-w.y,width:V.width()+2*w.x,height:V.height()+2*w.y};return i.Util.haveIntersection(G,this.getClientRect())}static create(w,V){return i.Util._isString(w)&&(w=JSON.parse(w)),this._createNode(w,V)}static _createNode(w,V){let G=N_.prototype.getClassName.call(w),B=w.children,F,$,rt;V&&(w.attrs.container=V),s.Konva[G]||(i.Util.warn('Can not find a node with class name "'+G+'". Fallback to "Shape".'),G="Shape");const q=s.Konva[G];if(F=new q(w.attrs),B)for($=B.length,rt=0;rt<$;rt++)F.add(N_._createNode(B[rt]));return F}};Nd.Node=Y,Y.prototype.nodeType="Node",Y.prototype._attrsAffectingSize=[],Y.prototype.eventListeners={},Y.prototype.on.call(Y.prototype,H,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(z),this._clearSelfAndDescendantCache(g)}),Y.prototype.on.call(Y.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(K)}),Y.prototype.on.call(Y.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(E)}),Y.prototype.on.call(Y.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(h)});const X=t.Factory.addGetterSetter;return X(Y,"zIndex"),X(Y,"absolutePosition"),X(Y,"position"),X(Y,"x",0,(0,c.getNumberValidator)()),X(Y,"y",0,(0,c.getNumberValidator)()),X(Y,"globalCompositeOperation","source-over",(0,c.getStringValidator)()),X(Y,"opacity",1,(0,c.getNumberValidator)()),X(Y,"name","",(0,c.getStringValidator)()),X(Y,"id","",(0,c.getStringValidator)()),X(Y,"rotation",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(Y,"scale",["x","y"]),X(Y,"scaleX",1,(0,c.getNumberValidator)()),X(Y,"scaleY",1,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(Y,"skew",["x","y"]),X(Y,"skewX",0,(0,c.getNumberValidator)()),X(Y,"skewY",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(Y,"offset",["x","y"]),X(Y,"offsetX",0,(0,c.getNumberValidator)()),X(Y,"offsetY",0,(0,c.getNumberValidator)()),X(Y,"dragDistance",void 0,(0,c.getNumberValidator)()),X(Y,"width",0,(0,c.getNumberValidator)()),X(Y,"height",0,(0,c.getNumberValidator)()),X(Y,"listening",!0,(0,c.getBooleanValidator)()),X(Y,"preventDefault",!0,(0,c.getBooleanValidator)()),X(Y,"filters",void 0,function(J){return this._filterUpToDate=!1,J}),X(Y,"visible",!0,(0,c.getBooleanValidator)()),X(Y,"transformsEnabled","all",(0,c.getStringValidator)()),X(Y,"size"),X(Y,"dragBoundFunc"),X(Y,"draggable",!1,(0,c.getBooleanValidator)()),t.Factory.backCompat(Y,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Nd}var wd={},kv;function Tm(){if(kv)return wd;kv=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.Container=void 0;const i=ye(),t=Ln(),n=Se();let s=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(c){if(!c)return this.children||[];const h=this.children||[],f=[];return h.forEach(function(g){c(g)&&f.push(g)}),f}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.destroy()}),this.children=[],this._requestDraw(),this}add(...c){if(c.length===0)return this;if(c.length>1){for(let f=0;f<c.length;f++)this.add(c[f]);return this}const h=c[0];return h.getParent()?(h.moveTo(this),this):(this._validateAdd(h),h.index=this.getChildren().length,h.parent=this,h._clearCaches(),this.getChildren().push(h),this._fire("add",{child:h}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(c){return this._generalFind(c,!1)}findOne(c){const h=this._generalFind(c,!0);return h.length>0?h[0]:void 0}_generalFind(c,h){const f=[];return this._descendants(g=>{const p=g._isMatch(c);return p&&f.push(g),!!(p&&h)}),f}_descendants(c){let h=!1;const f=this.getChildren();for(const g of f){if(h=c(g),h)return!0;if(g.hasChildren()&&(h=g._descendants(c),h))return!0}return!1}toObject(){const c=t.Node.prototype.toObject.call(this);return c.children=[],this.getChildren().forEach(h=>{c.children.push(h.toObject())}),c}isAncestorOf(c){let h=c.getParent();for(;h;){if(h._id===this._id)return!0;h=h.getParent()}return!1}clone(c){const h=t.Node.prototype.clone.call(this,c);return this.getChildren().forEach(function(f){h.add(f.clone())}),h}getAllIntersections(c){const h=[];return this.find("Shape").forEach(f=>{f.isVisible()&&f.intersects(c)&&h.push(f)}),h}_clearSelfAndDescendantCache(c){var h;super._clearSelfAndDescendantCache(c),!this.isCached()&&((h=this.children)===null||h===void 0||h.forEach(function(f){f._clearSelfAndDescendantCache(c)}))}_setChildrenIndices(){var c;(c=this.children)===null||c===void 0||c.forEach(function(h,f){h.index=f}),this._requestDraw()}drawScene(c,h,f){const g=this.getLayer(),p=c||g&&g.getCanvas(),_=p&&p.getContext(),S=this._getCanvasCache(),x=S&&S.scene,b=p&&p.isCache;if(!this.isVisible()&&!b)return this;if(x){_.save();const E=this.getAbsoluteTransform(h).getMatrix();_.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedSceneCanvas(_),_.restore()}else this._drawChildren("drawScene",p,h,f);return this}drawHit(c,h){if(!this.shouldDrawHit(h))return this;const f=this.getLayer(),g=c||f&&f.hitCanvas,p=g&&g.getContext(),_=this._getCanvasCache();if(_&&_.hit){p.save();const x=this.getAbsoluteTransform(h).getMatrix();p.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedHitCanvas(p),p.restore()}else this._drawChildren("drawHit",g,h);return this}_drawChildren(c,h,f,g){var p;const _=h&&h.getContext(),S=this.clipWidth(),x=this.clipHeight(),b=this.clipFunc(),E=typeof S=="number"&&typeof x=="number"||b,M=f===this;if(E){_.save();const L=this.getAbsoluteTransform(f);let T=L.getMatrix();_.transform(T[0],T[1],T[2],T[3],T[4],T[5]),_.beginPath();let A;if(b)A=b.call(this,_,this);else{const N=this.clipX(),z=this.clipY();_.rect(N||0,z||0,S,x)}_.clip.apply(_,A),T=L.copy().invert().getMatrix(),_.transform(T[0],T[1],T[2],T[3],T[4],T[5])}const D=!M&&this.globalCompositeOperation()!=="source-over"&&c==="drawScene";D&&(_.save(),_._applyGlobalCompositeOperation(this)),(p=this.children)===null||p===void 0||p.forEach(function(L){L[c](h,f,g)}),D&&_.restore(),E&&_.restore()}getClientRect(c={}){var h;const f=c.skipTransform,g=c.relativeTo;let p,_,S,x,b={x:1/0,y:1/0,width:0,height:0};const E=this;(h=this.children)===null||h===void 0||h.forEach(function(L){if(!L.visible())return;const T=L.getClientRect({relativeTo:E,skipShadow:c.skipShadow,skipStroke:c.skipStroke});T.width===0&&T.height===0||(p===void 0?(p=T.x,_=T.y,S=T.x+T.width,x=T.y+T.height):(p=Math.min(p,T.x),_=Math.min(_,T.y),S=Math.max(S,T.x+T.width),x=Math.max(x,T.y+T.height)))});const M=this.find("Shape");let D=!1;for(let L=0;L<M.length;L++)if(M[L]._isVisible(this)){D=!0;break}return D&&p!==void 0?b={x:p,y:_,width:S-p,height:x-_}:b={x:0,y:0,width:0,height:0},f?b:this._transformedRect(b,g)}};return wd.Container=s,i.Factory.addComponentsGetterSetter(s,"clip",["x","y","width","height"]),i.Factory.addGetterSetter(s,"clipX",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"clipY",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"clipWidth",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"clipHeight",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"clipFunc"),wd}var $p={},Do={},Kv;function VS(){if(Kv)return Do;Kv=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.getCapturedShape=s,Do.createEvent=r,Do.hasPointerCapture=c,Do.setPointerCapture=h,Do.releaseCapture=f;const i=he(),t=new Map,n=i.Konva._global.PointerEvent!==void 0;function s(g){return t.get(g)}function r(g){return{evt:g,pointerId:g.pointerId}}function c(g,p){return t.get(g)===p}function h(g,p){f(g),p.getStage()&&(t.set(g,p),n&&p._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))}function f(g,p){const _=t.get(g);if(!_)return;const S=_.getStage();S&&S.content,t.delete(g),n&&_._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}return Do}var Zv;function Y9(){return Zv||(Zv=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Stage=i.stages=void 0;const t=Cn(),n=ye(),s=Tm(),r=he(),c=Rm(),h=x2(),f=he(),g=VS(),p="Stage",_="string",S="px",x="mouseout",b="mouseleave",E="mouseover",M="mouseenter",D="mousemove",L="mousedown",T="mouseup",A="pointermove",N="pointerdown",z="pointerup",I="pointercancel",K="lostpointercapture",H="pointerout",j="pointerleave",Y="pointerover",X="pointerenter",J="contextmenu",w="touchstart",V="touchend",G="touchmove",B="touchcancel",F="wheel",$=5,rt=[[M,"_pointerenter"],[L,"_pointerdown"],[D,"_pointermove"],[T,"_pointerup"],[b,"_pointerleave"],[w,"_pointerdown"],[G,"_pointermove"],[V,"_pointerup"],[B,"_pointercancel"],[E,"_pointerover"],[F,"_wheel"],[J,"_contextmenu"],[N,"_pointerdown"],[A,"_pointermove"],[z,"_pointerup"],[I,"_pointercancel"],[K,"_lostpointercapture"]],q={mouse:{[H]:x,[j]:b,[Y]:E,[X]:M,[A]:D,[N]:L,[z]:T,[I]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[H]:"touchout",[j]:"touchleave",[Y]:"touchover",[X]:"touchenter",[A]:G,[N]:w,[z]:V,[I]:B,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[H]:H,[j]:j,[Y]:Y,[X]:X,[A]:A,[N]:N,[z]:z,[I]:I,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Q=St=>St.indexOf("pointer")>=0?"pointer":St.indexOf("touch")>=0?"touch":"mouse",tt=St=>{const W=Q(St);if(W==="pointer")return r.Konva.pointerEventsEnabled&&q.pointer;if(W==="touch")return q.touch;if(W==="mouse")return q.mouse};function nt(St={}){return(St.clipFunc||St.clipWidth||St.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),St}const ht="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";i.stages=[];class vt extends s.Container{constructor(W){super(nt(W)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),i.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{nt(this.attrs)}),this._checkVisibility()}_validateAdd(W){const Z=W.getType()==="Layer",dt=W.getType()==="FastLayer";Z||dt||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const W=this.visible()?"":"none";this.content.style.display=W}setContainer(W){if(typeof W===_){if(W.charAt(0)==="."){const dt=W.slice(1);W=document.getElementsByClassName(dt)[0]}else{var Z;W.charAt(0)!=="#"?Z=W:Z=W.slice(1),W=document.getElementById(Z)}if(!W)throw"Can not find container in document with id "+Z}return this._setAttr("container",W),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),W.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const W=this.children,Z=W.length;for(let dt=0;dt<Z;dt++)W[dt].clear();return this}clone(W){return W||(W={}),W.container=typeof document<"u"&&document.createElement("div"),s.Container.prototype.clone.call(this,W)}destroy(){super.destroy();const W=this.content;W&&t.Util._isInDocument(W)&&this.container().removeChild(W);const Z=i.stages.indexOf(this);return Z>-1&&i.stages.splice(Z,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const W=this._pointerPositions[0]||this._changedPointerPositions[0];return W?{x:W.x,y:W.y}:(t.Util.warn(ht),null)}_getPointerById(W){return this._pointerPositions.find(Z=>Z.id===W)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(W){W=W||{},W.x=W.x||0,W.y=W.y||0,W.width=W.width||this.width(),W.height=W.height||this.height();const Z=new c.SceneCanvas({width:W.width,height:W.height,pixelRatio:W.pixelRatio||1}),dt=Z.getContext()._context,Et=this.children;return(W.x||W.y)&&dt.translate(-1*W.x,-1*W.y),Et.forEach(function(Tt){if(!Tt.isVisible())return;const Ot=Tt._toKonvaCanvas(W);dt.drawImage(Ot._canvas,W.x,W.y,Ot.getWidth()/Ot.getPixelRatio(),Ot.getHeight()/Ot.getPixelRatio())}),Z}getIntersection(W){if(!W)return null;const Z=this.children,dt=Z.length,Et=dt-1;for(let Tt=Et;Tt>=0;Tt--){const Ot=Z[Tt].getIntersection(W);if(Ot)return Ot}return null}_resizeDOM(){const W=this.width(),Z=this.height();this.content&&(this.content.style.width=W+S,this.content.style.height=Z+S),this.bufferCanvas.setSize(W,Z),this.bufferHitCanvas.setSize(W,Z),this.children.forEach(dt=>{dt.setSize({width:W,height:Z}),dt.draw()})}add(W,...Z){if(arguments.length>1){for(let Et=0;Et<arguments.length;Et++)this.add(arguments[Et]);return this}super.add(W);const dt=this.children.length;return dt>$&&t.Util.warn("The stage has "+dt+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),W.setSize({width:this.width(),height:this.height()}),W.draw(),r.Konva.isBrowser&&this.content.appendChild(W.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(W){return g.hasPointerCapture(W,this)}setPointerCapture(W){g.setPointerCapture(W,this)}releaseCapture(W){g.releaseCapture(W,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&rt.forEach(([W,Z])=>{this.content.addEventListener(W,dt=>{this[Z](dt)},{passive:!1})})}_pointerenter(W){this.setPointersPositions(W);const Z=tt(W.type);Z&&this._fire(Z.pointerenter,{evt:W,target:this,currentTarget:this})}_pointerover(W){this.setPointersPositions(W);const Z=tt(W.type);Z&&this._fire(Z.pointerover,{evt:W,target:this,currentTarget:this})}_getTargetShape(W){let Z=this[W+"targetShape"];return Z&&!Z.getStage()&&(Z=null),Z}_pointerleave(W){const Z=tt(W.type),dt=Q(W.type);if(!Z)return;this.setPointersPositions(W);const Et=this._getTargetShape(dt),Tt=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;Et&&Tt?(Et._fireAndBubble(Z.pointerout,{evt:W}),Et._fireAndBubble(Z.pointerleave,{evt:W}),this._fire(Z.pointerleave,{evt:W,target:this,currentTarget:this}),this[dt+"targetShape"]=null):Tt&&(this._fire(Z.pointerleave,{evt:W,target:this,currentTarget:this}),this._fire(Z.pointerout,{evt:W,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(W){const Z=tt(W.type),dt=Q(W.type);if(!Z)return;this.setPointersPositions(W);let Et=!1;this._changedPointerPositions.forEach(Tt=>{const Ot=this.getIntersection(Tt);if(h.DD.justDragged=!1,r.Konva["_"+dt+"ListenClick"]=!0,!Ot||!Ot.isListening()){this[dt+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&Ot.setPointerCapture(Tt.id),this[dt+"ClickStartShape"]=Ot,Ot._fireAndBubble(Z.pointerdown,{evt:W,pointerId:Tt.id}),Et=!0;const Kt=W.type.indexOf("touch")>=0;Ot.preventDefault()&&W.cancelable&&Kt&&W.preventDefault()}),Et||this._fire(Z.pointerdown,{evt:W,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(W){const Z=tt(W.type),dt=Q(W.type);if(!Z||(r.Konva.isDragging()&&h.DD.node.preventDefault()&&W.cancelable&&W.preventDefault(),this.setPointersPositions(W),!(!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled)))return;const Tt={};let Ot=!1;const Kt=this._getTargetShape(dt);this._changedPointerPositions.forEach(re=>{const Ht=g.getCapturedShape(re.id)||this.getIntersection(re),Ue=re.id,Qt={evt:W,pointerId:Ue},Ve=Kt!==Ht;if(Ve&&Kt&&(Kt._fireAndBubble(Z.pointerout,{...Qt},Ht),Kt._fireAndBubble(Z.pointerleave,{...Qt},Ht)),Ht){if(Tt[Ht._id])return;Tt[Ht._id]=!0}Ht&&Ht.isListening()?(Ot=!0,Ve&&(Ht._fireAndBubble(Z.pointerover,{...Qt},Kt),Ht._fireAndBubble(Z.pointerenter,{...Qt},Kt),this[dt+"targetShape"]=Ht),Ht._fireAndBubble(Z.pointermove,{...Qt})):Kt&&(this._fire(Z.pointerover,{evt:W,target:this,currentTarget:this,pointerId:Ue}),this[dt+"targetShape"]=null)}),Ot||this._fire(Z.pointermove,{evt:W,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(W){const Z=tt(W.type),dt=Q(W.type);if(!Z)return;this.setPointersPositions(W);const Et=this[dt+"ClickStartShape"],Tt=this[dt+"ClickEndShape"],Ot={};let Kt=!1;this._changedPointerPositions.forEach(re=>{const Ht=g.getCapturedShape(re.id)||this.getIntersection(re);if(Ht){if(Ht.releaseCapture(re.id),Ot[Ht._id])return;Ot[Ht._id]=!0}const Ue=re.id,Qt={evt:W,pointerId:Ue};let Ve=!1;r.Konva["_"+dt+"InDblClickWindow"]?(Ve=!0,clearTimeout(this[dt+"DblTimeout"])):h.DD.justDragged||(r.Konva["_"+dt+"InDblClickWindow"]=!0,clearTimeout(this[dt+"DblTimeout"])),this[dt+"DblTimeout"]=setTimeout(function(){r.Konva["_"+dt+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),Ht&&Ht.isListening()?(Kt=!0,this[dt+"ClickEndShape"]=Ht,Ht._fireAndBubble(Z.pointerup,{...Qt}),r.Konva["_"+dt+"ListenClick"]&&Et&&Et===Ht&&(Ht._fireAndBubble(Z.pointerclick,{...Qt}),Ve&&Tt&&Tt===Ht&&Ht._fireAndBubble(Z.pointerdblclick,{...Qt}))):(this[dt+"ClickEndShape"]=null,r.Konva["_"+dt+"ListenClick"]&&this._fire(Z.pointerclick,{evt:W,target:this,currentTarget:this,pointerId:Ue}),Ve&&this._fire(Z.pointerdblclick,{evt:W,target:this,currentTarget:this,pointerId:Ue}))}),Kt||this._fire(Z.pointerup,{evt:W,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+dt+"ListenClick"]=!1,W.cancelable&&dt!=="touch"&&dt!=="pointer"&&W.preventDefault()}_contextmenu(W){this.setPointersPositions(W);const Z=this.getIntersection(this.getPointerPosition());Z&&Z.isListening()?Z._fireAndBubble(J,{evt:W}):this._fire(J,{evt:W,target:this,currentTarget:this})}_wheel(W){this.setPointersPositions(W);const Z=this.getIntersection(this.getPointerPosition());Z&&Z.isListening()?Z._fireAndBubble(F,{evt:W}):this._fire(F,{evt:W,target:this,currentTarget:this})}_pointercancel(W){this.setPointersPositions(W);const Z=g.getCapturedShape(W.pointerId)||this.getIntersection(this.getPointerPosition());Z&&Z._fireAndBubble(z,g.createEvent(W)),g.releaseCapture(W.pointerId)}_lostpointercapture(W){g.releaseCapture(W.pointerId)}setPointersPositions(W){const Z=this._getContentPosition();let dt=null,Et=null;W=W||window.event,W.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(W.touches,Tt=>{this._pointerPositions.push({id:Tt.identifier,x:(Tt.clientX-Z.left)/Z.scaleX,y:(Tt.clientY-Z.top)/Z.scaleY})}),Array.prototype.forEach.call(W.changedTouches||W.touches,Tt=>{this._changedPointerPositions.push({id:Tt.identifier,x:(Tt.clientX-Z.left)/Z.scaleX,y:(Tt.clientY-Z.top)/Z.scaleY})})):(dt=(W.clientX-Z.left)/Z.scaleX,Et=(W.clientY-Z.top)/Z.scaleY,this.pointerPos={x:dt,y:Et},this._pointerPositions=[{x:dt,y:Et,id:t.Util._getFirstPointerId(W)}],this._changedPointerPositions=[{x:dt,y:Et,id:t.Util._getFirstPointerId(W)}])}_setPointerPosition(W){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(W)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const W=this.content.getBoundingClientRect();return{top:W.top,left:W.left,scaleX:W.width/this.content.clientWidth||1,scaleY:W.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new c.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!r.Konva.isBrowser)return;const W=this.container();if(!W)throw"Stage has no container. A container is required.";W.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),W.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(W){W.batchDraw()}),this}}i.Stage=vt,vt.prototype.nodeType=p,(0,f._registerNode)(vt),n.Factory.addGetterSetter(vt,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{i.stages.forEach(St=>{St.batchDraw()})})}($p)),$p}var Ld={},t_={},Qv;function mi(){return Qv||(Qv=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Shape=i.shapes=void 0;const t=he(),n=Cn(),s=ye(),r=Ln(),c=Se(),h=he(),f=VS(),g="hasShadow",p="shadowRGBA",_="patternImage",S="linearGradient",x="radialGradient";let b;function E(){return b||(b=n.Util.createCanvasElement().getContext("2d"),b)}i.shapes={};function M(j){const Y=this.attrs.fillRule;Y?j.fill(Y):j.fill()}function D(j){j.stroke()}function L(j){const Y=this.attrs.fillRule;Y?j.fill(Y):j.fill()}function T(j){j.stroke()}function A(){this._clearCache(g)}function N(){this._clearCache(p)}function z(){this._clearCache(_)}function I(){this._clearCache(S)}function K(){this._clearCache(x)}class H extends r.Node{constructor(Y){super(Y);let X;for(;X=n.Util.getRandomColor(),!(X&&!(X in i.shapes)););this.colorKey=X,i.shapes[X]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(g,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(_,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const X=E().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(X&&X.setTransform){const J=new n.Transform;J.translate(this.fillPatternX(),this.fillPatternY()),J.rotate(t.Konva.getAngle(this.fillPatternRotation())),J.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),J.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const w=J.getMatrix(),V=typeof DOMMatrix>"u"?{a:w[0],b:w[1],c:w[2],d:w[3],e:w[4],f:w[5]}:new DOMMatrix(w);X.setTransform(V)}return X}}_getLinearGradient(){return this._getCache(S,this.__getLinearGradient)}__getLinearGradient(){const Y=this.fillLinearGradientColorStops();if(Y){const X=E(),J=this.fillLinearGradientStartPoint(),w=this.fillLinearGradientEndPoint(),V=X.createLinearGradient(J.x,J.y,w.x,w.y);for(let G=0;G<Y.length;G+=2)V.addColorStop(Y[G],Y[G+1]);return V}}_getRadialGradient(){return this._getCache(x,this.__getRadialGradient)}__getRadialGradient(){const Y=this.fillRadialGradientColorStops();if(Y){const X=E(),J=this.fillRadialGradientStartPoint(),w=this.fillRadialGradientEndPoint(),V=X.createRadialGradient(J.x,J.y,this.fillRadialGradientStartRadius(),w.x,w.y,this.fillRadialGradientEndRadius());for(let G=0;G<Y.length;G+=2)V.addColorStop(Y[G],Y[G+1]);return V}}getShadowRGBA(){return this._getCache(p,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const Y=n.Util.colorToRGBA(this.shadowColor());if(Y)return"rgba("+Y.r+","+Y.g+","+Y.b+","+Y.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const Y=this.hitStrokeWidth();return Y==="auto"?this.hasStroke():this.strokeEnabled()&&!!Y}intersects(Y){const X=this.getStage();if(!X)return!1;const J=X.bufferHitCanvas;return J.getContext().clear(),this.drawHit(J,void 0,!0),J.context.getImageData(Math.round(Y.x),Math.round(Y.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete i.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(Y){var X;if(!((X=this.attrs.perfectDrawEnabled)!==null&&X!==void 0?X:!0))return!1;const w=Y||this.hasFill(),V=this.hasStroke(),G=this.getAbsoluteOpacity()!==1;if(w&&V&&G)return!0;const B=this.hasShadow(),F=this.shadowForStrokeEnabled();return!!(w&&V&&B&&F)}setStrokeHitEnabled(Y){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),Y?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const Y=this.size();return{x:this._centroid?-Y.width/2:0,y:this._centroid?-Y.height/2:0,width:Y.width,height:Y.height}}getClientRect(Y={}){let X=!1,J=this.getParent();for(;J;){if(J.isCached()){X=!0;break}J=J.getParent()}const w=Y.skipTransform,V=Y.relativeTo||X&&this.getStage()||void 0,G=this.getSelfRect(),F=!Y.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,$=G.width+F,rt=G.height+F,q=!Y.skipShadow&&this.hasShadow(),Q=q?this.shadowOffsetX():0,tt=q?this.shadowOffsetY():0,nt=$+Math.abs(Q),ht=rt+Math.abs(tt),vt=q&&this.shadowBlur()||0,St=nt+vt*2,W=ht+vt*2,Z={width:St,height:W,x:-(F/2+vt)+Math.min(Q,0)+G.x,y:-(F/2+vt)+Math.min(tt,0)+G.y};return w?Z:this._transformedRect(Z,V)}drawScene(Y,X,J){const w=this.getLayer();let V=Y||w.getCanvas(),G=V.getContext(),B=this._getCanvasCache(),F=this.getSceneFunc(),$=this.hasShadow(),rt,q;const Q=V.isCache,tt=X===this;if(!this.isVisible()&&!tt)return this;if(B){G.save();const ht=this.getAbsoluteTransform(X).getMatrix();return G.transform(ht[0],ht[1],ht[2],ht[3],ht[4],ht[5]),this._drawCachedSceneCanvas(G),G.restore(),this}if(!F)return this;if(G.save(),this._useBufferCanvas()&&!Q){rt=this.getStage();const ht=J||rt.bufferCanvas;q=ht.getContext(),q.clear(),q.save(),q._applyLineJoin(this);var nt=this.getAbsoluteTransform(X).getMatrix();q.transform(nt[0],nt[1],nt[2],nt[3],nt[4],nt[5]),F.call(this,q,this),q.restore();const vt=ht.pixelRatio;$&&G._applyShadow(this),G._applyOpacity(this),G._applyGlobalCompositeOperation(this),G.drawImage(ht._canvas,0,0,ht.width/vt,ht.height/vt)}else{if(G._applyLineJoin(this),!tt){var nt=this.getAbsoluteTransform(X).getMatrix();G.transform(nt[0],nt[1],nt[2],nt[3],nt[4],nt[5]),G._applyOpacity(this),G._applyGlobalCompositeOperation(this)}$&&G._applyShadow(this),F.call(this,G,this)}return G.restore(),this}drawHit(Y,X,J=!1){if(!this.shouldDrawHit(X,J))return this;const w=this.getLayer(),V=Y||w.hitCanvas,G=V&&V.getContext(),B=this.hitFunc()||this.sceneFunc(),F=this._getCanvasCache(),$=F&&F.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),$){G.save();const q=this.getAbsoluteTransform(X).getMatrix();return G.transform(q[0],q[1],q[2],q[3],q[4],q[5]),this._drawCachedHitCanvas(G),G.restore(),this}if(!B)return this;if(G.save(),G._applyLineJoin(this),!(this===X)){const q=this.getAbsoluteTransform(X).getMatrix();G.transform(q[0],q[1],q[2],q[3],q[4],q[5])}return B.call(this,G,this),G.restore(),this}drawHitFromCache(Y=0){const X=this._getCanvasCache(),J=this._getCachedSceneCanvas(),w=X.hit,V=w.getContext(),G=w.getWidth(),B=w.getHeight();V.clear(),V.drawImage(J._canvas,0,0,G,B);try{const F=V.getImageData(0,0,G,B),$=F.data,rt=$.length,q=n.Util._hexToRgb(this.colorKey);for(let Q=0;Q<rt;Q+=4)$[Q+3]>Y?($[Q]=q.r,$[Q+1]=q.g,$[Q+2]=q.b,$[Q+3]=255):$[Q+3]=0;V.putImageData(F,0,0)}catch(F){n.Util.error("Unable to draw hit graph from cached scene canvas. "+F.message)}return this}hasPointerCapture(Y){return f.hasPointerCapture(Y,this)}setPointerCapture(Y){f.setPointerCapture(Y,this)}releaseCapture(Y){f.releaseCapture(Y,this)}}i.Shape=H,H.prototype._fillFunc=M,H.prototype._strokeFunc=D,H.prototype._fillFuncHit=L,H.prototype._strokeFuncHit=T,H.prototype._centroid=!1,H.prototype.nodeType="Shape",(0,h._registerNode)(H),H.prototype.eventListeners={},H.prototype.on.call(H.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",A),H.prototype.on.call(H.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",N),H.prototype.on.call(H.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",z),H.prototype.on.call(H.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",I),H.prototype.on.call(H.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",K),s.Factory.addGetterSetter(H,"stroke",void 0,(0,c.getStringOrGradientValidator)()),s.Factory.addGetterSetter(H,"strokeWidth",2,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(H,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(H,"hitStrokeWidth","auto",(0,c.getNumberOrAutoValidator)()),s.Factory.addGetterSetter(H,"strokeHitEnabled",!0,(0,c.getBooleanValidator)()),s.Factory.addGetterSetter(H,"perfectDrawEnabled",!0,(0,c.getBooleanValidator)()),s.Factory.addGetterSetter(H,"shadowForStrokeEnabled",!0,(0,c.getBooleanValidator)()),s.Factory.addGetterSetter(H,"lineJoin"),s.Factory.addGetterSetter(H,"lineCap"),s.Factory.addGetterSetter(H,"sceneFunc"),s.Factory.addGetterSetter(H,"hitFunc"),s.Factory.addGetterSetter(H,"dash"),s.Factory.addGetterSetter(H,"dashOffset",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(H,"shadowColor",void 0,(0,c.getStringValidator)()),s.Factory.addGetterSetter(H,"shadowBlur",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(H,"shadowOpacity",1,(0,c.getNumberValidator)()),s.Factory.addComponentsGetterSetter(H,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(H,"shadowOffsetX",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(H,"shadowOffsetY",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(H,"fillPatternImage"),s.Factory.addGetterSetter(H,"fill",void 0,(0,c.getStringOrGradientValidator)()),s.Factory.addGetterSetter(H,"fillPatternX",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(H,"fillPatternY",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(H,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(H,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(H,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(H,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(H,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(H,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(H,"fillEnabled",!0),s.Factory.addGetterSetter(H,"strokeEnabled",!0),s.Factory.addGetterSetter(H,"shadowEnabled",!0),s.Factory.addGetterSetter(H,"dashEnabled",!0),s.Factory.addGetterSetter(H,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(H,"fillPriority","color"),s.Factory.addComponentsGetterSetter(H,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(H,"fillPatternOffsetX",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(H,"fillPatternOffsetY",0,(0,c.getNumberValidator)()),s.Factory.addComponentsGetterSetter(H,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(H,"fillPatternScaleX",1,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(H,"fillPatternScaleY",1,(0,c.getNumberValidator)()),s.Factory.addComponentsGetterSetter(H,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(H,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(H,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(H,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(H,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(H,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(H,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(H,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(H,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(H,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(H,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(H,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(H,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(H,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(H,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(H,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(H,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(H,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(H,"fillPatternRotation",0),s.Factory.addGetterSetter(H,"fillRule",void 0,(0,c.getStringValidator)()),s.Factory.backCompat(H,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(t_)),t_}var Wv;function qS(){if(Wv)return Ld;Wv=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.Layer=void 0;const i=Cn(),t=Tm(),n=Ln(),s=ye(),r=Rm(),c=Se(),h=mi(),f=he(),g="#",p="beforeDraw",_="draw",S=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],x=S.length;class b extends t.Container{constructor(M){super(M),this.canvas=new r.SceneCanvas,this.hitCanvas=new r.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(M){return this.getContext().clear(M),this.getHitCanvas().getContext().clear(M),this}setZIndex(M){super.setZIndex(M);const D=this.getStage();return D&&D.content&&(D.content.removeChild(this.getNativeCanvasElement()),M<D.children.length-1?D.content.insertBefore(this.getNativeCanvasElement(),D.children[M+1].getCanvas()._canvas):D.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const M=this.getStage();return M&&M.content&&(M.content.removeChild(this.getNativeCanvasElement()),M.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const D=this.getStage();return!D||!D.content?!1:(D.content.removeChild(this.getNativeCanvasElement()),this.index<D.children.length-1?D.content.insertBefore(this.getNativeCanvasElement(),D.children[this.index+1].getCanvas()._canvas):D.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const M=this.getStage();if(M){const D=M.children;M.content&&(M.content.removeChild(this.getNativeCanvasElement()),M.content.insertBefore(this.getNativeCanvasElement(),D[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const M=this.getStage();if(M){const D=M.children;M.content&&(M.content.removeChild(this.getNativeCanvasElement()),M.content.insertBefore(this.getNativeCanvasElement(),D[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const M=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),M&&M.parentNode&&i.Util._isInDocument(M)&&M.parentNode.removeChild(M),this}getStage(){return this.parent}setSize({width:M,height:D}){return this.canvas.setSize(M,D),this.hitCanvas.setSize(M,D),this._setSmoothEnabled(),this}_validateAdd(M){const D=M.getType();D!=="Group"&&D!=="Shape"&&i.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(M){return M=M||{},M.width=M.width||this.getWidth(),M.height=M.height||this.getHeight(),M.x=M.x!==void 0?M.x:this.x(),M.y=M.y!==void 0?M.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,M)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){i.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){i.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,i.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(M){if(!this.isListening()||!this.isVisible())return null;let D=1,L=!1;for(;;){for(let T=0;T<x;T++){const A=S[T],N=this._getIntersection({x:M.x+A.x*D,y:M.y+A.y*D}),z=N.shape;if(z)return z;if(L=!!N.antialiased,!N.antialiased)break}if(L)D+=1;else return null}}_getIntersection(M){const D=this.hitCanvas.pixelRatio,L=this.hitCanvas.context.getImageData(Math.round(M.x*D),Math.round(M.y*D),1,1).data,T=L[3];if(T===255){const A=i.Util._rgbToHex(L[0],L[1],L[2]),N=h.shapes[g+A];return N?{shape:N}:{antialiased:!0}}else if(T>0)return{antialiased:!0};return{}}drawScene(M,D){const L=this.getLayer(),T=M||L&&L.getCanvas();return this._fire(p,{node:this}),this.clearBeforeDraw()&&T.getContext().clear(),t.Container.prototype.drawScene.call(this,T,D),this._fire(_,{node:this}),this}drawHit(M,D){const L=this.getLayer(),T=M||L&&L.hitCanvas;return L&&L.clearBeforeDraw()&&L.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,T,D),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(M){i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(M)}getHitGraphEnabled(M){return i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const M=this.parent;!!this.hitCanvas._canvas.parentNode?M.content.removeChild(this.hitCanvas._canvas):M.content.appendChild(this.hitCanvas._canvas)}destroy(){return i.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return Ld.Layer=b,b.prototype.nodeType="Layer",(0,f._registerNode)(b),s.Factory.addGetterSetter(b,"imageSmoothingEnabled",!0),s.Factory.addGetterSetter(b,"clearBeforeDraw",!0),s.Factory.addGetterSetter(b,"hitGraphEnabled",!0,(0,c.getBooleanValidator)()),Ld}var zd={},Jv;function V9(){if(Jv)return zd;Jv=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.FastLayer=void 0;const i=Cn(),t=qS(),n=he();let s=class extends t.Layer{constructor(c){super(c),this.listening(!1),i.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return zd.FastLayer=s,s.prototype.nodeType="FastLayer",(0,n._registerNode)(s),zd}var Gd={},$v;function b2(){if($v)return Gd;$v=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.Group=void 0;const i=Cn(),t=Tm(),n=he();let s=class extends t.Container{_validateAdd(c){const h=c.getType();h!=="Group"&&h!=="Shape"&&i.Util.throw("You may only add groups and shapes to groups.")}};return Gd.Group=s,s.prototype.nodeType="Group",(0,n._registerNode)(s),Gd}var Ud={},t3;function C2(){if(t3)return Ud;t3=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.Animation=void 0;const i=he(),t=Cn(),n=function(){return i.glob.performance&&i.glob.performance.now?function(){return i.glob.performance.now()}:function(){return new Date().getTime()}}();let s=class Ch{constructor(c,h){this.id=Ch.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=c,this.setLayers(h)}setLayers(c){let h=[];return c&&(h=Array.isArray(c)?c:[c]),this.layers=h,this}getLayers(){return this.layers}addLayer(c){const h=this.layers,f=h.length;for(let g=0;g<f;g++)if(h[g]._id===c._id)return!1;return this.layers.push(c),!0}isRunning(){const h=Ch.animations,f=h.length;for(let g=0;g<f;g++)if(h[g].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),Ch._addAnimation(this),this}stop(){return Ch._removeAnimation(this),this}_updateFrameObject(c){this.frame.timeDiff=c-this.frame.lastTime,this.frame.lastTime=c,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(c){this.animations.push(c),this._handleAnimation()}static _removeAnimation(c){const h=c.id,f=this.animations,g=f.length;for(let p=0;p<g;p++)if(f[p].id===h){this.animations.splice(p,1);break}}static _runFrames(){const c={},h=this.animations;for(let f=0;f<h.length;f++){const g=h[f],p=g.layers,_=g.func;g._updateFrameObject(n());const S=p.length;let x;if(_?x=_.call(g,g.frame)!==!1:x=!0,!!x)for(let b=0;b<S;b++){const E=p[b];E._id!==void 0&&(c[E._id]=E)}}for(const f in c)c.hasOwnProperty(f)&&c[f].batchDraw()}static _animationLoop(){const c=Ch;c.animations.length?(c._runFrames(),t.Util.requestAnimFrame(c._animationLoop)):c.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return Ud.Animation=s,s.animations=[],s.animIdCounter=0,s.animRunning=!1,Ud}var e_={},e3;function q9(){return e3||(e3=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Easings=i.Tween=void 0;const t=Cn(),n=C2(),s=Ln(),r=he(),c={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h=1,f=2,g=3,p=["fill","stroke","shadowColor"];let _=0;class S{constructor(E,M,D,L,T,A,N){this.prop=E,this.propFunc=M,this.begin=L,this._pos=L,this.duration=A,this._change=0,this.prevPos=0,this.yoyo=N,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=D,this._change=T-this.begin,this.pause()}fire(E){const M=this[E];M&&M()}setTime(E){E>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():E<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=E,this.update())}getTime(){return this._time}setPosition(E){this.prevPos=this._pos,this.propFunc(E),this._pos=E}getPosition(E){return E===void 0&&(E=this._time),this.func(E,this.begin,this._change,this.duration)}play(){this.state=f,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=g,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(E){this.pause(),this._time=E,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const E=this.getTimer()-this._startTime;this.state===f?this.setTime(E):this.state===g&&this.setTime(this.duration-E)}pause(){this.state=h,this.fire("onPause")}getTimer(){return new Date().getTime()}}class x{constructor(E){const M=this,D=E.node,L=D._id,T=E.easing||i.Easings.Linear,A=!!E.yoyo;let N,z;typeof E.duration>"u"?N=.3:E.duration===0?N=.001:N=E.duration,this.node=D,this._id=_++;const I=D.getLayer()||(D instanceof r.Konva.Stage?D.getLayers():null);I||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){M.tween.onEnterFrame()},I),this.tween=new S(z,function(K){M._tweenFunc(K)},T,0,1,N*1e3,A),this._addListeners(),x.attrs[L]||(x.attrs[L]={}),x.attrs[L][this._id]||(x.attrs[L][this._id]={}),x.tweens[L]||(x.tweens[L]={});for(z in E)c[z]===void 0&&this._addAttr(z,E[z]);this.reset(),this.onFinish=E.onFinish,this.onReset=E.onReset,this.onUpdate=E.onUpdate}_addAttr(E,M){const D=this.node,L=D._id;let T,A,N,z,I;const K=x.tweens[L][E];K&&delete x.attrs[L][K][E];let H=D.getAttr(E);if(t.Util._isArray(M))if(T=[],A=Math.max(M.length,H.length),E==="points"&&M.length!==H.length&&(M.length>H.length?(z=H,H=t.Util._prepareArrayForTween(H,M,D.closed())):(N=M,M=t.Util._prepareArrayForTween(M,H,D.closed()))),E.indexOf("fill")===0)for(let j=0;j<A;j++)if(j%2===0)T.push(M[j]-H[j]);else{const Y=t.Util.colorToRGBA(H[j]);I=t.Util.colorToRGBA(M[j]),H[j]=Y,T.push({r:I.r-Y.r,g:I.g-Y.g,b:I.b-Y.b,a:I.a-Y.a})}else for(let j=0;j<A;j++)T.push(M[j]-H[j]);else p.indexOf(E)!==-1?(H=t.Util.colorToRGBA(H),I=t.Util.colorToRGBA(M),T={r:I.r-H.r,g:I.g-H.g,b:I.b-H.b,a:I.a-H.a}):T=M-H;x.attrs[L][this._id][E]={start:H,diff:T,end:M,trueEnd:N,trueStart:z},x.tweens[L][E]=this._id}_tweenFunc(E){const M=this.node,D=x.attrs[M._id][this._id];let L,T,A,N,z,I,K,H;for(L in D){if(T=D[L],A=T.start,N=T.diff,H=T.end,t.Util._isArray(A))if(z=[],K=Math.max(A.length,H.length),L.indexOf("fill")===0)for(I=0;I<K;I++)I%2===0?z.push((A[I]||0)+N[I]*E):z.push("rgba("+Math.round(A[I].r+N[I].r*E)+","+Math.round(A[I].g+N[I].g*E)+","+Math.round(A[I].b+N[I].b*E)+","+(A[I].a+N[I].a*E)+")");else for(I=0;I<K;I++)z.push((A[I]||0)+N[I]*E);else p.indexOf(L)!==-1?z="rgba("+Math.round(A.r+N.r*E)+","+Math.round(A.g+N.g*E)+","+Math.round(A.b+N.b*E)+","+(A.a+N.a*E)+")":z=A+N*E;M.setAttr(L,z)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const E=this.node,M=x.attrs[E._id][this._id];M.points&&M.points.trueEnd&&E.setAttr("points",M.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const E=this.node,M=x.attrs[E._id][this._id];M.points&&M.points.trueStart&&E.points(M.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(E){return this.tween.seek(E*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const E=this.node._id,M=this._id,D=x.tweens[E];this.pause();for(const L in D)delete x.tweens[E][L];delete x.attrs[E][M]}}i.Tween=x,x.attrs={},x.tweens={},s.Node.prototype.to=function(b){const E=b.onFinish;b.node=this,b.onFinish=function(){this.destroy(),E&&E()},new x(b).play()},i.Easings={BackEaseIn(b,E,M,D){return M*(b/=D)*b*((1.70158+1)*b-1.70158)+E},BackEaseOut(b,E,M,D){return M*((b=b/D-1)*b*((1.70158+1)*b+1.70158)+1)+E},BackEaseInOut(b,E,M,D){let L=1.70158;return(b/=D/2)<1?M/2*(b*b*(((L*=1.525)+1)*b-L))+E:M/2*((b-=2)*b*(((L*=1.525)+1)*b+L)+2)+E},ElasticEaseIn(b,E,M,D,L,T){let A=0;return b===0?E:(b/=D)===1?E+M:(T||(T=D*.3),!L||L<Math.abs(M)?(L=M,A=T/4):A=T/(2*Math.PI)*Math.asin(M/L),-(L*Math.pow(2,10*(b-=1))*Math.sin((b*D-A)*(2*Math.PI)/T))+E)},ElasticEaseOut(b,E,M,D,L,T){let A=0;return b===0?E:(b/=D)===1?E+M:(T||(T=D*.3),!L||L<Math.abs(M)?(L=M,A=T/4):A=T/(2*Math.PI)*Math.asin(M/L),L*Math.pow(2,-10*b)*Math.sin((b*D-A)*(2*Math.PI)/T)+M+E)},ElasticEaseInOut(b,E,M,D,L,T){let A=0;return b===0?E:(b/=D/2)===2?E+M:(T||(T=D*(.3*1.5)),!L||L<Math.abs(M)?(L=M,A=T/4):A=T/(2*Math.PI)*Math.asin(M/L),b<1?-.5*(L*Math.pow(2,10*(b-=1))*Math.sin((b*D-A)*(2*Math.PI)/T))+E:L*Math.pow(2,-10*(b-=1))*Math.sin((b*D-A)*(2*Math.PI)/T)*.5+M+E)},BounceEaseOut(b,E,M,D){return(b/=D)<1/2.75?M*(7.5625*b*b)+E:b<2/2.75?M*(7.5625*(b-=1.5/2.75)*b+.75)+E:b<2.5/2.75?M*(7.5625*(b-=2.25/2.75)*b+.9375)+E:M*(7.5625*(b-=2.625/2.75)*b+.984375)+E},BounceEaseIn(b,E,M,D){return M-i.Easings.BounceEaseOut(D-b,0,M,D)+E},BounceEaseInOut(b,E,M,D){return b<D/2?i.Easings.BounceEaseIn(b*2,0,M,D)*.5+E:i.Easings.BounceEaseOut(b*2-D,0,M,D)*.5+M*.5+E},EaseIn(b,E,M,D){return M*(b/=D)*b+E},EaseOut(b,E,M,D){return-M*(b/=D)*(b-2)+E},EaseInOut(b,E,M,D){return(b/=D/2)<1?M/2*b*b+E:-M/2*(--b*(b-2)-1)+E},StrongEaseIn(b,E,M,D){return M*(b/=D)*b*b*b*b+E},StrongEaseOut(b,E,M,D){return M*((b=b/D-1)*b*b*b*b+1)+E},StrongEaseInOut(b,E,M,D){return(b/=D/2)<1?M/2*b*b*b*b*b+E:M/2*((b-=2)*b*b*b*b+2)+E},Linear(b,E,M,D){return M*b/D+E}}}(e_)),e_}var n3;function w_(){return n3||(n3=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Konva=void 0;const t=he(),n=Cn(),s=Ln(),r=Tm(),c=Y9(),h=qS(),f=V9(),g=b2(),p=x2(),_=mi(),S=C2(),x=q9(),b=YS(),E=Rm();i.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:s.Node,Container:r.Container,Stage:c.Stage,stages:c.stages,Layer:h.Layer,FastLayer:f.FastLayer,Group:g.Group,DD:p.DD,Shape:_.Shape,shapes:_.shapes,Animation:S.Animation,Tween:x.Tween,Easings:x.Easings,Context:b.Context,Canvas:E.Canvas}),i.default=i.Konva}(Kp)),Kp}var Bd={},i3;function F9(){if(i3)return Bd;i3=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.Arc=void 0;const i=ye(),t=mi(),n=he(),s=Se(),r=he();let c=class extends t.Shape{_sceneFunc(f){const g=n.Konva.getAngle(this.angle()),p=this.clockwise();f.beginPath(),f.arc(0,0,this.outerRadius(),0,g,p),f.arc(0,0,this.innerRadius(),g,0,!p),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(f){this.outerRadius(f/2)}setHeight(f){this.outerRadius(f/2)}getSelfRect(){const f=this.innerRadius(),g=this.outerRadius(),p=this.clockwise(),_=n.Konva.getAngle(p?360-this.angle():this.angle()),S=Math.cos(Math.min(_,Math.PI)),x=1,b=Math.sin(Math.min(Math.max(Math.PI,_),3*Math.PI/2)),E=Math.sin(Math.min(_,Math.PI/2)),M=S*(S>0?f:g),D=x*g,L=b*(b>0?f:g),T=E*(E>0?g:f);return{x:M,y:p?-1*T:L,width:D-M,height:T-L}}};return Bd.Arc=c,c.prototype._centroid=!0,c.prototype.className="Arc",c.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,r._registerNode)(c),i.Factory.addGetterSetter(c,"innerRadius",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(c,"outerRadius",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(c,"angle",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(c,"clockwise",!1,(0,s.getBooleanValidator)()),Bd}var Hd={},Id={},a3;function FS(){if(a3)return Id;a3=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.Line=void 0;const i=ye(),t=he(),n=mi(),s=Se();function r(f,g,p,_,S,x,b){const E=Math.sqrt(Math.pow(p-f,2)+Math.pow(_-g,2)),M=Math.sqrt(Math.pow(S-p,2)+Math.pow(x-_,2)),D=b*E/(E+M),L=b*M/(E+M),T=p-D*(S-f),A=_-D*(x-g),N=p+L*(S-f),z=_+L*(x-g);return[T,A,N,z]}function c(f,g){const p=f.length,_=[];for(let S=2;S<p-2;S+=2){const x=r(f[S-2],f[S-1],f[S],f[S+1],f[S+2],f[S+3],g);isNaN(x[0])||(_.push(x[0]),_.push(x[1]),_.push(f[S]),_.push(f[S+1]),_.push(x[2]),_.push(x[3]))}return _}class h extends n.Shape{constructor(g){super(g),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(g){let p=this.points(),_=p.length,S=this.tension(),x=this.closed(),b=this.bezier(),E,M,D;if(_){if(g.beginPath(),g.moveTo(p[0],p[1]),S!==0&&_>4){for(E=this.getTensionPoints(),M=E.length,D=x?0:4,x||g.quadraticCurveTo(E[0],E[1],E[2],E[3]);D<M-2;)g.bezierCurveTo(E[D++],E[D++],E[D++],E[D++],E[D++],E[D++]);x||g.quadraticCurveTo(E[M-2],E[M-1],p[_-2],p[_-1])}else if(b)for(D=2;D<_;)g.bezierCurveTo(p[D++],p[D++],p[D++],p[D++],p[D++],p[D++]);else for(D=2;D<_;D+=2)g.lineTo(p[D],p[D+1]);x?(g.closePath(),g.fillStrokeShape(this)):g.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():c(this.points(),this.tension())}_getTensionPointsClosed(){const g=this.points(),p=g.length,_=this.tension(),S=r(g[p-2],g[p-1],g[0],g[1],g[2],g[3],_),x=r(g[p-4],g[p-3],g[p-2],g[p-1],g[0],g[1],_),b=c(g,_);return[S[2],S[3]].concat(b).concat([x[0],x[1],g[p-2],g[p-1],x[2],x[3],S[0],S[1],g[0],g[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let g=this.points();if(g.length<4)return{x:g[0]||0,y:g[1]||0,width:0,height:0};this.tension()!==0?g=[g[0],g[1],...this._getTensionPoints(),g[g.length-2],g[g.length-1]]:g=this.points();let p=g[0],_=g[0],S=g[1],x=g[1],b,E;for(let M=0;M<g.length/2;M++)b=g[M*2],E=g[M*2+1],p=Math.min(p,b),_=Math.max(_,b),S=Math.min(S,E),x=Math.max(x,E);return{x:p,y:S,width:_-p,height:x-S}}}return Id.Line=h,h.prototype.className="Line",h.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(h),i.Factory.addGetterSetter(h,"closed",!1),i.Factory.addGetterSetter(h,"bezier",!1),i.Factory.addGetterSetter(h,"tension",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(h,"points",[],(0,s.getNumberArrayValidator)()),Id}var jd={},n_={},s3;function P9(){return s3||(s3=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.t2length=i.getQuadraticArcLength=i.getCubicArcLength=i.binomialCoefficients=i.cValues=i.tValues=void 0,i.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],i.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],i.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(h,f,g)=>{let p,_;const x=g/2;p=0;for(let b=0;b<20;b++)_=x*i.tValues[20][b]+x,p+=i.cValues[20][b]*s(h,f,_);return x*p};i.getCubicArcLength=t;const n=(h,f,g)=>{g===void 0&&(g=1);const p=h[0]-2*h[1]+h[2],_=f[0]-2*f[1]+f[2],S=2*h[1]-2*h[0],x=2*f[1]-2*f[0],b=4*(p*p+_*_),E=4*(p*S+_*x),M=S*S+x*x;if(b===0)return g*Math.sqrt(Math.pow(h[2]-h[0],2)+Math.pow(f[2]-f[0],2));const D=E/(2*b),L=M/b,T=g+D,A=L-D*D,N=T*T+A>0?Math.sqrt(T*T+A):0,z=D*D+A>0?Math.sqrt(D*D+A):0,I=D+Math.sqrt(D*D+A)!==0?A*Math.log(Math.abs((T+N)/(D+z))):0;return Math.sqrt(b)/2*(T*N-D*z+I)};i.getQuadraticArcLength=n;function s(h,f,g){const p=r(1,g,h),_=r(1,g,f),S=p*p+_*_;return Math.sqrt(S)}const r=(h,f,g)=>{const p=g.length-1;let _,S;if(p===0)return 0;if(h===0){S=0;for(let x=0;x<=p;x++)S+=i.binomialCoefficients[p][x]*Math.pow(1-f,p-x)*Math.pow(f,x)*g[x];return S}else{_=new Array(p);for(let x=0;x<p;x++)_[x]=p*(g[x+1]-g[x]);return r(h-1,f,_)}},c=(h,f,g)=>{let p=1,_=h/f,S=(h-g(_))/f,x=0;for(;p>.001;){const b=g(_+S),E=Math.abs(h-b)/f;if(E<p)p=E,_+=S;else{const M=g(_-S),D=Math.abs(h-M)/f;D<p?(p=D,_-=S):S/=2}if(x++,x>500)break}return _};i.t2length=c}(n_)),n_}var l3;function R2(){if(l3)return jd;l3=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.Path=void 0;const i=ye(),t=mi(),n=he(),s=P9();let r=class pa extends t.Shape{constructor(h){super(h),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=pa.parsePathData(this.data()),this.pathLength=pa.getPathLength(this.dataArray)}_sceneFunc(h){const f=this.dataArray;h.beginPath();let g=!1;for(let N=0;N<f.length;N++){const z=f[N].command,I=f[N].points;switch(z){case"L":h.lineTo(I[0],I[1]);break;case"M":h.moveTo(I[0],I[1]);break;case"C":h.bezierCurveTo(I[0],I[1],I[2],I[3],I[4],I[5]);break;case"Q":h.quadraticCurveTo(I[0],I[1],I[2],I[3]);break;case"A":var p=I[0],_=I[1],S=I[2],x=I[3],b=I[4],E=I[5],M=I[6],D=I[7],L=S>x?S:x,T=S>x?1:S/x,A=S>x?x/S:1;h.translate(p,_),h.rotate(M),h.scale(T,A),h.arc(0,0,L,b,b+E,1-D),h.scale(1/T,1/A),h.rotate(-M),h.translate(-p,-_);break;case"z":g=!0,h.closePath();break}}!g&&!this.hasFill()?h.strokeShape(this):h.fillStrokeShape(this)}getSelfRect(){let h=[];this.dataArray.forEach(function(b){if(b.command==="A"){const E=b.points[4],M=b.points[5],D=b.points[4]+M;let L=Math.PI/180;if(Math.abs(E-D)<L&&(L=Math.abs(E-D)),M<0)for(let T=E-L;T>D;T-=L){const A=pa.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],T,0);h.push(A.x,A.y)}else for(let T=E+L;T<D;T+=L){const A=pa.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],T,0);h.push(A.x,A.y)}}else if(b.command==="C")for(let E=0;E<=1;E+=.01){const M=pa.getPointOnCubicBezier(E,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3],b.points[4],b.points[5]);h.push(M.x,M.y)}else h=h.concat(b.points)});let f=h[0],g=h[0],p=h[1],_=h[1],S,x;for(let b=0;b<h.length/2;b++)S=h[b*2],x=h[b*2+1],isNaN(S)||(f=Math.min(f,S),g=Math.max(g,S)),isNaN(x)||(p=Math.min(p,x),_=Math.max(_,x));return{x:f,y:p,width:g-f,height:_-p}}getLength(){return this.pathLength}getPointAtLength(h){return pa.getPointAtLengthOfDataArray(h,this.dataArray)}static getLineLength(h,f,g,p){return Math.sqrt((g-h)*(g-h)+(p-f)*(p-f))}static getPathLength(h){let f=0;for(let g=0;g<h.length;++g)f+=h[g].pathLength;return f}static getPointAtLengthOfDataArray(h,f){let g,p=0,_=f.length;if(!_)return null;for(;p<_&&h>f[p].pathLength;)h-=f[p].pathLength,++p;if(p===_)return g=f[p-1].points.slice(-2),{x:g[0],y:g[1]};if(h<.01)return g=f[p].points.slice(0,2),{x:g[0],y:g[1]};const S=f[p],x=S.points;switch(S.command){case"L":return pa.getPointOnLine(h,S.start.x,S.start.y,x[0],x[1]);case"C":return pa.getPointOnCubicBezier((0,s.t2length)(h,pa.getPathLength(f),N=>(0,s.getCubicArcLength)([S.start.x,x[0],x[2],x[4]],[S.start.y,x[1],x[3],x[5]],N)),S.start.x,S.start.y,x[0],x[1],x[2],x[3],x[4],x[5]);case"Q":return pa.getPointOnQuadraticBezier((0,s.t2length)(h,pa.getPathLength(f),N=>(0,s.getQuadraticArcLength)([S.start.x,x[0],x[2]],[S.start.y,x[1],x[3]],N)),S.start.x,S.start.y,x[0],x[1],x[2],x[3]);case"A":var b=x[0],E=x[1],M=x[2],D=x[3],L=x[4],T=x[5],A=x[6];return L+=T*h/S.pathLength,pa.getPointOnEllipticalArc(b,E,M,D,L,A)}return null}static getPointOnLine(h,f,g,p,_,S,x){S=S??f,x=x??g;const b=this.getLineLength(f,g,p,_);if(b<1e-10)return{x:f,y:g};if(p===f)return{x:S,y:x+(_>g?h:-h)};const E=(_-g)/(p-f),M=Math.sqrt(h*h/(1+E*E))*(p<f?-1:1),D=E*M;if(Math.abs(x-g-E*(S-f))<1e-10)return{x:S+M,y:x+D};const L=((S-f)*(p-f)+(x-g)*(_-g))/(b*b),T=f+L*(p-f),A=g+L*(_-g),N=this.getLineLength(S,x,T,A),z=Math.sqrt(h*h-N*N),I=Math.sqrt(z*z/(1+E*E))*(p<f?-1:1),K=E*I;return{x:T+I,y:A+K}}static getPointOnCubicBezier(h,f,g,p,_,S,x,b,E){function M(z){return z*z*z}function D(z){return 3*z*z*(1-z)}function L(z){return 3*z*(1-z)*(1-z)}function T(z){return(1-z)*(1-z)*(1-z)}const A=b*M(h)+S*D(h)+p*L(h)+f*T(h),N=E*M(h)+x*D(h)+_*L(h)+g*T(h);return{x:A,y:N}}static getPointOnQuadraticBezier(h,f,g,p,_,S,x){function b(T){return T*T}function E(T){return 2*T*(1-T)}function M(T){return(1-T)*(1-T)}const D=S*b(h)+p*E(h)+f*M(h),L=x*b(h)+_*E(h)+g*M(h);return{x:D,y:L}}static getPointOnEllipticalArc(h,f,g,p,_,S){const x=Math.cos(S),b=Math.sin(S),E={x:g*Math.cos(_),y:p*Math.sin(_)};return{x:h+(E.x*x-E.y*b),y:f+(E.x*b+E.y*x)}}static parsePathData(h){if(!h)return[];let f=h;const g=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];f=f.replace(new RegExp(" ","g"),",");for(var p=0;p<g.length;p++)f=f.replace(new RegExp(g[p],"g"),"|"+g[p]);const _=f.split("|"),S=[],x=[];let b=0,E=0;const M=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let D;for(p=1;p<_.length;p++){let w=_[p],V=w.charAt(0);for(w=w.slice(1),x.length=0;D=M.exec(w);)x.push(D[0]);const G=[];for(let B=0,F=x.length;B<F;B++){if(x[B]==="00"){G.push(0,0);continue}const $=parseFloat(x[B]);isNaN($)?G.push(0):G.push($)}for(;G.length>0&&!isNaN(G[0]);){let B="",F=[];const $=b,rt=E;var L,T,A,N,z,I,K,H,j,Y;switch(V){case"l":b+=G.shift(),E+=G.shift(),B="L",F.push(b,E);break;case"L":b=G.shift(),E=G.shift(),F.push(b,E);break;case"m":var X=G.shift(),J=G.shift();if(b+=X,E+=J,B="M",S.length>2&&S[S.length-1].command==="z"){for(let q=S.length-2;q>=0;q--)if(S[q].command==="M"){b=S[q].points[0]+X,E=S[q].points[1]+J;break}}F.push(b,E),V="l";break;case"M":b=G.shift(),E=G.shift(),B="M",F.push(b,E),V="L";break;case"h":b+=G.shift(),B="L",F.push(b,E);break;case"H":b=G.shift(),B="L",F.push(b,E);break;case"v":E+=G.shift(),B="L",F.push(b,E);break;case"V":E=G.shift(),B="L",F.push(b,E);break;case"C":F.push(G.shift(),G.shift(),G.shift(),G.shift()),b=G.shift(),E=G.shift(),F.push(b,E);break;case"c":F.push(b+G.shift(),E+G.shift(),b+G.shift(),E+G.shift()),b+=G.shift(),E+=G.shift(),B="C",F.push(b,E);break;case"S":T=b,A=E,L=S[S.length-1],L.command==="C"&&(T=b+(b-L.points[2]),A=E+(E-L.points[3])),F.push(T,A,G.shift(),G.shift()),b=G.shift(),E=G.shift(),B="C",F.push(b,E);break;case"s":T=b,A=E,L=S[S.length-1],L.command==="C"&&(T=b+(b-L.points[2]),A=E+(E-L.points[3])),F.push(T,A,b+G.shift(),E+G.shift()),b+=G.shift(),E+=G.shift(),B="C",F.push(b,E);break;case"Q":F.push(G.shift(),G.shift()),b=G.shift(),E=G.shift(),F.push(b,E);break;case"q":F.push(b+G.shift(),E+G.shift()),b+=G.shift(),E+=G.shift(),B="Q",F.push(b,E);break;case"T":T=b,A=E,L=S[S.length-1],L.command==="Q"&&(T=b+(b-L.points[0]),A=E+(E-L.points[1])),b=G.shift(),E=G.shift(),B="Q",F.push(T,A,b,E);break;case"t":T=b,A=E,L=S[S.length-1],L.command==="Q"&&(T=b+(b-L.points[0]),A=E+(E-L.points[1])),b+=G.shift(),E+=G.shift(),B="Q",F.push(T,A,b,E);break;case"A":N=G.shift(),z=G.shift(),I=G.shift(),K=G.shift(),H=G.shift(),j=b,Y=E,b=G.shift(),E=G.shift(),B="A",F=this.convertEndpointToCenterParameterization(j,Y,b,E,K,H,N,z,I);break;case"a":N=G.shift(),z=G.shift(),I=G.shift(),K=G.shift(),H=G.shift(),j=b,Y=E,b+=G.shift(),E+=G.shift(),B="A",F=this.convertEndpointToCenterParameterization(j,Y,b,E,K,H,N,z,I);break}S.push({command:B||V,points:F,start:{x:$,y:rt},pathLength:this.calcLength($,rt,B||V,F)})}(V==="z"||V==="Z")&&S.push({command:"z",points:[],start:void 0,pathLength:0})}return S}static calcLength(h,f,g,p){let _,S,x,b;const E=pa;switch(g){case"L":return E.getLineLength(h,f,p[0],p[1]);case"C":return(0,s.getCubicArcLength)([h,p[0],p[2],p[4]],[f,p[1],p[3],p[5]],1);case"Q":return(0,s.getQuadraticArcLength)([h,p[0],p[2]],[f,p[1],p[3]],1);case"A":_=0;var M=p[4],D=p[5],L=p[4]+D,T=Math.PI/180;if(Math.abs(M-L)<T&&(T=Math.abs(M-L)),S=E.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],M,0),D<0)for(b=M-T;b>L;b-=T)x=E.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],b,0),_+=E.getLineLength(S.x,S.y,x.x,x.y),S=x;else for(b=M+T;b<L;b+=T)x=E.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],b,0),_+=E.getLineLength(S.x,S.y,x.x,x.y),S=x;return x=E.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],L,0),_+=E.getLineLength(S.x,S.y,x.x,x.y),_}return 0}static convertEndpointToCenterParameterization(h,f,g,p,_,S,x,b,E){const M=E*(Math.PI/180),D=Math.cos(M)*(h-g)/2+Math.sin(M)*(f-p)/2,L=-1*Math.sin(M)*(h-g)/2+Math.cos(M)*(f-p)/2,T=D*D/(x*x)+L*L/(b*b);T>1&&(x*=Math.sqrt(T),b*=Math.sqrt(T));let A=Math.sqrt((x*x*(b*b)-x*x*(L*L)-b*b*(D*D))/(x*x*(L*L)+b*b*(D*D)));_===S&&(A*=-1),isNaN(A)&&(A=0);const N=A*x*L/b,z=A*-b*D/x,I=(h+g)/2+Math.cos(M)*N-Math.sin(M)*z,K=(f+p)/2+Math.sin(M)*N+Math.cos(M)*z,H=function(G){return Math.sqrt(G[0]*G[0]+G[1]*G[1])},j=function(G,B){return(G[0]*B[0]+G[1]*B[1])/(H(G)*H(B))},Y=function(G,B){return(G[0]*B[1]<G[1]*B[0]?-1:1)*Math.acos(j(G,B))},X=Y([1,0],[(D-N)/x,(L-z)/b]),J=[(D-N)/x,(L-z)/b],w=[(-1*D-N)/x,(-1*L-z)/b];let V=Y(J,w);return j(J,w)<=-1&&(V=Math.PI),j(J,w)>=1&&(V=0),S===0&&V>0&&(V=V-2*Math.PI),S===1&&V<0&&(V=V+2*Math.PI),[I,K,x,b,X,V,M,S]}};return jd.Path=r,r.prototype.className="Path",r.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(r),i.Factory.addGetterSetter(r,"data"),jd}var r3;function X9(){if(r3)return Hd;r3=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.Arrow=void 0;const i=ye(),t=FS(),n=Se(),s=he(),r=R2();let c=class extends t.Line{_sceneFunc(f){super._sceneFunc(f);const g=Math.PI*2,p=this.points();let _=p;const S=this.tension()!==0&&p.length>4;S&&(_=this.getTensionPoints());const x=this.pointerLength(),b=p.length;let E,M;if(S){const T=[_[_.length-4],_[_.length-3],_[_.length-2],_[_.length-1],p[b-2],p[b-1]],A=r.Path.calcLength(_[_.length-4],_[_.length-3],"C",T),N=r.Path.getPointOnQuadraticBezier(Math.min(1,1-x/A),T[0],T[1],T[2],T[3],T[4],T[5]);E=p[b-2]-N.x,M=p[b-1]-N.y}else E=p[b-2]-p[b-4],M=p[b-1]-p[b-3];const D=(Math.atan2(M,E)+g)%g,L=this.pointerWidth();this.pointerAtEnding()&&(f.save(),f.beginPath(),f.translate(p[b-2],p[b-1]),f.rotate(D),f.moveTo(0,0),f.lineTo(-x,L/2),f.lineTo(-x,-L/2),f.closePath(),f.restore(),this.__fillStroke(f)),this.pointerAtBeginning()&&(f.save(),f.beginPath(),f.translate(p[0],p[1]),S?(E=(_[0]+_[2])/2-p[0],M=(_[1]+_[3])/2-p[1]):(E=p[2]-p[0],M=p[3]-p[1]),f.rotate((Math.atan2(-M,-E)+g)%g),f.moveTo(0,0),f.lineTo(-x,L/2),f.lineTo(-x,-L/2),f.closePath(),f.restore(),this.__fillStroke(f))}__fillStroke(f){const g=this.dashEnabled();g&&(this.attrs.dashEnabled=!1,f.setLineDash([])),f.fillStrokeShape(this),g&&(this.attrs.dashEnabled=!0)}getSelfRect(){const f=super.getSelfRect(),g=this.pointerWidth()/2;return{x:f.x,y:f.y-g,width:f.width,height:f.height+g*2}}};return Hd.Arrow=c,c.prototype.className="Arrow",(0,s._registerNode)(c),i.Factory.addGetterSetter(c,"pointerLength",10,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(c,"pointerWidth",10,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(c,"pointerAtBeginning",!1),i.Factory.addGetterSetter(c,"pointerAtEnding",!0),Hd}var Yd={},o3;function k9(){if(o3)return Yd;o3=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.Circle=void 0;const i=ye(),t=mi(),n=Se(),s=he();class r extends t.Shape{_sceneFunc(h){h.beginPath(),h.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(h){this.radius()!==h/2&&this.radius(h/2)}setHeight(h){this.radius()!==h/2&&this.radius(h/2)}}return Yd.Circle=r,r.prototype._centroid=!0,r.prototype.className="Circle",r.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(r),i.Factory.addGetterSetter(r,"radius",0,(0,n.getNumberValidator)()),Yd}var Vd={},u3;function K9(){if(u3)return Vd;u3=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.Ellipse=void 0;const i=ye(),t=mi(),n=Se(),s=he();let r=class extends t.Shape{_sceneFunc(h){const f=this.radiusX(),g=this.radiusY();h.beginPath(),h.save(),f!==g&&h.scale(1,g/f),h.arc(0,0,f,0,Math.PI*2,!1),h.restore(),h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(h){this.radiusX(h/2)}setHeight(h){this.radiusY(h/2)}};return Vd.Ellipse=r,r.prototype.className="Ellipse",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s._registerNode)(r),i.Factory.addComponentsGetterSetter(r,"radius",["x","y"]),i.Factory.addGetterSetter(r,"radiusX",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(r,"radiusY",0,(0,n.getNumberValidator)()),Vd}var qd={},c3;function Z9(){if(c3)return qd;c3=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.Image=void 0;const i=Cn(),t=ye(),n=mi(),s=he(),r=Se();class c extends n.Shape{constructor(f){super(f),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",g=>{this._removeImageLoad(g.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const f=this.image();f&&f.complete||f&&f.readyState===4||f&&f.addEventListener&&f.addEventListener("load",this._loadListener)}_removeImageLoad(f){f&&f.removeEventListener&&f.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const f=!!this.cornerRadius(),g=this.hasShadow();return f&&g?!0:super._useBufferCanvas(!0)}_sceneFunc(f){const g=this.getWidth(),p=this.getHeight(),_=this.cornerRadius(),S=this.attrs.image;let x;if(S){const b=this.attrs.cropWidth,E=this.attrs.cropHeight;b&&E?x=[S,this.cropX(),this.cropY(),b,E,0,0,g,p]:x=[S,0,0,g,p]}(this.hasFill()||this.hasStroke()||_)&&(f.beginPath(),_?i.Util.drawRoundedRectPath(f,g,p,_):f.rect(0,0,g,p),f.closePath(),f.fillStrokeShape(this)),S&&(_&&f.clip(),f.drawImage.apply(f,x))}_hitFunc(f){const g=this.width(),p=this.height(),_=this.cornerRadius();f.beginPath(),_?i.Util.drawRoundedRectPath(f,g,p,_):f.rect(0,0,g,p),f.closePath(),f.fillStrokeShape(this)}getWidth(){var f,g;return(f=this.attrs.width)!==null&&f!==void 0?f:(g=this.image())===null||g===void 0?void 0:g.width}getHeight(){var f,g;return(f=this.attrs.height)!==null&&f!==void 0?f:(g=this.image())===null||g===void 0?void 0:g.height}static fromURL(f,g,p=null){const _=i.Util.createImageElement();_.onload=function(){const S=new c({image:_});g(S)},_.onerror=p,_.crossOrigin="Anonymous",_.src=f}}return qd.Image=c,c.prototype.className="Image",(0,s._registerNode)(c),t.Factory.addGetterSetter(c,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(c,"image"),t.Factory.addComponentsGetterSetter(c,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(c,"cropX",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropY",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropHeight",0,(0,r.getNumberValidator)()),qd}var Yu={},h3;function Q9(){if(h3)return Yu;h3=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.Tag=Yu.Label=void 0;const i=ye(),t=mi(),n=b2(),s=Se(),r=he(),c=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],h="Change.konva",f="none",g="up",p="right",_="down",S="left",x=c.length;let b=class extends n.Group{constructor(D){super(D),this.on("add.konva",function(L){this._addListeners(L.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(D){let L=this,T;const A=function(){L._sync()};for(T=0;T<x;T++)D.on(c[T]+h,A)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let D=this.getText(),L=this.getTag(),T,A,N,z,I,K,H;if(D&&L){switch(T=D.width(),A=D.height(),N=L.pointerDirection(),z=L.pointerWidth(),H=L.pointerHeight(),I=0,K=0,N){case g:I=T/2,K=-1*H;break;case p:I=T+z,K=A/2;break;case _:I=T/2,K=A+H;break;case S:I=-1*z,K=A/2;break}L.setAttrs({x:-1*I,y:-1*K,width:T,height:A}),D.setAttrs({x:-1*I,y:-1*K})}}};Yu.Label=b,b.prototype.className="Label",(0,r._registerNode)(b);class E extends t.Shape{_sceneFunc(D){const L=this.width(),T=this.height(),A=this.pointerDirection(),N=this.pointerWidth(),z=this.pointerHeight(),I=this.cornerRadius();let K=0,H=0,j=0,Y=0;typeof I=="number"?K=H=j=Y=Math.min(I,L/2,T/2):(K=Math.min(I[0]||0,L/2,T/2),H=Math.min(I[1]||0,L/2,T/2),Y=Math.min(I[2]||0,L/2,T/2),j=Math.min(I[3]||0,L/2,T/2)),D.beginPath(),D.moveTo(K,0),A===g&&(D.lineTo((L-N)/2,0),D.lineTo(L/2,-1*z),D.lineTo((L+N)/2,0)),D.lineTo(L-H,0),D.arc(L-H,H,H,Math.PI*3/2,0,!1),A===p&&(D.lineTo(L,(T-z)/2),D.lineTo(L+N,T/2),D.lineTo(L,(T+z)/2)),D.lineTo(L,T-Y),D.arc(L-Y,T-Y,Y,0,Math.PI/2,!1),A===_&&(D.lineTo((L+N)/2,T),D.lineTo(L/2,T+z),D.lineTo((L-N)/2,T)),D.lineTo(j,T),D.arc(j,T-j,j,Math.PI/2,Math.PI,!1),A===S&&(D.lineTo(0,(T+z)/2),D.lineTo(-1*N,T/2),D.lineTo(0,(T-z)/2)),D.lineTo(0,K),D.arc(K,K,K,Math.PI,Math.PI*3/2,!1),D.closePath(),D.fillStrokeShape(this)}getSelfRect(){let D=0,L=0,T=this.pointerWidth(),A=this.pointerHeight(),N=this.pointerDirection(),z=this.width(),I=this.height();return N===g?(L-=A,I+=A):N===_?I+=A:N===S?(D-=T*1.5,z+=T):N===p&&(z+=T*1.5),{x:D,y:L,width:z,height:I}}}return Yu.Tag=E,E.prototype.className="Tag",(0,r._registerNode)(E),i.Factory.addGetterSetter(E,"pointerDirection",f),i.Factory.addGetterSetter(E,"pointerWidth",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(E,"pointerHeight",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(E,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Yu}var Fd={},f3;function PS(){if(f3)return Fd;f3=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.Rect=void 0;const i=ye(),t=mi(),n=he(),s=Cn(),r=Se();class c extends t.Shape{_sceneFunc(f){const g=this.cornerRadius(),p=this.width(),_=this.height();f.beginPath(),g?s.Util.drawRoundedRectPath(f,p,_,g):f.rect(0,0,p,_),f.closePath(),f.fillStrokeShape(this)}}return Fd.Rect=c,c.prototype.className="Rect",(0,n._registerNode)(c),i.Factory.addGetterSetter(c,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Fd}var Pd={},d3;function W9(){if(d3)return Pd;d3=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.RegularPolygon=void 0;const i=ye(),t=mi(),n=Se(),s=he();let r=class extends t.Shape{_sceneFunc(h){const f=this._getPoints();h.beginPath(),h.moveTo(f[0].x,f[0].y);for(let g=1;g<f.length;g++)h.lineTo(f[g].x,f[g].y);h.closePath(),h.fillStrokeShape(this)}_getPoints(){const h=this.attrs.sides,f=this.attrs.radius||0,g=[];for(let p=0;p<h;p++)g.push({x:f*Math.sin(p*2*Math.PI/h),y:-1*f*Math.cos(p*2*Math.PI/h)});return g}getSelfRect(){const h=this._getPoints();let f=h[0].x,g=h[0].y,p=h[0].x,_=h[0].y;return h.forEach(S=>{f=Math.min(f,S.x),g=Math.max(g,S.x),p=Math.min(p,S.y),_=Math.max(_,S.y)}),{x:f,y:p,width:g-f,height:_-p}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(h){this.radius(h/2)}setHeight(h){this.radius(h/2)}};return Pd.RegularPolygon=r,r.prototype.className="RegularPolygon",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(r),i.Factory.addGetterSetter(r,"radius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(r,"sides",0,(0,n.getNumberValidator)()),Pd}var Xd={},g3;function J9(){if(g3)return Xd;g3=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.Ring=void 0;const i=ye(),t=mi(),n=Se(),s=he(),r=Math.PI*2;let c=class extends t.Shape{_sceneFunc(f){f.beginPath(),f.arc(0,0,this.innerRadius(),0,r,!1),f.moveTo(this.outerRadius(),0),f.arc(0,0,this.outerRadius(),r,0,!0),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(f){this.outerRadius(f/2)}setHeight(f){this.outerRadius(f/2)}};return Xd.Ring=c,c.prototype.className="Ring",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(c),i.Factory.addGetterSetter(c,"innerRadius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(c,"outerRadius",0,(0,n.getNumberValidator)()),Xd}var kd={},m3;function $9(){if(m3)return kd;m3=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.Sprite=void 0;const i=ye(),t=mi(),n=C2(),s=Se(),r=he();let c=class extends t.Shape{constructor(f){super(f),this._updated=!0,this.anim=new n.Animation(()=>{const g=this._updated;return this._updated=!1,g}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(f){const g=this.animation(),p=this.frameIndex(),_=p*4,S=this.animations()[g],x=this.frameOffsets(),b=S[_+0],E=S[_+1],M=S[_+2],D=S[_+3],L=this.image();if((this.hasFill()||this.hasStroke())&&(f.beginPath(),f.rect(0,0,M,D),f.closePath(),f.fillStrokeShape(this)),L)if(x){const T=x[g],A=p*2;f.drawImage(L,b,E,M,D,T[A+0],T[A+1],M,D)}else f.drawImage(L,b,E,M,D,0,0,M,D)}_hitFunc(f){const g=this.animation(),p=this.frameIndex(),_=p*4,S=this.animations()[g],x=this.frameOffsets(),b=S[_+2],E=S[_+3];if(f.beginPath(),x){const M=x[g],D=p*2;f.rect(M[D+0],M[D+1],b,E)}else f.rect(0,0,b,E);f.closePath(),f.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const f=this;this.interval=setInterval(function(){f._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const f=this.getLayer();this.anim.setLayers(f),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const f=this.frameIndex(),g=this.animation(),p=this.animations(),_=p[g],S=_.length/4;f<S-1?this.frameIndex(f+1):this.frameIndex(0)}};return kd.Sprite=c,c.prototype.className="Sprite",(0,r._registerNode)(c),i.Factory.addGetterSetter(c,"animation"),i.Factory.addGetterSetter(c,"animations"),i.Factory.addGetterSetter(c,"frameOffsets"),i.Factory.addGetterSetter(c,"image"),i.Factory.addGetterSetter(c,"frameIndex",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(c,"frameRate",17,(0,s.getNumberValidator)()),i.Factory.backCompat(c,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),kd}var Kd={},p3;function tC(){if(p3)return Kd;p3=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.Star=void 0;const i=ye(),t=mi(),n=Se(),s=he();let r=class extends t.Shape{_sceneFunc(h){const f=this.innerRadius(),g=this.outerRadius(),p=this.numPoints();h.beginPath(),h.moveTo(0,0-g);for(let _=1;_<p*2;_++){const S=_%2===0?g:f,x=S*Math.sin(_*Math.PI/p),b=-1*S*Math.cos(_*Math.PI/p);h.lineTo(x,b)}h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(h){this.outerRadius(h/2)}setHeight(h){this.outerRadius(h/2)}};return Kd.Star=r,r.prototype.className="Star",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(r),i.Factory.addGetterSetter(r,"numPoints",5,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(r,"innerRadius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(r,"outerRadius",0,(0,n.getNumberValidator)()),Kd}var yh={},_3;function XS(){if(_3)return yh;_3=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.Text=void 0,yh.stringToArray=h;const i=Cn(),t=ye(),n=mi(),s=he(),r=Se(),c=he();function h(tt){return[...tt].reduce((nt,ht,vt,St)=>{if(new RegExp("\\p{Emoji}","u").test(ht)){const W=St[vt+1];W&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(W)?(nt.push(ht+W),St[vt+1]=""):nt.push(ht)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(ht+(St[vt+1]||""))?nt.push(ht+St[vt+1]):vt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(ht)?nt[nt.length-1]+=ht:ht&&nt.push(ht);return nt},[])}const f="auto",g="center",p="inherit",_="justify",S="Change.konva",x="2d",b="-",E="left",M="text",D="Text",L="top",T="bottom",A="middle",N="normal",z="px ",I=" ",K="right",H="rtl",j="word",Y="char",X="none",J="",w=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],V=w.length;function G(tt){return tt.split(",").map(nt=>{nt=nt.trim();const ht=nt.indexOf(" ")>=0,vt=nt.indexOf('"')>=0||nt.indexOf("'")>=0;return ht&&!vt&&(nt=`"${nt}"`),nt}).join(", ")}let B;function F(){return B||(B=i.Util.createCanvasElement().getContext(x),B)}function $(tt){tt.fillText(this._partialText,this._partialTextX,this._partialTextY)}function rt(tt){tt.setAttr("miterLimit",2),tt.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function q(tt){return tt=tt||{},!tt.fillLinearGradientColorStops&&!tt.fillRadialGradientColorStops&&!tt.fillPatternImage&&(tt.fill=tt.fill||"black"),tt}class Q extends n.Shape{constructor(nt){super(q(nt)),this._partialTextX=0,this._partialTextY=0;for(let ht=0;ht<V;ht++)this.on(w[ht]+S,this._setTextData);this._setTextData()}_sceneFunc(nt){const ht=this.textArr,vt=ht.length;if(!this.text())return;let St=this.padding(),W=this.fontSize(),Z=this.lineHeight()*W,dt=this.verticalAlign(),Et=this.direction(),Tt=0,Ot=this.align(),Kt=this.getWidth(),re=this.letterSpacing(),Ht=this.fill(),Ue=this.textDecoration(),Qt=Ue.indexOf("underline")!==-1,Ve=Ue.indexOf("line-through")!==-1,Zn;Et=Et===p?nt.direction:Et;let un=Z/2,zn=A;if(s.Konva._fixTextRendering){const Ni=this.measureSize("M");zn="alphabetic",un=(Ni.fontBoundingBoxAscent-Ni.fontBoundingBoxDescent)/2+Z/2}var Zt=0,nn=0;for(Et===H&&nt.setAttr("direction",Et),nt.setAttr("font",this._getContextFont()),nt.setAttr("textBaseline",zn),nt.setAttr("textAlign",E),dt===A?Tt=(this.getHeight()-vt*Z-St*2)/2:dt===T&&(Tt=this.getHeight()-vt*Z-St*2),nt.translate(St,Tt+St),Zn=0;Zn<vt;Zn++){var Zt=0,nn=0,jn=ht[Zn],Yn=jn.text,Le=jn.width,fe=jn.lastInParagraph,Je,$e;if(nt.save(),Ot===K?Zt+=Kt-Le-St*2:Ot===g&&(Zt+=(Kt-Le-St*2)/2),Qt){nt.save(),nt.beginPath();const Qn=s.Konva._fixTextRendering?Math.round(W/4):Math.round(W/2),Rn=Zt,Tn=un+nn+Qn;nt.moveTo(Rn,Tn),Je=Yn.split(" ").length-1,$e=Ot===_&&!fe?Kt-St*2:Le,nt.lineTo(Rn+Math.round($e),Tn),nt.lineWidth=W/15;const Wn=this._getLinearGradient();nt.strokeStyle=Wn||Ht,nt.stroke(),nt.restore()}if(Ve){nt.save(),nt.beginPath();const Qn=s.Konva._fixTextRendering?-Math.round(W/4):0;nt.moveTo(Zt,un+nn+Qn),Je=Yn.split(" ").length-1,$e=Ot===_&&!fe?Kt-St*2:Le,nt.lineTo(Zt+Math.round($e),un+nn+Qn),nt.lineWidth=W/15;const Rn=this._getLinearGradient();nt.strokeStyle=Rn||Ht,nt.stroke(),nt.restore()}if(Et!==H&&(re!==0||Ot===_)){Je=Yn.split(" ").length-1;const Qn=h(Yn);for(let Rn=0;Rn<Qn.length;Rn++){const Tn=Qn[Rn];Tn===" "&&!fe&&Ot===_&&(Zt+=(Kt-St*2-Le)/Je),this._partialTextX=Zt,this._partialTextY=un+nn,this._partialText=Tn,nt.fillStrokeShape(this),Zt+=this.measureSize(Tn).width+re}}else re!==0&&nt.setAttr("letterSpacing",`${re}px`),this._partialTextX=Zt,this._partialTextY=un+nn,this._partialText=Yn,nt.fillStrokeShape(this);nt.restore(),vt>1&&(un+=Z)}}_hitFunc(nt){const ht=this.getWidth(),vt=this.getHeight();nt.beginPath(),nt.rect(0,0,ht,vt),nt.closePath(),nt.fillStrokeShape(this)}setText(nt){const ht=i.Util._isString(nt)?nt:nt==null?"":nt+"";return this._setAttr(M,ht),this}getWidth(){return this.attrs.width===f||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===f||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(nt){var ht,vt,St,W,Z,dt,Et,Tt,Ot,Kt,re;let Ht=F(),Ue=this.fontSize(),Qt;Ht.save(),Ht.font=this._getContextFont(),Qt=Ht.measureText(nt),Ht.restore();const Ve=Ue/100;return{actualBoundingBoxAscent:(ht=Qt.actualBoundingBoxAscent)!==null&&ht!==void 0?ht:71.58203125*Ve,actualBoundingBoxDescent:(vt=Qt.actualBoundingBoxDescent)!==null&&vt!==void 0?vt:0,actualBoundingBoxLeft:(St=Qt.actualBoundingBoxLeft)!==null&&St!==void 0?St:-7.421875*Ve,actualBoundingBoxRight:(W=Qt.actualBoundingBoxRight)!==null&&W!==void 0?W:75.732421875*Ve,alphabeticBaseline:(Z=Qt.alphabeticBaseline)!==null&&Z!==void 0?Z:0,emHeightAscent:(dt=Qt.emHeightAscent)!==null&&dt!==void 0?dt:100*Ve,emHeightDescent:(Et=Qt.emHeightDescent)!==null&&Et!==void 0?Et:-20*Ve,fontBoundingBoxAscent:(Tt=Qt.fontBoundingBoxAscent)!==null&&Tt!==void 0?Tt:91*Ve,fontBoundingBoxDescent:(Ot=Qt.fontBoundingBoxDescent)!==null&&Ot!==void 0?Ot:21*Ve,hangingBaseline:(Kt=Qt.hangingBaseline)!==null&&Kt!==void 0?Kt:72.80000305175781*Ve,ideographicBaseline:(re=Qt.ideographicBaseline)!==null&&re!==void 0?re:-21*Ve,width:Qt.width,height:Ue}}_getContextFont(){return this.fontStyle()+I+this.fontVariant()+I+(this.fontSize()+z)+G(this.fontFamily())}_addTextLine(nt){this.align()===_&&(nt=nt.trim());const vt=this._getTextWidth(nt);return this.textArr.push({text:nt,width:vt,lastInParagraph:!1})}_getTextWidth(nt){const ht=this.letterSpacing(),vt=nt.length;return F().measureText(nt).width+ht*vt}_setTextData(){let nt=this.text().split(`
`),ht=+this.fontSize(),vt=0,St=this.lineHeight()*ht,W=this.attrs.width,Z=this.attrs.height,dt=W!==f&&W!==void 0,Et=Z!==f&&Z!==void 0,Tt=this.padding(),Ot=W-Tt*2,Kt=Z-Tt*2,re=0,Ht=this.wrap(),Ue=Ht!==X,Qt=Ht!==Y&&Ue,Ve=this.ellipsis();this.textArr=[],F().font=this._getContextFont();const Zn=Ve?this._getTextWidth(J):0;for(let un=0,zn=nt.length;un<zn;++un){let Zt=nt[un],nn=this._getTextWidth(Zt);if(dt&&nn>Ot)for(;Zt.length>0;){let jn=0,Yn=h(Zt).length,Le="",fe=0;for(;jn<Yn;){const Je=jn+Yn>>>1,$e=h(Zt),Ni=$e.slice(0,Je+1).join(""),pi=this._getTextWidth(Ni);(Ve&&Et&&re+St>Kt?pi+Zn:pi)<=Ot?(jn=Je+1,Le=Ni,fe=pi):Yn=Je}if(Le){if(Qt){const Ni=h(Zt),pi=h(Le),Qn=Ni[pi.length],Rn=Qn===I||Qn===b;let Tn;if(Rn&&fe<=Ot)Tn=pi.length;else{const Wn=pi.lastIndexOf(I),za=pi.lastIndexOf(b);Tn=Math.max(Wn,za)+1}Tn>0&&(jn=Tn,Le=Ni.slice(0,jn).join(""),fe=this._getTextWidth(Le))}if(Le=Le.trimRight(),this._addTextLine(Le),vt=Math.max(vt,fe),re+=St,this._shouldHandleEllipsis(re)){this._tryToAddEllipsisToLastLine();break}if(Zt=h(Zt).slice(jn).join("").trimLeft(),Zt.length>0&&(nn=this._getTextWidth(Zt),nn<=Ot)){this._addTextLine(Zt),re+=St,vt=Math.max(vt,nn);break}}else break}else this._addTextLine(Zt),re+=St,vt=Math.max(vt,nn),this._shouldHandleEllipsis(re)&&un<zn-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Et&&re+St>Kt)break}this.textHeight=ht,this.textWidth=vt}_shouldHandleEllipsis(nt){const ht=+this.fontSize(),vt=this.lineHeight()*ht,St=this.attrs.height,W=St!==f&&St!==void 0,Z=this.padding(),dt=St-Z*2;return!(this.wrap()!==X)||W&&nt+vt>dt}_tryToAddEllipsisToLastLine(){const nt=this.attrs.width,ht=nt!==f&&nt!==void 0,vt=this.padding(),St=nt-vt*2,W=this.ellipsis(),Z=this.textArr[this.textArr.length-1];!Z||!W||(ht&&(this._getTextWidth(Z.text+J)<St||(Z.text=Z.text.slice(0,Z.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(Z.text+J))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const nt=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,ht=this.hasShadow();return nt&&ht?!0:super._useBufferCanvas()}}return yh.Text=Q,Q.prototype._fillFunc=$,Q.prototype._strokeFunc=rt,Q.prototype.className=D,Q.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,c._registerNode)(Q),t.Factory.overWriteSetter(Q,"width",(0,r.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(Q,"height",(0,r.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(Q,"direction",p),t.Factory.addGetterSetter(Q,"fontFamily","Arial"),t.Factory.addGetterSetter(Q,"fontSize",12,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(Q,"fontStyle",N),t.Factory.addGetterSetter(Q,"fontVariant",N),t.Factory.addGetterSetter(Q,"padding",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(Q,"align",E),t.Factory.addGetterSetter(Q,"verticalAlign",L),t.Factory.addGetterSetter(Q,"lineHeight",1,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(Q,"wrap",j),t.Factory.addGetterSetter(Q,"ellipsis",!1,(0,r.getBooleanValidator)()),t.Factory.addGetterSetter(Q,"letterSpacing",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(Q,"text","",(0,r.getStringValidator)()),t.Factory.addGetterSetter(Q,"textDecoration",""),yh}var Zd={},y3;function eC(){if(y3)return Zd;y3=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.TextPath=void 0;const i=Cn(),t=ye(),n=mi(),s=R2(),r=XS(),c=Se(),h=he(),f="",g="normal";function p(x){x.fillText(this.partialText,0,0)}function _(x){x.strokeText(this.partialText,0,0)}let S=class extends n.Shape{constructor(b){super(b),this.dummyCanvas=i.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return s.Path.getPathLength(this.dataArray)}_getPointAtLength(b){if(!this.attrs.data)return null;const E=this.pathLength;return b-1>E?null:s.Path.getPointAtLengthOfDataArray(b,this.dataArray)}_readDataAttribute(){this.dataArray=s.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(b){b.setAttr("font",this._getContextFont()),b.setAttr("textBaseline",this.textBaseline()),b.setAttr("textAlign","left"),b.save();const E=this.textDecoration(),M=this.fill(),D=this.fontSize(),L=this.glyphInfo;E==="underline"&&b.beginPath();for(let T=0;T<L.length;T++){b.save();const A=L[T].p0;b.translate(A.x,A.y),b.rotate(L[T].rotation),this.partialText=L[T].text,b.fillStrokeShape(this),E==="underline"&&(T===0&&b.moveTo(0,D/2+1),b.lineTo(D,D/2+1)),b.restore()}E==="underline"&&(b.strokeStyle=M,b.lineWidth=D/20,b.stroke()),b.restore()}_hitFunc(b){b.beginPath();const E=this.glyphInfo;if(E.length>=1){const M=E[0].p0;b.moveTo(M.x,M.y)}for(let M=0;M<E.length;M++){const D=E[M].p1;b.lineTo(D.x,D.y)}b.setAttr("lineWidth",this.fontSize()),b.setAttr("strokeStyle",this.colorKey),b.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(b){return r.Text.prototype.setText.call(this,b)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(b){const M=this.dummyCanvas.getContext("2d");M.save(),M.font=this._getContextFont();const D=M.measureText(b);return M.restore(),{width:D.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:b,height:E}=this._getTextSize(this.attrs.text);if(this.textWidth=b,this.textHeight=E,this.glyphInfo=[],!this.attrs.data)return null;const M=this.letterSpacing(),D=this.align(),L=this.kerningFunc(),T=Math.max(this.textWidth+((this.attrs.text||"").length-1)*M,0);let A=0;D==="center"&&(A=Math.max(0,this.pathLength/2-T/2)),D==="right"&&(A=Math.max(0,this.pathLength-T));const N=(0,r.stringToArray)(this.text());let z=A;for(let I=0;I<N.length;I++){const K=this._getPointAtLength(z);if(!K)return;let H=this._getTextSize(N[I]).width+M;if(N[I]===" "&&D==="justify"){const V=this.text().split(" ").length-1;H+=(this.pathLength-T)/V}const j=this._getPointAtLength(z+H);if(!j)return;const Y=s.Path.getLineLength(K.x,K.y,j.x,j.y);let X=0;if(L)try{X=L(N[I-1],N[I])*this.fontSize()}catch{X=0}K.x+=X,j.x+=X,this.textWidth+=X;const J=s.Path.getPointOnLine(X+Y/2,K.x,K.y,j.x,j.y),w=Math.atan2(j.y-K.y,j.x-K.x);this.glyphInfo.push({transposeX:J.x,transposeY:J.y,text:N[I],rotation:w,p0:K,p1:j}),z+=H}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const b=[];this.glyphInfo.forEach(function(z){b.push(z.p0.x),b.push(z.p0.y),b.push(z.p1.x),b.push(z.p1.y)});let E=b[0]||0,M=b[0]||0,D=b[1]||0,L=b[1]||0,T,A;for(let z=0;z<b.length/2;z++)T=b[z*2],A=b[z*2+1],E=Math.min(E,T),M=Math.max(M,T),D=Math.min(D,A),L=Math.max(L,A);const N=this.fontSize();return{x:E-N/2,y:D-N/2,width:M-E+N,height:L-D+N}}destroy(){return i.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Zd.TextPath=S,S.prototype._fillFunc=p,S.prototype._strokeFunc=_,S.prototype._fillFuncHit=p,S.prototype._strokeFuncHit=_,S.prototype.className="TextPath",S.prototype._attrsAffectingSize=["text","fontSize","data"],(0,h._registerNode)(S),t.Factory.addGetterSetter(S,"data"),t.Factory.addGetterSetter(S,"fontFamily","Arial"),t.Factory.addGetterSetter(S,"fontSize",12,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(S,"fontStyle",g),t.Factory.addGetterSetter(S,"align","left"),t.Factory.addGetterSetter(S,"letterSpacing",0,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(S,"textBaseline","middle"),t.Factory.addGetterSetter(S,"fontVariant",g),t.Factory.addGetterSetter(S,"text",f),t.Factory.addGetterSetter(S,"textDecoration",""),t.Factory.addGetterSetter(S,"kerningFunc",void 0),Zd}var Qd={},v3;function nC(){if(v3)return Qd;v3=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.Transformer=void 0;const i=Cn(),t=ye(),n=Ln(),s=mi(),r=PS(),c=b2(),h=he(),f=Se(),g=he(),p="tr-konva",_=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(H=>H+`.${p}`).join(" "),S="nodesRect",x=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],b={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},E="ontouchstart"in h.Konva._global;function M(H,j,Y){if(H==="rotater")return Y;j+=i.Util.degToRad(b[H]||0);const X=(i.Util.radToDeg(j)%360+360)%360;return i.Util._inRange(X,315+22.5,360)||i.Util._inRange(X,0,22.5)?"ns-resize":i.Util._inRange(X,45-22.5,45+22.5)?"nesw-resize":i.Util._inRange(X,90-22.5,90+22.5)?"ew-resize":i.Util._inRange(X,135-22.5,135+22.5)?"nwse-resize":i.Util._inRange(X,180-22.5,180+22.5)?"ns-resize":i.Util._inRange(X,225-22.5,225+22.5)?"nesw-resize":i.Util._inRange(X,270-22.5,270+22.5)?"ew-resize":i.Util._inRange(X,315-22.5,315+22.5)?"nwse-resize":(i.Util.error("Transformer has unknown angle for cursor detection: "+X),"pointer")}const D=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function L(H){return{x:H.x+H.width/2*Math.cos(H.rotation)+H.height/2*Math.sin(-H.rotation),y:H.y+H.height/2*Math.cos(H.rotation)+H.width/2*Math.sin(H.rotation)}}function T(H,j,Y){const X=Y.x+(H.x-Y.x)*Math.cos(j)-(H.y-Y.y)*Math.sin(j),J=Y.y+(H.x-Y.x)*Math.sin(j)+(H.y-Y.y)*Math.cos(j);return{...H,rotation:H.rotation+j,x:X,y:J}}function A(H,j){const Y=L(H);return T(H,j,Y)}function N(H,j,Y){let X=j;for(let J=0;J<H.length;J++){const w=h.Konva.getAngle(H[J]),V=Math.abs(w-j)%(Math.PI*2);Math.min(V,Math.PI*2-V)<Y&&(X=w)}return X}let z=0,I=class extends c.Group{constructor(j){super(j),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(_,this.update),this.getNode()&&this.update()}attachTo(j){return this.setNode(j),this}setNode(j){return i.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([j])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return p+this._id}setNodes(j=[]){this._nodes&&this._nodes.length&&this.detach();const Y=j.filter(J=>J.isAncestorOf(this)?(i.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=j=Y,j.length===1&&this.useSingleNodeRotation()?this.rotation(j[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(J=>{const w=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(J._attrsAffectingSize.length){const V=J._attrsAffectingSize.map(G=>G+"Change."+this._getEventNamespace()).join(" ");J.on(V,w)}J.on(x.map(V=>V+`.${this._getEventNamespace()}`).join(" "),w),J.on(`absoluteTransformChange.${this._getEventNamespace()}`,w),this._proxyDrag(J)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(j){let Y;j.on(`dragstart.${this._getEventNamespace()}`,X=>{Y=j.getAbsolutePosition(),!this.isDragging()&&j!==this.findOne(".back")&&this.startDrag(X,!1)}),j.on(`dragmove.${this._getEventNamespace()}`,X=>{if(!Y)return;const J=j.getAbsolutePosition(),w=J.x-Y.x,V=J.y-Y.y;this.nodes().forEach(G=>{if(G===j||G.isDragging())return;const B=G.getAbsolutePosition();G.setAbsolutePosition({x:B.x+w,y:B.y+V}),G.startDrag(X)}),Y=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(j=>{j.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(S),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(S,this.__getNodeRect)}__getNodeShape(j,Y=this.rotation(),X){const J=j.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),w=j.getAbsoluteScale(X),V=j.getAbsolutePosition(X),G=J.x*w.x-j.offsetX()*w.x,B=J.y*w.y-j.offsetY()*w.y,F=(h.Konva.getAngle(j.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),$={x:V.x+G*Math.cos(F)+B*Math.sin(-F),y:V.y+B*Math.cos(F)+G*Math.sin(F),width:J.width*w.x,height:J.height*w.y,rotation:F};return T($,-h.Konva.getAngle(Y),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const Y=[];this.nodes().map(F=>{const $=F.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),rt=[{x:$.x,y:$.y},{x:$.x+$.width,y:$.y},{x:$.x+$.width,y:$.y+$.height},{x:$.x,y:$.y+$.height}],q=F.getAbsoluteTransform();rt.forEach(function(Q){const tt=q.point(Q);Y.push(tt)})});const X=new i.Transform;X.rotate(-h.Konva.getAngle(this.rotation()));let J=1/0,w=1/0,V=-1/0,G=-1/0;Y.forEach(function(F){const $=X.point(F);J===void 0&&(J=V=$.x,w=G=$.y),J=Math.min(J,$.x),w=Math.min(w,$.y),V=Math.max(V,$.x),G=Math.max(G,$.y)}),X.invert();const B=X.point({x:J,y:w});return{x:B.x,y:B.y,width:V-J,height:G-w,rotation:h.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),D.forEach(j=>{this._createAnchor(j)}),this._createAnchor("rotater")}_createAnchor(j){const Y=new r.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:j+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:E?10:"auto"}),X=this;Y.on("mousedown touchstart",function(J){X._handleMouseDown(J)}),Y.on("dragstart",J=>{Y.stopDrag(),J.cancelBubble=!0}),Y.on("dragend",J=>{J.cancelBubble=!0}),Y.on("mouseenter",()=>{const J=h.Konva.getAngle(this.rotation()),w=this.rotateAnchorCursor(),V=M(j,J,w);Y.getStage().content&&(Y.getStage().content.style.cursor=V),this._cursorChange=!0}),Y.on("mouseout",()=>{Y.getStage().content&&(Y.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(Y)}_createBack(){const j=new s.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(Y,X){const J=X.getParent(),w=J.padding();Y.beginPath(),Y.rect(-w,-w,X.width()+w*2,X.height()+w*2),Y.moveTo(X.width()/2,-w),J.rotateEnabled()&&J.rotateLineVisible()&&Y.lineTo(X.width()/2,-J.rotateAnchorOffset()*i.Util._sign(X.height())-w),Y.fillStrokeShape(X)},hitFunc:(Y,X)=>{if(!this.shouldOverdrawWholeArea())return;const J=this.padding();Y.beginPath(),Y.rect(-J,-J,X.width()+J*2,X.height()+J*2),Y.fillStrokeShape(X)}});this.add(j),this._proxyDrag(j),j.on("dragstart",Y=>{Y.cancelBubble=!0}),j.on("dragmove",Y=>{Y.cancelBubble=!0}),j.on("dragend",Y=>{Y.cancelBubble=!0}),this.on("dragmove",Y=>{this.update()})}_handleMouseDown(j){if(this._transforming)return;this._movingAnchorName=j.target.name().split(" ")[0];const Y=this._getNodeRect(),X=Y.width,J=Y.height,w=Math.sqrt(Math.pow(X,2)+Math.pow(J,2));this.sin=Math.abs(J/w),this.cos=Math.abs(X/w),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const V=j.target.getAbsolutePosition(),G=j.target.getStage().getPointerPosition();this._anchorDragOffset={x:G.x-V.x,y:G.y-V.y},z++,this._fire("transformstart",{evt:j.evt,target:this.getNode()}),this._nodes.forEach(B=>{B._fire("transformstart",{evt:j.evt,target:B})})}_handleMouseMove(j){let Y,X,J;const w=this.findOne("."+this._movingAnchorName),V=w.getStage();V.setPointersPositions(j);const G=V.getPointerPosition();let B={x:G.x-this._anchorDragOffset.x,y:G.y-this._anchorDragOffset.y};const F=w.getAbsolutePosition();this.anchorDragBoundFunc()&&(B=this.anchorDragBoundFunc()(F,B,j)),w.setAbsolutePosition(B);const $=w.getAbsolutePosition();if(F.x===$.x&&F.y===$.y)return;if(this._movingAnchorName==="rotater"){const dt=this._getNodeRect();Y=w.x()-dt.width/2,X=-w.y()+dt.height/2;let Et=Math.atan2(-X,Y)+Math.PI/2;dt.height<0&&(Et-=Math.PI);const Ot=h.Konva.getAngle(this.rotation())+Et,Kt=h.Konva.getAngle(this.rotationSnapTolerance()),Ht=N(this.rotationSnaps(),Ot,Kt)-dt.rotation,Ue=A(dt,Ht);this._fitNodesInto(Ue,j);return}const rt=this.shiftBehavior();let q;rt==="inverted"?q=this.keepRatio()&&!j.shiftKey:rt==="none"?q=this.keepRatio():q=this.keepRatio()||j.shiftKey;var vt=this.centeredScaling()||j.altKey;if(this._movingAnchorName==="top-left"){if(q){var Q=vt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};J=Math.sqrt(Math.pow(Q.x-w.x(),2)+Math.pow(Q.y-w.y(),2));var tt=this.findOne(".top-left").x()>Q.x?-1:1,nt=this.findOne(".top-left").y()>Q.y?-1:1;Y=J*this.cos*tt,X=J*this.sin*nt,this.findOne(".top-left").x(Q.x-Y),this.findOne(".top-left").y(Q.y-X)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(w.y());else if(this._movingAnchorName==="top-right"){if(q){var Q=vt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};J=Math.sqrt(Math.pow(w.x()-Q.x,2)+Math.pow(Q.y-w.y(),2));var tt=this.findOne(".top-right").x()<Q.x?-1:1,nt=this.findOne(".top-right").y()>Q.y?-1:1;Y=J*this.cos*tt,X=J*this.sin*nt,this.findOne(".top-right").x(Q.x+Y),this.findOne(".top-right").y(Q.y-X)}var ht=w.position();this.findOne(".top-left").y(ht.y),this.findOne(".bottom-right").x(ht.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(w.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(w.x());else if(this._movingAnchorName==="bottom-left"){if(q){var Q=vt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};J=Math.sqrt(Math.pow(Q.x-w.x(),2)+Math.pow(w.y()-Q.y,2));var tt=Q.x<w.x()?-1:1,nt=w.y()<Q.y?-1:1;Y=J*this.cos*tt,X=J*this.sin*nt,w.x(Q.x-Y),w.y(Q.y+X)}ht=w.position(),this.findOne(".top-left").x(ht.x),this.findOne(".bottom-right").y(ht.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(w.y());else if(this._movingAnchorName==="bottom-right"){if(q){var Q=vt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};J=Math.sqrt(Math.pow(w.x()-Q.x,2)+Math.pow(w.y()-Q.y,2));var tt=this.findOne(".bottom-right").x()<Q.x?-1:1,nt=this.findOne(".bottom-right").y()<Q.y?-1:1;Y=J*this.cos*tt,X=J*this.sin*nt,this.findOne(".bottom-right").x(Q.x+Y),this.findOne(".bottom-right").y(Q.y+X)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var vt=this.centeredScaling()||j.altKey;if(vt){const dt=this.findOne(".top-left"),Et=this.findOne(".bottom-right"),Tt=dt.x(),Ot=dt.y(),Kt=this.getWidth()-Et.x(),re=this.getHeight()-Et.y();Et.move({x:-Tt,y:-Ot}),dt.move({x:Kt,y:re})}const St=this.findOne(".top-left").getAbsolutePosition();Y=St.x,X=St.y;const W=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Z=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:Y,y:X,width:W,height:Z,rotation:h.Konva.getAngle(this.rotation())},j)}_handleMouseUp(j){this._removeEvents(j)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(j){var Y;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const X=this.getNode();z--,this._fire("transformend",{evt:j,target:X}),(Y=this.getLayer())===null||Y===void 0||Y.batchDraw(),X&&this._nodes.forEach(J=>{var w;J._fire("transformend",{evt:j,target:J}),(w=J.getLayer())===null||w===void 0||w.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(j,Y){const X=this._getNodeRect(),J=1;if(i.Util._inRange(j.width,-this.padding()*2-J,J)){this.update();return}if(i.Util._inRange(j.height,-this.padding()*2-J,J)){this.update();return}const w=new i.Transform;if(w.rotate(h.Konva.getAngle(this.rotation())),this._movingAnchorName&&j.width<0&&this._movingAnchorName.indexOf("left")>=0){const q=w.point({x:-this.padding()*2,y:0});j.x+=q.x,j.y+=q.y,j.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y}else if(this._movingAnchorName&&j.width<0&&this._movingAnchorName.indexOf("right")>=0){const q=w.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y,j.width+=this.padding()*2}if(this._movingAnchorName&&j.height<0&&this._movingAnchorName.indexOf("top")>=0){const q=w.point({x:0,y:-this.padding()*2});j.x+=q.x,j.y+=q.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y,j.height+=this.padding()*2}else if(this._movingAnchorName&&j.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const q=w.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y,j.height+=this.padding()*2}if(this.boundBoxFunc()){const q=this.boundBoxFunc()(X,j);q?j=q:i.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const V=1e7,G=new i.Transform;G.translate(X.x,X.y),G.rotate(X.rotation),G.scale(X.width/V,X.height/V);const B=new i.Transform,F=j.width/V,$=j.height/V;this.flipEnabled()===!1?(B.translate(j.x,j.y),B.rotate(j.rotation),B.translate(j.width<0?j.width:0,j.height<0?j.height:0),B.scale(Math.abs(F),Math.abs($))):(B.translate(j.x,j.y),B.rotate(j.rotation),B.scale(F,$));const rt=B.multiply(G.invert());this._nodes.forEach(q=>{var Q;const tt=q.getParent().getAbsoluteTransform(),nt=q.getTransform().copy();nt.translate(q.offsetX(),q.offsetY());const ht=new i.Transform;ht.multiply(tt.copy().invert()).multiply(rt).multiply(tt).multiply(nt);const vt=ht.decompose();q.setAttrs(vt),(Q=q.getLayer())===null||Q===void 0||Q.batchDraw()}),this.rotation(i.Util._getRotation(j.rotation)),this._nodes.forEach(q=>{this._fire("transform",{evt:Y,target:q}),q._fire("transform",{evt:Y,target:q})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(j,Y){this.findOne(j).setAttrs(Y)}update(){var j;const Y=this._getNodeRect();this.rotation(i.Util._getRotation(Y.rotation));const X=Y.width,J=Y.height,w=this.enabledAnchors(),V=this.resizeEnabled(),G=this.padding(),B=this.anchorSize(),F=this.find("._anchor");F.forEach(rt=>{rt.setAttrs({width:B,height:B,offsetX:B/2,offsetY:B/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:B/2+G,offsetY:B/2+G,visible:V&&w.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:X/2,y:0,offsetY:B/2+G,visible:V&&w.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:X,y:0,offsetX:B/2-G,offsetY:B/2+G,visible:V&&w.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:J/2,offsetX:B/2+G,visible:V&&w.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:X,y:J/2,offsetX:B/2-G,visible:V&&w.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:J,offsetX:B/2+G,offsetY:B/2-G,visible:V&&w.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:X/2,y:J,offsetY:B/2-G,visible:V&&w.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:X,y:J,offsetX:B/2-G,offsetY:B/2-G,visible:V&&w.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:X/2,y:-this.rotateAnchorOffset()*i.Util._sign(J)-G,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:X,height:J,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const $=this.anchorStyleFunc();$&&F.forEach(rt=>{$(rt)}),(j=this.getLayer())===null||j===void 0||j.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const j=this.findOne("."+this._movingAnchorName);j&&j.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),c.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(j){return n.Node.prototype.clone.call(this,j)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Qd.Transformer=I,I.isTransforming=()=>z>0;function K(H){return H instanceof Array||i.Util.warn("enabledAnchors value should be an array"),H instanceof Array&&H.forEach(function(j){D.indexOf(j)===-1&&i.Util.warn("Unknown anchor name: "+j+". Available names are: "+D.join(", "))}),H||[]}return I.prototype.className="Transformer",(0,g._registerNode)(I),t.Factory.addGetterSetter(I,"enabledAnchors",D,K),t.Factory.addGetterSetter(I,"flipEnabled",!0,(0,f.getBooleanValidator)()),t.Factory.addGetterSetter(I,"resizeEnabled",!0),t.Factory.addGetterSetter(I,"anchorSize",10,(0,f.getNumberValidator)()),t.Factory.addGetterSetter(I,"rotateEnabled",!0),t.Factory.addGetterSetter(I,"rotateLineVisible",!0),t.Factory.addGetterSetter(I,"rotationSnaps",[]),t.Factory.addGetterSetter(I,"rotateAnchorOffset",50,(0,f.getNumberValidator)()),t.Factory.addGetterSetter(I,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(I,"rotationSnapTolerance",5,(0,f.getNumberValidator)()),t.Factory.addGetterSetter(I,"borderEnabled",!0),t.Factory.addGetterSetter(I,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(I,"anchorStrokeWidth",1,(0,f.getNumberValidator)()),t.Factory.addGetterSetter(I,"anchorFill","white"),t.Factory.addGetterSetter(I,"anchorCornerRadius",0,(0,f.getNumberValidator)()),t.Factory.addGetterSetter(I,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(I,"borderStrokeWidth",1,(0,f.getNumberValidator)()),t.Factory.addGetterSetter(I,"borderDash"),t.Factory.addGetterSetter(I,"keepRatio",!0),t.Factory.addGetterSetter(I,"shiftBehavior","default"),t.Factory.addGetterSetter(I,"centeredScaling",!1),t.Factory.addGetterSetter(I,"ignoreStroke",!1),t.Factory.addGetterSetter(I,"padding",0,(0,f.getNumberValidator)()),t.Factory.addGetterSetter(I,"nodes"),t.Factory.addGetterSetter(I,"node"),t.Factory.addGetterSetter(I,"boundBoxFunc"),t.Factory.addGetterSetter(I,"anchorDragBoundFunc"),t.Factory.addGetterSetter(I,"anchorStyleFunc"),t.Factory.addGetterSetter(I,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(I,"useSingleNodeRotation",!0),t.Factory.backCompat(I,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Qd}var Wd={},S3;function iC(){if(S3)return Wd;S3=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.Wedge=void 0;const i=ye(),t=mi(),n=he(),s=Se(),r=he();let c=class extends t.Shape{_sceneFunc(f){f.beginPath(),f.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),f.lineTo(0,0),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(f){this.radius(f/2)}setHeight(f){this.radius(f/2)}};return Wd.Wedge=c,c.prototype.className="Wedge",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(c),i.Factory.addGetterSetter(c,"radius",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(c,"angle",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(c,"clockwise",!1),i.Factory.backCompat(c,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Wd}var Jd={},E3;function aC(){if(E3)return Jd;E3=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.Blur=void 0;const i=ye(),t=Ln(),n=Se();function s(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function h(g,p){const _=g.data,S=g.width,x=g.height;let b,E,M,D,L,T,A,N,z,I,K,H,j,Y,X,J,w,V,G,B,F,$,rt,q;const Q=p+p+1,tt=S-1,nt=x-1,ht=p+1,vt=ht*(ht+1)/2,St=new s,W=r[p],Z=c[p];let dt=null,Et=St,Tt=null,Ot=null;for(M=1;M<Q;M++)Et=Et.next=new s,M===ht&&(dt=Et);for(Et.next=St,A=T=0,E=0;E<x;E++){for(J=w=V=G=N=z=I=K=0,H=ht*(B=_[T]),j=ht*(F=_[T+1]),Y=ht*($=_[T+2]),X=ht*(rt=_[T+3]),N+=vt*B,z+=vt*F,I+=vt*$,K+=vt*rt,Et=St,M=0;M<ht;M++)Et.r=B,Et.g=F,Et.b=$,Et.a=rt,Et=Et.next;for(M=1;M<ht;M++)D=T+((tt<M?tt:M)<<2),N+=(Et.r=B=_[D])*(q=ht-M),z+=(Et.g=F=_[D+1])*q,I+=(Et.b=$=_[D+2])*q,K+=(Et.a=rt=_[D+3])*q,J+=B,w+=F,V+=$,G+=rt,Et=Et.next;for(Tt=St,Ot=dt,b=0;b<S;b++)_[T+3]=rt=K*W>>Z,rt!==0?(rt=255/rt,_[T]=(N*W>>Z)*rt,_[T+1]=(z*W>>Z)*rt,_[T+2]=(I*W>>Z)*rt):_[T]=_[T+1]=_[T+2]=0,N-=H,z-=j,I-=Y,K-=X,H-=Tt.r,j-=Tt.g,Y-=Tt.b,X-=Tt.a,D=A+((D=b+p+1)<tt?D:tt)<<2,J+=Tt.r=_[D],w+=Tt.g=_[D+1],V+=Tt.b=_[D+2],G+=Tt.a=_[D+3],N+=J,z+=w,I+=V,K+=G,Tt=Tt.next,H+=B=Ot.r,j+=F=Ot.g,Y+=$=Ot.b,X+=rt=Ot.a,J-=B,w-=F,V-=$,G-=rt,Ot=Ot.next,T+=4;A+=S}for(b=0;b<S;b++){for(w=V=G=J=z=I=K=N=0,T=b<<2,H=ht*(B=_[T]),j=ht*(F=_[T+1]),Y=ht*($=_[T+2]),X=ht*(rt=_[T+3]),N+=vt*B,z+=vt*F,I+=vt*$,K+=vt*rt,Et=St,M=0;M<ht;M++)Et.r=B,Et.g=F,Et.b=$,Et.a=rt,Et=Et.next;for(L=S,M=1;M<=p;M++)T=L+b<<2,N+=(Et.r=B=_[T])*(q=ht-M),z+=(Et.g=F=_[T+1])*q,I+=(Et.b=$=_[T+2])*q,K+=(Et.a=rt=_[T+3])*q,J+=B,w+=F,V+=$,G+=rt,Et=Et.next,M<nt&&(L+=S);for(T=b,Tt=St,Ot=dt,E=0;E<x;E++)D=T<<2,_[D+3]=rt=K*W>>Z,rt>0?(rt=255/rt,_[D]=(N*W>>Z)*rt,_[D+1]=(z*W>>Z)*rt,_[D+2]=(I*W>>Z)*rt):_[D]=_[D+1]=_[D+2]=0,N-=H,z-=j,I-=Y,K-=X,H-=Tt.r,j-=Tt.g,Y-=Tt.b,X-=Tt.a,D=b+((D=E+ht)<nt?D:nt)*S<<2,N+=J+=Tt.r=_[D],z+=w+=Tt.g=_[D+1],I+=V+=Tt.b=_[D+2],K+=G+=Tt.a=_[D+3],Tt=Tt.next,H+=B=Ot.r,j+=F=Ot.g,Y+=$=Ot.b,X+=rt=Ot.a,J-=B,w-=F,V-=$,G-=rt,Ot=Ot.next,T+=S}}const f=function(p){const _=Math.round(this.blurRadius());_>0&&h(p,_)};return Jd.Blur=f,i.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),Jd}var $d={},x3;function sC(){if(x3)return $d;x3=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.Brighten=void 0;const i=ye(),t=Ln(),n=Se(),s=function(r){const c=this.brightness()*255,h=r.data,f=h.length;for(let g=0;g<f;g+=4)h[g]+=c,h[g+1]+=c,h[g+2]+=c};return $d.Brighten=s,i.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),$d}var t0={},b3;function lC(){if(b3)return t0;b3=1,Object.defineProperty(t0,"__esModule",{value:!0}),t0.Contrast=void 0;const i=ye(),t=Ln(),n=Se(),s=function(r){const c=Math.pow((this.contrast()+100)/100,2),h=r.data,f=h.length;let g=150,p=150,_=150;for(let S=0;S<f;S+=4)g=h[S],p=h[S+1],_=h[S+2],g/=255,g-=.5,g*=c,g+=.5,g*=255,p/=255,p-=.5,p*=c,p+=.5,p*=255,_/=255,_-=.5,_*=c,_+=.5,_*=255,g=g<0?0:g>255?255:g,p=p<0?0:p>255?255:p,_=_<0?0:_>255?255:_,h[S]=g,h[S+1]=p,h[S+2]=_};return t0.Contrast=s,i.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),t0}var e0={},C3;function rC(){if(C3)return e0;C3=1,Object.defineProperty(e0,"__esModule",{value:!0}),e0.Emboss=void 0;const i=ye(),t=Ln(),n=Cn(),s=Se(),r=function(c){const h=this.embossStrength()*10,f=this.embossWhiteLevel()*255,g=this.embossDirection(),p=this.embossBlend(),_=c.data,S=c.width,x=c.height,b=S*4;let E=0,M=0,D=x;switch(g){case"top-left":E=-1,M=-1;break;case"top":E=-1,M=0;break;case"top-right":E=-1,M=1;break;case"right":E=0,M=1;break;case"bottom-right":E=1,M=1;break;case"bottom":E=1,M=0;break;case"bottom-left":E=1,M=-1;break;case"left":E=0,M=-1;break;default:n.Util.error("Unknown emboss direction: "+g)}do{const L=(D-1)*b;let T=E;D+T<1&&(T=0),D+T>x&&(T=0);const A=(D-1+T)*S*4;let N=S;do{const z=L+(N-1)*4;let I=M;N+I<1&&(I=0),N+I>S&&(I=0);const K=A+(N-1+I)*4,H=_[z]-_[K],j=_[z+1]-_[K+1],Y=_[z+2]-_[K+2];let X=H;const J=X>0?X:-X,w=j>0?j:-j,V=Y>0?Y:-Y;if(w>J&&(X=j),V>J&&(X=Y),X*=h,p){const G=_[z]+X,B=_[z+1]+X,F=_[z+2]+X;_[z]=G>255?255:G<0?0:G,_[z+1]=B>255?255:B<0?0:B,_[z+2]=F>255?255:F<0?0:F}else{let G=f-X;G<0?G=0:G>255&&(G=255),_[z]=_[z+1]=_[z+2]=G}}while(--N)}while(--D)};return e0.Emboss=r,i.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,s.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,s.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,i.Factory.afterSetFilter),e0}var n0={},R3;function oC(){if(R3)return n0;R3=1,Object.defineProperty(n0,"__esModule",{value:!0}),n0.Enhance=void 0;const i=ye(),t=Ln(),n=Se();function s(c,h,f,g,p){const _=f-h,S=p-g;if(_===0)return g+S/2;if(S===0)return g;let x=(c-h)/_;return x=S*x+g,x}const r=function(c){const h=c.data,f=h.length;let g=h[0],p=g,_,S=h[1],x=S,b,E=h[2],M=E,D;const L=this.enhance();if(L===0)return;for(let X=0;X<f;X+=4)_=h[X+0],_<g?g=_:_>p&&(p=_),b=h[X+1],b<S?S=b:b>x&&(x=b),D=h[X+2],D<E?E=D:D>M&&(M=D);p===g&&(p=255,g=0),x===S&&(x=255,S=0),M===E&&(M=255,E=0);let T,A,N,z,I,K,H,j,Y;L>0?(A=p+L*(255-p),N=g-L*(g-0),I=x+L*(255-x),K=S-L*(S-0),j=M+L*(255-M),Y=E-L*(E-0)):(T=(p+g)*.5,A=p+L*(p-T),N=g+L*(g-T),z=(x+S)*.5,I=x+L*(x-z),K=S+L*(S-z),H=(M+E)*.5,j=M+L*(M-H),Y=E+L*(E-H));for(let X=0;X<f;X+=4)h[X+0]=s(h[X+0],g,p,N,A),h[X+1]=s(h[X+1],S,x,K,I),h[X+2]=s(h[X+2],E,M,Y,j)};return n0.Enhance=r,i.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),n0}var i0={},T3;function uC(){if(T3)return i0;T3=1,Object.defineProperty(i0,"__esModule",{value:!0}),i0.Grayscale=void 0;const i=function(t){const n=t.data,s=n.length;for(let r=0;r<s;r+=4){const c=.34*n[r]+.5*n[r+1]+.16*n[r+2];n[r]=c,n[r+1]=c,n[r+2]=c}};return i0.Grayscale=i,i0}var a0={},A3;function cC(){if(A3)return a0;A3=1,Object.defineProperty(a0,"__esModule",{value:!0}),a0.HSL=void 0;const i=ye(),t=Ln(),n=Se();i.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter);const s=function(r){const c=r.data,h=c.length,f=1,g=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,_=this.luminance()*127,S=f*g*Math.cos(p*Math.PI/180),x=f*g*Math.sin(p*Math.PI/180),b=.299*f+.701*S+.167*x,E=.587*f-.587*S+.33*x,M=.114*f-.114*S-.497*x,D=.299*f-.299*S-.328*x,L=.587*f+.413*S+.035*x,T=.114*f-.114*S+.293*x,A=.299*f-.3*S+1.25*x,N=.587*f-.586*S-1.05*x,z=.114*f+.886*S-.2*x;let I,K,H,j;for(let Y=0;Y<h;Y+=4)I=c[Y+0],K=c[Y+1],H=c[Y+2],j=c[Y+3],c[Y+0]=b*I+E*K+M*H+_,c[Y+1]=D*I+L*K+T*H+_,c[Y+2]=A*I+N*K+z*H+_,c[Y+3]=j};return a0.HSL=s,a0}var s0={},M3;function hC(){if(M3)return s0;M3=1,Object.defineProperty(s0,"__esModule",{value:!0}),s0.HSV=void 0;const i=ye(),t=Ln(),n=Se(),s=function(r){const c=r.data,h=c.length,f=Math.pow(2,this.value()),g=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,_=f*g*Math.cos(p*Math.PI/180),S=f*g*Math.sin(p*Math.PI/180),x=.299*f+.701*_+.167*S,b=.587*f-.587*_+.33*S,E=.114*f-.114*_-.497*S,M=.299*f-.299*_-.328*S,D=.587*f+.413*_+.035*S,L=.114*f-.114*_+.293*S,T=.299*f-.3*_+1.25*S,A=.587*f-.586*_-1.05*S,N=.114*f+.886*_-.2*S;let z,I,K,H;for(let j=0;j<h;j+=4)z=c[j+0],I=c[j+1],K=c[j+2],H=c[j+3],c[j+0]=x*z+b*I+E*K,c[j+1]=M*z+D*I+L*K,c[j+2]=T*z+A*I+N*K,c[j+3]=H};return s0.HSV=s,i.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),s0}var l0={},D3;function fC(){if(D3)return l0;D3=1,Object.defineProperty(l0,"__esModule",{value:!0}),l0.Invert=void 0;const i=function(t){const n=t.data,s=n.length;for(let r=0;r<s;r+=4)n[r]=255-n[r],n[r+1]=255-n[r+1],n[r+2]=255-n[r+2]};return l0.Invert=i,l0}var r0={},O3;function dC(){if(O3)return r0;O3=1,Object.defineProperty(r0,"__esModule",{value:!0}),r0.Kaleidoscope=void 0;const i=ye(),t=Ln(),n=Cn(),s=Se(),r=function(f,g,p){const _=f.data,S=g.data,x=f.width,b=f.height,E=p.polarCenterX||x/2,M=p.polarCenterY||b/2;let D=Math.sqrt(E*E+M*M),L=x-E,T=b-M;const A=Math.sqrt(L*L+T*T);D=A>D?A:D;const N=b,z=x,I=360/z*Math.PI/180;for(let K=0;K<z;K+=1){const H=Math.sin(K*I),j=Math.cos(K*I);for(let Y=0;Y<N;Y+=1){L=Math.floor(E+D*Y/N*j),T=Math.floor(M+D*Y/N*H);let X=(T*x+L)*4;const J=_[X+0],w=_[X+1],V=_[X+2],G=_[X+3];X=(K+Y*x)*4,S[X+0]=J,S[X+1]=w,S[X+2]=V,S[X+3]=G}}},c=function(f,g,p){const _=f.data,S=g.data,x=f.width,b=f.height,E=p.polarCenterX||x/2,M=p.polarCenterY||b/2;let D=Math.sqrt(E*E+M*M),L=x-E,T=b-M;const A=Math.sqrt(L*L+T*T);D=A>D?A:D;const N=b,z=x,I=0;let K,H;for(L=0;L<x;L+=1)for(T=0;T<b;T+=1){const j=L-E,Y=T-M,X=Math.sqrt(j*j+Y*Y)*N/D;let J=(Math.atan2(Y,j)*180/Math.PI+360+I)%360;J=J*z/360,K=Math.floor(J),H=Math.floor(X);let w=(H*x+K)*4;const V=_[w+0],G=_[w+1],B=_[w+2],F=_[w+3];w=(T*x+L)*4,S[w+0]=V,S[w+1]=G,S[w+2]=B,S[w+3]=F}},h=function(f){const g=f.width,p=f.height;let _,S,x,b,E,M,D,L,T,A,N=Math.round(this.kaleidoscopePower());const z=Math.round(this.kaleidoscopeAngle()),I=Math.floor(g*(z%360)/360);if(N<1)return;const K=n.Util.createCanvasElement();K.width=g,K.height=p;const H=K.getContext("2d").getImageData(0,0,g,p);n.Util.releaseCanvas(K),r(f,H,{polarCenterX:g/2,polarCenterY:p/2});let j=g/Math.pow(2,N);for(;j<=8;)j=j*2,N-=1;j=Math.ceil(j);let Y=j,X=0,J=Y,w=1;for(I+j>g&&(X=Y,J=0,w=-1),S=0;S<p;S+=1)for(_=X;_!==J;_+=w)x=Math.round(_+I)%g,T=(g*S+x)*4,E=H.data[T+0],M=H.data[T+1],D=H.data[T+2],L=H.data[T+3],A=(g*S+_)*4,H.data[A+0]=E,H.data[A+1]=M,H.data[A+2]=D,H.data[A+3]=L;for(S=0;S<p;S+=1)for(Y=Math.floor(j),b=0;b<N;b+=1){for(_=0;_<Y+1;_+=1)T=(g*S+_)*4,E=H.data[T+0],M=H.data[T+1],D=H.data[T+2],L=H.data[T+3],A=(g*S+Y*2-_-1)*4,H.data[A+0]=E,H.data[A+1]=M,H.data[A+2]=D,H.data[A+3]=L;Y*=2}c(H,f,{})};return r0.Kaleidoscope=h,i.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,s.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,s.getNumberValidator)(),i.Factory.afterSetFilter),r0}var o0={},N3;function gC(){if(N3)return o0;N3=1,Object.defineProperty(o0,"__esModule",{value:!0}),o0.Mask=void 0;const i=ye(),t=Ln(),n=Se();function s(x,b,E){let M=(E*x.width+b)*4;const D=[];return D.push(x.data[M++],x.data[M++],x.data[M++],x.data[M++]),D}function r(x,b){return Math.sqrt(Math.pow(x[0]-b[0],2)+Math.pow(x[1]-b[1],2)+Math.pow(x[2]-b[2],2))}function c(x){const b=[0,0,0];for(let E=0;E<x.length;E++)b[0]+=x[E][0],b[1]+=x[E][1],b[2]+=x[E][2];return b[0]/=x.length,b[1]/=x.length,b[2]/=x.length,b}function h(x,b){const E=s(x,0,0),M=s(x,x.width-1,0),D=s(x,0,x.height-1),L=s(x,x.width-1,x.height-1),T=b||10;if(r(E,M)<T&&r(M,L)<T&&r(L,D)<T&&r(D,E)<T){const A=c([M,E,L,D]),N=[];for(let z=0;z<x.width*x.height;z++){const I=r(A,[x.data[z*4],x.data[z*4+1],x.data[z*4+2]]);N[z]=I<T?0:255}return N}}function f(x,b){for(let E=0;E<x.width*x.height;E++)x.data[4*E+3]=b[E]}function g(x,b,E){const M=[1,1,1,1,0,1,1,1,1],D=Math.round(Math.sqrt(M.length)),L=Math.floor(D/2),T=[];for(let A=0;A<E;A++)for(let N=0;N<b;N++){const z=A*b+N;let I=0;for(let K=0;K<D;K++)for(let H=0;H<D;H++){const j=A+K-L,Y=N+H-L;if(j>=0&&j<E&&Y>=0&&Y<b){const X=j*b+Y,J=M[K*D+H];I+=x[X]*J}}T[z]=I===255*8?255:0}return T}function p(x,b,E){const M=[1,1,1,1,1,1,1,1,1],D=Math.round(Math.sqrt(M.length)),L=Math.floor(D/2),T=[];for(let A=0;A<E;A++)for(let N=0;N<b;N++){const z=A*b+N;let I=0;for(let K=0;K<D;K++)for(let H=0;H<D;H++){const j=A+K-L,Y=N+H-L;if(j>=0&&j<E&&Y>=0&&Y<b){const X=j*b+Y,J=M[K*D+H];I+=x[X]*J}}T[z]=I>=255*4?255:0}return T}function _(x,b,E){const M=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],D=Math.round(Math.sqrt(M.length)),L=Math.floor(D/2),T=[];for(let A=0;A<E;A++)for(let N=0;N<b;N++){const z=A*b+N;let I=0;for(let K=0;K<D;K++)for(let H=0;H<D;H++){const j=A+K-L,Y=N+H-L;if(j>=0&&j<E&&Y>=0&&Y<b){const X=j*b+Y,J=M[K*D+H];I+=x[X]*J}}T[z]=I}return T}const S=function(x){const b=this.threshold();let E=h(x,b);return E&&(E=g(E,x.width,x.height),E=p(E,x.width,x.height),E=_(E,x.width,x.height),f(x,E)),x};return o0.Mask=S,i.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),o0}var u0={},w3;function mC(){if(w3)return u0;w3=1,Object.defineProperty(u0,"__esModule",{value:!0}),u0.Noise=void 0;const i=ye(),t=Ln(),n=Se(),s=function(r){const c=this.noise()*255,h=r.data,f=h.length,g=c/2;for(let p=0;p<f;p+=4)h[p+0]+=g-2*g*Math.random(),h[p+1]+=g-2*g*Math.random(),h[p+2]+=g-2*g*Math.random()};return u0.Noise=s,i.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),u0}var c0={},L3;function pC(){if(L3)return c0;L3=1,Object.defineProperty(c0,"__esModule",{value:!0}),c0.Pixelate=void 0;const i=ye(),t=Cn(),n=Ln(),s=Se(),r=function(c){let h=Math.ceil(this.pixelSize()),f=c.width,g=c.height,p,_,S,x,b,E,M,D=Math.ceil(f/h),L=Math.ceil(g/h),T,A,N,z,I,K,H,j=c.data;if(h<=0){t.Util.error("pixelSize value can not be <= 0");return}for(I=0;I<D;I+=1)for(K=0;K<L;K+=1){for(x=0,b=0,E=0,M=0,T=I*h,A=T+h,N=K*h,z=N+h,H=0,p=T;p<A;p+=1)if(!(p>=f))for(_=N;_<z;_+=1)_>=g||(S=(f*_+p)*4,x+=j[S+0],b+=j[S+1],E+=j[S+2],M+=j[S+3],H+=1);for(x=x/H,b=b/H,E=E/H,M=M/H,p=T;p<A;p+=1)if(!(p>=f))for(_=N;_<z;_+=1)_>=g||(S=(f*_+p)*4,j[S+0]=x,j[S+1]=b,j[S+2]=E,j[S+3]=M)}};return c0.Pixelate=r,i.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,s.getNumberValidator)(),i.Factory.afterSetFilter),c0}var h0={},z3;function _C(){if(z3)return h0;z3=1,Object.defineProperty(h0,"__esModule",{value:!0}),h0.Posterize=void 0;const i=ye(),t=Ln(),n=Se(),s=function(r){const c=Math.round(this.levels()*254)+1,h=r.data,f=h.length,g=255/c;for(let p=0;p<f;p+=1)h[p]=Math.floor(h[p]/g)*g};return h0.Posterize=s,i.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),h0}var f0={},G3;function yC(){if(G3)return f0;G3=1,Object.defineProperty(f0,"__esModule",{value:!0}),f0.RGB=void 0;const i=ye(),t=Ln(),n=Se(),s=function(r){const c=r.data,h=c.length,f=this.red(),g=this.green(),p=this.blue();for(let _=0;_<h;_+=4){const S=(.34*c[_]+.5*c[_+1]+.16*c[_+2])/255;c[_]=S*f,c[_+1]=S*g,c[_+2]=S*p,c[_+3]=c[_+3]}};return f0.RGB=s,i.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),i.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),i.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,i.Factory.afterSetFilter),f0}var d0={},U3;function vC(){if(U3)return d0;U3=1,Object.defineProperty(d0,"__esModule",{value:!0}),d0.RGBA=void 0;const i=ye(),t=Ln(),n=Se(),s=function(r){const c=r.data,h=c.length,f=this.red(),g=this.green(),p=this.blue(),_=this.alpha();for(let S=0;S<h;S+=4){const x=1-_;c[S]=f*_+c[S]*x,c[S+1]=g*_+c[S+1]*x,c[S+2]=p*_+c[S+2]*x}};return d0.RGBA=s,i.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),i.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),i.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r}),d0}var g0={},B3;function SC(){if(B3)return g0;B3=1,Object.defineProperty(g0,"__esModule",{value:!0}),g0.Sepia=void 0;const i=function(t){const n=t.data,s=n.length;for(let r=0;r<s;r+=4){const c=n[r+0],h=n[r+1],f=n[r+2];n[r+0]=Math.min(255,c*.393+h*.769+f*.189),n[r+1]=Math.min(255,c*.349+h*.686+f*.168),n[r+2]=Math.min(255,c*.272+h*.534+f*.131)}};return g0.Sepia=i,g0}var m0={},H3;function EC(){if(H3)return m0;H3=1,Object.defineProperty(m0,"__esModule",{value:!0}),m0.Solarize=void 0;const i=function(t){const n=t.data,s=t.width,r=t.height,c=s*4;let h=r;do{const f=(h-1)*c;let g=s;do{const p=f+(g-1)*4;let _=n[p],S=n[p+1],x=n[p+2];_>127&&(_=255-_),S>127&&(S=255-S),x>127&&(x=255-x),n[p]=_,n[p+1]=S,n[p+2]=x}while(--g)}while(--h)};return m0.Solarize=i,m0}var p0={},I3;function xC(){if(I3)return p0;I3=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.Threshold=void 0;const i=ye(),t=Ln(),n=Se(),s=function(r){const c=this.threshold()*255,h=r.data,f=h.length;for(let g=0;g<f;g+=1)h[g]=h[g]<c?0:255};return p0.Threshold=s,i.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),p0}var j3;function bC(){if(j3)return Od;j3=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.Konva=void 0;const i=w_(),t=F9(),n=X9(),s=k9(),r=K9(),c=Z9(),h=Q9(),f=FS(),g=R2(),p=PS(),_=W9(),S=J9(),x=$9(),b=tC(),E=XS(),M=eC(),D=nC(),L=iC(),T=aC(),A=sC(),N=lC(),z=rC(),I=oC(),K=uC(),H=cC(),j=hC(),Y=fC(),X=dC(),J=gC(),w=mC(),V=pC(),G=_C(),B=yC(),F=vC(),$=SC(),rt=EC(),q=xC();return Od.Konva=i.Konva.Util._assign(i.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:s.Circle,Ellipse:r.Ellipse,Image:c.Image,Label:h.Label,Tag:h.Tag,Line:f.Line,Path:g.Path,Rect:p.Rect,RegularPolygon:_.RegularPolygon,Ring:S.Ring,Sprite:x.Sprite,Star:b.Star,Text:E.Text,TextPath:M.TextPath,Transformer:D.Transformer,Wedge:L.Wedge,Filters:{Blur:T.Blur,Brighten:A.Brighten,Contrast:N.Contrast,Emboss:z.Emboss,Enhance:I.Enhance,Grayscale:K.Grayscale,HSL:H.HSL,HSV:j.HSV,Invert:Y.Invert,Kaleidoscope:X.Kaleidoscope,Mask:J.Mask,Noise:w.Noise,Pixelate:V.Pixelate,Posterize:G.Posterize,RGB:B.RGB,RGBA:F.RGBA,Sepia:$.Sepia,Solarize:rt.Solarize,Threshold:q.Threshold}}),Od}var CC=V1.exports,Y3;function RC(){if(Y3)return V1.exports;Y3=1,Object.defineProperty(CC,"__esModule",{value:!0});const i=bC();return V1.exports=i.Konva,V1.exports}RC();var I1={exports:{}},V3;function TC(){return V3||(V3=1,function(i,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=w_();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const s=w_();i.exports=s.Konva}(I1,I1.exports)),I1.exports}var AC=TC();const im=sm(AC);var i_={exports:{}},a_={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q3;function MC(){return q3||(q3=1,function(i){i.exports=function(t){function n(l,o,m,v){return new Gm(l,o,m,v)}function s(){}function r(l){var o="https://react.dev/errors/"+l;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)o+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(l){var o=l,m=l;if(l.alternate)for(;o.return;)o=o.return;else{l=o;do o=l,(o.flags&4098)!==0&&(m=o.return),l=o.return;while(l)}return o.tag===3?m:null}function h(l){if(c(l)!==l)throw Error(r(188))}function f(l){var o=l.alternate;if(!o){if(o=c(l),o===null)throw Error(r(188));return o!==l?null:l}for(var m=l,v=o;;){var R=m.return;if(R===null)break;var O=R.alternate;if(O===null){if(v=R.return,v!==null){m=v;continue}break}if(R.child===O.child){for(O=R.child;O;){if(O===m)return h(R),l;if(O===v)return h(R),o;O=O.sibling}throw Error(r(188))}if(m.return!==v.return)m=R,v=O;else{for(var k=!1,it=R.child;it;){if(it===m){k=!0,m=R,v=O;break}if(it===v){k=!0,v=R,m=O;break}it=it.sibling}if(!k){for(it=O.child;it;){if(it===m){k=!0,m=O,v=R;break}if(it===v){k=!0,v=O,m=R;break}it=it.sibling}if(!k)throw Error(r(189))}}if(m.alternate!==v)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?l:o}function g(l){var o=l.tag;if(o===5||o===26||o===27||o===6)return l;for(l=l.child;l!==null;){if(o=g(l),o!==null)return o;l=l.sibling}return null}function p(l){var o=l.tag;if(o===5||o===26||o===27||o===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(o=p(l),o!==null))return o;l=l.sibling}return null}function _(l){return l===null||typeof l!="object"?null:(l=Yc&&l[Yc]||l["@@iterator"],typeof l=="function"?l:null)}function S(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===gu?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case rr:return"Fragment";case jc:return"Profiler";case cu:return"StrictMode";case fu:return"Suspense";case du:return"SuspenseList";case or:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case ul:return"Portal";case As:return(l.displayName||"Context")+".Provider";case wf:return(l._context.displayName||"Context")+".Consumer";case Ka:var o=l.render;return l=l.displayName,l||(l=o.displayName||o.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Za:return o=l.displayName||null,o!==null?o:S(l.type)||"Memo";case Si:o=l._payload,l=l._init;try{return S(l(o))}catch{}}return null}function x(l){return{current:l}}function b(l){0>Ls||(l.current=ws[Ls],ws[Ls]=null,Ls--)}function E(l,o){Ls++,ws[Ls]=l.current,l.current=o}function M(l){return l>>>=0,l===0?32:31-(n1(l)/Qc|0)|0}function D(l){var o=l&42;if(o!==0)return o;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function L(l,o,m){var v=l.pendingLanes;if(v===0)return 0;var R=0,O=l.suspendedLanes,k=l.pingedLanes;l=l.warmLanes;var it=v&134217727;return it!==0?(v=it&~O,v!==0?R=D(v):(k&=it,k!==0?R=D(k):m||(m=it&~l,m!==0&&(R=D(m))))):(it=v&~O,it!==0?R=D(it):k!==0?R=D(k):m||(m=v&~l,m!==0&&(R=D(m)))),R===0?0:o!==0&&o!==R&&(o&O)===0&&(O=R&-R,m=o&-o,O>=m||O===32&&(m&4194048)!==0)?o:R}function T(l,o){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&o)===0}function A(l,o){switch(l){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N(){var l=Tu;return Tu<<=1,(Tu&4194048)===0&&(Tu=256),l}function z(){var l=so;return so<<=1,(so&62914560)===0&&(so=4194304),l}function I(l){for(var o=[],m=0;31>m;m++)o.push(l);return o}function K(l,o){l.pendingLanes|=o,o!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function H(l,o,m,v,R,O){var k=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var it=l.entanglements,ct=l.expirationTimes,At=l.hiddenUpdates;for(m=k&~m;0<m;){var Dt=31-ji(m),Nt=1<<Dt;it[Dt]=0,ct[Dt]=-1;var wt=At[Dt];if(wt!==null)for(At[Dt]=null,Dt=0;Dt<wt.length;Dt++){var Jt=wt[Dt];Jt!==null&&(Jt.lane&=-536870913)}m&=~Nt}v!==0&&j(l,v,0),O!==0&&R===0&&l.tag!==0&&(l.suspendedLanes|=O&~(k&~o))}function j(l,o,m){l.pendingLanes|=o,l.suspendedLanes&=~o;var v=31-ji(o);l.entangledLanes|=o,l.entanglements[v]=l.entanglements[v]|1073741824|m&4194090}function Y(l,o){var m=l.entangledLanes|=o;for(l=l.entanglements;m;){var v=31-ji(m),R=1<<v;R&o|l[v]&o&&(l[v]|=o),m&=~R}}function X(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function J(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function w(l){if(typeof l1=="function"&&r1(l),xi&&typeof xi.setStrictMode=="function")try{xi.setStrictMode(gl,l)}catch{}}function V(l){if($c===void 0)try{throw Error()}catch(m){var o=m.stack.trim().match(/\n( *(at )?)/);$c=o&&o[1]||"",ad=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$c+l+ad}function G(l,o){if(!l||th)return"";th=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(o){var Nt=function(){throw Error()};if(Object.defineProperty(Nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Nt,[])}catch(Jt){var wt=Jt}Reflect.construct(l,[],Nt)}else{try{Nt.call()}catch(Jt){wt=Jt}l.call(Nt.prototype)}}else{try{throw Error()}catch(Jt){wt=Jt}(Nt=l())&&typeof Nt.catch=="function"&&Nt.catch(function(){})}}catch(Jt){if(Jt&&wt&&typeof Jt.stack=="string")return[Jt.stack,wt.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=v.DetermineComponentFrameRoot(),k=O[0],it=O[1];if(k&&it){var ct=k.split(`
`),At=it.split(`
`);for(R=v=0;v<ct.length&&!ct[v].includes("DetermineComponentFrameRoot");)v++;for(;R<At.length&&!At[R].includes("DetermineComponentFrameRoot");)R++;if(v===ct.length||R===At.length)for(v=ct.length-1,R=At.length-1;1<=v&&0<=R&&ct[v]!==At[R];)R--;for(;1<=v&&0<=R;v--,R--)if(ct[v]!==At[R]){if(v!==1||R!==1)do if(v--,R--,0>R||ct[v]!==At[R]){var Dt=`
`+ct[v].replace(" at new "," at ");return l.displayName&&Dt.includes("<anonymous>")&&(Dt=Dt.replace("<anonymous>",l.displayName)),Dt}while(1<=v&&0<=R);break}}}finally{th=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?V(m):""}function B(l){switch(l.tag){case 26:case 27:case 5:return V(l.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 15:return G(l.type,!1);case 11:return G(l.type.render,!1);case 1:return G(l.type,!0);case 31:return V("Activity");default:return""}}function F(l){try{var o="";do o+=B(l),l=l.return;while(l);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function $(l,o){if(typeof l=="object"&&l!==null){var m=eh.get(l);return m!==void 0?m:(o={value:l,source:o,stack:F(o)},eh.set(l,o),o)}return{value:l,source:o,stack:F(o)}}function rt(l,o){ml[pl++]=lo,ml[pl++]=Mu,Mu=l,lo=o}function q(l,o,m){bi[Yi++]=Aa,bi[Yi++]=$a,bi[Yi++]=_l,_l=l;var v=Aa;l=$a;var R=32-ji(v)-1;v&=~(1<<R),m+=1;var O=32-ji(o)+R;if(30<O){var k=R-R%5;O=(v&(1<<k)-1).toString(32),v>>=k,R-=k,Aa=1<<32-ji(o)+R|m<<R|v,$a=O+l}else Aa=1<<O|m<<R|v,$a=l}function Q(l){l.return!==null&&(rt(l,1),q(l,1,0))}function tt(l){for(;l===Mu;)Mu=ml[--pl],ml[pl]=null,lo=ml[--pl],ml[pl]=null;for(;l===_l;)_l=bi[--Yi],bi[Yi]=null,$a=bi[--Yi],bi[Yi]=null,Aa=bi[--Yi],bi[Yi]=null}function nt(l,o){E(yl,o),E(fr,l),E(en,null),l=zf(o),b(en),E(en,l)}function ht(){b(en),b(fr),b(yl)}function vt(l){l.memoizedState!==null&&E(Du,l);var o=en.current,m=Gf(o,l.type);o!==m&&(E(fr,l),E(en,m))}function St(l){fr.current===l&&(b(en),b(fr)),Du.current===l&&(b(Du),Ds?Wa._currentValue=Ii:Wa._currentValue2=Ii)}function W(l){var o=Error(r(418,""));throw Kt($(o,l)),sd}function Z(l,o){if(!Bi)throw Error(r(175));Wg(l.stateNode,l.type,l.memoizedProps,o,l)||W(l)}function dt(l){for(rn=l.return;rn;)switch(rn.tag){case 5:case 13:Te=!1;return;case 27:case 3:Te=!0;return;default:rn=rn.return}}function Et(l){if(!Bi||l!==rn)return!1;if(!ve)return dt(l),ve=!0,!1;var o=l.tag;if(ce?o!==3&&o!==27&&(o!==5||Jf(l.type)&&!Ms(l.type,l.memoizedProps))&&_n&&W(l):o!==3&&(o!==5||Jf(l.type)&&!Ms(l.type,l.memoizedProps))&&_n&&W(l),dt(l),o===13){if(!Bi)throw Error(r(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));_n=kc(l)}else _n=ce&&o===27?Zf(l.type,_n):rn?Xg(l.stateNode):null;return!0}function Tt(){Bi&&(_n=rn=null,ve=!1)}function Ot(){var l=Ma;return l!==null&&(ui===null?ui=l:ui.push.apply(ui,l),Ma=null),l}function Kt(l){Ma===null?Ma=[l]:Ma.push(l)}function re(l,o){return l===o&&(l!==0||1/l===1/o)||l!==l&&o!==o}function Ht(l,o,m){Ds?(E(Ou,o._currentValue),o._currentValue=m):(E(Ou,o._currentValue2),o._currentValue2=m)}function Ue(l){var o=Ou.current;Ds?l._currentValue=o:l._currentValue2=o,b(Ou)}function Qt(l,o,m){for(;l!==null;){var v=l.alternate;if((l.childLanes&o)!==o?(l.childLanes|=o,v!==null&&(v.childLanes|=o)):v!==null&&(v.childLanes&o)!==o&&(v.childLanes|=o),l===m)break;l=l.return}}function Ve(l,o,m,v){var R=l.child;for(R!==null&&(R.return=l);R!==null;){var O=R.dependencies;if(O!==null){var k=R.child;O=O.firstContext;t:for(;O!==null;){var it=O;O=R;for(var ct=0;ct<o.length;ct++)if(it.context===o[ct]){O.lanes|=m,it=O.alternate,it!==null&&(it.lanes|=m),Qt(O.return,m,l),v||(k=null);break t}O=it.next}}else if(R.tag===18){if(k=R.return,k===null)throw Error(r(341));k.lanes|=m,O=k.alternate,O!==null&&(O.lanes|=m),Qt(k,m,l),k=null}else k=R.child;if(k!==null)k.return=R;else for(k=R;k!==null;){if(k===l){k=null;break}if(R=k.sibling,R!==null){R.return=k.return,k=R;break}k=k.return}R=k}}function Zn(l,o,m,v){l=null;for(var R=o,O=!1;R!==null;){if(!O){if((R.flags&524288)!==0)O=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var k=R.alternate;if(k===null)throw Error(r(387));if(k=k.memoizedProps,k!==null){var it=R.type;Wi(R.pendingProps.value,k.value)||(l!==null?l.push(it):l=[it])}}else if(R===Du.current){if(k=R.alternate,k===null)throw Error(r(387));k.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(l!==null?l.push(Wa):l=[Wa])}R=R.return}l!==null&&Ve(o,l,m,v),o.flags|=262144}function un(l){for(l=l.firstContext;l!==null;){var o=l.context;if(!Wi(Ds?o._currentValue:o._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function zn(l){Da=l,li=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Zt(l){return jn(Da,l)}function nn(l,o){return Da===null&&zn(l),jn(l,o)}function jn(l,o){var m=Ds?o._currentValue:o._currentValue2;if(o={context:o,memoizedValue:m,next:null},li===null){if(l===null)throw Error(r(308));li=o,l.dependencies={lanes:0,firstContext:o},l.flags|=524288}else li=li.next=o;return m}function Yn(){return{controller:new o1,data:new Map,refCount:0}}function Le(l){l.refCount--,l.refCount===0&&u1(Nu,function(){l.controller.abort()})}function fe(l){l!==vl&&l.next===null&&(vl===null?wu=vl=l:vl=vl.next=l),ro=!0,nh||(nh=!0,Tn())}function Je(l,o){if(!Lu&&ro){Lu=!0;do for(var m=!1,v=wu;v!==null;){if(l!==0){var R=v.pendingLanes;if(R===0)var O=0;else{var k=v.suspendedLanes,it=v.pingedLanes;O=(1<<31-ji(42|l)+1)-1,O&=R&~(k&~it),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(m=!0,Rn(v,O))}else O=ie,O=L(v,v===xe?O:0,v.cancelPendingCommit!==null||v.timeoutHandle!==ca),(O&3)===0||T(v,O)||(m=!0,Rn(v,O));v=v.next}while(m);Lu=!1}}function $e(){Ni()}function Ni(){ro=nh=!1;var l=0;zs!==0&&(Bf()&&(l=zs),zs=0);for(var o=He(),m=null,v=wu;v!==null;){var R=v.next,O=pi(v,o);O===0?(v.next=null,m===null?wu=R:m.next=R,R===null&&(vl=m)):(m=v,(l!==0||(O&3)!==0)&&(ro=!0)),v=R}Je(l)}function pi(l,o){for(var m=l.suspendedLanes,v=l.pingedLanes,R=l.expirationTimes,O=l.pendingLanes&-62914561;0<O;){var k=31-ji(O),it=1<<k,ct=R[k];ct===-1?((it&m)===0||(it&v)!==0)&&(R[k]=A(it,o)):ct<=o&&(l.expiredLanes|=it),O&=~it}if(o=xe,m=ie,m=L(l,l===o?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==ca),v=l.callbackNode,m===0||l===o&&(Oe===2||Oe===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&Wc(v),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||T(l,m)){if(o=m&-m,o===l.callbackPriority)return o;switch(v!==null&&Wc(v),J(m)){case 2:case 8:m=a1;break;case 32:m=Jc;break;case 268435456:m=s1;break;default:m=Jc}return v=Qn.bind(null,l),m=Au(m,v),l.callbackPriority=o,l.callbackNode=m,o}return v!==null&&v!==null&&Wc(v),l.callbackPriority=2,l.callbackNode=null,2}function Qn(l,o){if(Dn!==0&&Dn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(ua()&&l.callbackNode!==m)return null;var v=ie;return v=L(l,l===xe?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==ca),v===0?null:(ou(l,v,o),pi(l,He()),l.callbackNode!=null&&l.callbackNode===m?Qn.bind(null,l):null)}function Rn(l,o){if(ua())return null;ou(l,o,!0)}function Tn(){jf?Tg(function(){(It&6)!==0?Au(Hn,$e):Ni()}):Au(Hn,$e)}function Wn(){return zs===0&&(zs=N()),zs}function za(l,o){if(oo===null){var m=oo=[];Oa=0,ke=Wn(),Sl={status:"pending",value:void 0,then:function(v){m.push(v)}}}return Oa++,o.then(ds,ds),o}function ds(){if(--Oa===0&&oo!==null){Sl!==null&&(Sl.status="fulfilled");var l=oo;oo=null,ke=0,Sl=null;for(var o=0;o<l.length;o++)(0,l[o])()}}function Zh(l,o){var m=[],v={status:"pending",value:null,reason:null,then:function(R){m.push(R)}};return l.then(function(){v.status="fulfilled",v.value=o;for(var R=0;R<m.length;R++)(0,m[R])(o)},function(R){for(v.status="rejected",v.reason=R,R=0;R<m.length;R++)(0,m[R])(void 0)}),v}function ks(){var l=sn.current;return l!==null?l:xe.pooledCache}function xa(l,o){o===null?E(sn,sn.current):E(sn,o.pool)}function Ga(){var l=ks();return l===null?null:{parent:Ds?De._currentValue:De._currentValue2,pool:l}}function wi(l,o){if(Wi(l,o))return!0;if(typeof l!="object"||l===null||typeof o!="object"||o===null)return!1;var m=Object.keys(l),v=Object.keys(o);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var R=m[v];if(!Ym.call(o,R)||!Wi(l[R],o[R]))return!1}return!0}function Yo(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Ks(){}function Jn(l,o,m){switch(m=l[m],m===void 0?l.push(o):m!==o&&(o.then(Ks,Ks),o=m),o.status){case"fulfilled":return o.value;case"rejected":throw l=o.reason,Vn(l),l;default:if(typeof o.status=="string")o.then(Ks,Ks);else{if(l=xe,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=o,l.status="pending",l.then(function(v){if(o.status==="pending"){var R=o;R.status="fulfilled",R.value=v}},function(v){if(o.status==="pending"){var R=o;R.status="rejected",R.reason=v}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw l=o.reason,Vn(l),l}throw Vi=o,uo}}function aa(){if(Vi===null)throw Error(r(459));var l=Vi;return Vi=null,l}function Vn(l){if(l===uo||l===Fe)throw Error(r(483))}function $n(){for(var l=dr,o=rd=dr=0;o<l;){var m=Ji[o];Ji[o++]=null;var v=Ji[o];Ji[o++]=null;var R=Ji[o];Ji[o++]=null;var O=Ji[o];if(Ji[o++]=null,v!==null&&R!==null){var k=v.pending;k===null?R.next=R:(R.next=k.next,k.next=R),v.pending=R}O!==0&&oe(m,R,O)}}function qn(l,o,m,v){Ji[dr++]=l,Ji[dr++]=o,Ji[dr++]=m,Ji[dr++]=v,rd|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function gn(l,o,m,v){return qn(l,o,m,v),tn(l)}function Ae(l,o){return qn(l,null,null,o),tn(l)}function oe(l,o,m){l.lanes|=m;var v=l.alternate;v!==null&&(v.lanes|=m);for(var R=!1,O=l.return;O!==null;)O.childLanes|=m,v=O.alternate,v!==null&&(v.childLanes|=m),O.tag===22&&(l=O.stateNode,l===null||l._visibility&1||(R=!0)),l=O,O=O.return;return l.tag===3?(O=l.stateNode,R&&o!==null&&(R=31-ji(m),l=O.hiddenUpdates,v=l[R],v===null?l[R]=[o]:v.push(o),o.lane=m|536870912),O):null}function tn(l){if(50<Ol)throw Ol=0,oh=null,Error(r(185));for(var o=l.return;o!==null;)l=o,o=l.return;return l.tag===3?l.stateNode:null}function _i(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vo(l,o){l=l.updateQueue,o.updateQueue===l&&(o.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Zs(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function gs(l,o,m){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(It&2)!==0){var R=v.pending;return R===null?o.next=o:(o.next=R.next,R.next=o),v.pending=o,o=tn(l),oe(l,null,m),o}return qn(l,v,o,m),tn(l)}function ms(l,o,m){if(o=o.updateQueue,o!==null&&(o=o.shared,(m&4194048)!==0)){var v=o.lanes;v&=l.pendingLanes,m|=v,o.lanes=m,Y(l,m)}}function qo(l,o){var m=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var R=null,O=null;if(m=m.firstBaseUpdate,m!==null){do{var k={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};O===null?R=O=k:O=O.next=k,m=m.next}while(m!==null);O===null?R=O=o:O=O.next=o}else R=O=o;m={baseState:v.baseState,firstBaseUpdate:R,lastBaseUpdate:O,shared:v.shared,callbacks:v.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=o:l.next=o,m.lastBaseUpdate=o}function Ua(){if(Ci){var l=Sl;if(l!==null)throw l}}function Ba(l,o,m,v){Ci=!1;var R=l.updateQueue;ts=!1;var O=R.firstBaseUpdate,k=R.lastBaseUpdate,it=R.shared.pending;if(it!==null){R.shared.pending=null;var ct=it,At=ct.next;ct.next=null,k===null?O=At:k.next=At,k=ct;var Dt=l.alternate;Dt!==null&&(Dt=Dt.updateQueue,it=Dt.lastBaseUpdate,it!==k&&(it===null?Dt.firstBaseUpdate=At:it.next=At,Dt.lastBaseUpdate=ct))}if(O!==null){var Nt=R.baseState;k=0,Dt=At=ct=null,it=O;do{var wt=it.lane&-536870913,Jt=wt!==it.lane;if(Jt?(ie&wt)===wt:(v&wt)===wt){wt!==0&&wt===ke&&(Ci=!0),Dt!==null&&(Dt=Dt.next={lane:0,tag:it.tag,payload:it.payload,callback:null,next:null});t:{var da=l,Nl=it;wt=o;var ga=m;switch(Nl.tag){case 1:if(da=Nl.payload,typeof da=="function"){Nt=da.call(ga,Nt,wt);break t}Nt=da;break t;case 3:da.flags=da.flags&-65537|128;case 0:if(da=Nl.payload,wt=typeof da=="function"?da.call(ga,Nt,wt):da,wt==null)break t;Nt=sr({},Nt,wt);break t;case 2:ts=!0}}wt=it.callback,wt!==null&&(l.flags|=64,Jt&&(l.flags|=8192),Jt=R.callbacks,Jt===null?R.callbacks=[wt]:Jt.push(wt))}else Jt={lane:wt,tag:it.tag,payload:it.payload,callback:it.callback,next:null},Dt===null?(At=Dt=Jt,ct=Nt):Dt=Dt.next=Jt,k|=wt;if(it=it.next,it===null){if(it=R.shared.pending,it===null)break;Jt=it,it=Jt.next,Jt.next=null,R.lastBaseUpdate=Jt,R.shared.pending=null}}while(!0);Dt===null&&(ct=Nt),R.baseState=ct,R.firstBaseUpdate=At,R.lastBaseUpdate=Dt,O===null&&(R.shared.lanes=0),Sn|=k,l.lanes=k,l.memoizedState=Nt}}function wr(l,o){if(typeof l!="function")throw Error(r(191,l));l.call(o)}function jl(l,o){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)wr(m[l],o)}function An(l,o){l=fn,E(zu,l),E(ri,o),fn=l|o.baseLanes}function ic(){E(zu,fn),E(ri,ri.current)}function ac(){fn=zu.current,b(ri),b(zu)}function qe(){throw Error(r(321))}function Qs(l,o){if(o===null)return!1;for(var m=0;m<o.length&&m<l.length;m++)if(!Wi(l[m],o[m]))return!1;return!0}function Qh(l,o,m,v,R,O){return yn=O,$t=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Bt.H=l===null||l.memoizedState===null?gr:od,Gs=!1,O=m(v,R),Gs=!1,El&&(O=Jh(o,m,v,R)),Wh(l),O}function Wh(l){Bt.H=xl;var o=me!==null&&me.next!==null;if(yn=0,Ke=me=$t=null,Na=!1,co=0,wa=null,o)throw Error(r(300));l===null||Pt||(l=l.dependencies,l!==null&&un(l)&&(Pt=!0))}function Jh(l,o,m,v){$t=l;var R=0;do{if(El&&(wa=null),co=0,El=!1,25<=R)throw Error(r(301));if(R+=1,Ke=me=null,l.updateQueue!=null){var O=l.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Bt.H=c1,O=o(m,v)}while(El);return O}function Dm(){var l=Bt.H,o=l.useState()[0];return o=typeof o.then=="function"?Yl(o):o,l=l.useState()[0],(me!==null?me.memoizedState:null)!==l&&($t.flags|=1024),o}function Lr(){var l=$i!==0;return $i=0,l}function zr(l,o,m){o.updateQueue=l.updateQueue,o.flags&=-2053,l.lanes&=~m}function ba(l){if(Na){for(l=l.memoizedState;l!==null;){var o=l.queue;o!==null&&(o.pending=null),l=l.next}Na=!1}yn=0,Ke=me=$t=null,El=!1,co=$i=0,wa=null}function ti(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?$t.memoizedState=Ke=l:Ke=Ke.next=l,Ke}function hn(){if(me===null){var l=$t.alternate;l=l!==null?l.memoizedState:null}else l=me.next;var o=Ke===null?$t.memoizedState:Ke.next;if(o!==null)Ke=o,me=l;else{if(l===null)throw $t.alternate===null?Error(r(467)):Error(r(310));me=l,l={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},Ke===null?$t.memoizedState=Ke=l:Ke=Ke.next=l}return Ke}function Ws(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(l){var o=co;return co+=1,wa===null&&(wa=[]),l=Jn(wa,l,o),o=$t,(Ke===null?o.memoizedState:Ke.next)===null&&(o=o.alternate,Bt.H=o===null||o.memoizedState===null?gr:od),l}function Gr(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Yl(l);if(l.$$typeof===As)return Zt(l)}throw Error(r(438,String(l)))}function $h(l){var o=null,m=$t.updateQueue;if(m!==null&&(o=m.memoCache),o==null){var v=$t.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(o={data:v.data.map(function(R){return R.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),m===null&&(m=Ws(),$t.updateQueue=m),m.memoCache=o,m=o.data[o.index],m===void 0)for(m=o.data[o.index]=Array(l),v=0;v<l;v++)m[v]=Lf;return o.index++,m}function Ha(l,o){return typeof o=="function"?o(l):o}function yi(l){var o=hn();return sc(o,me,l)}function sc(l,o,m){var v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=m;var R=l.baseQueue,O=v.pending;if(O!==null){if(R!==null){var k=R.next;R.next=O.next,O.next=k}o.baseQueue=R=O,v.pending=null}if(O=l.baseState,R===null)l.memoizedState=O;else{o=R.next;var it=k=null,ct=null,At=o,Dt=!1;do{var Nt=At.lane&-536870913;if(Nt!==At.lane?(ie&Nt)===Nt:(yn&Nt)===Nt){var wt=At.revertLane;if(wt===0)ct!==null&&(ct=ct.next={lane:0,revertLane:0,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null}),Nt===ke&&(Dt=!0);else if((yn&wt)===wt){At=At.next,wt===ke&&(Dt=!0);continue}else Nt={lane:0,revertLane:At.revertLane,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null},ct===null?(it=ct=Nt,k=O):ct=ct.next=Nt,$t.lanes|=wt,Sn|=wt;Nt=At.action,Gs&&m(O,Nt),O=At.hasEagerState?At.eagerState:m(O,Nt)}else wt={lane:Nt,revertLane:At.revertLane,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null},ct===null?(it=ct=wt,k=O):ct=ct.next=wt,$t.lanes|=Nt,Sn|=Nt;At=At.next}while(At!==null&&At!==o);if(ct===null?k=O:ct.next=it,!Wi(O,l.memoizedState)&&(Pt=!0,Dt&&(m=Sl,m!==null)))throw m;l.memoizedState=O,l.baseState=k,l.baseQueue=ct,v.lastRenderedState=O}return R===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function tf(l){var o=hn(),m=o.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var v=m.dispatch,R=m.pending,O=o.memoizedState;if(R!==null){m.pending=null;var k=R=R.next;do O=l(O,k.action),k=k.next;while(k!==R);Wi(O,o.memoizedState)||(Pt=!0),o.memoizedState=O,o.baseQueue===null&&(o.baseState=O),m.lastRenderedState=O}return[O,v]}function Fo(l,o,m){var v=$t,R=hn(),O=ve;if(O){if(m===void 0)throw Error(r(407));m=m()}else m=o();var k=!Wi((me||R).memoizedState,m);k&&(R.memoizedState=m,Pt=!0),R=R.queue;var it=W0.bind(null,v,R,l);if(Fl(2048,8,it,[l]),R.getSnapshot!==o||k||Ke!==null&&Ke.memoizedState.tag&1){if(v.flags|=2048,Js(9,ps(),Po.bind(null,v,R,m,o),null),xe===null)throw Error(r(349));O||(yn&124)!==0||ef(v,o,m)}return m}function ef(l,o,m){l.flags|=16384,l={getSnapshot:o,value:m},o=$t.updateQueue,o===null?(o=Ws(),$t.updateQueue=o,o.stores=[l]):(m=o.stores,m===null?o.stores=[l]:m.push(l))}function Po(l,o,m,v){o.value=m,o.getSnapshot=v,Pi(o)&&lc(l)}function W0(l,o,m){return m(function(){Pi(o)&&lc(l)})}function Pi(l){var o=l.getSnapshot;l=l.value;try{var m=o();return!Wi(l,m)}catch{return!0}}function lc(l){var o=Ae(l,2);o!==null&&ii(o,l,2)}function rc(l){var o=ti();if(typeof l=="function"){var m=l;if(l=m(),Gs){w(!0);try{m()}finally{w(!1)}}}return o.memoizedState=o.baseState=l,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:l},o}function oc(l,o,m,v){return l.baseState=m,sc(l,me,typeof v=="function"?v:Ha)}function Ur(l,o,m,v,R){if(Wo(l))throw Error(r(485));if(l=o.action,l!==null){var O={payload:R,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){O.listeners.push(k)}};Bt.T!==null?m(!0):O.isTransition=!1,v(O),m=o.pending,m===null?(O.next=o.pending=O,nf(o,O)):(O.next=m.next,o.pending=m.next=O)}}function nf(l,o){var m=o.action,v=o.payload,R=l.state;if(o.isTransition){var O=Bt.T,k={};Bt.T=k;try{var it=m(R,v),ct=Bt.S;ct!==null&&ct(k,it),af(l,o,it)}catch(At){sf(l,o,At)}finally{Bt.T=O}}else try{O=m(R,v),af(l,o,O)}catch(At){sf(l,o,At)}}function af(l,o,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(v){Vl(l,o,v)},function(v){return sf(l,o,v)}):Vl(l,o,m)}function Vl(l,o,m){o.status="fulfilled",o.value=m,lf(o),l.state=m,o=l.pending,o!==null&&(m=o.next,m===o?l.pending=null:(m=m.next,o.next=m,nf(l,m)))}function sf(l,o,m){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do o.status="rejected",o.reason=m,lf(o),o=o.next;while(o!==v)}l.action=null}function lf(l){l=l.listeners;for(var o=0;o<l.length;o++)(0,l[o])()}function rf(l,o){return o}function uc(l,o){if(ve){var m=xe.formState;if(m!==null){t:{var v=$t;if(ve){if(_n){var R=Fg(_n,Te);if(R){_n=Xg(R),v=Pg(R);break t}}W(v)}v=!1}v&&(o=m[0])}}m=ti(),m.memoizedState=m.baseState=o,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rf,lastRenderedState:o},m.queue=v,m=dc.bind(null,$t,v),v.dispatch=m,v=rc(!1);var O=Yr.bind(null,$t,!1,v.queue);return v=ti(),R={state:o,dispatch:null,action:l,pending:null},v.queue=R,m=Ur.bind(null,$t,R,O,m),R.dispatch=m,v.memoizedState=l,[o,m,!1]}function J0(l){var o=hn();return $0(o,me,l)}function $0(l,o,m){if(o=sc(l,o,rf)[0],l=yi(Ha)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var v=Yl(o)}catch(k){throw k===uo?Fe:k}else v=o;o=hn();var R=o.queue,O=R.dispatch;return m!==o.memoizedState&&($t.flags|=2048,Js(9,ps(),cc.bind(null,R,m),null)),[v,O,l]}function cc(l,o){l.action=o}function hc(l){var o=hn(),m=me;if(m!==null)return $0(o,m,l);hn(),o=o.memoizedState,m=hn();var v=m.queue.dispatch;return m.memoizedState=l,[o,v,!1]}function Js(l,o,m,v){return l={tag:l,create:m,deps:v,inst:o,next:null},o=$t.updateQueue,o===null&&(o=Ws(),$t.updateQueue=o),m=o.lastEffect,m===null?o.lastEffect=l.next=l:(v=m.next,m.next=l,l.next=v,o.lastEffect=l),l}function ps(){return{destroy:void 0,resource:void 0}}function ql(){return hn().memoizedState}function Xo(l,o,m,v){var R=ti();v=v===void 0?null:v,$t.flags|=l,R.memoizedState=Js(1|o,ps(),m,v)}function Fl(l,o,m,v){var R=hn();v=v===void 0?null:v;var O=R.memoizedState.inst;me!==null&&v!==null&&Qs(v,me.memoizedState.deps)?R.memoizedState=Js(o,O,m,v):($t.flags|=l,R.memoizedState=Js(1|o,O,m,v))}function of(l,o){Xo(8390656,8,l,o)}function Br(l,o){Fl(2048,8,l,o)}function Ia(l,o){return Fl(4,2,l,o)}function fc(l,o){return Fl(4,4,l,o)}function Hr(l,o){if(typeof o=="function"){l=l();var m=o(l);return function(){typeof m=="function"?m():o(null)}}if(o!=null)return l=l(),o.current=l,function(){o.current=null}}function _s(l,o,m){m=m!=null?m.concat([l]):null,Fl(4,4,Hr.bind(null,o,l),m)}function ko(){}function Ko(l,o){var m=hn();o=o===void 0?null:o;var v=m.memoizedState;return o!==null&&Qs(o,v[1])?v[0]:(m.memoizedState=[l,o],l)}function uf(l,o){var m=hn();o=o===void 0?null:o;var v=m.memoizedState;if(o!==null&&Qs(o,v[1]))return v[0];if(v=l(),Gs){w(!0);try{l()}finally{w(!1)}}return m.memoizedState=[v,o],v}function Ir(l,o,m){return m===void 0||(yn&1073741824)!==0?l.memoizedState=o:(l.memoizedState=m,l=$l(),$t.lanes|=l,Sn|=l,m)}function Zo(l,o,m,v){return Wi(m,o)?m:ri.current!==null?(l=Ir(l,m,v),Wi(l,o)||(Pt=!0),l):(yn&42)===0?(Pt=!0,l.memoizedState=m):(l=$l(),$t.lanes|=l,Sn|=l,o)}function cf(l,o,m,v,R){var O=Ta();Bn(O!==0&&8>O?O:8);var k=Bt.T,it={};Bt.T=it,Yr(l,!1,o,m);try{var ct=R(),At=Bt.S;if(At!==null&&At(it,ct),ct!==null&&typeof ct=="object"&&typeof ct.then=="function"){var Dt=Zh(ct,v);vs(l,o,Dt,Un(l))}else vs(l,o,v,Un(l))}catch(Nt){vs(l,o,{then:function(){},status:"rejected",reason:Nt},Un())}finally{Bn(O),Bt.T=k}}function vi(l){var o=l.memoizedState;if(o!==null)return o;o={memoizedState:Ii,baseState:Ii,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:Ii},next:null};var m={};return o.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:m},next:null},l.memoizedState=o,l=l.alternate,l!==null&&(l.memoizedState=o),o}function ys(){return Zt(Wa)}function Qo(){return hn().memoizedState}function jr(){return hn().memoizedState}function Om(l){for(var o=l.return;o!==null;){switch(o.tag){case 24:case 3:var m=Un();l=Zs(m);var v=gs(o,l,m);v!==null&&(ii(v,o,m),ms(v,o,m)),o={cache:Yn()},l.payload=o;return}o=o.return}}function hf(l,o,m){var v=Un();m={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Wo(l)?tg(o,m):(m=gn(l,o,m,v),m!==null&&(ii(m,l,v),eg(m,o,v)))}function dc(l,o,m){var v=Un();vs(l,o,m,v)}function vs(l,o,m,v){var R={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Wo(l))tg(o,R);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=o.lastRenderedReducer,O!==null))try{var k=o.lastRenderedState,it=O(k,m);if(R.hasEagerState=!0,R.eagerState=it,Wi(it,k))return qn(l,o,R,0),xe===null&&$n(),!1}catch{}finally{}if(m=gn(l,o,R,v),m!==null)return ii(m,l,v),eg(m,o,v),!0}return!1}function Yr(l,o,m,v){if(v={lane:2,revertLane:Wn(),action:v,hasEagerState:!1,eagerState:null,next:null},Wo(l)){if(o)throw Error(r(479))}else o=gn(l,m,v,2),o!==null&&ii(o,l,2)}function Wo(l){var o=l.alternate;return l===$t||o!==null&&o===$t}function tg(l,o){El=Na=!0;var m=l.pending;m===null?o.next=o:(o.next=m.next,m.next=o),l.pending=o}function eg(l,o,m){if((m&4194048)!==0){var v=o.lanes;v&=l.pendingLanes,m|=v,o.lanes=m,Y(l,m)}}function gc(l){var o=ho;return ho+=1,es===null&&(es=[]),Jn(es,l,o)}function Pl(l,o){o=o.props.ref,l.ref=o!==void 0?o:null}function mc(l,o){throw o.$$typeof===xg?Error(r(525)):(l=Object.prototype.toString.call(o),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":l)))}function ng(l){var o=l._init;return o(l._payload)}function ig(l){function o(mt,ot){if(l){var yt=mt.deletions;yt===null?(mt.deletions=[ot],mt.flags|=16):yt.push(ot)}}function m(mt,ot){if(!l)return null;for(;ot!==null;)o(mt,ot),ot=ot.sibling;return null}function v(mt){for(var ot=new Map;mt!==null;)mt.key!==null?ot.set(mt.key,mt):ot.set(mt.index,mt),mt=mt.sibling;return ot}function R(mt,ot){return mt=Rs(mt,ot),mt.index=0,mt.sibling=null,mt}function O(mt,ot,yt){return mt.index=yt,l?(yt=mt.alternate,yt!==null?(yt=yt.index,yt<ot?(mt.flags|=67108866,ot):yt):(mt.flags|=67108866,ot)):(mt.flags|=1048576,ot)}function k(mt){return l&&mt.alternate===null&&(mt.flags|=67108866),mt}function it(mt,ot,yt,Mt){return ot===null||ot.tag!==6?(ot=ir(yt,mt.mode,Mt),ot.return=mt,ot):(ot=R(ot,yt),ot.return=mt,ot)}function ct(mt,ot,yt,Mt){var Lt=yt.type;return Lt===rr?Dt(mt,ot,yt.props.children,Mt,yt.key):ot!==null&&(ot.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===Si&&ng(Lt)===ot.type)?(ot=R(ot,yt.props),Pl(ot,yt),ot.return=mt,ot):(ot=Qr(yt.type,yt.key,yt.props,null,mt.mode,Mt),Pl(ot,yt),ot.return=mt,ot)}function At(mt,ot,yt,Mt){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==yt.containerInfo||ot.stateNode.implementation!==yt.implementation?(ot=uu(yt,mt.mode,Mt),ot.return=mt,ot):(ot=R(ot,yt.children||[]),ot.return=mt,ot)}function Dt(mt,ot,yt,Mt,Lt){return ot===null||ot.tag!==7?(ot=Ra(yt,mt.mode,Mt,Lt),ot.return=mt,ot):(ot=R(ot,yt),ot.return=mt,ot)}function Nt(mt,ot,yt){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return ot=ir(""+ot,mt.mode,yt),ot.return=mt,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case lr:return yt=Qr(ot.type,ot.key,ot.props,null,mt.mode,yt),Pl(yt,ot),yt.return=mt,yt;case ul:return ot=uu(ot,mt.mode,yt),ot.return=mt,ot;case Si:var Mt=ot._init;return ot=Mt(ot._payload),Nt(mt,ot,yt)}if(cl(ot)||_(ot))return ot=Ra(ot,mt.mode,yt,null),ot.return=mt,ot;if(typeof ot.then=="function")return Nt(mt,gc(ot),yt);if(ot.$$typeof===As)return Nt(mt,nn(mt,ot),yt);mc(mt,ot)}return null}function wt(mt,ot,yt,Mt){var Lt=ot!==null?ot.key:null;if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return Lt!==null?null:it(mt,ot,""+yt,Mt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case lr:return yt.key===Lt?ct(mt,ot,yt,Mt):null;case ul:return yt.key===Lt?At(mt,ot,yt,Mt):null;case Si:return Lt=yt._init,yt=Lt(yt._payload),wt(mt,ot,yt,Mt)}if(cl(yt)||_(yt))return Lt!==null?null:Dt(mt,ot,yt,Mt,null);if(typeof yt.then=="function")return wt(mt,ot,gc(yt),Mt);if(yt.$$typeof===As)return wt(mt,ot,nn(mt,yt),Mt);mc(mt,yt)}return null}function Jt(mt,ot,yt,Mt,Lt){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return mt=mt.get(yt)||null,it(ot,mt,""+Mt,Lt);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case lr:return mt=mt.get(Mt.key===null?yt:Mt.key)||null,ct(ot,mt,Mt,Lt);case ul:return mt=mt.get(Mt.key===null?yt:Mt.key)||null,At(ot,mt,Mt,Lt);case Si:var ze=Mt._init;return Mt=ze(Mt._payload),Jt(mt,ot,yt,Mt,Lt)}if(cl(Mt)||_(Mt))return mt=mt.get(yt)||null,Dt(ot,mt,Mt,Lt,null);if(typeof Mt.then=="function")return Jt(mt,ot,yt,gc(Mt),Lt);if(Mt.$$typeof===As)return Jt(mt,ot,yt,nn(ot,Mt),Lt);mc(ot,Mt)}return null}function da(mt,ot,yt,Mt){for(var Lt=null,ze=null,Vt=ot,be=ot=0,On=null;Vt!==null&&be<yt.length;be++){Vt.index>be?(On=Vt,Vt=null):On=Vt.sibling;var Ce=wt(mt,Vt,yt[be],Mt);if(Ce===null){Vt===null&&(Vt=On);break}l&&Vt&&Ce.alternate===null&&o(mt,Vt),ot=O(Ce,ot,be),ze===null?Lt=Ce:ze.sibling=Ce,ze=Ce,Vt=On}if(be===yt.length)return m(mt,Vt),ve&&rt(mt,be),Lt;if(Vt===null){for(;be<yt.length;be++)Vt=Nt(mt,yt[be],Mt),Vt!==null&&(ot=O(Vt,ot,be),ze===null?Lt=Vt:ze.sibling=Vt,ze=Vt);return ve&&rt(mt,be),Lt}for(Vt=v(Vt);be<yt.length;be++)On=Jt(Vt,mt,be,yt[be],Mt),On!==null&&(l&&On.alternate!==null&&Vt.delete(On.key===null?be:On.key),ot=O(On,ot,be),ze===null?Lt=On:ze.sibling=On,ze=On);return l&&Vt.forEach(function(Hs){return o(mt,Hs)}),ve&&rt(mt,be),Lt}function Nl(mt,ot,yt,Mt){if(yt==null)throw Error(r(151));for(var Lt=null,ze=null,Vt=ot,be=ot=0,On=null,Ce=yt.next();Vt!==null&&!Ce.done;be++,Ce=yt.next()){Vt.index>be?(On=Vt,Vt=null):On=Vt.sibling;var Hs=wt(mt,Vt,Ce.value,Mt);if(Hs===null){Vt===null&&(Vt=On);break}l&&Vt&&Hs.alternate===null&&o(mt,Vt),ot=O(Hs,ot,be),ze===null?Lt=Hs:ze.sibling=Hs,ze=Hs,Vt=On}if(Ce.done)return m(mt,Vt),ve&&rt(mt,be),Lt;if(Vt===null){for(;!Ce.done;be++,Ce=yt.next())Ce=Nt(mt,Ce.value,Mt),Ce!==null&&(ot=O(Ce,ot,be),ze===null?Lt=Ce:ze.sibling=Ce,ze=Ce);return ve&&rt(mt,be),Lt}for(Vt=v(Vt);!Ce.done;be++,Ce=yt.next())Ce=Jt(Vt,mt,be,Ce.value,Mt),Ce!==null&&(l&&Ce.alternate!==null&&Vt.delete(Ce.key===null?be:Ce.key),ot=O(Ce,ot,be),ze===null?Lt=Ce:ze.sibling=Ce,ze=Ce);return l&&Vt.forEach(function(Vm){return o(mt,Vm)}),ve&&rt(mt,be),Lt}function ga(mt,ot,yt,Mt){if(typeof yt=="object"&&yt!==null&&yt.type===rr&&yt.key===null&&(yt=yt.props.children),typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case lr:t:{for(var Lt=yt.key;ot!==null;){if(ot.key===Lt){if(Lt=yt.type,Lt===rr){if(ot.tag===7){m(mt,ot.sibling),Mt=R(ot,yt.props.children),Mt.return=mt,mt=Mt;break t}}else if(ot.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===Si&&ng(Lt)===ot.type){m(mt,ot.sibling),Mt=R(ot,yt.props),Pl(Mt,yt),Mt.return=mt,mt=Mt;break t}m(mt,ot);break}else o(mt,ot);ot=ot.sibling}yt.type===rr?(Mt=Ra(yt.props.children,mt.mode,Mt,yt.key),Mt.return=mt,mt=Mt):(Mt=Qr(yt.type,yt.key,yt.props,null,mt.mode,Mt),Pl(Mt,yt),Mt.return=mt,mt=Mt)}return k(mt);case ul:t:{for(Lt=yt.key;ot!==null;){if(ot.key===Lt)if(ot.tag===4&&ot.stateNode.containerInfo===yt.containerInfo&&ot.stateNode.implementation===yt.implementation){m(mt,ot.sibling),Mt=R(ot,yt.children||[]),Mt.return=mt,mt=Mt;break t}else{m(mt,ot);break}else o(mt,ot);ot=ot.sibling}Mt=uu(yt,mt.mode,Mt),Mt.return=mt,mt=Mt}return k(mt);case Si:return Lt=yt._init,yt=Lt(yt._payload),ga(mt,ot,yt,Mt)}if(cl(yt))return da(mt,ot,yt,Mt);if(_(yt)){if(Lt=_(yt),typeof Lt!="function")throw Error(r(150));return yt=Lt.call(yt),Nl(mt,ot,yt,Mt)}if(typeof yt.then=="function")return ga(mt,ot,gc(yt),Mt);if(yt.$$typeof===As)return ga(mt,ot,nn(mt,yt),Mt);mc(mt,yt)}return typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint"?(yt=""+yt,ot!==null&&ot.tag===6?(m(mt,ot.sibling),Mt=R(ot,yt),Mt.return=mt,mt=Mt):(m(mt,ot),Mt=ir(yt,mt.mode,Mt),Mt.return=mt,mt=Mt),k(mt)):m(mt,ot)}return function(mt,ot,yt,Mt){try{ho=0;var Lt=ga(mt,ot,yt,Mt);return es=null,Lt}catch(Vt){if(Vt===uo||Vt===Fe)throw Vt;var ze=n(29,Vt,null,mt.mode);return ze.lanes=Mt,ze.return=mt,ze}finally{}}}function $s(l){var o=l.alternate;E(Ft,Ft.current&1),E(ha,l),ns===null&&(o===null||ri.current!==null||o.memoizedState!==null)&&(ns=l)}function ag(l){if(l.tag===22){if(E(Ft,Ft.current),E(ha,l),ns===null){var o=l.alternate;o!==null&&o.memoizedState!==null&&(ns=l)}}else Ss()}function Ss(){E(Ft,Ft.current),E(ha,ha.current)}function Es(l){b(ha),ns===l&&(ns=null),b(Ft)}function pc(l){for(var o=l;o!==null;){if(o.tag===13){var m=o.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Eu(m)||Xc(m)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break;for(;o.sibling===null;){if(o.return===null||o.return===l)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function ff(l,o,m,v){o=l.memoizedState,m=m(v,o),m=m==null?o:sr({},o,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}function sg(l,o,m,v,R,O,k){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,O,k):o.prototype&&o.prototype.isPureReactComponent?!wi(m,v)||!wi(R,O):!0}function _c(l,o,m,v){l=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(m,v),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(m,v),o.state!==l&&Ie.enqueueReplaceState(o,o.state,null)}function Xl(l,o){var m=o;if("ref"in o){m={};for(var v in o)v!=="ref"&&(m[v]=o[v])}if(l=l.defaultProps){m===o&&(m=sr({},m));for(var R in l)m[R]===void 0&&(m[R]=l[R])}return m}function yc(l,o){try{var m=l.onUncaughtError;m(o.value,{componentStack:o.stack})}catch(v){setTimeout(function(){throw v})}}function lg(l,o,m){try{var v=l.onCaughtError;v(m.value,{componentStack:m.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function vc(l,o,m){return m=Zs(m),m.tag=3,m.payload={element:null},m.callback=function(){yc(l,o)},m}function rg(l){return l=Zs(l),l.tag=3,l}function og(l,o,m,v){var R=m.type.getDerivedStateFromError;if(typeof R=="function"){var O=v.value;l.payload=function(){return R(O)},l.callback=function(){lg(o,m,v)}}var k=m.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(l.callback=function(){lg(o,m,v),typeof R!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var it=v.stack;this.componentDidCatch(v.value,{componentStack:it!==null?it:""})})}function Nm(l,o,m,v,R){if(m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(o=m.alternate,o!==null&&Zn(o,m,R,!0),m=ha.current,m!==null){switch(m.tag){case 13:return ns===null?an():m.alternate===null&&on===0&&(on=3),m.flags&=-257,m.flags|=65536,m.lanes=R,v===Pn?m.flags|=16384:(o=m.updateQueue,o===null?m.updateQueue=new Set([v]):o.add(v),nr(l,v,R)),!1;case 22:return m.flags|=65536,v===Pn?m.flags|=16384:(o=m.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([v])},m.updateQueue=o):(m=o.retryQueue,m===null?o.retryQueue=new Set([v]):m.add(v)),nr(l,v,R)),!1}throw Error(r(435,m.tag))}return nr(l,v,R),an(),!1}if(ve)return o=ha.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=R,v!==sd&&(l=Error(r(422),{cause:v}),Kt($(l,m)))):(v!==sd&&(o=Error(r(423),{cause:v}),Kt($(o,m))),l=l.current.alternate,l.flags|=65536,R&=-R,l.lanes|=R,v=$(v,m),R=vc(l.stateNode,v,R),qo(l,R),on!==4&&(on=2)),!1;var O=Error(r(520),{cause:v});if(O=$(O,m),Al===null?Al=[O]:Al.push(O),on!==4&&(on=2),o===null)return!0;v=$(v,m),m=o;do{switch(m.tag){case 3:return m.flags|=65536,l=R&-R,m.lanes|=l,l=vc(m.stateNode,v,l),qo(m,l),!1;case 1:if(o=m.type,O=m.stateNode,(m.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(ss===null||!ss.has(O))))return m.flags|=65536,R&=-R,m.lanes|=R,R=rg(R),og(R,l,m,v),qo(m,R),!1}m=m.return}while(m!==null);return!1}function Fn(l,o,m,v){o.child=l===null?ud(o,null,m,v):Us(o,l.child,m,v)}function ug(l,o,m,v,R){m=m.render;var O=o.ref;if("ref"in v){var k={};for(var it in v)it!=="ref"&&(k[it]=v[it])}else k=v;return zn(o),v=Qh(l,o,m,k,O,R),it=Lr(),l!==null&&!Pt?(zr(l,o,R),Xi(l,o,R)):(ve&&it&&Q(o),o.flags|=1,Fn(l,o,v,R),o.child)}function cg(l,o,m,v,R){if(l===null){var O=m.type;return typeof O=="function"&&!Df(O)&&O.defaultProps===void 0&&m.compare===null?(o.tag=15,o.type=O,hg(l,o,O,v,R)):(l=Qr(m.type,null,v,o,o.mode,R),l.ref=o.ref,l.return=o,o.child=l)}if(O=l.child,!Kl(l,R)){var k=O.memoizedProps;if(m=m.compare,m=m!==null?m:wi,m(k,v)&&l.ref===o.ref)return Xi(l,o,R)}return o.flags|=1,l=Rs(O,v),l.ref=o.ref,l.return=o,o.child=l}function hg(l,o,m,v,R){if(l!==null){var O=l.memoizedProps;if(wi(O,v)&&l.ref===o.ref)if(Pt=!1,o.pendingProps=v=O,Kl(l,R))(l.flags&131072)!==0&&(Pt=!0);else return o.lanes=l.lanes,Xi(l,o,R)}return kl(l,o,m,v,R)}function fg(l,o,m){var v=o.pendingProps,R=v.children,O=l!==null?l.memoizedState:null;if(v.mode==="hidden"){if((o.flags&128)!==0){if(v=O!==null?O.baseLanes|m:m,l!==null){for(R=o.child=l.child,O=0;R!==null;)O=O|R.lanes|R.childLanes,R=R.sibling;o.childLanes=O&~v}else o.childLanes=0,o.child=null;return dg(l,o,v,m)}if((m&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},l!==null&&xa(o,O!==null?O.cachePool:null),O!==null?An(o,O):ic(),ag(o);else return o.lanes=o.childLanes=536870912,dg(l,o,O!==null?O.baseLanes|m:m,m)}else O!==null?(xa(o,O.cachePool),An(o,O),Ss(),o.memoizedState=null):(l!==null&&xa(o,null),ic(),Ss());return Fn(l,o,R,m),o.child}function dg(l,o,m,v){var R=ks();return R=R===null?null:{parent:Ds?De._currentValue:De._currentValue2,pool:R},o.memoizedState={baseLanes:m,cachePool:R},l!==null&&xa(o,null),ic(),ag(o),l!==null&&Zn(l,o,v,!0),null}function Vr(l,o){var m=o.ref;if(m===null)l!==null&&l.ref!==null&&(o.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(l===null||l.ref!==m)&&(o.flags|=4194816)}}function kl(l,o,m,v,R){return zn(o),m=Qh(l,o,m,v,void 0,R),v=Lr(),l!==null&&!Pt?(zr(l,o,R),Xi(l,o,R)):(ve&&v&&Q(o),o.flags|=1,Fn(l,o,m,R),o.child)}function gg(l,o,m,v,R,O){return zn(o),o.updateQueue=null,m=Jh(o,v,m,R),Wh(l),v=Lr(),l!==null&&!Pt?(zr(l,o,O),Xi(l,o,O)):(ve&&v&&Q(o),o.flags|=1,Fn(l,o,m,O),o.child)}function df(l,o,m,v,R){if(zn(o),o.stateNode===null){var O=hr,k=m.contextType;typeof k=="object"&&k!==null&&(O=Zt(k)),O=new m(v,O),o.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Ie,o.stateNode=O,O._reactInternals=o,O=o.stateNode,O.props=v,O.state=o.memoizedState,O.refs={},_i(o),k=m.contextType,O.context=typeof k=="object"&&k!==null?Zt(k):hr,O.state=o.memoizedState,k=m.getDerivedStateFromProps,typeof k=="function"&&(ff(o,m,k,v),O.state=o.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(k=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),k!==O.state&&Ie.enqueueReplaceState(O,O.state,null),Ba(o,v,O,R),Ua(),O.state=o.memoizedState),typeof O.componentDidMount=="function"&&(o.flags|=4194308),v=!0}else if(l===null){O=o.stateNode;var it=o.memoizedProps,ct=Xl(m,it);O.props=ct;var At=O.context,Dt=m.contextType;k=hr,typeof Dt=="object"&&Dt!==null&&(k=Zt(Dt));var Nt=m.getDerivedStateFromProps;Dt=typeof Nt=="function"||typeof O.getSnapshotBeforeUpdate=="function",it=o.pendingProps!==it,Dt||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(it||At!==k)&&_c(o,O,v,k),ts=!1;var wt=o.memoizedState;O.state=wt,Ba(o,v,O,R),Ua(),At=o.memoizedState,it||wt!==At||ts?(typeof Nt=="function"&&(ff(o,m,Nt,v),At=o.memoizedState),(ct=ts||sg(o,m,ct,v,wt,At,k))?(Dt||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(o.flags|=4194308)):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=v,o.memoizedState=At),O.props=v,O.state=At,O.context=k,v=ct):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),v=!1)}else{O=o.stateNode,Vo(l,o),k=o.memoizedProps,Dt=Xl(m,k),O.props=Dt,Nt=o.pendingProps,wt=O.context,At=m.contextType,ct=hr,typeof At=="object"&&At!==null&&(ct=Zt(At)),it=m.getDerivedStateFromProps,(At=typeof it=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(k!==Nt||wt!==ct)&&_c(o,O,v,ct),ts=!1,wt=o.memoizedState,O.state=wt,Ba(o,v,O,R),Ua();var Jt=o.memoizedState;k!==Nt||wt!==Jt||ts||l!==null&&l.dependencies!==null&&un(l.dependencies)?(typeof it=="function"&&(ff(o,m,it,v),Jt=o.memoizedState),(Dt=ts||sg(o,m,Dt,v,wt,Jt,ct)||l!==null&&l.dependencies!==null&&un(l.dependencies))?(At||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(v,Jt,ct),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(v,Jt,ct)),typeof O.componentDidUpdate=="function"&&(o.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof O.componentDidUpdate!="function"||k===l.memoizedProps&&wt===l.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||k===l.memoizedProps&&wt===l.memoizedState||(o.flags|=1024),o.memoizedProps=v,o.memoizedState=Jt),O.props=v,O.state=Jt,O.context=ct,v=Dt):(typeof O.componentDidUpdate!="function"||k===l.memoizedProps&&wt===l.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||k===l.memoizedProps&&wt===l.memoizedState||(o.flags|=1024),v=!1)}return O=v,Vr(l,o),v=(o.flags&128)!==0,O||v?(O=o.stateNode,m=v&&typeof m.getDerivedStateFromError!="function"?null:O.render(),o.flags|=1,l!==null&&v?(o.child=Us(o,l.child,null,R),o.child=Us(o,null,m,R)):Fn(l,o,m,R),o.memoizedState=O.state,l=o.child):l=Xi(l,o,R),l}function gf(l,o,m,v){return Tt(),o.flags|=256,Fn(l,o,m,v),o.child}function Sc(l){return{baseLanes:l,cachePool:Ga()}}function Ec(l,o,m){return l=l!==null?l.childLanes&~m:0,o&&(l|=fa),l}function mf(l,o,m){var v=o.pendingProps,R=!1,O=(o.flags&128)!==0,k;if((k=O)||(k=l!==null&&l.memoizedState===null?!1:(Ft.current&2)!==0),k&&(R=!0,o.flags&=-129),k=(o.flags&32)!==0,o.flags&=-33,l===null){if(ve){if(R?$s(o):Ss(),ve){var it=_n,ct;(ct=it)&&(it=Hm(it,Te),it!==null?(o.memoizedState={dehydrated:it,treeContext:_l!==null?{id:Aa,overflow:$a}:null,retryLane:536870912,hydrationErrors:null},ct=n(18,null,null,0),ct.stateNode=it,ct.return=o,o.child=ct,rn=o,_n=null,ct=!0):ct=!1),ct||W(o)}if(it=o.memoizedState,it!==null&&(it=it.dehydrated,it!==null))return Xc(it)?o.lanes=32:o.lanes=536870912,null;Es(o)}return it=v.children,v=v.fallback,R?(Ss(),R=o.mode,it=xc({mode:"hidden",children:it},R),v=Ra(v,R,m,null),it.return=o,v.return=o,it.sibling=v,o.child=it,R=o.child,R.memoizedState=Sc(m),R.childLanes=Ec(l,k,m),o.memoizedState=Ri,v):($s(o),tl(o,it))}if(ct=l.memoizedState,ct!==null&&(it=ct.dehydrated,it!==null)){if(O)o.flags&256?($s(o),o.flags&=-257,o=pf(l,o,m)):o.memoizedState!==null?(Ss(),o.child=l.child,o.flags|=128,o=null):(Ss(),R=v.fallback,it=o.mode,v=xc({mode:"visible",children:v.children},it),R=Ra(R,it,m,null),R.flags|=2,v.return=o,R.return=o,v.sibling=R,o.child=v,Us(o,l.child,null,m),v=o.child,v.memoizedState=Sc(m),v.childLanes=Ec(l,k,m),o.memoizedState=Ri,o=R);else if($s(o),Xc(it))k=qg(it).digest,v=Error(r(419)),v.stack="",v.digest=k,Kt({value:v,source:null,stack:null}),o=pf(l,o,m);else if(Pt||Zn(l,o,m,!1),k=(m&l.childLanes)!==0,Pt||k){if(k=xe,k!==null&&(v=m&-m,v=(v&42)!==0?1:X(v),v=(v&(k.suspendedLanes|m))!==0?0:v,v!==0&&v!==ct.retryLane))throw ct.retryLane=v,Ae(l,v),ii(k,l,v),pe;Eu(it)||an(),o=pf(l,o,m)}else Eu(it)?(o.flags|=192,o.child=l.child,o=null):(l=ct.treeContext,Bi&&(_n=Qf(it),rn=o,ve=!0,Ma=null,Te=!1,l!==null&&(bi[Yi++]=Aa,bi[Yi++]=$a,bi[Yi++]=_l,Aa=l.id,$a=l.overflow,_l=o)),o=tl(o,v.children),o.flags|=4096);return o}return R?(Ss(),R=v.fallback,it=o.mode,ct=l.child,O=ct.sibling,v=Rs(ct,{mode:"hidden",children:v.children}),v.subtreeFlags=ct.subtreeFlags&65011712,O!==null?R=Rs(O,R):(R=Ra(R,it,m,null),R.flags|=2),R.return=o,v.return=o,v.sibling=R,o.child=v,v=R,R=o.child,it=l.child.memoizedState,it===null?it=Sc(m):(ct=it.cachePool,ct!==null?(O=Ds?De._currentValue:De._currentValue2,ct=ct.parent!==O?{parent:O,pool:O}:ct):ct=Ga(),it={baseLanes:it.baseLanes|m,cachePool:ct}),R.memoizedState=it,R.childLanes=Ec(l,k,m),o.memoizedState=Ri,v):($s(o),m=l.child,l=m.sibling,m=Rs(m,{mode:"visible",children:v.children}),m.return=o,m.sibling=null,l!==null&&(k=o.deletions,k===null?(o.deletions=[l],o.flags|=16):k.push(l)),o.child=m,o.memoizedState=null,m)}function tl(l,o){return o=xc({mode:"visible",children:o},l.mode),o.return=l,l.child=o}function xc(l,o){return l=n(22,l,null,o),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function pf(l,o,m){return Us(o,l.child,null,m),l=tl(o,o.pendingProps.children),l.flags|=2,o.memoizedState=null,l}function mg(l,o,m){l.lanes|=o;var v=l.alternate;v!==null&&(v.lanes|=o),Qt(l.return,o,m)}function bc(l,o,m,v,R){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:R}:(O.isBackwards=o,O.rendering=null,O.renderingStartTime=0,O.last=v,O.tail=m,O.tailMode=R)}function _f(l,o,m){var v=o.pendingProps,R=v.revealOrder,O=v.tail;if(Fn(l,o,v.children,m),v=Ft.current,(v&2)!==0)v=v&1|2,o.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=o.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&mg(l,m,o);else if(l.tag===19)mg(l,m,o);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break t;for(;l.sibling===null;){if(l.return===null||l.return===o)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}v&=1}switch(E(Ft,v),R){case"forwards":for(m=o.child,R=null;m!==null;)l=m.alternate,l!==null&&pc(l)===null&&(R=m),m=m.sibling;m=R,m===null?(R=o.child,o.child=null):(R=m.sibling,m.sibling=null),bc(o,!1,R,m,O);break;case"backwards":for(m=null,R=o.child,o.child=null;R!==null;){if(l=R.alternate,l!==null&&pc(l)===null){o.child=R;break}l=R.sibling,R.sibling=m,m=R,R=l}bc(o,!0,m,null,O);break;case"together":bc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Xi(l,o,m){if(l!==null&&(o.dependencies=l.dependencies),Sn|=o.lanes,(m&o.childLanes)===0)if(l!==null){if(Zn(l,o,m,!1),(m&o.childLanes)===0)return null}else return null;if(l!==null&&o.child!==l.child)throw Error(r(153));if(o.child!==null){for(l=o.child,m=Rs(l,l.pendingProps),o.child=m,m.return=o;l.sibling!==null;)l=l.sibling,m=m.sibling=Rs(l,l.pendingProps),m.return=o;m.sibling=null}return o.child}function Kl(l,o){return(l.lanes&o)!==0?!0:(l=l.dependencies,!!(l!==null&&un(l)))}function wm(l,o,m){switch(o.tag){case 3:nt(o,o.stateNode.containerInfo),Ht(o,De,l.memoizedState.cache),Tt();break;case 27:case 5:vt(o);break;case 4:nt(o,o.stateNode.containerInfo);break;case 10:Ht(o,o.type,o.memoizedProps.value);break;case 13:var v=o.memoizedState;if(v!==null)return v.dehydrated!==null?($s(o),o.flags|=128,null):(m&o.child.childLanes)!==0?mf(l,o,m):($s(o),l=Xi(l,o,m),l!==null?l.sibling:null);$s(o);break;case 19:var R=(l.flags&128)!==0;if(v=(m&o.childLanes)!==0,v||(Zn(l,o,m,!1),v=(m&o.childLanes)!==0),R){if(v)return _f(l,o,m);o.flags|=128}if(R=o.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),E(Ft,Ft.current),v)break;return null;case 22:case 23:return o.lanes=0,fg(l,o,m);case 24:Ht(o,De,l.memoizedState.cache)}return Xi(l,o,m)}function Jo(l,o,m){if(l!==null)if(l.memoizedProps!==o.pendingProps)Pt=!0;else{if(!Kl(l,m)&&(o.flags&128)===0)return Pt=!1,wm(l,o,m);Pt=(l.flags&131072)!==0}else Pt=!1,ve&&(o.flags&1048576)!==0&&q(o,lo,o.index);switch(o.lanes=0,o.tag){case 16:t:{l=o.pendingProps;var v=o.elementType,R=v._init;if(v=R(v._payload),o.type=v,typeof v=="function")Df(v)?(l=Xl(v,l),o.tag=1,o=df(null,o,v,l,m)):(o.tag=0,o=kl(null,o,v,l,m));else{if(v!=null){if(R=v.$$typeof,R===Ka){o.tag=11,o=ug(null,o,v,l,m);break t}else if(R===Za){o.tag=14,o=cg(null,o,v,l,m);break t}}throw o=S(v)||v,Error(r(306,o,""))}}return o;case 0:return kl(l,o,o.type,o.pendingProps,m);case 1:return v=o.type,R=Xl(v,o.pendingProps),df(l,o,v,R,m);case 3:t:{if(nt(o,o.stateNode.containerInfo),l===null)throw Error(r(387));var O=o.pendingProps;R=o.memoizedState,v=R.element,Vo(l,o),Ba(o,O,null,m);var k=o.memoizedState;if(O=k.cache,Ht(o,De,O),O!==R.cache&&Ve(o,[De],m,!0),Ua(),O=k.element,Bi&&R.isDehydrated)if(R={element:O,isDehydrated:!1,cache:k.cache},o.updateQueue.baseState=R,o.memoizedState=R,o.flags&256){o=gf(l,o,O,m);break t}else if(O!==v){v=$(Error(r(424)),o),Kt(v),o=gf(l,o,O,m);break t}else for(Bi&&(_n=Kg(o.stateNode.containerInfo),rn=o,ve=!0,Ma=null,Te=!0),m=ud(o,null,O,m),o.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Tt(),O===v){o=Xi(l,o,m);break t}Fn(l,o,O,m)}o=o.child}return o;case 26:if(Ei)return Vr(l,o),l===null?(m=Cu(o.type,null,o.pendingProps,null))?o.memoizedState=m:ve||(o.stateNode=Ja(o.type,o.pendingProps,yl.current,o)):o.memoizedState=Cu(o.type,l.memoizedProps,o.pendingProps,l.memoizedState),null;case 27:if(ce)return vt(o),l===null&&ce&&ve&&(v=o.stateNode=Ru(o.type,o.pendingProps,yl.current,en.current,!1),rn=o,Te=!0,_n=Zg(o.type,v,_n)),Fn(l,o,o.pendingProps.children,m),Vr(l,o),l===null&&(o.flags|=4194304),o.child;case 5:return l===null&&ve&&(Im(o.type,o.pendingProps,en.current),(R=v=_n)&&(v=Qg(v,o.type,o.pendingProps,Te),v!==null?(o.stateNode=v,rn=o,_n=kg(v),Te=!1,R=!0):R=!1),R||W(o)),vt(o),R=o.type,O=o.pendingProps,k=l!==null?l.memoizedProps:null,v=O.children,Ms(R,O)?v=null:k!==null&&Ms(R,k)&&(o.flags|=32),o.memoizedState!==null&&(R=Qh(l,o,Dm,null,null,m),Ds?Wa._currentValue=R:Wa._currentValue2=R),Vr(l,o),Fn(l,o,v,m),o.child;case 6:return l===null&&ve&&(io(o.pendingProps,en.current),(l=m=_n)&&(m=Bm(m,o.pendingProps,Te),m!==null?(o.stateNode=m,rn=o,_n=null,l=!0):l=!1),l||W(o)),null;case 13:return mf(l,o,m);case 4:return nt(o,o.stateNode.containerInfo),v=o.pendingProps,l===null?o.child=Us(o,null,v,m):Fn(l,o,v,m),o.child;case 11:return ug(l,o,o.type,o.pendingProps,m);case 7:return Fn(l,o,o.pendingProps,m),o.child;case 8:return Fn(l,o,o.pendingProps.children,m),o.child;case 12:return Fn(l,o,o.pendingProps.children,m),o.child;case 10:return v=o.pendingProps,Ht(o,o.type,v.value),Fn(l,o,v.children,m),o.child;case 9:return R=o.type._context,v=o.pendingProps.children,zn(o),R=Zt(R),v=v(R),o.flags|=1,Fn(l,o,v,m),o.child;case 14:return cg(l,o,o.type,o.pendingProps,m);case 15:return hg(l,o,o.type,o.pendingProps,m);case 19:return _f(l,o,m);case 31:return v=o.pendingProps,m=o.mode,v={mode:v.mode,children:v.children},l===null?(m=xc(v,m),m.ref=o.ref,o.child=m,m.return=o,o=m):(m=Rs(l.child,v),m.ref=o.ref,o.child=m,m.return=o,o=m),o;case 22:return fg(l,o,m);case 24:return zn(o),v=Zt(De),l===null?(R=ks(),R===null&&(R=xe,O=Yn(),R.pooledCache=O,O.refCount++,O!==null&&(R.pooledCacheLanes|=m),R=O),o.memoizedState={parent:v,cache:R},_i(o),Ht(o,De,R)):((l.lanes&m)!==0&&(Vo(l,o),Ba(o,null,null,m),Ua()),R=l.memoizedState,O=o.memoizedState,R.parent!==v?(R={parent:v,cache:v},o.memoizedState=R,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=R),Ht(o,De,v)):(v=O.cache,Ht(o,De,v),v!==R.cache&&Ve(o,[De],m,!0))),Fn(l,o,o.pendingProps.children,m),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Li(l){l.flags|=4}function yf(l,o){if(l!==null&&l.child===o.child)return!1;if((o.flags&16)!==0)return!0;for(l=o.child;l!==null;){if((l.flags&13878)!==0||(l.subtreeFlags&13878)!==0)return!0;l=l.sibling}return!1}function $o(l,o,m,v){if(de)for(m=o.child;m!==null;){if(m.tag===5||m.tag===6)cn(l,m.stateNode);else if(!(m.tag===4||ce&&m.tag===27)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break;for(;m.sibling===null;){if(m.return===null||m.return===o)return;m=m.return}m.sibling.return=m.return,m=m.sibling}else if(Qa)for(var R=o.child;R!==null;){if(R.tag===5){var O=R.stateNode;m&&v&&(O=Xf(O,R.type,R.memoizedProps)),cn(l,O)}else if(R.tag===6)O=R.stateNode,m&&v&&(O=kf(O,R.memoizedProps)),cn(l,O);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)O=R.child,O!==null&&(O.return=R),$o(l,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===o)break;for(;R.sibling===null;){if(R.return===null||R.return===o)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function Cc(l,o,m,v){var R=!1;if(Qa)for(var O=o.child;O!==null;){if(O.tag===5){var k=O.stateNode;m&&v&&(k=Xf(k,O.type,O.memoizedProps)),Ff(l,k)}else if(O.tag===6)k=O.stateNode,m&&v&&(k=kf(k,O.memoizedProps)),Ff(l,k);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)R=O.child,R!==null&&(R.return=O),Cc(l,O,!0,!0),R=!0;else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===o)break;for(;O.sibling===null;){if(O.return===null||O.return===o)return R;O=O.return}O.sibling.return=O.return,O=O.sibling}return R}function vf(l,o){if(Qa&&yf(l,o)){l=o.stateNode;var m=l.containerInfo,v=qf();Cc(v,o,!1,!1),l.pendingChildren=v,Li(o),Vg(m,v)}}function Rc(l,o,m,v){if(de)l.memoizedProps!==v&&Li(o);else if(Qa){var R=l.stateNode,O=l.memoizedProps;if((l=yf(l,o))||O!==v){var k=en.current;O=Su(R,m,O,v,!l,null),O===R?o.stateNode=R:(pu(O,m,v,k)&&Li(o),o.stateNode=O,l?$o(O,o,!1,!1):Li(o))}else o.stateNode=R}}function Tc(l,o,m){if(pn(o,m)){if(l.flags|=16777216,!qc(o,m))if(Lc())l.flags|=8192;else throw Vi=Pn,ih}else l.flags&=-16777217}function pg(l,o){if(e1(o)){if(l.flags|=16777216,!Os(o))if(Lc())l.flags|=8192;else throw Vi=Pn,ih}else l.flags&=-16777217}function Ac(l,o){o!==null&&(l.flags|=4),l.flags&16384&&(o=l.tag!==22?z():536870912,l.lanes|=o,ea|=o)}function tu(l,o){if(!ve)switch(l.tailMode){case"hidden":o=l.tail;for(var m=null;o!==null;)o.alternate!==null&&(m=o),o=o.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?o||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function ln(l){var o=l.alternate!==null&&l.alternate.child===l.child,m=0,v=0;if(o)for(var R=l.child;R!==null;)m|=R.lanes|R.childLanes,v|=R.subtreeFlags&65011712,v|=R.flags&65011712,R.return=l,R=R.sibling;else for(R=l.child;R!==null;)m|=R.lanes|R.childLanes,v|=R.subtreeFlags,v|=R.flags,R.return=l,R=R.sibling;return l.subtreeFlags|=v,l.childLanes=m,o}function Lm(l,o,m){var v=o.pendingProps;switch(tt(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(o),null;case 1:return ln(o),null;case 3:return m=o.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),o.memoizedState.cache!==v&&(o.flags|=2048),Ue(De),ht(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(Et(o)?Li(o):l===null||l.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ot())),vf(l,o),ln(o),null;case 26:if(Ei){m=o.type;var R=o.memoizedState;return l===null?(Li(o),R!==null?(ln(o),pg(o,R)):(ln(o),Tc(o,m,v))):R?R!==l.memoizedState?(Li(o),ln(o),pg(o,R)):(ln(o),o.flags&=-16777217):(de?l.memoizedProps!==v&&Li(o):Rc(l,o,m,v),ln(o),Tc(o,m,v)),null}case 27:if(ce){if(St(o),m=yl.current,R=o.type,l!==null&&o.stateNode!=null)de?l.memoizedProps!==v&&Li(o):Rc(l,o,R,v);else{if(!v){if(o.stateNode===null)throw Error(r(166));return ln(o),null}l=en.current,Et(o)?Z(o,l):(l=Ru(R,v,m,l,!0),o.stateNode=l,Li(o))}return ln(o),null}case 5:if(St(o),m=o.type,l!==null&&o.stateNode!=null)Rc(l,o,m,v);else{if(!v){if(o.stateNode===null)throw Error(r(166));return ln(o),null}l=en.current,Et(o)?Z(o,l):(R=Be(m,v,yl.current,l,o),$o(R,o,!1,!1),o.stateNode=R,pu(R,m,v,l)&&Li(o))}return ln(o),Tc(o,o.type,o.pendingProps),null;case 6:if(l&&o.stateNode!=null)m=l.memoizedProps,de?m!==v&&Li(o):Qa&&(m!==v?(o.stateNode=fl(v,yl.current,en.current,o),Li(o)):o.stateNode=l.stateNode);else{if(typeof v!="string"&&o.stateNode===null)throw Error(r(166));if(l=yl.current,m=en.current,Et(o)){if(!Bi)throw Error(r(176));if(l=o.stateNode,m=o.memoizedProps,v=null,R=rn,R!==null)switch(R.tag){case 27:case 5:v=R.memoizedProps}xu(l,m,o,v)||W(o)}else o.stateNode=fl(v,l,m,o)}return ln(o),null;case 13:if(v=o.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(R=Et(o),v!==null&&v.dehydrated!==null){if(l===null){if(!R)throw Error(r(318));if(!Bi)throw Error(r(344));if(R=o.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));Wf(R,o)}else Tt(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ln(o),R=!1}else R=Ot(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=R),R=!0;if(!R)return o.flags&256?(Es(o),o):(Es(o),null)}if(Es(o),(o.flags&128)!==0)return o.lanes=m,o;if(m=v!==null,l=l!==null&&l.memoizedState!==null,m){v=o.child,R=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(R=v.alternate.memoizedState.cachePool.pool);var O=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(O=v.memoizedState.cachePool.pool),O!==R&&(v.flags|=2048)}return m!==l&&m&&(o.child.flags|=8192),Ac(o,o.updateQueue),ln(o),null;case 4:return ht(),vf(l,o),l===null&&Rg(o.stateNode.containerInfo),ln(o),null;case 10:return Ue(o.type),ln(o),null;case 19:if(b(Ft),R=o.memoizedState,R===null)return ln(o),null;if(v=(o.flags&128)!==0,O=R.rendering,O===null)if(v)tu(R,!1);else{if(on!==0||l!==null&&(l.flags&128)!==0)for(l=o.child;l!==null;){if(O=pc(l),O!==null){for(o.flags|=128,tu(R,!1),l=O.updateQueue,o.updateQueue=l,Ac(o,l),o.subtreeFlags=0,l=m,m=o.child;m!==null;)mn(m,l),m=m.sibling;return E(Ft,Ft.current&1|2),o.child}l=l.sibling}R.tail!==null&&He()>po&&(o.flags|=128,v=!0,tu(R,!1),o.lanes=4194304)}else{if(!v)if(l=pc(O),l!==null){if(o.flags|=128,v=!0,l=l.updateQueue,o.updateQueue=l,Ac(o,l),tu(R,!0),R.tail===null&&R.tailMode==="hidden"&&!O.alternate&&!ve)return ln(o),null}else 2*He()-R.renderingStartTime>po&&m!==536870912&&(o.flags|=128,v=!0,tu(R,!1),o.lanes=4194304);R.isBackwards?(O.sibling=o.child,o.child=O):(l=R.last,l!==null?l.sibling=O:o.child=O,R.last=O)}return R.tail!==null?(o=R.tail,R.rendering=o,R.tail=o.sibling,R.renderingStartTime=He(),o.sibling=null,l=Ft.current,E(Ft,v?l&1|2:l&1),o):(ln(o),null);case 22:case 23:return Es(o),ac(),v=o.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(o.flags|=8192):v&&(o.flags|=8192),v?(m&536870912)!==0&&(o.flags&128)===0&&(ln(o),o.subtreeFlags&6&&(o.flags|=8192)):ln(o),m=o.updateQueue,m!==null&&Ac(o,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),v=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(v=o.memoizedState.cachePool.pool),v!==m&&(o.flags|=2048),l!==null&&b(sn),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Ue(De),ln(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function ki(l,o){switch(tt(o),o.tag){case 1:return l=o.flags,l&65536?(o.flags=l&-65537|128,o):null;case 3:return Ue(De),ht(),l=o.flags,(l&65536)!==0&&(l&128)===0?(o.flags=l&-65537|128,o):null;case 26:case 27:case 5:return St(o),null;case 13:if(Es(o),l=o.memoizedState,l!==null&&l.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Tt()}return l=o.flags,l&65536?(o.flags=l&-65537|128,o):null;case 19:return b(Ft),null;case 4:return ht(),null;case 10:return Ue(o.type),null;case 22:case 23:return Es(o),ac(),l!==null&&b(sn),l=o.flags,l&65536?(o.flags=l&-65537|128,o):null;case 24:return Ue(De),null;case 25:return null;default:return null}}function qr(l,o){switch(tt(o),o.tag){case 3:Ue(De),ht();break;case 26:case 27:case 5:St(o);break;case 4:ht();break;case 13:Es(o);break;case 19:b(Ft);break;case 10:Ue(o.type);break;case 22:case 23:Es(o),ac(),l!==null&&b(sn);break;case 24:Ue(De)}}function Fr(l,o){try{var m=o.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var R=v.next;m=R;do{if((m.tag&l)===l){v=void 0;var O=m.create,k=m.inst;v=O(),k.destroy=v}m=m.next}while(m!==R)}}catch(it){Me(o,o.return,it)}}function xs(l,o,m){try{var v=o.updateQueue,R=v!==null?v.lastEffect:null;if(R!==null){var O=R.next;v=O;do{if((v.tag&l)===l){var k=v.inst,it=k.destroy;if(it!==void 0){k.destroy=void 0,R=o;var ct=m,At=it;try{At()}catch(Dt){Me(R,ct,Dt)}}}v=v.next}while(v!==O)}}catch(Dt){Me(o,o.return,Dt)}}function Sf(l){var o=l.updateQueue;if(o!==null){var m=l.stateNode;try{jl(o,m)}catch(v){Me(l,l.return,v)}}}function Ef(l,o,m){m.props=Xl(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(v){Me(l,o,v)}}function Zl(l,o){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var v=$r(l.stateNode);break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof m=="function"?l.refCleanup=m(v):m.current=v}}catch(R){Me(l,o,R)}}function ja(l,o){var m=l.ref,v=l.refCleanup;if(m!==null)if(typeof v=="function")try{v()}catch(R){Me(l,o,R)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(R){Me(l,o,R)}else m.current=null}function Ql(l){var o=l.type,m=l.memoizedProps,v=l.stateNode;try{Vf(v,o,m,l)}catch(R){Me(l,l.return,R)}}function eu(l,o,m){try{zg(l.stateNode,l.type,m,o,l)}catch(v){Me(l,l.return,v)}}function Pr(l){return l.tag===5||l.tag===3||(Ei?l.tag===26:!1)||(ce?l.tag===27&&cr(l.type):!1)||l.tag===4}function nu(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Pr(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(ce&&l.tag===27&&cr(l.type)||l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Mc(l,o,m){var v=l.tag;if(v===5||v===6)l=l.stateNode,o?Ug(m,l,o):wg(m,l);else if(v!==4&&(ce&&v===27&&cr(l.type)&&(m=l.stateNode,o=null),l=l.child,l!==null))for(Mc(l,o,m),l=l.sibling;l!==null;)Mc(l,o,m),l=l.sibling}function Ya(l,o,m){var v=l.tag;if(v===5||v===6)l=l.stateNode,o?Gg(m,l,o):Ng(m,l);else if(v!==4&&(ce&&v===27&&cr(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(Ya(l,o,m),l=l.sibling;l!==null;)Ya(l,o,m),l=l.sibling}function Wl(l,o,m){l=l.containerInfo;try{Pf(l,m)}catch(v){Me(o,o.return,v)}}function Dc(l){var o=l.stateNode,m=l.memoizedProps;try{nd(l.type,m,o,l)}catch(v){Me(l,l.return,v)}}function _g(l,o){for(hl(l.containerInfo),ne=o;ne!==null;)if(l=ne,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,ne=o;else for(;ne!==null;){l=ne;var m=l.alternate;switch(o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&m!==null){o=void 0;var v=l,R=m.memoizedProps;m=m.memoizedState;var O=v.stateNode;try{var k=Xl(v.type,R,v.elementType===v.type);o=O.getSnapshotBeforeUpdate(k,m),O.__reactInternalSnapshotBeforeUpdate=o}catch(it){Me(v,v.return,it)}}break;case 3:(o&1024)!==0&&de&&Pc(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,ne=o;break}ne=l.return}}function el(l,o,m){var v=m.flags;switch(m.tag){case 0:case 11:case 15:bs(l,m),v&4&&Fr(5,m);break;case 1:if(bs(l,m),v&4)if(l=m.stateNode,o===null)try{l.componentDidMount()}catch(k){Me(m,m.return,k)}else{var R=Xl(m.type,o.memoizedProps);o=o.memoizedState;try{l.componentDidUpdate(R,o,l.__reactInternalSnapshotBeforeUpdate)}catch(k){Me(m,m.return,k)}}v&64&&Sf(m),v&512&&Zl(m,m.return);break;case 3:if(bs(l,m),v&64&&(l=m.updateQueue,l!==null)){if(o=null,m.child!==null)switch(m.child.tag){case 27:case 5:o=$r(m.child.stateNode);break;case 1:o=m.child.stateNode}try{jl(l,o)}catch(k){Me(m,m.return,k)}}break;case 27:ce&&o===null&&v&4&&Dc(m);case 26:case 5:bs(l,m),o===null&&v&4&&Ql(m),v&512&&Zl(m,m.return);break;case 12:bs(l,m);break;case 13:bs(l,m),v&4&&yg(l,m),v&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=si.bind(null,m),Kf(l,m))));break;case 22:if(v=m.memoizedState!==null||oi,!v){o=o!==null&&o.memoizedState!==null||Ze,R=oi;var O=Ze;oi=v,(Ze=o)&&!O?Mn(l,m,(m.subtreeFlags&8772)!==0):bs(l,m),oi=R,Ze=O}break;case 30:break;default:bs(l,m)}}function xf(l){var o=l.alternate;o!==null&&(l.alternate=null,xf(o)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(o=l.stateNode,o!==null&&Hi(o)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function sa(l,o,m){for(m=m.child;m!==null;)Oc(l,o,m),m=m.sibling}function Oc(l,o,m){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(gl,m)}catch{}switch(m.tag){case 26:if(Ei){Ze||ja(m,o),sa(l,o,m),m.memoizedState?td(m.memoizedState):m.stateNode&&Qi(m.stateNode);break}case 27:if(ce){Ze||ja(m,o);var v=Pe,R=vn;cr(m.type)&&(Pe=m.stateNode,vn=!1),sa(l,o,m),Zc(m.stateNode),Pe=v,vn=R;break}case 5:Ze||ja(m,o);case 6:if(de){if(v=Pe,R=vn,Pe=null,sa(l,o,m),Pe=v,vn=R,Pe!==null)if(vn)try{Hg(Pe,m.stateNode)}catch(O){Me(m,o,O)}else try{Bg(Pe,m.stateNode)}catch(O){Me(m,o,O)}}else sa(l,o,m);break;case 18:de&&Pe!==null&&(vn?t1(Pe,m.stateNode):Kc(Pe,m.stateNode));break;case 4:de?(v=Pe,R=vn,Pe=m.stateNode.containerInfo,vn=!0,sa(l,o,m),Pe=v,vn=R):(Qa&&Wl(m.stateNode,m,qf()),sa(l,o,m));break;case 0:case 11:case 14:case 15:Ze||xs(2,m,o),Ze||xs(4,m,o),sa(l,o,m);break;case 1:Ze||(ja(m,o),v=m.stateNode,typeof v.componentWillUnmount=="function"&&Ef(m,o,v)),sa(l,o,m);break;case 21:sa(l,o,m);break;case 22:Ze=(v=Ze)||m.memoizedState!==null,sa(l,o,m),Ze=v;break;default:sa(l,o,m)}}function yg(l,o){if(Bi&&o.memoizedState===null&&(l=o.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{$g(l)}catch(m){Me(o,o.return,m)}}function zm(l){switch(l.tag){case 13:case 19:var o=l.stateNode;return o===null&&(o=l.stateNode=new is),o;case 22:return l=l.stateNode,o=l._retryCache,o===null&&(o=l._retryCache=new is),o;default:throw Error(r(435,l.tag))}}function bf(l,o){var m=zm(l);o.forEach(function(v){var R=Hc.bind(null,l,v);m.has(v)||(m.add(v),v.then(R,R))})}function ei(l,o){var m=o.deletions;if(m!==null)for(var v=0;v<m.length;v++){var R=m[v],O=l,k=o;if(de){var it=k;t:for(;it!==null;){switch(it.tag){case 27:if(ce){if(cr(it.type)){Pe=it.stateNode,vn=!1;break t}break}case 5:Pe=it.stateNode,vn=!1;break t;case 3:case 4:Pe=it.stateNode.containerInfo,vn=!0;break t}it=it.return}if(Pe===null)throw Error(r(160));Oc(O,k,R),Pe=null,vn=!1}else Oc(O,k,R);O=R.alternate,O!==null&&(O.return=null),R.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Cf(o,l),o=o.sibling}function Cf(l,o){var m=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ei(o,l),ni(l),v&4&&(xs(3,l,l.return),Fr(3,l),xs(5,l,l.return));break;case 1:ei(o,l),ni(l),v&512&&(Ze||m===null||ja(m,m.return)),v&64&&oi&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?v:m.concat(v))));break;case 26:if(Ei){var R=ta;if(ei(o,l),ni(l),v&512&&(Ze||m===null||ja(m,m.return)),v&4){v=m!==null?m.memoizedState:null;var O=l.memoizedState;m===null?O===null?l.stateNode===null?l.stateNode=ao(R,l.type,l.memoizedProps,l):ed(R,l.type,l.stateNode):l.stateNode=$f(R,O,l.memoizedProps):v!==O?(v===null?m.stateNode!==null&&Qi(m.stateNode):td(v),O===null?ed(R,l.type,l.stateNode):$f(R,O,l.memoizedProps)):O===null&&l.stateNode!==null&&eu(l,l.memoizedProps,m.memoizedProps)}break}case 27:if(ce){ei(o,l),ni(l),v&512&&(Ze||m===null||ja(m,m.return)),m!==null&&v&4&&eu(l,l.memoizedProps,m.memoizedProps);break}case 5:if(ei(o,l),ni(l),v&512&&(Ze||m===null||ja(m,m.return)),de){if(l.flags&32){R=l.stateNode;try{Ig(R)}catch(Dt){Me(l,l.return,Dt)}}v&4&&l.stateNode!=null&&(R=l.memoizedProps,eu(l,R,m!==null?m.memoizedProps:R)),v&1024&&(Uu=!0)}break;case 6:if(ei(o,l),ni(l),v&4&&de){if(l.stateNode===null)throw Error(r(162));v=l.memoizedProps,m=m!==null?m.memoizedProps:v,R=l.stateNode;try{Lg(R,m,v)}catch(Dt){Me(l,l.return,Dt)}}break;case 3:if(Ei?(dl(),R=ta,ta=ur(o.containerInfo),ei(o,l),ta=R):ei(o,l),ni(l),v&4){if(de&&Bi&&m!==null&&m.memoizedState.isDehydrated)try{Jg(o.containerInfo)}catch(Dt){Me(l,l.return,Dt)}if(Qa){v=o.containerInfo,m=o.pendingChildren;try{Pf(v,m)}catch(Dt){Me(l,l.return,Dt)}}}Uu&&(Uu=!1,la(l));break;case 4:Ei?(m=ta,ta=ur(l.stateNode.containerInfo),ei(o,l),ni(l),ta=m):(ei(o,l),ni(l)),v&4&&Qa&&Wl(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:ei(o,l),ni(l);break;case 13:ei(o,l),ni(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(sh=He()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,bf(l,v)));break;case 22:R=l.memoizedState!==null;var k=m!==null&&m.memoizedState!==null,it=oi,ct=Ze;if(oi=it||R,Ze=ct||k,ei(o,l),Ze=ct,oi=it,ni(l),v&8192&&(o=l.stateNode,o._visibility=R?o._visibility&-2:o._visibility|1,R&&(m===null||k||oi||Ze||Gn(l)),de)){t:if(m=null,de)for(o=l;;){if(o.tag===5||Ei&&o.tag===26){if(m===null){k=m=o;try{O=k.stateNode,R?jg(O):Fc(k.stateNode,k.memoizedProps)}catch(Dt){Me(k,k.return,Dt)}}}else if(o.tag===6){if(m===null){k=o;try{var At=k.stateNode;R?no(At):Yg(At,k.memoizedProps)}catch(Dt){Me(k,k.return,Dt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===l)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break t;for(;o.sibling===null;){if(o.return===null||o.return===l)break t;m===o&&(m=null),o=o.return}m===o&&(m=null),o.sibling.return=o.return,o=o.sibling}}v&4&&(v=l.updateQueue,v!==null&&(m=v.retryQueue,m!==null&&(v.retryQueue=null,bf(l,m))));break;case 19:ei(o,l),ni(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,bf(l,v)));break;case 30:break;case 21:break;default:ei(o,l),ni(l)}}function ni(l){var o=l.flags;if(o&2){try{if(de){for(var m,v=l.return;v!==null;){if(Pr(v)){m=v;break}v=v.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:if(ce){var R=m.stateNode,O=nu(l);Ya(l,O,R);break}case 5:var k=m.stateNode;m.flags&32&&(Ig(k),m.flags&=-33);var it=nu(l);Ya(l,it,k);break;case 3:case 4:var ct=m.stateNode.containerInfo,At=nu(l);Mc(l,At,ct);break;default:throw Error(r(161))}}}catch(Dt){Me(l,l.return,Dt)}l.flags&=-3}o&4096&&(l.flags&=-4097)}function la(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var o=l;la(o),o.tag===5&&o.flags&1024&&If(o.stateNode),l=l.sibling}}function bs(l,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)el(l,o.alternate,o),o=o.sibling}function Gn(l){for(l=l.child;l!==null;){var o=l;switch(o.tag){case 0:case 11:case 14:case 15:xs(4,o,o.return),Gn(o);break;case 1:ja(o,o.return);var m=o.stateNode;typeof m.componentWillUnmount=="function"&&Ef(o,o.return,m),Gn(o);break;case 27:ce&&Zc(o.stateNode);case 26:case 5:ja(o,o.return),Gn(o);break;case 22:o.memoizedState===null&&Gn(o);break;case 30:Gn(o);break;default:Gn(o)}l=l.sibling}}function Mn(l,o,m){for(m=m&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var v=o.alternate,R=l,O=o,k=O.flags;switch(O.tag){case 0:case 11:case 15:Mn(R,O,m),Fr(4,O);break;case 1:if(Mn(R,O,m),v=O,R=v.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(At){Me(v,v.return,At)}if(v=O,R=v.updateQueue,R!==null){var it=v.stateNode;try{var ct=R.shared.hiddenCallbacks;if(ct!==null)for(R.shared.hiddenCallbacks=null,R=0;R<ct.length;R++)wr(ct[R],it)}catch(At){Me(v,v.return,At)}}m&&k&64&&Sf(O),Zl(O,O.return);break;case 27:ce&&Dc(O);case 26:case 5:Mn(R,O,m),m&&v===null&&k&4&&Ql(O),Zl(O,O.return);break;case 12:Mn(R,O,m);break;case 13:Mn(R,O,m),m&&k&4&&yg(R,O);break;case 22:O.memoizedState===null&&Mn(R,O,m),Zl(O,O.return);break;case 30:break;default:Mn(R,O,m)}o=o.sibling}}function nl(l,o){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&Le(m))}function iu(l,o){l=null,o.alternate!==null&&(l=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==l&&(o.refCount++,l!=null&&Le(l))}function Ki(l,o,m,v){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)au(l,o,m,v),o=o.sibling}function au(l,o,m,v){var R=o.flags;switch(o.tag){case 0:case 11:case 15:Ki(l,o,m,v),R&2048&&Fr(9,o);break;case 1:Ki(l,o,m,v);break;case 3:Ki(l,o,m,v),R&2048&&(l=null,o.alternate!==null&&(l=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==l&&(o.refCount++,l!=null&&Le(l)));break;case 12:if(R&2048){Ki(l,o,m,v),l=o.stateNode;try{var O=o.memoizedProps,k=O.id,it=O.onPostCommit;typeof it=="function"&&it(k,o.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ct){Me(o,o.return,ct)}}else Ki(l,o,m,v);break;case 13:Ki(l,o,m,v);break;case 23:break;case 22:O=o.stateNode,k=o.alternate,o.memoizedState!==null?O._visibility&2?Ki(l,o,m,v):Va(l,o):O._visibility&2?Ki(l,o,m,v):(O._visibility|=2,il(l,o,m,v,(o.subtreeFlags&10256)!==0)),R&2048&&nl(k,o);break;case 24:Ki(l,o,m,v),R&2048&&iu(o.alternate,o);break;default:Ki(l,o,m,v)}}function il(l,o,m,v,R){for(R=R&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var O=l,k=o,it=m,ct=v,At=k.flags;switch(k.tag){case 0:case 11:case 15:il(O,k,it,ct,R),Fr(8,k);break;case 23:break;case 22:var Dt=k.stateNode;k.memoizedState!==null?Dt._visibility&2?il(O,k,it,ct,R):Va(O,k):(Dt._visibility|=2,il(O,k,it,ct,R)),R&&At&2048&&nl(k.alternate,k);break;case 24:il(O,k,it,ct,R),R&&At&2048&&iu(k.alternate,k);break;default:il(O,k,it,ct,R)}o=o.sibling}}function Va(l,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var m=l,v=o,R=v.flags;switch(v.tag){case 22:Va(m,v),R&2048&&nl(v.alternate,v);break;case 24:Va(m,v),R&2048&&iu(v.alternate,v);break;default:Va(m,v)}o=o.sibling}}function al(l){if(l.subtreeFlags&Xn)for(l=l.child;l!==null;)su(l),l=l.sibling}function su(l){switch(l.tag){case 26:al(l),l.flags&Xn&&(l.memoizedState!==null?Ns(ta,l.memoizedState,l.memoizedProps):vu(l.type,l.memoizedProps));break;case 5:al(l),l.flags&Xn&&vu(l.type,l.memoizedProps);break;case 3:case 4:if(Ei){var o=ta;ta=ur(l.stateNode.containerInfo),al(l),ta=o}else al(l);break;case 22:l.memoizedState===null&&(o=l.alternate,o!==null&&o.memoizedState!==null?(o=Xn,Xn=16777216,al(l),Xn=o):al(l));break;default:al(l)}}function Jl(l){var o=l.alternate;if(o!==null&&(l=o.child,l!==null)){o.child=null;do o=l.sibling,l.sibling=null,l=o;while(l!==null)}}function lu(l){var o=l.deletions;if((l.flags&16)!==0){if(o!==null)for(var m=0;m<o.length;m++){var v=o[m];ne=v,qa(v,l)}Jl(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)zi(l),l=l.sibling}function zi(l){switch(l.tag){case 0:case 11:case 15:lu(l),l.flags&2048&&xs(9,l,l.return);break;case 3:lu(l);break;case 12:lu(l);break;case 22:var o=l.stateNode;l.memoizedState!==null&&o._visibility&2&&(l.return===null||l.return.tag!==13)?(o._visibility&=-3,Xr(l)):lu(l);break;default:lu(l)}}function Xr(l){var o=l.deletions;if((l.flags&16)!==0){if(o!==null)for(var m=0;m<o.length;m++){var v=o[m];ne=v,qa(v,l)}Jl(l)}for(l=l.child;l!==null;){switch(o=l,o.tag){case 0:case 11:case 15:xs(8,o,o.return),Xr(o);break;case 22:m=o.stateNode,m._visibility&2&&(m._visibility&=-3,Xr(o));break;default:Xr(o)}l=l.sibling}}function qa(l,o){for(;ne!==null;){var m=ne;switch(m.tag){case 0:case 11:case 15:xs(8,m,o);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var v=m.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Le(m.memoizedState.cache)}if(v=m.child,v!==null)v.return=m,ne=v;else t:for(m=l;ne!==null;){v=ne;var R=v.sibling,O=v.return;if(xf(v),v===m){ne=null;break t}if(R!==null){R.return=O,ne=R;break t}ne=O}}}function Nc(l){var o=Cg(l);if(o!=null){if(typeof o.memoizedProps["data-testname"]!="string")throw Error(r(364));return o}if(l=Ag(l),l===null)throw Error(r(362));return l.stateNode.current}function kr(l,o){var m=l.tag;switch(o.$$typeof){case bl:if(l.type===o.value)return!0;break;case kn:t:{for(o=o.value,l=[l,0],m=0;m<l.length;){var v=l[m++],R=v.tag,O=l[m++],k=o[O];if(R!==5&&R!==26&&R!==27||!eo(v)){for(;k!=null&&kr(v,k);)O++,k=o[O];if(O===o.length){o=!0;break t}else for(v=v.child;v!==null;)l.push(v,O),v=v.sibling}}o=!1}return o;case go:if((m===5||m===26||m===27)&&Yf(l.stateNode,o.value))return!0;break;case mr:if((m===5||m===6||m===26||m===27)&&(l=Dg(l),l!==null&&0<=l.indexOf(o.value)))return!0;break;case mo:if((m===5||m===26||m===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===o.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Cs(l){switch(l.$$typeof){case bl:return"<"+(S(l.value)||"Unknown")+">";case kn:return":has("+(Cs(l)||"")+")";case go:return'[role="'+l.value+'"]';case mr:return'"'+l.value+'"';case mo:return'[data-testname="'+l.value+'"]';default:throw Error(r(365))}}function wc(l,o){var m=[];l=[l,0];for(var v=0;v<l.length;){var R=l[v++],O=R.tag,k=l[v++],it=o[k];if(O!==5&&O!==26&&O!==27||!eo(R)){for(;it!=null&&kr(R,it);)k++,it=o[k];if(k===o.length)m.push(R);else for(R=R.child;R!==null;)l.push(R,k),R=R.sibling}}return m}function ru(l,o){if(!to)throw Error(r(363));l=Nc(l),l=wc(l,o),o=[],l=Array.from(l);for(var m=0;m<l.length;){var v=l[m++],R=v.tag;if(R===5||R===26||R===27)eo(v)||o.push(v.stateNode);else for(v=v.child;v!==null;)l.push(v),v=v.sibling}return o}function Un(){if((It&2)!==0&&ie!==0)return ie&-ie;if(Bt.T!==null){var l=ke;return l!==0?l:Wn()}return Uf()}function $l(){fa===0&&(fa=(ie&536870912)===0||ve?N():536870912);var l=ha.current;return l!==null&&(l.flags|=32),fa}function ii(l,o,m){(l===xe&&(Oe===2||Oe===9)||l.cancelPendingCommit!==null)&&(oa(l,0),Gi(l,ie,fa,!1)),K(l,m),((It&2)===0||l!==xe)&&(l===xe&&((It&2)===0&&(Tl|=m),on===4&&Gi(l,ie,fa,!1)),fe(l))}function ou(l,o,m){if((It&6)!==0)throw Error(r(327));var v=!m&&(o&124)===0&&(o&l.expiredLanes)===0||T(l,o),R=v?Pa(l,o):Ee(l,o,!0),O=v;do{if(R===0){as&&!v&&Gi(l,o,0,!1);break}else{if(m=l.current.alternate,O&&!ra(m)){R=Ee(l,o,!1),O=!1;continue}if(R===2){if(O=o,l.errorRecoveryDisabledLanes&O)var k=0;else k=l.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){o=k;t:{var it=l;R=Al;var ct=Bi&&it.current.memoizedState.isDehydrated;if(ct&&(oa(it,k).flags|=256),k=Ee(it,k,!1),k!==2){if(Bu&&!ct){it.errorRecoveryDisabledLanes|=O,Tl|=O,R=4;break t}O=ui,ui=R,O!==null&&(ui===null?ui=O:ui.push.apply(ui,O))}R=k}if(O=!1,R!==2)continue}}if(R===1){oa(l,0),Gi(l,o,0,!0);break}t:{switch(v=l,O=R,O){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Gi(v,o,fa,!Bs);break t;case 2:ui=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(R=sh+300-He(),10<R)){if(Gi(v,o,fa,!Bs),L(v,0,!0)!==0)break t;v.timeoutHandle=Vc(Zi.bind(null,v,m,ui,Hu,Ml,o,fa,Tl,ea,Bs,O,2,-0,0),R);break t}Zi(v,m,ui,Hu,Ml,o,fa,Tl,ea,Bs,O,0,-0,0)}}break}while(!0);fe(l)}function Zi(l,o,m,v,R,O,k,it,ct,At,Dt,Nt,wt,Jt){if(l.timeoutHandle=ca,Nt=o.subtreeFlags,(Nt&8192||(Nt&16785408)===16785408)&&(yu(),su(o),Nt=Hf(),Nt!==null)){l.cancelPendingCommit=Nt(Mf.bind(null,l,o,O,m,v,R,k,it,ct,Dt,1,wt,Jt)),Gi(l,O,k,!At);return}Mf(l,o,O,m,v,R,k,it,ct)}function ra(l){for(var o=l;;){var m=o.tag;if((m===0||m===11||m===15)&&o.flags&16384&&(m=o.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var v=0;v<m.length;v++){var R=m[v],O=R.getSnapshot;R=R.value;try{if(!Wi(O(),R))return!1}catch{return!1}}if(m=o.child,o.subtreeFlags&16384&&m!==null)m.return=o,o=m;else{if(o===l)break;for(;o.sibling===null;){if(o.return===null||o.return===l)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Gi(l,o,m,v){o&=~ah,o&=~Tl,l.suspendedLanes|=o,l.pingedLanes&=~o,v&&(l.warmLanes|=o),v=l.expirationTimes;for(var R=o;0<R;){var O=31-ji(R),k=1<<O;v[O]=-1,R&=~k}m!==0&&j(l,m,o)}function Fa(){return(It&6)===0?(Je(0),!1):!0}function Ca(){if(Wt!==null){if(Oe===0)var l=Wt.return;else l=Wt,li=Da=null,ba(l),es=null,ho=0,l=Wt;for(;l!==null;)qr(l.alternate,l),l=l.return;Wt=null}}function oa(l,o){var m=l.timeoutHandle;m!==ca&&(l.timeoutHandle=ca,_u(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),Ca(),xe=l,Wt=m=Rs(l.current,null),ie=o,Oe=0,Ti=null,Bs=!1,as=T(l,o),Bu=!1,ea=fa=ah=Tl=Sn=on=0,ui=Al=null,Ml=!1,(o&8)!==0&&(o|=o&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=o;0<v;){var R=31-ji(v),O=1<<R;o|=l[R],v&=~O}return fn=o,$n(),m}function Rf(l,o){$t=null,Bt.H=xl,o===uo||o===Fe?(o=aa(),Oe=3):o===ih?(o=aa(),Oe=4):Oe=o===pe?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ti=o,Wt===null&&(on=1,yc(l,$(o,l.current)))}function Lc(){var l=ha.current;return l===null?!0:(ie&4194048)===ie?ns===null:(ie&62914560)===ie||(ie&536870912)!==0?l===ns:!1}function zc(){var l=Bt.H;return Bt.H=xl,l===null?xl:l}function ai(){var l=Bt.A;return Bt.A=fo,l}function an(){on=4,Bs||(ie&4194048)!==ie&&ha.current!==null||(as=!0),(Sn&134217727)===0&&(Tl&134217727)===0||xe===null||Gi(xe,ie,fa,!1)}function Ee(l,o,m){var v=It;It|=2;var R=zc(),O=ai();(xe!==l||ie!==o)&&(Hu=null,oa(l,o)),o=!1;var k=on;t:do try{if(Oe!==0&&Wt!==null){var it=Wt,ct=Ti;switch(Oe){case 8:Ca(),k=6;break t;case 3:case 2:case 9:case 6:ha.current===null&&(o=!0);var At=Oe;if(Oe=0,Ti=null,er(l,it,ct,At),m&&as){k=0;break t}break;default:At=Oe,Oe=0,Ti=null,er(l,it,ct,At)}}tr(),k=on;break}catch(Dt){Rf(l,Dt)}while(!0);return o&&l.shellSuspendCounter++,li=Da=null,It=v,Bt.H=R,Bt.A=O,Wt===null&&(xe=null,ie=0,$n()),k}function tr(){for(;Wt!==null;)sl(Wt)}function Pa(l,o){var m=It;It|=2;var v=zc(),R=ai();xe!==l||ie!==o?(Hu=null,po=He()+500,oa(l,o)):as=T(l,o);t:do try{if(Oe!==0&&Wt!==null){o=Wt;var O=Ti;e:switch(Oe){case 1:Oe=0,Ti=null,er(l,o,O,1);break;case 2:case 9:if(Yo(O)){Oe=0,Ti=null,Af(o);break}o=function(){Oe!==2&&Oe!==9||xe!==l||(Oe=7),fe(l)},O.then(o,o);break t;case 3:Oe=7;break t;case 4:Oe=5;break t;case 7:Yo(O)?(Oe=0,Ti=null,Af(o)):(Oe=0,Ti=null,er(l,o,O,7));break;case 5:var k=null;switch(Wt.tag){case 26:k=Wt.memoizedState;case 5:case 27:var it=Wt,ct=it.type,At=it.pendingProps;if(k?Os(k):qc(ct,At)){Oe=0,Ti=null;var Dt=it.sibling;if(Dt!==null)Wt=Dt;else{var Nt=it.return;Nt!==null?(Wt=Nt,ll(Nt)):Wt=null}break e}}Oe=0,Ti=null,er(l,o,O,5);break;case 6:Oe=0,Ti=null,er(l,o,O,6);break;case 8:Ca(),on=6;break t;default:throw Error(r(462))}}Tf();break}catch(wt){Rf(l,wt)}while(!0);return li=Da=null,Bt.H=v,Bt.A=R,It=m,Wt!==null?0:(xe=null,ie=0,$n(),on)}function Tf(){for(;Wt!==null&&!jm();)sl(Wt)}function sl(l){var o=Jo(l.alternate,l,fn);l.memoizedProps=l.pendingProps,o===null?ll(l):Wt=o}function Af(l){var o=l,m=o.alternate;switch(o.tag){case 15:case 0:o=gg(m,o,o.pendingProps,o.type,void 0,ie);break;case 11:o=gg(m,o,o.pendingProps,o.type.render,o.ref,ie);break;case 5:ba(o);default:qr(m,o),o=Wt=mn(o,fn),o=Jo(m,o,fn)}l.memoizedProps=l.pendingProps,o===null?ll(l):Wt=o}function er(l,o,m,v){li=Da=null,ba(o),es=null,ho=0;var R=o.return;try{if(Nm(l,R,o,m,ie)){on=1,yc(l,$(m,l.current)),Wt=null;return}}catch(O){if(R!==null)throw Wt=R,O;on=1,yc(l,$(m,l.current)),Wt=null;return}o.flags&32768?(ve||v===1?l=!0:as||(ie&536870912)!==0?l=!1:(Bs=l=!0,(v===2||v===9||v===3||v===6)&&(v=ha.current,v!==null&&v.tag===13&&(v.flags|=16384))),Kr(o,l)):ll(o)}function ll(l){var o=l;do{if((o.flags&32768)!==0){Kr(o,Bs);return}l=o.return;var m=Lm(o.alternate,o,fn);if(m!==null){Wt=m;return}if(o=o.sibling,o!==null){Wt=o;return}Wt=o=l}while(o!==null);on===0&&(on=5)}function Kr(l,o){do{var m=ki(l.alternate,l);if(m!==null){m.flags&=32767,Wt=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!o&&(l=l.sibling,l!==null)){Wt=l;return}Wt=l=m}while(l!==null);on=6,Wt=null}function Mf(l,o,m,v,R,O,k,it,ct){l.cancelPendingCommit=null;do ua();while(Dn!==0);if((It&6)!==0)throw Error(r(327));if(o!==null){if(o===l.current)throw Error(r(177));if(O=o.lanes|o.childLanes,O|=rd,H(l,m,O,k,it,ct),l===xe&&(Wt=xe=null,ie=0),_o=o,Dl=l,yo=m,lh=O,rh=R,pr=v,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,vg(Jc,function(){return ka(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||v){v=Bt.T,Bt.T=null,R=Ta(),Bn(2),k=It,It|=4;try{_g(l,o,m)}finally{It=k,Bn(R),Bt.T=v}}Dn=1,Zr(),Gc(),rl()}}function Zr(){if(Dn===1){Dn=0;var l=Dl,o=_o,m=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||m){m=Bt.T,Bt.T=null;var v=Ta();Bn(2);var R=It;It|=4;try{Cf(o,l),ee(l.containerInfo)}finally{It=R,Bn(v),Bt.T=m}}l.current=o,Dn=2}}function Gc(){if(Dn===2){Dn=0;var l=Dl,o=_o,m=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||m){m=Bt.T,Bt.T=null;var v=Ta();Bn(2);var R=It;It|=4;try{el(l,o.alternate,o)}finally{It=R,Bn(v),Bt.T=m}}Dn=3}}function rl(){if(Dn===4||Dn===3){Dn=0,i1();var l=Dl,o=_o,m=yo,v=pr;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Dn=5:(Dn=0,_o=Dl=null,Xa(l,l.pendingLanes));var R=l.pendingLanes;if(R===0&&(ss=null),J(m),o=o.stateNode,xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(gl,o,void 0,(o.current.flags&128)===128)}catch{}if(v!==null){o=Bt.T,R=Ta(),Bn(2),Bt.T=null;try{for(var O=l.onRecoverableError,k=0;k<v.length;k++){var it=v[k];O(it.value,{componentStack:it.stack})}}finally{Bt.T=o,Bn(R)}}(yo&3)!==0&&ua(),fe(l),R=l.pendingLanes,(m&4194090)!==0&&(R&42)!==0?l===oh?Ol++:(Ol=0,oh=l):Ol=0,Je(0)}}function Xa(l,o){(l.pooledCacheLanes&=o)===0&&(o=l.pooledCache,o!=null&&(l.pooledCache=null,Le(o)))}function ua(l){return Zr(),Gc(),rl(),ka()}function ka(){if(Dn!==5)return!1;var l=Dl,o=lh;lh=0;var m=J(yo),v=32>m?32:m;m=Bt.T;var R=Ta();try{Bn(v),Bt.T=null,v=rh,rh=null;var O=Dl,k=yo;if(Dn=0,_o=Dl=null,yo=0,(It&6)!==0)throw Error(r(331));var it=It;if(It|=4,zi(O.current),au(O,O.current,k,v),It=it,Je(0,!1),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(gl,O)}catch{}return!0}finally{Bn(R),Bt.T=m,Xa(l,o)}}function Uc(l,o,m){o=$(m,o),o=vc(l.stateNode,o,2),l=gs(l,o,2),l!==null&&(K(l,2),fe(l))}function Me(l,o,m){if(l.tag===3)Uc(l,l,m);else for(;o!==null;){if(o.tag===3){Uc(o,l,m);break}else if(o.tag===1){var v=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(ss===null||!ss.has(v))){l=$(m,l),m=rg(2),v=gs(o,m,2),v!==null&&(og(m,v,o,l),K(v,2),fe(v));break}}o=o.return}}function nr(l,o,m){var v=l.pingCache;if(v===null){v=l.pingCache=new Rl;var R=new Set;v.set(o,R)}else R=v.get(o),R===void 0&&(R=new Set,v.set(o,R));R.has(m)||(Bu=!0,R.add(m),l=Bc.bind(null,l,o,m),o.then(l,l))}function Bc(l,o,m){var v=l.pingCache;v!==null&&v.delete(o),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,xe===l&&(ie&m)===m&&(on===4||on===3&&(ie&62914560)===ie&&300>He()-sh?(It&2)===0&&oa(l,0):ah|=m,ea===ie&&(ea=0)),fe(l)}function ol(l,o){o===0&&(o=z()),l=Ae(l,o),l!==null&&(K(l,o),fe(l))}function si(l){var o=l.memoizedState,m=0;o!==null&&(m=o.retryLane),ol(l,m)}function Hc(l,o){var m=0;switch(l.tag){case 13:var v=l.stateNode,R=l.memoizedState;R!==null&&(m=R.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(o),ol(l,m)}function vg(l,o){return Au(l,o)}function Gm(l,o,m,v){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Df(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Rs(l,o){var m=l.alternate;return m===null?(m=n(l.tag,o,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=o,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,o=l.dependencies,m.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function mn(l,o){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=o,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,o=m.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),l}function Qr(l,o,m,v,R,O){var k=0;if(v=l,typeof l=="function")Df(l)&&(k=1);else if(typeof l=="string")k=Ei&&ce?bu(l,m,en.current)?26:id(l)?27:5:Ei?bu(l,m,en.current)?26:5:ce&&id(l)?27:5;else t:switch(l){case or:return l=n(31,m,o,R),l.elementType=or,l.lanes=O,l;case rr:return Ra(m.children,R,O,o);case cu:k=8,R|=24;break;case jc:return l=n(12,m,o,R|2),l.elementType=jc,l.lanes=O,l;case fu:return l=n(13,m,o,R),l.elementType=fu,l.lanes=O,l;case du:return l=n(19,m,o,R),l.elementType=du,l.lanes=O,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case hu:case As:k=10;break t;case wf:k=9;break t;case Ka:k=11;break t;case Za:k=14;break t;case Si:k=16,v=null;break t}k=29,m=Error(r(130,l===null?"null":typeof l,"")),v=null}return o=n(k,m,o,R),o.elementType=l,o.type=v,o.lanes=O,o}function Ra(l,o,m,v){return l=n(7,l,v,o),l.lanes=m,l}function ir(l,o,m){return l=n(6,l,null,o),l.lanes=m,l}function uu(l,o,m){return o=n(4,l.children!==null?l.children:[],l.key,o),o.lanes=m,o.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},o}function Wr(l,o,m,v,R,O,k,it){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ca,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=v,this.onUncaughtError=R,this.onCaughtError=O,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=it,this.incompleteTransitions=new Map}function ar(l,o,m,v,R,O,k,it,ct,At,Dt,Nt){return l=new Wr(l,o,m,k,it,ct,At,Nt),o=1,O===!0&&(o|=24),O=n(3,null,null,o),l.current=O,O.stateNode=l,o=Yn(),o.refCount++,l.pooledCache=o,o.refCount++,O.memoizedState={element:v,isDehydrated:m,cache:o},_i(O),l}function Sg(l){return l?(l=hr,l):hr}function Of(l){var o=l._reactInternals;if(o===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=f(o),l=l!==null?g(l):null,l===null?null:$r(l.stateNode)}function Eg(l,o,m,v,R,O){R=Sg(R),v.context===null?v.context=R:v.pendingContext=R,v=Zs(o),v.payload={element:m},O=O===void 0?null:O,O!==null&&(v.callback=O),m=gs(l,v,o),m!==null&&(ii(m,l,o),ms(m,l,o))}function Nf(l,o){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<o?m:o}}function Ts(l,o){Nf(l,o),(l=l.alternate)&&Nf(l,o)}var te={},Ic=j0(),Ui=L_(),sr=Object.assign,xg=Symbol.for("react.element"),lr=Symbol.for("react.transitional.element"),ul=Symbol.for("react.portal"),rr=Symbol.for("react.fragment"),cu=Symbol.for("react.strict_mode"),jc=Symbol.for("react.profiler"),hu=Symbol.for("react.provider"),wf=Symbol.for("react.consumer"),As=Symbol.for("react.context"),Ka=Symbol.for("react.forward_ref"),fu=Symbol.for("react.suspense"),du=Symbol.for("react.suspense_list"),Za=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),or=Symbol.for("react.activity"),Lf=Symbol.for("react.memo_cache_sentinel"),Yc=Symbol.iterator,gu=Symbol.for("react.client.reference"),cl=Array.isArray,Bt=Ic.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bg=t.rendererVersion,Jr=t.rendererPackageName,mu=t.extraDevToolsConfig,$r=t.getPublicInstance,zf=t.getRootHostContext,Gf=t.getChildHostContext,hl=t.prepareForCommit,ee=t.resetAfterCommit,Be=t.createInstance;t.cloneMutableInstance;var cn=t.appendInitialChild,pu=t.finalizeInitialChildren,Ms=t.shouldSetTextContent,fl=t.createTextInstance;t.cloneMutableTextInstance;var Vc=t.scheduleTimeout,_u=t.cancelTimeout,ca=t.noTimeout,Ds=t.isPrimaryRenderer;t.warnsIfNotActing;var de=t.supportsMutation,Qa=t.supportsPersistence,Bi=t.supportsHydration,Cg=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var Rg=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Bn=t.setCurrentUpdatePriority,Ta=t.getCurrentUpdatePriority,Uf=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var Bf=t.shouldAttemptEagerTransition,Hi=t.detachDeletedInstance;t.requestPostPaintCallback;var pn=t.maySuspendCommit,qc=t.preloadInstance,yu=t.startSuspendingCommit,vu=t.suspendInstance;t.suspendOnActiveViewTransition;var Hf=t.waitForCommitToBeReady,Ii=t.NotPendingTransition,Wa=t.HostTransitionContext,If=t.resetFormInstance;t.bindToConsole;var jf=t.supportsMicrotasks,Tg=t.scheduleMicrotask,to=t.supportsTestSelectors,Ag=t.findFiberRoot,Mg=t.getBoundingRect,Dg=t.getTextContent,eo=t.isHiddenSubtree,Yf=t.matchAccessibilityRole,Og=t.setFocusIfFocusable,Um=t.setupIntersectionObserver,Ng=t.appendChild,wg=t.appendChildToContainer,Lg=t.commitTextUpdate,Vf=t.commitMount,zg=t.commitUpdate,Gg=t.insertBefore,Ug=t.insertInContainerBefore,Bg=t.removeChild,Hg=t.removeChildFromContainer,Ig=t.resetTextContent,jg=t.hideInstance,no=t.hideTextInstance,Fc=t.unhideInstance,Yg=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopGestureTransition,t.getCurrentGestureOffset,t.subscribeToGestureDirection,t.createViewTransitionInstance;var Pc=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var Su=t.cloneInstance,qf=t.createContainerChildSet,Ff=t.appendChildToContainerChildSet,Vg=t.finalizeContainerChildren,Pf=t.replaceContainerChildren,Xf=t.cloneHiddenInstance,kf=t.cloneHiddenTextInstance,Eu=t.isSuspenseInstancePending,Xc=t.isSuspenseInstanceFallback,qg=t.getSuspenseInstanceFallbackErrorDetails,Kf=t.registerSuspenseInstanceRetry,Fg=t.canHydrateFormStateMarker,Pg=t.isFormStateMarkerMatching,Xg=t.getNextHydratableSibling,Zf=t.getNextHydratableSiblingAfterSingleton,kg=t.getFirstHydratableChild,Kg=t.getFirstHydratableChildWithinContainer,Qf=t.getFirstHydratableChildWithinSuspenseInstance,Zg=t.getFirstHydratableChildWithinSingleton,Qg=t.canHydrateInstance,Bm=t.canHydrateTextInstance,Hm=t.canHydrateSuspenseInstance,Wg=t.hydrateInstance,xu=t.hydrateTextInstance,Wf=t.hydrateSuspenseInstance,kc=t.getNextHydratableInstanceAfterSuspenseInstance,Jg=t.commitHydratedContainer,$g=t.commitHydratedSuspenseInstance,Kc=t.clearSuspenseBoundary,t1=t.clearSuspenseBoundaryFromContainer,Jf=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Im=t.validateHydratableInstance,io=t.validateHydratableTextInstance,Ei=t.supportsResources,bu=t.isHostHoistableType,ur=t.getHoistableRoot,Cu=t.getResource,$f=t.acquireResource,td=t.releaseResource,ao=t.hydrateHoistable,ed=t.mountHoistable,Qi=t.unmountHoistable,Ja=t.createHoistableInstance,dl=t.prepareToCommitHoistables,e1=t.mayResourceSuspendCommit,Os=t.preloadResource,Ns=t.suspendResource,ce=t.supportsSingletons,Ru=t.resolveSingletonInstance,nd=t.acquireSingletonInstance,Zc=t.releaseSingletonInstance,id=t.isHostSingletonType,cr=t.isSingletonScope,ws=[],Ls=-1,hr={},ji=Math.clz32?Math.clz32:M,n1=Math.log,Qc=Math.LN2,Tu=256,so=4194304,Au=Ui.unstable_scheduleCallback,Wc=Ui.unstable_cancelCallback,jm=Ui.unstable_shouldYield,i1=Ui.unstable_requestPaint,He=Ui.unstable_now,Hn=Ui.unstable_ImmediatePriority,a1=Ui.unstable_UserBlockingPriority,Jc=Ui.unstable_NormalPriority,s1=Ui.unstable_IdlePriority,l1=Ui.log,r1=Ui.unstable_setDisableYieldValue,gl=null,xi=null,$c,ad,th=!1,eh=new WeakMap,ml=[],pl=0,Mu=null,lo=0,bi=[],Yi=0,_l=null,Aa=1,$a="",en=x(null),fr=x(null),yl=x(null),Du=x(null),rn=null,_n=null,ve=!1,Ma=null,Te=!1,sd=Error(r(519)),Wi=typeof Object.is=="function"?Object.is:re,Ou=x(null),Da=null,li=null,o1=typeof AbortController<"u"?AbortController:function(){var l=[],o=this.signal={aborted:!1,addEventListener:function(m,v){l.push(v)}};this.abort=function(){o.aborted=!0,l.forEach(function(m){return m()})}},u1=Ui.unstable_scheduleCallback,Nu=Ui.unstable_NormalPriority,De={$$typeof:As,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},wu=null,vl=null,nh=!1,ro=!1,Lu=!1,zs=0,oo=null,Oa=0,ke=0,Sl=null,ld=Bt.S;Bt.S=function(l,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&za(l,o),ld!==null&&ld(l,o)};var sn=x(null),Ym=Object.prototype.hasOwnProperty,uo=Error(r(460)),ih=Error(r(474)),Fe=Error(r(542)),Pn={then:function(){}},Vi=null,Ji=[],dr=0,rd=0,ts=!1,Ci=!1,ri=x(null),zu=x(0),yn=0,$t=null,me=null,Ke=null,Na=!1,El=!1,Gs=!1,$i=0,co=0,wa=null,Gu=0,xl={readContext:Zt,use:Gr,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useLayoutEffect:qe,useInsertionEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useSyncExternalStore:qe,useId:qe,useHostTransitionStatus:qe,useFormState:qe,useActionState:qe,useOptimistic:qe,useMemoCache:qe,useCacheRefresh:qe},gr={readContext:Zt,use:Gr,useCallback:function(l,o){return ti().memoizedState=[l,o===void 0?null:o],l},useContext:Zt,useEffect:of,useImperativeHandle:function(l,o,m){m=m!=null?m.concat([l]):null,Xo(4194308,4,Hr.bind(null,o,l),m)},useLayoutEffect:function(l,o){return Xo(4194308,4,l,o)},useInsertionEffect:function(l,o){Xo(4,2,l,o)},useMemo:function(l,o){var m=ti();o=o===void 0?null:o;var v=l();if(Gs){w(!0);try{l()}finally{w(!1)}}return m.memoizedState=[v,o],v},useReducer:function(l,o,m){var v=ti();if(m!==void 0){var R=m(o);if(Gs){w(!0);try{m(o)}finally{w(!1)}}}else R=o;return v.memoizedState=v.baseState=R,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:R},v.queue=l,l=l.dispatch=hf.bind(null,$t,l),[v.memoizedState,l]},useRef:function(l){var o=ti();return l={current:l},o.memoizedState=l},useState:function(l){l=rc(l);var o=l.queue,m=dc.bind(null,$t,o);return o.dispatch=m,[l.memoizedState,m]},useDebugValue:ko,useDeferredValue:function(l,o){var m=ti();return Ir(m,l,o)},useTransition:function(){var l=rc(!1);return l=cf.bind(null,$t,l.queue,!0,!1),ti().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,o,m){var v=$t,R=ti();if(ve){if(m===void 0)throw Error(r(407));m=m()}else{if(m=o(),xe===null)throw Error(r(349));(ie&124)!==0||ef(v,o,m)}R.memoizedState=m;var O={value:m,getSnapshot:o};return R.queue=O,of(W0.bind(null,v,O,l),[l]),v.flags|=2048,Js(9,ps(),Po.bind(null,v,O,m,o),null),m},useId:function(){var l=ti(),o=xe.identifierPrefix;if(ve){var m=$a,v=Aa;m=(v&~(1<<32-ji(v)-1)).toString(32)+m,o=""+o+"R"+m,m=$i++,0<m&&(o+="H"+m.toString(32)),o+=""}else m=Gu++,o=""+o+"r"+m.toString(32)+"";return l.memoizedState=o},useHostTransitionStatus:ys,useFormState:uc,useActionState:uc,useOptimistic:function(l){var o=ti();o.memoizedState=o.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=m,o=Yr.bind(null,$t,!0,m),m.dispatch=o,[l,o]},useMemoCache:$h,useCacheRefresh:function(){return ti().memoizedState=Om.bind(null,$t)}},od={readContext:Zt,use:Gr,useCallback:Ko,useContext:Zt,useEffect:Br,useImperativeHandle:_s,useInsertionEffect:Ia,useLayoutEffect:fc,useMemo:uf,useReducer:yi,useRef:ql,useState:function(){return yi(Ha)},useDebugValue:ko,useDeferredValue:function(l,o){var m=hn();return Zo(m,me.memoizedState,l,o)},useTransition:function(){var l=yi(Ha)[0],o=hn().memoizedState;return[typeof l=="boolean"?l:Yl(l),o]},useSyncExternalStore:Fo,useId:Qo,useHostTransitionStatus:ys,useFormState:J0,useActionState:J0,useOptimistic:function(l,o){var m=hn();return oc(m,me,l,o)},useMemoCache:$h,useCacheRefresh:jr},c1={readContext:Zt,use:Gr,useCallback:Ko,useContext:Zt,useEffect:Br,useImperativeHandle:_s,useInsertionEffect:Ia,useLayoutEffect:fc,useMemo:uf,useReducer:tf,useRef:ql,useState:function(){return tf(Ha)},useDebugValue:ko,useDeferredValue:function(l,o){var m=hn();return me===null?Ir(m,l,o):Zo(m,me.memoizedState,l,o)},useTransition:function(){var l=tf(Ha)[0],o=hn().memoizedState;return[typeof l=="boolean"?l:Yl(l),o]},useSyncExternalStore:Fo,useId:Qo,useHostTransitionStatus:ys,useFormState:hc,useActionState:hc,useOptimistic:function(l,o){var m=hn();return me!==null?oc(m,me,l,o):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:$h,useCacheRefresh:jr},es=null,ho=0,Us=ig(!0),ud=ig(!1),ha=x(null),ns=null,Ft=x(0),Ie={enqueueSetState:function(l,o,m){l=l._reactInternals;var v=Un(),R=Zs(v);R.payload=o,m!=null&&(R.callback=m),o=gs(l,R,v),o!==null&&(ii(o,l,v),ms(o,l,v))},enqueueReplaceState:function(l,o,m){l=l._reactInternals;var v=Un(),R=Zs(v);R.tag=1,R.payload=o,m!=null&&(R.callback=m),o=gs(l,R,v),o!==null&&(ii(o,l,v),ms(o,l,v))},enqueueForceUpdate:function(l,o){l=l._reactInternals;var m=Un(),v=Zs(m);v.tag=2,o!=null&&(v.callback=o),o=gs(l,v,m),o!==null&&(ii(o,l,m),ms(o,l,m))}},ue=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},pe=Error(r(461)),Pt=!1,Ri={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},oi=!1,Ze=!1,Uu=!1,is=typeof WeakSet=="function"?WeakSet:Set,ne=null,Pe=null,vn=!1,ta=null,Xn=8192,fo={getCacheForType:function(l){var o=Zt(De),m=o.data.get(l);return m===void 0&&(m=l(),o.data.set(l,m)),m}},bl=0,kn=1,go=2,mo=3,mr=4;if(typeof Symbol=="function"&&Symbol.for){var Cl=Symbol.for;bl=Cl("selector.component"),kn=Cl("selector.has_pseudo_class"),go=Cl("selector.role"),mo=Cl("selector.test_id"),mr=Cl("selector.text")}var Rl=typeof WeakMap=="function"?WeakMap:Map,It=0,xe=null,Wt=null,ie=0,Oe=0,Ti=null,Bs=!1,as=!1,Bu=!1,fn=0,on=0,Sn=0,Tl=0,ah=0,fa=0,ea=0,Al=null,ui=null,Ml=!1,sh=0,po=1/0,Hu=null,ss=null,Dn=0,Dl=null,_o=null,yo=0,lh=0,rh=null,pr=null,Ol=0,oh=null;return te.attemptContinuousHydration=function(l){if(l.tag===13){var o=Ae(l,67108864);o!==null&&ii(o,l,67108864),Ts(l,67108864)}},te.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var o=Un();o=X(o);var m=Ae(l,o);m!==null&&ii(m,l,o),Ts(l,o)}},te.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var o=D(l.pendingLanes);if(o!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var m=1<<31-ji(o);l.entanglements[1]|=m,o&=~m}fe(l),(It&6)===0&&(po=He()+500,Je(0))}}break;case 13:o=Ae(l,2),o!==null&&ii(o,l,2),Fa(),Ts(l,2)}},te.batchedUpdates=function(l,o){return l(o)},te.createComponentSelector=function(l){return{$$typeof:bl,value:l}},te.createContainer=function(l,o,m,v,R,O,k,it,ct,At){return ar(l,o,!1,null,m,v,O,k,it,ct,At,null)},te.createHasPseudoClassSelector=function(l){return{$$typeof:kn,value:l}},te.createHydrationContainer=function(l,o,m,v,R,O,k,it,ct,At,Dt,Nt,wt){return l=ar(m,v,!0,l,R,O,it,ct,At,Dt,Nt,wt),l.context=Sg(null),m=l.current,v=Un(),v=X(v),R=Zs(v),R.callback=o??null,gs(m,R,v),o=v,l.current.lanes=o,K(l,o),fe(l),l},te.createPortal=function(l,o,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ul,key:v==null?null:""+v,children:l,containerInfo:o,implementation:m}},te.createRoleSelector=function(l){return{$$typeof:go,value:l}},te.createTestNameSelector=function(l){return{$$typeof:mo,value:l}},te.createTextSelector=function(l){return{$$typeof:mr,value:l}},te.defaultOnCaughtError=function(l){console.error(l)},te.defaultOnRecoverableError=function(l){ue(l)},te.defaultOnUncaughtError=function(l){ue(l)},te.deferredUpdates=function(l){var o=Bt.T,m=Ta();try{return Bn(32),Bt.T=null,l()}finally{Bn(m),Bt.T=o}},te.discreteUpdates=function(l,o,m,v,R){var O=Bt.T,k=Ta();try{return Bn(2),Bt.T=null,l(o,m,v,R)}finally{Bn(k),Bt.T=O,It===0&&(po=He()+500)}},te.findAllNodes=ru,te.findBoundingRects=function(l,o){if(!to)throw Error(r(363));o=ru(l,o),l=[];for(var m=0;m<o.length;m++)l.push(Mg(o[m]));for(o=l.length-1;0<o;o--){m=l[o];for(var v=m.x,R=v+m.width,O=m.y,k=O+m.height,it=o-1;0<=it;it--)if(o!==it){var ct=l[it],At=ct.x,Dt=At+ct.width,Nt=ct.y,wt=Nt+ct.height;if(v>=At&&O>=Nt&&R<=Dt&&k<=wt){l.splice(o,1);break}else if(v!==At||m.width!==ct.width||wt<O||Nt>k){if(!(O!==Nt||m.height!==ct.height||Dt<v||At>R)){At>v&&(ct.width+=At-v,ct.x=v),Dt<R&&(ct.width=R-At),l.splice(o,1);break}}else{Nt>O&&(ct.height+=Nt-O,ct.y=O),wt<k&&(ct.height=k-Nt),l.splice(o,1);break}}}return l},te.findHostInstance=Of,te.findHostInstanceWithNoPortals=function(l){return l=f(l),l=l!==null?p(l):null,l===null?null:$r(l.stateNode)},te.findHostInstanceWithWarning=function(l){return Of(l)},te.flushPassiveEffects=ua,te.flushSyncFromReconciler=function(l){var o=It;It|=1;var m=Bt.T,v=Ta();try{if(Bn(2),Bt.T=null,l)return l()}finally{Bn(v),Bt.T=m,It=o,(It&6)===0&&Je(0)}},te.flushSyncWork=Fa,te.focusWithin=function(l,o){if(!to)throw Error(r(363));for(l=Nc(l),o=wc(l,o),o=Array.from(o),l=0;l<o.length;){var m=o[l++],v=m.tag;if(!eo(m)){if((v===5||v===26||v===27)&&Og(m.stateNode))return!0;for(m=m.child;m!==null;)o.push(m),m=m.sibling}}return!1},te.getFindAllNodesFailureDescription=function(l,o){if(!to)throw Error(r(363));var m=0,v=[];l=[Nc(l),0];for(var R=0;R<l.length;){var O=l[R++],k=O.tag,it=l[R++],ct=o[it];if((k!==5&&k!==26&&k!==27||!eo(O))&&(kr(O,ct)&&(v.push(Cs(ct)),it++,it>m&&(m=it)),it<o.length))for(O=O.child;O!==null;)l.push(O,it),O=O.sibling}if(m<o.length){for(l=[];m<o.length;m++)l.push(Cs(o[m]));return`findAllNodes was able to match part of the selector:
  `+(v.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},te.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return $r(l.child.stateNode);default:return l.child.stateNode}},te.injectIntoDevTools=function(){var l={bundleType:0,version:bg,rendererPackageName:Jr,currentDispatcherRef:Bt,reconcilerVersion:"19.1.0"};if(mu!==null&&(l.rendererConfig=mu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(o.isDisabled||!o.supportsFiber)l=!0;else{try{gl=o.inject(l),xi=o}catch{}l=!!o.checkDCE}}return l},te.isAlreadyRendering=function(){return(It&6)!==0},te.observeVisibleRects=function(l,o,m,v){if(!to)throw Error(r(363));l=ru(l,o);var R=Um(l,m,v).disconnect;return{disconnect:function(){R()}}},te.shouldError=function(){return null},te.shouldSuspend=function(){return!1},te.startHostTransition=function(l,o,m,v){if(l.tag!==5)throw Error(r(476));var R=vi(l).queue;cf(l,R,o,Ii,m===null?s:function(){var O=vi(l).next.queue;return vs(l,O,{},Un()),m(v)})},te.updateContainer=function(l,o,m,v){var R=o.current,O=Un();return Eg(R,O,l,o,m,v),O},te.updateContainerSync=function(l,o,m,v){return Eg(o.current,2,l,o,m,v),2},te},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(a_)),a_.exports}var F3;function DC(){return F3||(F3=1,i_.exports=MC()),i_.exports}var OC=DC();const NC=sm(OC);var s_={exports:{}},xr={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P3;function wC(){return P3||(P3=1,xr.ConcurrentRoot=1,xr.ContinuousEventPriority=8,xr.DefaultEventPriority=32,xr.DiscreteEventPriority=2,xr.IdleEventPriority=268435456,xr.LegacyRoot=0,xr.NoEventPriority=0),xr}var X3;function LC(){return X3||(X3=1,s_.exports=wC()),s_.exports}var Am=LC(),zC=he();const k3={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let K3=!1,Z3=!1;const am=".react-konva-event",GC=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,UC=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,BC={};function Mm(i,t,n=BC){if(!K3&&"zIndex"in t&&(console.warn(UC),K3=!0),!Z3&&t.draggable){var s=t.x!==void 0||t.y!==void 0,r=t.onDragEnd||t.onDragMove;s&&!r&&(console.warn(GC),Z3=!0)}for(var c in n)if(!k3[c]){var h=c.slice(0,2)==="on",f=n[c]!==t[c];if(h&&f){var g=c.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),i.off(g,n[c])}var p=!t.hasOwnProperty(c);p&&i.setAttr(c,void 0)}var _=t._useStrictMode,S={},x=!1;const b={};for(var c in t)if(!k3[c]){var h=c.slice(0,2)==="on",E=n[c]!==t[c];if(h&&E){var g=c.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),t[c]&&(b[g]=t[c])}!h&&(t[c]!==n[c]||_&&t[c]!==i.getAttr(c))&&(x=!0,S[c]=t[c])}x&&(i.setAttrs(S),Io(i));for(var g in b)i.off(g+am),i.on(g+am,b[g])}function Io(i){if(!zC.Konva.autoDrawEnabled){var t=i.getLayer()||i.getStage();t&&t.batchDraw()}}var l_=L_();const kS={},HC={};im.Node.prototype._applyProps=Mm;let KS=Am.DefaultEventPriority;function IC(i,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}i.add(t),Io(i)}function jC(i,t,n){let s=im[i];s||(console.error(`Konva has no node with the type ${i}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${i}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),s=im.Group);const r={},c={};for(var h in t)if(h!=="ref"){var f=h.slice(0,2)==="on";f?c[h]=t[h]:r[h]=t[h]}const g=new s(r);return Mm(g,c),g}function YC(i,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${i}"`)}function VC(i,t,n){return!1}function qC(i){return i}function FC(){return null}function PC(){return null}function XC(i,t,n,s){return HC}function kC(){}function KC(i){}function ZC(i,t){return!1}function QC(){return kS}function WC(){return kS}const JC=setTimeout,$C=clearTimeout,tR=!0,eR=i=>{i()},nR=-1;function iR(i,t){return!1}const aR=!1,sR=!1,lR=!0,rR=!1,oR=!1;function uR(i,t){t.parent===i?t.moveToTop():i.add(t),Io(i)}function cR(i,t){t.parent===i?t.moveToTop():i.add(t),Io(i)}function ZS(i,t,n){t._remove(),i.add(t),t.setZIndex(n.getZIndex()),Io(i)}function hR(i,t,n){ZS(i,t,n)}function fR(i,t){t.destroy(),t.off(am),Io(i)}function dR(i,t){t.destroy(),t.off(am),Io(i)}function gR(i,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function mR(i,t,n){}function pR(i,t,n,s){Mm(i,s,n)}function _R(i){i.hide(),Io(i)}function yR(i){}function vR(i,t){(t.visible==null||t.visible)&&i.show()}function SR(i,t){}function ER(i){}function xR(){}function bR(){return Am.DefaultEventPriority}function CR(){}function RR(){return null}function TR(i){KS=i}function AR(){return KS}function MR(){return Am.DiscreteEventPriority}function DR(){return!1}function OR(){}function NR(){return!1}function wR(){return!0}function LR(){}function zR(){}function GR(){return null}const UR=null;function BR(){}const HR=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:UR,appendChild:uR,appendChildToContainer:cR,appendInitialChild:IC,cancelTimeout:$C,clearContainer:ER,commitMount:mR,commitTextUpdate:gR,commitUpdate:pR,createInstance:jC,createTextInstance:YC,detachDeletedInstance:xR,finalizeInitialChildren:VC,getChildHostContext:WC,getCurrentEventPriority:bR,getCurrentUpdatePriority:AR,getInstanceFromScope:RR,getPublicInstance:qC,getRootHostContext:QC,hideInstance:_R,hideTextInstance:yR,idlePriority:l_.unstable_IdlePriority,insertBefore:ZS,insertInContainerBefore:hR,isPrimaryRenderer:aR,maySuspendCommit:NR,noTimeout:nR,now:l_.unstable_now,preloadInstance:wR,prepareForCommit:FC,preparePortalMount:PC,prepareScopeUpdate:CR,prepareUpdate:XC,removeChild:fR,removeChildFromContainer:dR,requestPostPaintCallback:OR,resetAfterCommit:kC,resetFormInstance:BR,resetTextContent:KC,resolveUpdatePriority:MR,run:l_.unstable_runWithPriority,scheduleMicrotask:eR,scheduleTimeout:JC,setCurrentUpdatePriority:TR,shouldAttemptEagerTransition:DR,shouldDeprioritizeSubtree:ZC,shouldSetTextContent:iR,startSuspendingCommit:LR,supportsHydration:oR,supportsMicrotasks:tR,supportsMutation:lR,supportsPersistence:rR,suspendInstance:zR,unhideInstance:vR,unhideTextInstance:SR,waitForCommitToBeReady:GR,warnsIfNotActing:sR},Symbol.toStringTag,{value:"Module"}));function QS(i,t,n){if(!i)return;if(n(i)===!0)return i;let s=i.child;for(;s;){const r=QS(s,t,n);if(r)return r;s=s.sibling}}function WS(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const T2=WS(st.createContext(null));class JS extends st.Component{render(){return st.createElement(T2.Provider,{value:this._reactInternals},this.props.children)}}function IR(){const i=st.useContext(T2);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=st.useId();return st.useMemo(()=>{for(const n of[i,i==null?void 0:i.alternate]){if(!n)continue;const s=QS(n,!1,r=>{let c=r.memoizedState;for(;c;){if(c.memoizedState===t)return!0;c=c.next}});if(s)return s}},[i,t])}const jR=Symbol.for("react.context"),YR=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===jR;function VR(){const i=IR(),[t]=st.useState(()=>new Map);t.clear();let n=i;for(;n;){const s=n.type;YR(s)&&s!==T2&&!t.has(s)&&t.set(s,st.use(WS(s))),n=n.return}return t}function qR(){const i=VR();return st.useMemo(()=>Array.from(i.keys()).reduce((t,n)=>s=>st.createElement(t,null,st.createElement(n.Provider,{...s,value:i.get(n)})),t=>st.createElement(JS,{...t})),[i])}if(Nn.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function FR(i){const t=Nn.useRef({});return Nn.useLayoutEffect(()=>{t.current=i}),Nn.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const PR=()=>{const i=Nn.useRef(0);return Nn.useMemo(()=>{i.current++},[]),i.current>1},XR=i=>{const t=Nn.useRef(null),n=Nn.useRef(null),s=Nn.useRef(null),r=FR(i),c=qR(),h=Nn.useRef(!1),f=p=>{const{forwardedRef:_}=i;_&&(typeof _=="function"?_(p):_.current=p)},g=PR();return Nn.useLayoutEffect(()=>h.current&&g?()=>{h.current=!1,f(null),Rh.updateContainer(null,s.current,null),n.current.destroy()}:(h.current=!0,n.current=new im.Stage({width:i.width,height:i.height,container:t.current}),f(n.current),s.current=Rh.createContainer(n.current,Am.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Rh.updateContainer(Nn.createElement(c,{},i.children),s.current,null,()=>{}),()=>{g||(f(null),Rh.updateContainer(null,s.current,null),n.current.destroy())}),[]),Nn.useLayoutEffect(()=>{f(n.current),Mm(n.current,i,r),Rh.updateContainer(Nn.createElement(c,{},i.children),s.current,null)}),Nn.createElement("div",{ref:t,id:i.id,accessKey:i.accessKey,className:i.className,role:i.role,style:i.style,tabIndex:i.tabIndex,title:i.title})},jo="Layer",Q3="Rect",W3="Circle",jh="Line",kR="Image",KR="Text",Rh=NC(HR);Rh.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Nn.version,rendererPackageName:"react-konva"});const ZR=Nn.forwardRef((i,t)=>Nn.createElement(JS,{},Nn.createElement(XR,{...i,forwardedRef:t})));function QR({stageRef:i,width:t,height:n,draggable:s,children:r,onMouseDown:c,onMouseMove:h,onMouseUp:f}){return at.jsx("div",{style:{border:"1px solid #000",width:t,height:n},children:at.jsx(ZR,{ref:i,width:t,height:n,draggable:s,onMouseDown:c,onMouseMove:h,onMouseUp:f,children:r})})}function WR({width:i,height:t,cellSize:n}){const s=[];for(let r=0;r<=i;r+=n)s.push(at.jsx(jh,{points:[r,0,r,t],stroke:"#ccc",strokeWidth:1,listening:!1},`v${r}`));for(let r=0;r<=t;r+=n)s.push(at.jsx(jh,{points:[0,r,i,r],stroke:"#ccc",strokeWidth:1,listening:!1},`h${r}`));return at.jsx(jo,{children:s})}function JR({walls:i}){return at.jsx(jo,{children:i.map(t=>at.jsx(jh,{id:t.id,points:t.points,stroke:t.stroke,strokeWidth:t.strokeWidth,lineCap:"round"},t.id))})}const $R=({rooms:i,draftRect:t})=>at.jsxs(jo,{children:[i.map(n=>at.jsx(Q3,{id:n.id,x:n.x,y:n.y,width:n.width,height:n.height,stroke:n.stroke,strokeWidth:n.strokeWidth,fill:"transparent"},n.id)),t&&t.width>0&&t.height>0&&at.jsx(Q3,{x:t.x,y:t.y,width:t.width,height:t.height,stroke:"#000",strokeWidth:1,dash:[4,4],listening:!1})]});function tT({doors:i}){return at.jsx(jo,{children:i.map(t=>at.jsx(jh,{id:t.id,points:t.points,stroke:t.stroke,strokeWidth:t.strokeWidth,dash:[4,4]},t.id))})}const eT=({circles:i,draft:t})=>at.jsxs(jo,{children:[i.map(n=>at.jsx(W3,{id:n.id,x:n.x,y:n.y,radius:n.radius,stroke:n.stroke,fill:"transparent",strokeWidth:n.strokeWidth},n.id)),t&&t.radius>0&&at.jsx(W3,{x:t.x,y:t.y,radius:t.radius,stroke:"#000000",dash:[4,4],listening:!1})]});function nT({lines:i,current:t}){return at.jsxs(jo,{children:[i.map(n=>at.jsx(jh,{id:n.id,points:n.points,stroke:n.stroke,strokeWidth:n.strokeWidth,lineCap:"round",lineJoin:"round"},n.id)),t&&at.jsx(jh,{points:t,stroke:i.length?i[i.length-1].stroke:"#000",strokeWidth:i.length?i[i.length-1].strokeWidth:4,lineCap:"round",lineJoin:"round"})]})}var r_,J3;function iT(){if(J3)return r_;J3=1;var i=j0();return r_=function(n,s,r){const c=i.useRef("loading"),h=i.useRef(),[f,g]=i.useState(0),p=i.useRef(),_=i.useRef(),S=i.useRef();return(p.current!==n||_.current!==s||S.current!==r)&&(c.current="loading",h.current=void 0,p.current=n,_.current=s,S.current=r),i.useLayoutEffect(function(){if(!n)return;var x=document.createElement("img");function b(){x.decode().catch(()=>{}).finally(()=>{c.current="loaded",h.current=x,g(Math.random())})}function E(){c.current="failed",h.current=void 0,g(Math.random())}return x.addEventListener("load",b),x.addEventListener("error",E),s&&(x.crossOrigin=s),r&&(x.referrerPolicy=r),x.src=n,function(){x.removeEventListener("load",b),x.removeEventListener("error",E)}},[n,s,r]),[h.current,c.current]},r_}var aT=iT();const sT=sm(aT);function lT({tokens:i}){return at.jsx(jo,{children:i.map(t=>at.jsx(rT,{...t},t.id))})}function rT({id:i,x:t,y:n,src:s,width:r,height:c,rotation:h}){const[f]=sT(s);return at.jsx(kR,{id:i,x:t,y:n,image:f,width:r,height:c,rotation:h,draggable:!0})}function oT({texts:i}){return at.jsx(jo,{children:i.map(t=>at.jsx(KR,{id:t.id,x:t.x,y:t.y,text:t.text,fontSize:t.fontSize,fill:t.fill,draggable:!0},t.id))})}function uT(i){const{mode:t,setMode:n,strokeColor:s,setStrokeColor:r,fillColor:c,setFillColor:h,strokeWidth:f,setStrokeWidth:g,fontSize:p,setFontSize:_,bgColor:S,setBgColor:x,gridOn:b,setGridOn:E,snapOn:M,setSnapOn:D,cellSize:L,setCellSize:T,onUndo:A,onRedo:N,onClear:z,onSaveImage:I,onSaveJSON:K}=i;return at.jsxs("div",{style:{marginBottom:10,display:"flex",flexWrap:"wrap",gap:8},children:[["select","wall","room","circle","door","freehand","text","token","eraser","pan"].map(H=>at.jsx("button",{onClick:()=>n(H),style:{background:t===H?"#ddd":void 0},children:H},H)),at.jsxs("label",{children:["Stroke:"," ",at.jsx("input",{type:"color",value:s,onChange:H=>r(H.target.value)})]}),at.jsxs("label",{children:["Fill:"," ",at.jsx("input",{type:"color",value:c,onChange:H=>h(H.target.value)})]}),at.jsxs("label",{children:["Width:"," ",at.jsx("input",{type:"number",value:f,min:1,max:20,onChange:H=>g(+H.target.value)})]}),at.jsxs("label",{children:["Font:"," ",at.jsx("input",{type:"number",value:p,min:8,max:72,onChange:H=>_(+H.target.value)})]}),at.jsxs("label",{children:["BG:"," ",at.jsx("input",{type:"color",value:S,onChange:H=>x(H.target.value)})]}),at.jsxs("label",{children:["Grid:"," ",at.jsx("input",{type:"checkbox",checked:b,onChange:H=>E(H.target.checked)})]}),at.jsxs("label",{children:["Snap:"," ",at.jsx("input",{type:"checkbox",checked:M,onChange:H=>D(H.target.checked)})]}),at.jsxs("label",{children:["Size:"," ",at.jsx("input",{type:"number",value:L,min:10,max:200,onChange:H=>T(+H.target.value)})]}),at.jsx("button",{onClick:A,children:"Undo"}),at.jsx("button",{onClick:N,children:"Redo"}),at.jsx("button",{onClick:z,children:"Clear"}),at.jsx("button",{onClick:I,children:"Export PNG"}),at.jsx("button",{onClick:K,children:"Save Map"})]})}const $3=()=>{const{mapId:i}=G_(),t=st.useRef(null),[n,s]=st.useState("select"),[r,c]=st.useState("#000000"),[h,f]=st.useState("#ffffff"),[g,p]=st.useState(4),[_,S]=st.useState(18),{bgColor:x,setBgColor:b}=B9("#ffffff"),[E,M]=st.useState(!0),[D,L]=st.useState(!0),[T,A]=st.useState(50),N=G9(T,D),{state:z,setState:I,undo:K,redo:H}=U9({initial:[]}),[j,Y]=st.useState(!1),[X,J]=st.useState(null),[w,V]=st.useState(null),[G,B]=st.useState(null),[F,$]=st.useState(null);st.useEffect(()=>{const Z=j9(i||"default");Z&&(b(Z.bgColor),A(Z.cellSize),M(Z.gridOn),I(Z.shapes))},[i]);const rt=()=>{const Z=t.current;if(!Z)return null;const dt=Z.getPointerPosition();if(!dt)return null;const Tt=Z.getAbsoluteTransform().copy().invert().point(dt);return{x:Tt.x,y:Tt.y}},q=()=>{const Z=rt();if(!Z)return;const dt=N(Z.x),Et=N(Z.y);if(n==="wall"||n==="door"||n==="freehand")Y(!0),V([dt,Et]);else if(n==="room")Y(!0),J({x:dt,y:Et}),B({x:dt,y:Et,width:0,height:0});else if(n==="circle")Y(!0),J({x:dt,y:Et}),$({x:dt,y:Et,radius:0});else if(n==="text"){const Tt=prompt("Enter label text");if(Tt){const Ot=`text-${Date.now()}`;I([...z,{type:"text",x:dt,y:Et,text:Tt,id:Ot,fontSize:_,fill:r}])}}else if(n==="token"){const Tt=prompt("Enter token image URL");if(Tt){const Ot=`token-${Date.now()}`;I([...z,{type:"token",x:dt,y:Et,id:Ot,src:Tt,width:50,height:50,rotation:0}])}}else if(n==="eraser"){const Tt=t.current,Ot=Tt.getIntersection(Tt.getPointerPosition());Ot&&Ot.getAttr("id")&&I(z.filter(Kt=>Kt.id!==Ot.getAttr("id")))}},Q=()=>{if(!j)return;const Z=rt();if(!Z)return;const dt=N(Z.x),Et=N(Z.y);if(n==="freehand"&&w)V([...w,dt,Et]);else if((n==="wall"||n==="door")&&w)V([w[0],w[1],dt,Et]);else if(n==="room"&&X){const Tt=Math.min(X.x,dt),Ot=Math.min(X.y,Et);B({x:Tt,y:Ot,width:Math.abs(dt-X.x),height:Math.abs(Et-X.y)})}else if(n==="circle"&&X){const Tt=dt-X.x,Ot=Et-X.y;$({x:X.x,y:X.y,radius:Math.sqrt(Tt*Tt+Ot*Ot)})}},tt=()=>{if(!j)return;let Z;n==="freehand"&&w?Z={type:"freehand",points:w,id:`freehand-${Date.now()}`,stroke:r,strokeWidth:g}:n==="wall"&&(w==null?void 0:w.length)===4?Z={type:"wall",points:w,id:`wall-${Date.now()}`,stroke:r,strokeWidth:g}:n==="door"&&(w==null?void 0:w.length)===4?Z={type:"door",points:w,id:`door-${Date.now()}`,stroke:r,strokeWidth:g,open:!1}:n==="room"&&G?Z={type:"room",x:G.x,y:G.y,width:G.width,height:G.height,id:`room-${Date.now()}`,stroke:r,fill:h,strokeWidth:g}:n==="circle"&&F&&(Z={type:"circle",x:F.x,y:F.y,radius:F.radius,id:`circle-${Date.now()}`,stroke:r,fill:h,strokeWidth:g}),Z&&I([...z,Z]),Y(!1),V(null),B(null),$(null),J(null)},nt=()=>K(),ht=()=>H(),vt=()=>I([]),St=()=>H9(t.current,`dungeon-${i||"map"}.png`),W=()=>I9(i||"default",{shapes:z,bgColor:x,gridOn:E,snapOn:D,cellSize:T});return at.jsxs("div",{children:[at.jsx(uT,{mode:n,setMode:s,strokeColor:r,setStrokeColor:c,fillColor:h,setFillColor:f,strokeWidth:g,setStrokeWidth:p,fontSize:_,setFontSize:S,bgColor:x,setBgColor:b,gridOn:E,setGridOn:M,snapOn:D,setSnapOn:L,cellSize:T,setCellSize:A,onUndo:nt,onRedo:ht,onClear:vt,onSaveImage:St,onSaveJSON:W}),at.jsxs(QR,{stageRef:t,width:1e3,height:800,draggable:n==="pan",onMouseDown:q,onMouseMove:Q,onMouseUp:tt,children:[E&&at.jsx(WR,{width:1e3,height:800,cellSize:T}),at.jsx($R,{rooms:z.filter(Z=>Z.type==="room"),draftRect:G}),at.jsx(JR,{walls:z.filter(Z=>Z.type==="wall")}),at.jsx(tT,{doors:z.filter(Z=>Z.type==="door")}),at.jsx(eT,{circles:z.filter(Z=>Z.type==="circle"),draft:F}),at.jsx(nT,{lines:z.filter(Z=>Z.type==="freehand"),current:w}),at.jsx(oT,{texts:z.filter(Z=>Z.type==="text")}),at.jsx(lT,{tokens:z.filter(Z=>Z.type==="token")})]})]})},cT=()=>{const i=qh(),[t]=Nn.useState("DM");return at.jsx("div",{className:"landing-bg",children:at.jsxs("div",{className:"landing-card",children:[at.jsxs("h1",{children:["Welcome, ",t,"!"]}),at.jsxs("div",{className:"landing-actions",children:[at.jsx("button",{className:"landing-btn",onClick:()=>i("/gallery"),children:"Map Gallery"}),at.jsx("button",{className:"landing-btn",onClick:()=>i("/dungeon"),children:"Dungeon Editor"})]})]})})};function hT(){return at.jsx(rE,{children:at.jsxs(B6,{children:[at.jsx(vh,{path:"/",element:at.jsx(cT,{})}),at.jsx(vh,{path:"/gallery",element:at.jsx(YE,{})}),at.jsx(vh,{path:"/dungeon",element:at.jsx($3,{})}),at.jsx(vh,{path:"/map/:mapId",element:at.jsx(z9,{})}),at.jsx(vh,{path:"/dungeon/:mapId",element:at.jsx($3,{})})]})})}X5.createRoot(document.getElementById("root")).render(at.jsx(st.StrictMode,{children:at.jsx(hT,{})}));
